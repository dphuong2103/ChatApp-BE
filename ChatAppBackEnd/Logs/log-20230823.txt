2023-08-23T08:14:06.8913247+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-23T08:14:06.8990835+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-23T08:14:06.8994000+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-23T08:14:06.8994214+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-23T08:14:14.7671473+07:00 0HMT3EP20GCL3:00000003 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-23T08:14:15.9571197+07:00 0HMT3EP20GCL3:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:14:17.1713765+07:00 0HMT3EP20GCL3:00000003 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:14:17.2190353+07:00 0HMT3EP20GCL3:00000003 [INF] Executed DbCommand ("33"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:14:17.7961496+07:00 0HMT3EP20GCL3:00000003 [INF] Executed DbCommand ("54"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:14:17.9987808+07:00 0HMT3EP20GCL5:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:14:18.0055007+07:00 0HMT3EP20GCL5:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:14:18.0080880+07:00 0HMT3EP20GCL5:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:14:18.0125584+07:00 0HMT3EP20GCL3:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:14:18.0210962+07:00 0HMT3EP20GCL3:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:14:18.0227798+07:00 0HMT3EP20GCL3:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:14:18.0823030+07:00 0HMT3EP20GCL4:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:14:18.0829994+07:00 0HMT3EP20GCL4:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:14:18.0842654+07:00 0HMT3EP20GCL4:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:14:18.0879503+07:00 0HMT3EP20GCL4:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:14:18.0883273+07:00 0HMT3EP20GCL4:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:14:18.0898491+07:00 0HMT3EP20GCL4:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:14:18.1189946+07:00 0HMT3EP20GCL4:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T08:14:18.1677888+07:00 0HMT3EP20GCL6:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:14:18.1683190+07:00 0HMT3EP20GCL6:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:14:18.1684658+07:00 0HMT3EP20GCL7:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:14:18.1702870+07:00 0HMT3EP20GCL6:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:14:18.1727447+07:00 0HMT3EP20GCL7:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:14:18.1747434+07:00 0HMT3EP20GCL7:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:14:18.1886821+07:00 0HMT3EP20GCL5:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:14:18.1886821+07:00 0HMT3EP20GCL7:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:14:18.1951632+07:00 0HMT3EP20GCL6:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:14:18.1951632+07:00 0HMT3EP20GCL3:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:14:18.4836277+07:00 0HMT3EP20GCL6:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:14:18.4838250+07:00 0HMT3EP20GCL3:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:14:18.5199537+07:00 0HMT3EP20GCL6:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:14:18.5199539+07:00 0HMT3EP20GCL3:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:14:18.5282769+07:00 0HMT3EP20GCL3:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:14:18.5282769+07:00 0HMT3EP20GCL6:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:14:18.5345380+07:00 0HMT3EP20GCL3:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:14:18.5345380+07:00 0HMT3EP20GCL6:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:14:18.5360850+07:00 0HMT3EP20GCL3:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:14:18.5360881+07:00 0HMT3EP20GCL6:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:14:18.5371166+07:00 0HMT3EP20GCL3:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:14:18.5371163+07:00 0HMT3EP20GCL6:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:14:18.5382374+07:00 0HMT3EP20GCL3:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:14:18.5382675+07:00 0HMT3EP20GCL6:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:14:52.2236047+07:00 0HMT3EP20GCL6:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:14:52.2242896+07:00 0HMT3EP20GCL6:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:14:52.2332559+07:00 0HMT3EP20GCL6:00000005 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:14:52.2565610+07:00 0HMT3EP20GCL6:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:14:52.3490770+07:00 0HMT3EP20GCL6:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:14:52.3495635+07:00 0HMT3EP20GCL6:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:14:52.3509373+07:00 0HMT3EP20GCL6:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:14:52.3706398+07:00 0HMT3EP20GCL6:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:15:44.0567713+07:00 0HMT3EP20GCL6:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:15:44.0574278+07:00 0HMT3EP20GCL6:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:15:44.0587721+07:00 0HMT3EP20GCL6:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:15:44.0605218+07:00 0HMT3EP20GCL6:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:15:45.3137287+07:00 0HMT3EP20GCL6:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:15:45.3142249+07:00 0HMT3EP20GCL6:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:15:45.3154588+07:00 0HMT3EP20GCL6:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:15:45.3174849+07:00 0HMT3EP20GCL6:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:15:45.3614828+07:00 0HMT3EP20GCL6:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:15:45.3620865+07:00 0HMT3EP20GCL6:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:15:45.3636891+07:00 0HMT3EP20GCL6:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:15:45.3658575+07:00 0HMT3EP20GCL6:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:16:38.9957838+07:00 0HMT3EP20GCL6:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:16:38.9964897+07:00 0HMT3EP20GCL6:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:16:39.0061574+07:00 0HMT3EP20GCL6:0000000F [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:16:39.0098421+07:00 0HMT3EP20GCL6:0000000F [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:16:40.7745383+07:00 0HMT3EP20GCL6:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:16:40.7751457+07:00 0HMT3EP20GCL6:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:16:40.7765317+07:00 0HMT3EP20GCL6:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:16:40.7791176+07:00 0HMT3EP20GCL6:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:16:40.8324200+07:00 0HMT3EP20GCL6:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:16:40.8330288+07:00 0HMT3EP20GCL6:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:16:40.8347188+07:00 0HMT3EP20GCL6:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:16:40.8382328+07:00 0HMT3EP20GCL6:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:16:54.7030794+07:00 0HMT3EP20GCL6:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:16:54.7035599+07:00 0HMT3EP20GCL6:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:16:54.7048817+07:00 0HMT3EP20GCL6:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:16:54.7064774+07:00 0HMT3EP20GCL6:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:16:54.9823478+07:00 0HMT3EP20GCL6:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:16:54.9828893+07:00 0HMT3EP20GCL6:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:16:54.9842355+07:00 0HMT3EP20GCL6:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:16:54.9858267+07:00 0HMT3EP20GCL6:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:16:55.0465992+07:00 0HMT3EP20GCL6:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:16:55.0472582+07:00 0HMT3EP20GCL6:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:16:55.0614278+07:00 0HMT3EP20GCL6:00000019 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:16:55.0644850+07:00 0HMT3EP20GCL6:00000019 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:17:41.1486840+07:00 0HMT3EP20GCL6:0000001B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:17:41.1492184+07:00 0HMT3EP20GCL6:0000001B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:17:41.1583433+07:00 0HMT3EP20GCL6:0000001B [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:17:41.1624391+07:00 0HMT3EP20GCL6:0000001B [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:17:41.3901122+07:00 0HMT3EP20GCL6:0000001D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:17:41.3905673+07:00 0HMT3EP20GCL6:0000001D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:17:41.3919748+07:00 0HMT3EP20GCL6:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:17:41.3945047+07:00 0HMT3EP20GCL6:0000001D [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:17:41.4377118+07:00 0HMT3EP20GCL6:0000001F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:17:41.4382046+07:00 0HMT3EP20GCL6:0000001F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:17:41.4395320+07:00 0HMT3EP20GCL6:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:17:41.4421605+07:00 0HMT3EP20GCL6:0000001F [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:19:34.2845749+07:00 0HMT3EP20GCL6:00000021 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:19:34.2851801+07:00 0HMT3EP20GCL6:00000021 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:19:34.2958295+07:00 0HMT3EP20GCL6:00000021 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:19:34.2991027+07:00 0HMT3EP20GCL6:00000021 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:19:34.5982958+07:00 0HMT3EP20GCL6:00000023 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:19:34.5988094+07:00 0HMT3EP20GCL6:00000023 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:19:34.6001055+07:00 0HMT3EP20GCL6:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:19:34.6024896+07:00 0HMT3EP20GCL6:00000023 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:19:34.6445942+07:00 0HMT3EP20GCL6:00000025 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:19:34.6451687+07:00 0HMT3EP20GCL6:00000025 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:19:34.6469202+07:00 0HMT3EP20GCL6:00000025 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:19:34.6504194+07:00 0HMT3EP20GCL6:00000025 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:20:34.2155322+07:00 0HMT3EP20GCL6:00000027 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:20:34.2165291+07:00 0HMT3EP20GCL6:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:20:34.2265416+07:00 0HMT3EP20GCL6:00000027 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:20:34.2303617+07:00 0HMT3EP20GCL6:00000027 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:20:34.4332804+07:00 0HMT3EP20GCL6:00000029 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:20:34.4337821+07:00 0HMT3EP20GCL6:00000029 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:20:34.4350155+07:00 0HMT3EP20GCL6:00000029 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:20:34.4365630+07:00 0HMT3EP20GCL6:00000029 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:20:34.4769798+07:00 0HMT3EP20GCL6:0000002B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:20:34.4775207+07:00 0HMT3EP20GCL6:0000002B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:20:34.4791854+07:00 0HMT3EP20GCL6:0000002B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:20:34.4823801+07:00 0HMT3EP20GCL6:0000002B [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:20:37.4259556+07:00 0HMT3EP20GCL6:0000002D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:20:37.4264645+07:00 0HMT3EP20GCL6:0000002D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:20:37.4277770+07:00 0HMT3EP20GCL6:0000002D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:20:37.4295752+07:00 0HMT3EP20GCL6:0000002D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:20:44.5488960+07:00 0HMT3EP20GCL4:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:20:44.5496263+07:00 0HMT3EP20GCL4:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:20:44.5512570+07:00 0HMT3EP20GCL4:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:20:44.5914363+07:00 0HMT3EP20GCL6:00000030 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:20:44.5919358+07:00 0HMT3EP20GCL6:00000030 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:20:44.5934916+07:00 0HMT3EP20GCL6:00000030 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:20:44.5945756+07:00 0HMT3EP20GCL8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:20:44.5977545+07:00 0HMT3EP20GCL6:00000030 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:20:44.6002661+07:00 0HMT3EP20GCL8:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:20:44.6018118+07:00 0HMT3EP20GCL8:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:20:44.6040766+07:00 0HMT3EP20GCL6:00000030 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:20:44.6049885+07:00 0HMT3EP20GCL8:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:20:44.6068218+07:00 0HMT3EP20GCL6:00000030 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:20:44.6101081+07:00 0HMT3EP20GCL6:00000030 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:20:44.6124713+07:00 0HMT3EP20GCL6:00000030 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:20:44.6142978+07:00 0HMT3EP20GCL6:00000030 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:20:44.6157676+07:00 0HMT3EP20GCL6:00000030 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:20:44.6166645+07:00 0HMT3EP20GCL6:00000030 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:20:44.6573794+07:00 0HMT3EP20GCL9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:20:44.6582067+07:00 0HMT3EP20GCL9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:20:44.6597161+07:00 0HMT3EP20GCL9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:20:44.6932004+07:00 0HMT3EP20GCL9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:20:44.6937960+07:00 0HMT3EP20GCL9:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:20:44.6953210+07:00 0HMT3EP20GCL9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:20:44.6976411+07:00 0HMT3EP20GCL9:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T08:20:44.7306754+07:00 0HMT3EP20GCL6:00000031 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:20:44.7315093+07:00 0HMT3EP20GCL8:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:20:44.7315248+07:00 0HMT3EP20GCL6:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:20:44.7322184+07:00 0HMT3EP20GCL8:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:20:44.7334745+07:00 0HMT3EP20GCL6:00000031 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:20:44.7335935+07:00 0HMT3EP20GCL8:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:20:44.7381219+07:00 0HMT3EP20GCL6:00000031 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:20:44.7430185+07:00 0HMT3EP20GCL8:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:20:44.7530018+07:00 0HMT3EP20GCLA:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:20:44.7537163+07:00 0HMT3EP20GCL6:00000031 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:20:44.7542818+07:00 0HMT3EP20GCLA:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:20:44.7552031+07:00 0HMT3EP20GCL6:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:20:44.7563085+07:00 0HMT3EP20GCLA:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:20:44.7564477+07:00 0HMT3EP20GCL6:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:20:44.7586807+07:00 0HMT3EP20GCL6:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:20:44.7586807+07:00 0HMT3EP20GCLA:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:20:44.7611646+07:00 0HMT3EP20GCL6:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:20:44.7623641+07:00 0HMT3EP20GCL6:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:20:44.7633402+07:00 0HMT3EP20GCL6:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:20:44.8412969+07:00 0HMT3EP20GCL9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:20:44.8418639+07:00 0HMT3EP20GCL9:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:20:44.8431824+07:00 0HMT3EP20GCL9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:21:30.7667231+07:00 0HMT3EP20GCL8:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:21:30.7674070+07:00 0HMT3EP20GCL8:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:21:30.7863868+07:00 0HMT3EP20GCL8:00000004 [INF] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:21:30.7929505+07:00 0HMT3EP20GCL8:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:21:30.7987512+07:00 0HMT3EP20GCL6:00000034 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:21:30.7996940+07:00 0HMT3EP20GCL6:00000034 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:21:30.7998373+07:00 0HMT3EP20GCL8:00000004 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:21:30.8021619+07:00 0HMT3EP20GCL6:00000034 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:21:30.8046158+07:00 0HMT3EP20GCL8:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:21:30.8074289+07:00 0HMT3EP20GCL6:00000034 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:21:30.8095151+07:00 0HMT3EP20GCL8:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:21:30.8134999+07:00 0HMT3EP20GCL8:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:21:30.8162290+07:00 0HMT3EP20GCL8:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:21:30.8180887+07:00 0HMT3EP20GCL8:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:21:30.8192074+07:00 0HMT3EP20GCL8:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:21:30.9362789+07:00 0HMT3EP20GCLB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:21:30.9369698+07:00 0HMT3EP20GCLB:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:21:30.9397997+07:00 0HMT3EP20GCLB:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:21:30.9928109+07:00 0HMT3EP20GCLB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:21:30.9938616+07:00 0HMT3EP20GCLB:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:21:30.9966751+07:00 0HMT3EP20GCLB:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:21:31.0027803+07:00 0HMT3EP20GCLB:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T08:21:31.0472385+07:00 0HMT3EP20GCL6:00000035 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:21:31.0485636+07:00 0HMT3EP20GCL6:00000035 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:21:31.0511020+07:00 0HMT3EP20GCL6:00000035 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:21:31.0547198+07:00 0HMT3EP20GCL6:00000035 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:21:31.0567125+07:00 0HMT3EP20GCL6:00000035 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:21:31.0573503+07:00 0HMT3EP20GCL8:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:21:31.0580641+07:00 0HMT3EP20GCL8:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:21:31.0581073+07:00 0HMT3EP20GCL6:00000035 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:21:31.0590038+07:00 0HMT3EP20GCL6:00000035 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:21:31.0599635+07:00 0HMT3EP20GCL8:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:21:31.0600885+07:00 0HMT3EP20GCL6:00000035 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:21:31.0612708+07:00 0HMT3EP20GCL6:00000035 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:21:31.0612727+07:00 0HMT3EP20GCL8:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:21:31.0638281+07:00 0HMT3EP20GCL6:00000035 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:21:31.0662769+07:00 0HMT3EP20GCL6:00000035 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:21:44.0989777+07:00 0HMT3EP20GCL6:00000036 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:21:44.0994866+07:00 0HMT3EP20GCL6:00000036 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:21:44.1007745+07:00 0HMT3EP20GCL6:00000036 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:21:44.1042004+07:00 0HMT3EP20GCL6:00000036 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:21:44.1948809+07:00 0HMT3EP20GCL6:00000037 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:21:44.1954067+07:00 0HMT3EP20GCL6:00000037 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:21:44.1966867+07:00 0HMT3EP20GCL6:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:21:44.1991488+07:00 0HMT3EP20GCL6:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:22:06.5188838+07:00 0HMT3EP20GCLB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:06.5196023+07:00 0HMT3EP20GCLB:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:06.5217767+07:00 0HMT3EP20GCLB:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:06.6473466+07:00 0HMT3EP20GCL8:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:06.6479111+07:00 0HMT3EP20GCL8:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:06.6493682+07:00 0HMT3EP20GCL8:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:06.6512410+07:00 0HMT3EP20GCL8:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:06.6539389+07:00 0HMT3EP20GCL8:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:22:06.6545372+07:00 0HMT3EP20GCL6:00000039 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:06.6552614+07:00 0HMT3EP20GCL8:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:22:06.6553792+07:00 0HMT3EP20GCL6:00000039 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:06.6562610+07:00 0HMT3EP20GCL8:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:06.6571710+07:00 0HMT3EP20GCL6:00000039 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:06.6572222+07:00 0HMT3EP20GCL8:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:22:06.6582838+07:00 0HMT3EP20GCL8:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:06.6583748+07:00 0HMT3EP20GCL6:00000039 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:22:06.6606838+07:00 0HMT3EP20GCL8:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:22:06.6616147+07:00 0HMT3EP20GCL8:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:08.7016150+07:00 0HMT3EP20GCL8:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:08.7026084+07:00 0HMT3EP20GCL8:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:08.7050145+07:00 0HMT3EP20GCL8:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:08.7089334+07:00 0HMT3EP20GCL8:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:08.7109797+07:00 0HMT3EP20GCL8:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:22:08.7124875+07:00 0HMT3EP20GCL8:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:22:08.7137542+07:00 0HMT3EP20GCL8:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:08.7150852+07:00 0HMT3EP20GCL8:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:22:08.7160106+07:00 0HMT3EP20GCL8:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:08.7170238+07:00 0HMT3EP20GCL8:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:22:08.7188071+07:00 0HMT3EP20GCL8:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:08.7198166+07:00 0HMT3EP20GCL6:0000003C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:08.7207721+07:00 0HMT3EP20GCL6:0000003C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:08.7245446+07:00 0HMT3EP20GCL6:0000003C [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:08.7268618+07:00 0HMT3EP20GCL6:0000003C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:22:08.8108584+07:00 0HMT3EP20GCLC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:08.8115625+07:00 0HMT3EP20GCLC:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:08.8139053+07:00 0HMT3EP20GCLC:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:08.8187677+07:00 0HMT3EP20GCLC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:08.8192656+07:00 0HMT3EP20GCLC:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:08.8205556+07:00 0HMT3EP20GCLC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:08.8216922+07:00 0HMT3EP20GCLC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T08:22:08.8444993+07:00 0HMT3EP20GCL8:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:08.8449822+07:00 0HMT3EP20GCL8:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:08.8462673+07:00 0HMT3EP20GCL8:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:08.8475932+07:00 0HMT3EP20GCL8:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:08.8495262+07:00 0HMT3EP20GCL6:0000003D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:08.8496196+07:00 0HMT3EP20GCL8:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:22:08.8499658+07:00 0HMT3EP20GCL6:0000003D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:08.8505074+07:00 0HMT3EP20GCL8:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:22:08.8514452+07:00 0HMT3EP20GCL8:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:08.8518676+07:00 0HMT3EP20GCL6:0000003D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:08.8525939+07:00 0HMT3EP20GCL8:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:22:08.8540504+07:00 0HMT3EP20GCL8:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:08.8540537+07:00 0HMT3EP20GCL6:0000003D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:22:08.8568230+07:00 0HMT3EP20GCL8:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:22:08.8577809+07:00 0HMT3EP20GCL8:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:09.6700982+07:00 0HMT3EP20GCL8:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:09.6705618+07:00 0HMT3EP20GCL8:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:09.6718560+07:00 0HMT3EP20GCL8:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:09.6732824+07:00 0HMT3EP20GCL8:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:22:09.7505190+07:00 0HMT3EP20GCL8:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:09.7510683+07:00 0HMT3EP20GCL8:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:09.7524343+07:00 0HMT3EP20GCL8:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:09.7544559+07:00 0HMT3EP20GCL8:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:22:33.5642770+07:00 0HMT3EP20GCL8:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:33.5648284+07:00 0HMT3EP20GCL8:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:33.5765528+07:00 0HMT3EP20GCL8:0000000E [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:33.5797142+07:00 0HMT3EP20GCL8:0000000E [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:22:33.9209398+07:00 0HMT3EP20GCL8:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:33.9214266+07:00 0HMT3EP20GCL8:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:33.9227058+07:00 0HMT3EP20GCL8:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:33.9244842+07:00 0HMT3EP20GCL8:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:22:33.9750434+07:00 0HMT3EP20GCL8:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:33.9755829+07:00 0HMT3EP20GCL8:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:33.9768489+07:00 0HMT3EP20GCL8:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:33.9799656+07:00 0HMT3EP20GCL8:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:22:43.4843580+07:00 0HMT3EP20GCLC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:43.4849381+07:00 0HMT3EP20GCLC:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:43.4863517+07:00 0HMT3EP20GCLC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:43.5712233+07:00 0HMT3EP20GCL8:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:43.5729676+07:00 0HMT3EP20GCL8:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:43.5750901+07:00 0HMT3EP20GCL8:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:43.5801874+07:00 0HMT3EP20GCL6:00000045 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:43.5811264+07:00 0HMT3EP20GCL6:00000045 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:43.5813194+07:00 0HMT3EP20GCL8:00000011 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:43.5841254+07:00 0HMT3EP20GCL6:00000045 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:43.5894620+07:00 0HMT3EP20GCL8:00000011 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:22:43.5902821+07:00 0HMT3EP20GCL6:00000045 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:22:43.5928639+07:00 0HMT3EP20GCL8:00000011 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:22:43.5966964+07:00 0HMT3EP20GCL8:00000011 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:43.6009274+07:00 0HMT3EP20GCL8:00000011 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:22:43.6025720+07:00 0HMT3EP20GCL8:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:43.6041389+07:00 0HMT3EP20GCL8:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:22:43.6056657+07:00 0HMT3EP20GCL8:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:43.7240283+07:00 0HMT3EP20GCLD:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:43.7249536+07:00 0HMT3EP20GCLD:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:43.7272563+07:00 0HMT3EP20GCLD:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:43.7684180+07:00 0HMT3EP20GCLD:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:43.7691355+07:00 0HMT3EP20GCLD:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:43.7708649+07:00 0HMT3EP20GCLD:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:53.6336677+07:00 0HMT3EP20GCL6:00000047 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:53.6343925+07:00 0HMT3EP20GCL6:00000047 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:53.6364685+07:00 0HMT3EP20GCL6:00000047 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:53.6383003+07:00 0HMT3EP20GCL6:00000047 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:53.6404022+07:00 0HMT3EP20GCL6:00000047 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:22:53.6407823+07:00 0HMT3EP20GCL8:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:53.6414650+07:00 0HMT3EP20GCL6:00000047 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:22:53.6417072+07:00 0HMT3EP20GCL8:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:53.6424014+07:00 0HMT3EP20GCL6:00000047 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:53.6443135+07:00 0HMT3EP20GCL8:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:53.6444738+07:00 0HMT3EP20GCL6:00000047 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:22:53.6463397+07:00 0HMT3EP20GCL8:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:22:53.6463397+07:00 0HMT3EP20GCL6:00000047 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:53.6486895+07:00 0HMT3EP20GCL6:00000047 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:22:53.6495970+07:00 0HMT3EP20GCL6:00000047 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:53.6564079+07:00 0HMT3EP20GCLE:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:53.6571188+07:00 0HMT3EP20GCLE:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:53.6587950+07:00 0HMT3EP20GCLE:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:53.7707814+07:00 0HMT3EP20GCLE:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:53.7715040+07:00 0HMT3EP20GCLE:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:53.7728203+07:00 0HMT3EP20GCLE:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:53.7749089+07:00 0HMT3EP20GCLE:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T08:22:53.7893876+07:00 0HMT3EP20GCL8:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:53.7902081+07:00 0HMT3EP20GCL8:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:53.7916202+07:00 0HMT3EP20GCL8:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:53.7932912+07:00 0HMT3EP20GCL8:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:53.7962697+07:00 0HMT3EP20GCL8:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:22:53.7975366+07:00 0HMT3EP20GCL8:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:22:53.7979732+07:00 0HMT3EP20GCL6:00000048 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:53.7987003+07:00 0HMT3EP20GCL6:00000048 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:53.7987710+07:00 0HMT3EP20GCL8:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:53.7999113+07:00 0HMT3EP20GCL8:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:22:53.8005592+07:00 0HMT3EP20GCL6:00000048 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:53.8009082+07:00 0HMT3EP20GCL8:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:53.8018771+07:00 0HMT3EP20GCL8:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:22:53.8018836+07:00 0HMT3EP20GCL6:00000048 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:22:53.8042962+07:00 0HMT3EP20GCL8:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:22:56.1808248+07:00 0HMT3EP20GCL8:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:56.1814081+07:00 0HMT3EP20GCL8:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:56.1829712+07:00 0HMT3EP20GCL8:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:56.1855505+07:00 0HMT3EP20GCL8:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:22:56.2762702+07:00 0HMT3EP20GCL8:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:22:56.2767590+07:00 0HMT3EP20GCL8:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:22:56.2780274+07:00 0HMT3EP20GCL8:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:22:56.2801402+07:00 0HMT3EP20GCL8:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:23:47.1322906+07:00 0HMT3EP20GCL8:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:23:47.1328700+07:00 0HMT3EP20GCL8:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:23:47.1411884+07:00 0HMT3EP20GCL8:00000017 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:23:47.1450050+07:00 0HMT3EP20GCL8:00000017 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:23:47.4743631+07:00 0HMT3EP20GCL8:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:23:47.4752267+07:00 0HMT3EP20GCL8:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:23:47.4768585+07:00 0HMT3EP20GCL8:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:23:47.4788998+07:00 0HMT3EP20GCL8:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:23:47.5237836+07:00 0HMT3EP20GCL8:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:23:47.5242593+07:00 0HMT3EP20GCL8:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:23:47.5257091+07:00 0HMT3EP20GCL8:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:23:47.5288189+07:00 0HMT3EP20GCL8:00000019 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:24:11.6243500+07:00 0HMT3EP20GCL8:0000001A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:24:11.6248356+07:00 0HMT3EP20GCL8:0000001A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:24:11.6262788+07:00 0HMT3EP20GCL8:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:24:11.6298619+07:00 0HMT3EP20GCL8:0000001A [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:24:11.8235631+07:00 0HMT3EP20GCL8:0000001B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:24:11.8240070+07:00 0HMT3EP20GCL8:0000001B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:24:11.8254118+07:00 0HMT3EP20GCL8:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:24:11.8272957+07:00 0HMT3EP20GCL8:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:24:11.8792003+07:00 0HMT3EP20GCL8:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:24:11.8797212+07:00 0HMT3EP20GCL8:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:24:11.8810581+07:00 0HMT3EP20GCL8:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:24:11.8828872+07:00 0HMT3EP20GCL8:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:32:09.7757574+07:00 0HMT3EP20GCLG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:32:09.7798799+07:00 0HMT3EP20GCLG:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:32:09.7919152+07:00 0HMT3EP20GCLG:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:32:09.7962754+07:00 0HMT3EP20GCLG:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:32:10.2076399+07:00 0HMT3EP20GCLG:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:32:10.2081414+07:00 0HMT3EP20GCLG:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:32:10.2094808+07:00 0HMT3EP20GCLG:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:32:10.2112183+07:00 0HMT3EP20GCLG:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:32:10.2600961+07:00 0HMT3EP20GCLF:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:32:10.2606532+07:00 0HMT3EP20GCLF:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:32:10.2625553+07:00 0HMT3EP20GCLF:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:32:10.2665123+07:00 0HMT3EP20GCLF:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:32:18.4051756+07:00 0HMT3EP20GCLE:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:32:18.4063759+07:00 0HMT3EP20GCLE:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:32:18.4077260+07:00 0HMT3EP20GCLE:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:32:20.6781592+07:00 0HMT3EP20GCLF:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:32:20.6788166+07:00 0HMT3EP20GCLG:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:32:20.6797247+07:00 0HMT3EP20GCLF:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:32:20.6821535+07:00 0HMT3EP20GCLF:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:32:20.6843804+07:00 0HMT3EP20GCLG:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:32:20.6871336+07:00 0HMT3EP20GCLG:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:32:20.6890487+07:00 0HMT3EP20GCLF:00000007 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:32:20.6936278+07:00 0HMT3EP20GCLG:00000005 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:32:20.6968412+07:00 0HMT3EP20GCLF:00000007 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:32:20.7020840+07:00 0HMT3EP20GCLF:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:32:20.7065341+07:00 0HMT3EP20GCLF:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:32:20.7107155+07:00 0HMT3EP20GCLF:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:32:20.7132867+07:00 0HMT3EP20GCLF:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:32:20.7154790+07:00 0HMT3EP20GCLF:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:32:20.7174348+07:00 0HMT3EP20GCLF:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:32:20.7520177+07:00 0HMT3EP20GCLH:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:32:20.7533916+07:00 0HMT3EP20GCLH:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:32:20.7556611+07:00 0HMT3EP20GCLH:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:32:20.8045501+07:00 0HMT3EP20GCLH:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:32:20.8054690+07:00 0HMT3EP20GCLH:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:32:20.8072394+07:00 0HMT3EP20GCLH:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:32:20.8098517+07:00 0HMT3EP20GCLH:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T08:32:20.9145520+07:00 0HMT3EP20GCLF:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:32:20.9146398+07:00 0HMT3EP20GCLG:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:32:20.9152200+07:00 0HMT3EP20GCLG:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:32:20.9152200+07:00 0HMT3EP20GCLF:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:32:20.9166396+07:00 0HMT3EP20GCLF:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:32:20.9166396+07:00 0HMT3EP20GCLG:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:32:20.9187192+07:00 0HMT3EP20GCLF:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:32:20.9187953+07:00 0HMT3EP20GCLG:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:32:20.9224397+07:00 0HMT3EP20GCLF:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:32:20.9233813+07:00 0HMT3EP20GCLF:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:32:20.9241767+07:00 0HMT3EP20GCLF:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:32:20.9250416+07:00 0HMT3EP20GCLF:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:32:20.9258106+07:00 0HMT3EP20GCLF:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:32:20.9265804+07:00 0HMT3EP20GCLF:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:32:20.9273882+07:00 0HMT3EP20GCLF:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:32:21.6507882+07:00 0HMT3EP20GCLF:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:32:21.6513398+07:00 0HMT3EP20GCLF:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:32:21.6528197+07:00 0HMT3EP20GCLF:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:32:21.6551345+07:00 0HMT3EP20GCLF:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:32:21.8970841+07:00 0HMT3EP20GCLF:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:32:21.8975567+07:00 0HMT3EP20GCLF:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:32:21.8988460+07:00 0HMT3EP20GCLF:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:32:21.9008072+07:00 0HMT3EP20GCLF:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:32:21.9426201+07:00 0HMT3EP20GCLF:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:32:21.9431242+07:00 0HMT3EP20GCLF:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:32:21.9444301+07:00 0HMT3EP20GCLF:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:32:21.9464664+07:00 0HMT3EP20GCLF:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:42:09.4404460+07:00 0HMT3EP20GCLI:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:42:09.4404460+07:00 0HMT3EP20GCLJ:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:42:09.4494745+07:00 0HMT3EP20GCLJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:42:09.4528755+07:00 0HMT3EP20GCLI:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:42:09.4669792+07:00 0HMT3EP20GCLI:00000003 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:42:09.4669789+07:00 0HMT3EP20GCLJ:00000003 [INF] Executed DbCommand ("17"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:42:09.4826507+07:00 0HMT3EP20GCLI:00000003 [INF] Executed DbCommand ("14"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:42:09.4829657+07:00 0HMT3EP20GCLJ:00000003 [INF] Executed DbCommand ("15"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:09.4867971+07:00 0HMT3EP20GCLK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:42:09.4912057+07:00 0HMT3EP20GCLK:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:42:09.4938959+07:00 0HMT3EP20GCLK:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:42:09.4986783+07:00 0HMT3EP20GCLK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:42:09.4999479+07:00 0HMT3EP20GCLK:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:42:09.5024820+07:00 0HMT3EP20GCLK:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:42:09.5062916+07:00 0HMT3EP20GCLK:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T08:42:09.5215690+07:00 0HMT3EP20GCLJ:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'c2f29374-f52f-4212-bb88-1c3a4bf1b10e', N'58c799f7-c8a1-46ff-821c-09558aeef8f3', N'86418595-cb58-4cd7-90bc-426ddddfc7db', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'5a507a2f-e7c2-4ad9-b5bd-db16ca04bb8b', N'9f4a81f3-159c-4f90-90e8-0a9fe0f3a95b', N'06ccd7f5-b14d-4644-9cea-317de38005de')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'c2f29374-f52f-4212-bb88-1c3a4bf1b10e', N'58c799f7-c8a1-46ff-821c-09558aeef8f3', N'86418595-cb58-4cd7-90bc-426ddddfc7db', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'5a507a2f-e7c2-4ad9-b5bd-db16ca04bb8b', N'9f4a81f3-159c-4f90-90e8-0a9fe0f3a95b', N'06ccd7f5-b14d-4644-9cea-317de38005de')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:42:09.5237395+07:00 0HMT3EP20GCLJ:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:42:09.5266145+07:00 0HMT3EP20GCLJ:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:09.5278004+07:00 0HMT3EP20GCLJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:42:09.5286411+07:00 0HMT3EP20GCLJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:09.5294617+07:00 0HMT3EP20GCLJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:42:09.5302405+07:00 0HMT3EP20GCLJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:09.5309582+07:00 0HMT3EP20GCLJ:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:42:09.5316857+07:00 0HMT3EP20GCLJ:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:09.5325314+07:00 0HMT3EP20GCLJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:42:09.5333751+07:00 0HMT3EP20GCLJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:09.5342800+07:00 0HMT3EP20GCLJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:42:09.5350069+07:00 0HMT3EP20GCLJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:09.5358061+07:00 0HMT3EP20GCLJ:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:42:09.5366981+07:00 0HMT3EP20GCLJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:09.5941658+07:00 0HMT3EP20GCLJ:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:42:09.5942548+07:00 0HMT3EP20GCLI:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:42:09.5947786+07:00 0HMT3EP20GCLI:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:42:09.5947786+07:00 0HMT3EP20GCLJ:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:42:09.5965733+07:00 0HMT3EP20GCLI:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:42:09.5965733+07:00 0HMT3EP20GCLJ:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:42:09.5984632+07:00 0HMT3EP20GCLI:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:42:09.5983955+07:00 0HMT3EP20GCLJ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:09.6025832+07:00 0HMT3EP20GCLJ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'c2f29374-f52f-4212-bb88-1c3a4bf1b10e', N'58c799f7-c8a1-46ff-821c-09558aeef8f3', N'86418595-cb58-4cd7-90bc-426ddddfc7db', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'5a507a2f-e7c2-4ad9-b5bd-db16ca04bb8b', N'9f4a81f3-159c-4f90-90e8-0a9fe0f3a95b', N'06ccd7f5-b14d-4644-9cea-317de38005de')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'c2f29374-f52f-4212-bb88-1c3a4bf1b10e', N'58c799f7-c8a1-46ff-821c-09558aeef8f3', N'86418595-cb58-4cd7-90bc-426ddddfc7db', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'5a507a2f-e7c2-4ad9-b5bd-db16ca04bb8b', N'9f4a81f3-159c-4f90-90e8-0a9fe0f3a95b', N'06ccd7f5-b14d-4644-9cea-317de38005de')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:42:09.6033955+07:00 0HMT3EP20GCLJ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:42:09.6041674+07:00 0HMT3EP20GCLJ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:09.6051444+07:00 0HMT3EP20GCLJ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:42:09.6069082+07:00 0HMT3EP20GCLJ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:09.6084836+07:00 0HMT3EP20GCLJ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:42:09.6098799+07:00 0HMT3EP20GCLJ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:09.6107778+07:00 0HMT3EP20GCLJ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:42:09.6116995+07:00 0HMT3EP20GCLJ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:09.6129457+07:00 0HMT3EP20GCLJ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:42:09.6137652+07:00 0HMT3EP20GCLJ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:09.6146431+07:00 0HMT3EP20GCLJ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:42:09.6154365+07:00 0HMT3EP20GCLJ:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:09.6163478+07:00 0HMT3EP20GCLJ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:42:09.6170971+07:00 0HMT3EP20GCLJ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:17.9818941+07:00 0HMT3EP20GCLJ:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:42:17.9824700+07:00 0HMT3EP20GCLJ:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:42:17.9838446+07:00 0HMT3EP20GCLJ:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:42:17.9865261+07:00 0HMT3EP20GCLJ:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:42:18.0559899+07:00 0HMT3EP20GCLJ:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:42:18.0559900+07:00 0HMT3EP20GCLI:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:42:18.0564545+07:00 0HMT3EP20GCLI:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:42:18.0564536+07:00 0HMT3EP20GCLJ:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:42:18.0577329+07:00 0HMT3EP20GCLI:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:42:18.0577330+07:00 0HMT3EP20GCLJ:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:42:18.0594450+07:00 0HMT3EP20GCLJ:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:42:18.0609328+07:00 0HMT3EP20GCLI:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:18.0774299+07:00 0HMT3EP20GCLI:00000006 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:42:18.0801401+07:00 0HMT3EP20GCLI:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:42:18.0813428+07:00 0HMT3EP20GCLI:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:18.0826085+07:00 0HMT3EP20GCLI:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:42:18.0837766+07:00 0HMT3EP20GCLI:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:18.0855177+07:00 0HMT3EP20GCLI:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:42:18.0868160+07:00 0HMT3EP20GCLI:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:18.3600028+07:00 0HMT3EP20GCLM:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:42:18.3611097+07:00 0HMT3EP20GCLM:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:42:18.3643063+07:00 0HMT3EP20GCLM:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:42:18.3653720+07:00 0HMT3EP20GCLM:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:42:18.3660211+07:00 0HMT3EP20GCLM:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:42:18.3673463+07:00 0HMT3EP20GCLM:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:42:18.3684228+07:00 0HMT3EP20GCLM:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T08:42:18.3832568+07:00 0HMT3EP20GCLI:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:42:18.3832568+07:00 0HMT3EP20GCLJ:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:42:18.3837611+07:00 0HMT3EP20GCLJ:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:42:18.3837611+07:00 0HMT3EP20GCLI:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:42:18.3850245+07:00 0HMT3EP20GCLI:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:42:18.3850231+07:00 0HMT3EP20GCLJ:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:42:18.3866512+07:00 0HMT3EP20GCLI:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:18.3887251+07:00 0HMT3EP20GCLJ:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:42:18.4026110+07:00 0HMT3EP20GCLI:00000007 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:42:18.4041830+07:00 0HMT3EP20GCLI:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:42:18.4051667+07:00 0HMT3EP20GCLI:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:18.4061390+07:00 0HMT3EP20GCLI:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:42:18.4070967+07:00 0HMT3EP20GCLI:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:18.4081819+07:00 0HMT3EP20GCLI:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:42:18.4096365+07:00 0HMT3EP20GCLI:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:42:20.8447555+07:00 0HMT3EP20GCLI:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:42:20.8452454+07:00 0HMT3EP20GCLI:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:42:20.8538893+07:00 0HMT3EP20GCLI:00000009 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:42:20.8587704+07:00 0HMT3EP20GCLI:00000009 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:42:20.9455673+07:00 0HMT3EP20GCLI:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:42:20.9461089+07:00 0HMT3EP20GCLI:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:42:20.9559286+07:00 0HMT3EP20GCLI:0000000B [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:42:20.9602563+07:00 0HMT3EP20GCLI:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:44:51.3673502+07:00 0HMT3EP20GCLN:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:44:51.3678635+07:00 0HMT3EP20GCLN:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:44:51.3769056+07:00 0HMT3EP20GCLN:00000003 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:44:51.5762664+07:00 0HMT3EP20GCLN:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-23T08:44:51.6522769+07:00 0HMT3EP20GCLN:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:44:51.6531227+07:00 0HMT3EP20GCLN:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:44:51.6545888+07:00 0HMT3EP20GCLN:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:44:51.6575404+07:00 0HMT3EP20GCLN:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:44:51.6814945+07:00 0HMT3EP20GCLN:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T08:44:54.4026667+07:00 0HMT3EP20GCLN:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:44:54.4032014+07:00 0HMT3EP20GCLN:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:44:54.4047764+07:00 0HMT3EP20GCLN:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:44:54.4396161+07:00 0HMT3EP20GCLN:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-23T08:44:54.4466508+07:00 0HMT3EP20GCLN:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@p2='?' (Size = 100), @p0='?' (Size = 50), @p1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Messages] SET [FileStatus] = @p0, [FileUrls] = @p1
WHERE [Id] = @p2;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T08:44:54.4841892+07:00 0HMT3EP20GCLN:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:44:54.4849379+07:00 0HMT3EP20GCLN:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:44:54.4864281+07:00 0HMT3EP20GCLN:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:44:54.4887973+07:00 0HMT3EP20GCLN:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:44:54.5037066+07:00 0HMT3EP20GCLI:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:44:54.5044918+07:00 0HMT3EP20GCLI:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:44:54.5061854+07:00 0HMT3EP20GCLI:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:44:54.5303377+07:00 0HMT3EP20GCLI:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:48:57.6497785+07:00 0HMT3EP20GCLO:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:48:57.6551016+07:00 0HMT3EP20GCLO:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:48:57.6677273+07:00 0HMT3EP20GCLO:00000003 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:48:57.6725555+07:00 0HMT3EP20GCLO:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:48:59.6907465+07:00 0HMT3EP20GCLO:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:48:59.6912408+07:00 0HMT3EP20GCLO:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:48:59.6995005+07:00 0HMT3EP20GCLO:00000005 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:48:59.7030078+07:00 0HMT3EP20GCLO:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:48:59.7653964+07:00 0HMT3EP20GCLO:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:48:59.7658976+07:00 0HMT3EP20GCLO:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:48:59.7720273+07:00 0HMT3EP20GCLO:00000007 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:48:59.7755489+07:00 0HMT3EP20GCLO:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:52:21.9181729+07:00 0HMT3EP20GCLQ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:52:21.9190730+07:00 0HMT3EP20GCLQ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:52:21.9291929+07:00 0HMT3EP20GCLQ:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:52:21.9336974+07:00 0HMT3EP20GCLQ:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:52:22.1994693+07:00 0HMT3EP20GCLQ:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:52:22.1999644+07:00 0HMT3EP20GCLQ:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:52:22.2016176+07:00 0HMT3EP20GCLQ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:52:22.2037102+07:00 0HMT3EP20GCLQ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:52:22.2784133+07:00 0HMT3EP20GCLP:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:52:22.2788996+07:00 0HMT3EP20GCLP:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:52:22.2802171+07:00 0HMT3EP20GCLP:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:52:22.2832114+07:00 0HMT3EP20GCLP:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:52:31.9088953+07:00 0HMT3EP20GCLQ:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:52:31.9095551+07:00 0HMT3EP20GCLQ:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:52:31.9109592+07:00 0HMT3EP20GCLQ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:52:31.9131939+07:00 0HMT3EP20GCLQ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:52:32.1966138+07:00 0HMT3EP20GCLQ:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:52:32.1971606+07:00 0HMT3EP20GCLQ:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:52:32.1987726+07:00 0HMT3EP20GCLQ:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:52:32.2004235+07:00 0HMT3EP20GCLQ:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:52:32.2362720+07:00 0HMT3EP20GCLP:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:52:32.2368975+07:00 0HMT3EP20GCLP:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:52:32.2388785+07:00 0HMT3EP20GCLP:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:52:32.2409539+07:00 0HMT3EP20GCLP:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:52:33.6898589+07:00 0HMT3EP20GCLH:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:52:33.6903742+07:00 0HMT3EP20GCLH:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:52:33.6919312+07:00 0HMT3EP20GCLH:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:52:33.8216410+07:00 0HMT3EP20GCLP:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:52:33.8221346+07:00 0HMT3EP20GCLQ:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:52:33.8221709+07:00 0HMT3EP20GCLP:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:52:33.8224350+07:00 0HMT3EP20GCLQ:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:52:33.8240807+07:00 0HMT3EP20GCLQ:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:52:33.8302339+07:00 0HMT3EP20GCLQ:00000007 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:52:33.8320813+07:00 0HMT3EP20GCLP:0000000B [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:52:33.8359045+07:00 0HMT3EP20GCLP:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:52:33.8406006+07:00 0HMT3EP20GCLP:0000000B [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:52:33.8429235+07:00 0HMT3EP20GCLP:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:52:33.8458374+07:00 0HMT3EP20GCLP:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:52:33.8478910+07:00 0HMT3EP20GCLP:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:52:33.8487881+07:00 0HMT3EP20GCLP:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:52:33.8496873+07:00 0HMT3EP20GCLP:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:52:33.8504319+07:00 0HMT3EP20GCLP:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:52:35.4691063+07:00 0HMT3EP20GCLP:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:52:35.4700959+07:00 0HMT3EP20GCLP:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:52:35.4717985+07:00 0HMT3EP20GCLP:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:52:35.4738416+07:00 0HMT3EP20GCLP:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:52:35.4761890+07:00 0HMT3EP20GCLP:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:52:35.4778936+07:00 0HMT3EP20GCLP:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:52:35.4798558+07:00 0HMT3EP20GCLP:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:52:35.4825655+07:00 0HMT3EP20GCLP:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:52:35.4845454+07:00 0HMT3EP20GCLQ:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:52:35.4848384+07:00 0HMT3EP20GCLP:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:52:35.4860348+07:00 0HMT3EP20GCLQ:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:52:35.4879977+07:00 0HMT3EP20GCLP:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:52:35.4896248+07:00 0HMT3EP20GCLQ:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:52:35.5005706+07:00 0HMT3EP20GCLP:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:52:35.5010820+07:00 0HMT3EP20GCLQ:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:52:35.5795327+07:00 0HMT3EP20GCLR:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:52:35.5801361+07:00 0HMT3EP20GCLR:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:52:35.5814189+07:00 0HMT3EP20GCLR:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:52:35.6098910+07:00 0HMT3EP20GCLR:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:52:35.6104897+07:00 0HMT3EP20GCLR:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:52:35.6120215+07:00 0HMT3EP20GCLR:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:52:35.6168420+07:00 0HMT3EP20GCLR:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T08:52:35.7166273+07:00 0HMT3EP20GCLQ:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:52:35.7166349+07:00 0HMT3EP20GCLP:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:52:35.7171394+07:00 0HMT3EP20GCLP:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:52:35.7171393+07:00 0HMT3EP20GCLQ:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:52:35.7185794+07:00 0HMT3EP20GCLP:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:52:35.7185800+07:00 0HMT3EP20GCLQ:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:52:35.7207712+07:00 0HMT3EP20GCLQ:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:52:35.7207711+07:00 0HMT3EP20GCLP:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:52:35.7291529+07:00 0HMT3EP20GCLP:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:52:35.7301888+07:00 0HMT3EP20GCLP:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:52:35.7310199+07:00 0HMT3EP20GCLP:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:52:35.7320394+07:00 0HMT3EP20GCLP:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:52:35.7337192+07:00 0HMT3EP20GCLP:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:52:35.7355763+07:00 0HMT3EP20GCLP:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:52:35.7373742+07:00 0HMT3EP20GCLP:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:52:48.2458713+07:00 0HMT3EP20GCLR:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:52:48.2464707+07:00 0HMT3EP20GCLR:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:52:48.2480367+07:00 0HMT3EP20GCLR:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:52:48.3385173+07:00 0HMT3EP20GCLP:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:52:48.3392686+07:00 0HMT3EP20GCLP:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:52:48.3409682+07:00 0HMT3EP20GCLP:00000012 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:52:48.3427216+07:00 0HMT3EP20GCLP:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:52:48.3453431+07:00 0HMT3EP20GCLP:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:52:48.3465304+07:00 0HMT3EP20GCLP:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:52:48.3479260+07:00 0HMT3EP20GCLP:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:52:48.3491812+07:00 0HMT3EP20GCLP:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:52:48.3501683+07:00 0HMT3EP20GCLP:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:52:48.3504148+07:00 0HMT3EP20GCLQ:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:52:48.3511162+07:00 0HMT3EP20GCLQ:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:52:48.3514895+07:00 0HMT3EP20GCLP:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:52:48.3530418+07:00 0HMT3EP20GCLP:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:52:48.3536471+07:00 0HMT3EP20GCLQ:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:52:48.3551531+07:00 0HMT3EP20GCLQ:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:52:48.4303889+07:00 0HMT3EP20GCLS:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:52:48.4317427+07:00 0HMT3EP20GCLS:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:52:48.4341933+07:00 0HMT3EP20GCLS:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:52:48.4399764+07:00 0HMT3EP20GCLS:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:52:48.4405035+07:00 0HMT3EP20GCLS:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:52:48.4419435+07:00 0HMT3EP20GCLS:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:52:53.1101226+07:00 0HMT3EP20GCLM:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:52:53.1101277+07:00 0HMT3EP20GCLK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:52:53.1266621+07:00 0HMT3EP20GCLK:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:52:53.1266621+07:00 0HMT3EP20GCLM:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:52:53.1292480+07:00 0HMT3EP20GCLM:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:52:53.1292479+07:00 0HMT3EP20GCLK:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:53:07.0937256+07:00 0HMT3EP20GCLP:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:53:07.0943312+07:00 0HMT3EP20GCLP:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:53:07.0961378+07:00 0HMT3EP20GCLQ:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:53:07.0961381+07:00 0HMT3EP20GCLP:00000014 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:53:07.0968121+07:00 0HMT3EP20GCLQ:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:53:07.0982923+07:00 0HMT3EP20GCLP:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:53:07.0987378+07:00 0HMT3EP20GCLQ:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:53:07.1013073+07:00 0HMT3EP20GCLQ:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:53:07.1013072+07:00 0HMT3EP20GCLP:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:53:07.1042719+07:00 0HMT3EP20GCLP:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:53:07.1059057+07:00 0HMT3EP20GCLP:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:53:07.1079684+07:00 0HMT3EP20GCLP:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:53:07.1090400+07:00 0HMT3EP20GCLP:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:53:07.1099929+07:00 0HMT3EP20GCLP:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:53:07.1108224+07:00 0HMT3EP20GCLP:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:53:07.2339964+07:00 0HMT3EP20GCLT:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:53:07.2345145+07:00 0HMT3EP20GCLT:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:53:07.2368743+07:00 0HMT3EP20GCLT:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:53:07.2467691+07:00 0HMT3EP20GCLT:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:53:07.2473303+07:00 0HMT3EP20GCLT:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:53:07.2486389+07:00 0HMT3EP20GCLT:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:53:07.2498454+07:00 0HMT3EP20GCLT:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T08:53:07.2675411+07:00 0HMT3EP20GCLP:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:53:07.2682249+07:00 0HMT3EP20GCLP:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:53:07.2697195+07:00 0HMT3EP20GCLP:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:53:07.2719974+07:00 0HMT3EP20GCLP:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:53:07.2732113+07:00 0HMT3EP20GCLQ:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:53:07.2741555+07:00 0HMT3EP20GCLQ:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:53:07.2746581+07:00 0HMT3EP20GCLP:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:53:07.2760985+07:00 0HMT3EP20GCLP:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:53:07.2760985+07:00 0HMT3EP20GCLQ:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:53:07.2775651+07:00 0HMT3EP20GCLP:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:53:07.2776799+07:00 0HMT3EP20GCLQ:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:53:07.2804401+07:00 0HMT3EP20GCLP:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:53:07.2813718+07:00 0HMT3EP20GCLP:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:53:07.2824947+07:00 0HMT3EP20GCLP:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:53:07.2835262+07:00 0HMT3EP20GCLP:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:53:08.5733917+07:00 0HMT3EP20GCLP:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:53:08.5738836+07:00 0HMT3EP20GCLP:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:53:08.5755908+07:00 0HMT3EP20GCLP:00000017 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:53:08.5774352+07:00 0HMT3EP20GCLP:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:53:08.6572808+07:00 0HMT3EP20GCLP:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:53:08.6577691+07:00 0HMT3EP20GCLP:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:53:08.6590853+07:00 0HMT3EP20GCLP:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:53:08.6614394+07:00 0HMT3EP20GCLP:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:54:03.2421190+07:00 0HMT3EP20GCLT:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:54:03.2426905+07:00 0HMT3EP20GCLT:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:54:03.2539744+07:00 0HMT3EP20GCLT:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:54:03.3592572+07:00 0HMT3EP20GCLP:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:54:03.3598651+07:00 0HMT3EP20GCLP:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:54:03.3615860+07:00 0HMT3EP20GCLP:0000001C [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:54:03.3698227+07:00 0HMT3EP20GCLQ:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:54:03.3735755+07:00 0HMT3EP20GCLQ:0000000E [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:54:03.3741984+07:00 0HMT3EP20GCLP:0000001C [INF] Executed DbCommand ("12"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:54:03.3756220+07:00 0HMT3EP20GCLQ:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:54:03.3815479+07:00 0HMT3EP20GCLQ:0000000E [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:54:03.3815973+07:00 0HMT3EP20GCLP:0000001C [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:54:03.3859847+07:00 0HMT3EP20GCLP:0000001C [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:54:03.3897830+07:00 0HMT3EP20GCLP:0000001C [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:54:03.3935900+07:00 0HMT3EP20GCLP:0000001C [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:54:03.3959146+07:00 0HMT3EP20GCLP:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:54:03.3974368+07:00 0HMT3EP20GCLP:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:54:03.3993271+07:00 0HMT3EP20GCLP:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:54:03.4963242+07:00 0HMT3EP20GCLU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:54:03.4968414+07:00 0HMT3EP20GCLU:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:54:03.4990853+07:00 0HMT3EP20GCLU:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:54:03.5360078+07:00 0HMT3EP20GCLU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:54:03.5372108+07:00 0HMT3EP20GCLU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:54:03.5396166+07:00 0HMT3EP20GCLU:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:54:05.2487519+07:00 0HMT3EP20GCLP:0000001D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:54:05.2492684+07:00 0HMT3EP20GCLP:0000001D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:54:05.2505756+07:00 0HMT3EP20GCLP:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:54:05.2519713+07:00 0HMT3EP20GCLP:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:54:05.2531486+07:00 0HMT3EP20GCLQ:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:54:05.2535095+07:00 0HMT3EP20GCLQ:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:54:05.2541902+07:00 0HMT3EP20GCLP:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:54:05.2550956+07:00 0HMT3EP20GCLQ:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:54:05.2571464+07:00 0HMT3EP20GCLP:0000001D [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:54:05.2590691+07:00 0HMT3EP20GCLQ:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:54:05.2655847+07:00 0HMT3EP20GCLP:0000001D [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:54:05.2682936+07:00 0HMT3EP20GCLP:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:54:05.2692058+07:00 0HMT3EP20GCLP:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:54:05.2699964+07:00 0HMT3EP20GCLP:0000001D [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:54:05.2707013+07:00 0HMT3EP20GCLP:0000001D [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:54:05.3284397+07:00 0HMT3EP20GCLV:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:54:05.3289539+07:00 0HMT3EP20GCLV:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:54:05.3303927+07:00 0HMT3EP20GCLV:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:54:05.3328659+07:00 0HMT3EP20GCLV:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:54:05.3332509+07:00 0HMT3EP20GCLV:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:54:05.3344574+07:00 0HMT3EP20GCLV:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:54:05.3365705+07:00 0HMT3EP20GCLV:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T08:54:05.3581698+07:00 0HMT3EP20GCLP:0000001E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:54:05.3586948+07:00 0HMT3EP20GCLP:0000001E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:54:05.3600463+07:00 0HMT3EP20GCLP:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:54:05.3620599+07:00 0HMT3EP20GCLP:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:54:05.3637249+07:00 0HMT3EP20GCLP:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:54:05.3647344+07:00 0HMT3EP20GCLP:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:54:05.3658028+07:00 0HMT3EP20GCLP:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:54:05.3671041+07:00 0HMT3EP20GCLP:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:54:05.3686000+07:00 0HMT3EP20GCLP:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:54:05.3695422+07:00 0HMT3EP20GCLP:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:54:05.3703589+07:00 0HMT3EP20GCLP:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:54:05.3747066+07:00 0HMT3EP20GCLP:0000001F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:54:05.3751672+07:00 0HMT3EP20GCLP:0000001F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:54:05.3764612+07:00 0HMT3EP20GCLP:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:54:05.3777341+07:00 0HMT3EP20GCLP:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:54:09.9487915+07:00 0HMT3EP20GCLP:00000021 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:54:09.9492814+07:00 0HMT3EP20GCLP:00000021 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:54:09.9505935+07:00 0HMT3EP20GCLP:00000021 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:54:09.9540115+07:00 0HMT3EP20GCLP:00000021 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:54:10.0602396+07:00 0HMT3EP20GCLP:00000023 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:54:10.0621821+07:00 0HMT3EP20GCLP:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:54:10.0640650+07:00 0HMT3EP20GCLP:00000023 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:54:10.0679381+07:00 0HMT3EP20GCLP:00000023 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:55:10.8035786+07:00 0HMT3EP20GCM1:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:55:10.8042526+07:00 0HMT3EP20GCM0:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:55:10.8051741+07:00 0HMT3EP20GCM1:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:55:10.8053297+07:00 0HMT3EP20GCM0:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:55:10.8138267+07:00 0HMT3EP20GCM1:00000003 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:55:10.8138266+07:00 0HMT3EP20GCM0:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:55:10.8180085+07:00 0HMT3EP20GCM0:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:55:10.8182117+07:00 0HMT3EP20GCM1:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:55:10.8264632+07:00 0HMT3EP20GCM1:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:55:10.8288355+07:00 0HMT3EP20GCM1:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:55:10.8317612+07:00 0HMT3EP20GCM1:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:55:10.8337961+07:00 0HMT3EP20GCM1:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:55:10.8348201+07:00 0HMT3EP20GCM1:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:55:10.8358613+07:00 0HMT3EP20GCM1:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:55:10.8371058+07:00 0HMT3EP20GCM1:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:55:11.8325476+07:00 0HMT3EP20GCM2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:55:11.8330655+07:00 0HMT3EP20GCM2:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:55:11.8382604+07:00 0HMT3EP20GCM2:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:55:11.8513505+07:00 0HMT3EP20GCM2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:55:11.8518314+07:00 0HMT3EP20GCM2:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:55:11.8568940+07:00 0HMT3EP20GCM2:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:55:11.8584432+07:00 0HMT3EP20GCM2:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T08:55:11.8766765+07:00 0HMT3EP20GCM0:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:55:11.8766765+07:00 0HMT3EP20GCM1:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:55:11.8771417+07:00 0HMT3EP20GCM0:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:55:11.8771417+07:00 0HMT3EP20GCM1:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:55:11.8828263+07:00 0HMT3EP20GCM1:00000004 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:55:11.8828263+07:00 0HMT3EP20GCM0:00000004 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:55:11.8855010+07:00 0HMT3EP20GCM0:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:55:11.8855011+07:00 0HMT3EP20GCM1:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:55:11.8998505+07:00 0HMT3EP20GCM1:00000004 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:55:11.9066931+07:00 0HMT3EP20GCM1:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:55:11.9077962+07:00 0HMT3EP20GCM1:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:55:11.9099462+07:00 0HMT3EP20GCM1:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:55:11.9114696+07:00 0HMT3EP20GCM1:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:55:11.9127876+07:00 0HMT3EP20GCM1:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:55:11.9142389+07:00 0HMT3EP20GCM1:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:55:33.6385981+07:00 0HMT3EP20GCLV:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:55:33.6392793+07:00 0HMT3EP20GCLV:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:55:33.6455807+07:00 0HMT3EP20GCLV:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:55:33.7864832+07:00 0HMT3EP20GCLP:00000026 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:55:33.7880575+07:00 0HMT3EP20GCLP:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:55:33.7944223+07:00 0HMT3EP20GCLP:00000026 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:55:33.7966849+07:00 0HMT3EP20GCLP:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:55:33.7977626+07:00 0HMT3EP20GCLQ:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:55:33.7991973+07:00 0HMT3EP20GCLQ:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:55:33.7996422+07:00 0HMT3EP20GCLP:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:55:33.8061193+07:00 0HMT3EP20GCLP:00000026 [INF] Executed DbCommand ("5"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:55:33.8107584+07:00 0HMT3EP20GCLQ:00000010 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:55:33.8148446+07:00 0HMT3EP20GCLQ:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:55:33.8148410+07:00 0HMT3EP20GCLP:00000026 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:55:33.8169634+07:00 0HMT3EP20GCLP:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:55:33.8178291+07:00 0HMT3EP20GCLP:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:55:33.8188524+07:00 0HMT3EP20GCLP:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:55:33.8197950+07:00 0HMT3EP20GCLP:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:55:35.1026710+07:00 0HMT3EP20GCM2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:55:35.1032052+07:00 0HMT3EP20GCM2:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:55:35.1046027+07:00 0HMT3EP20GCM2:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:55:36.0087894+07:00 0HMT3EP20GCLQ:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:55:36.0087893+07:00 0HMT3EP20GCLP:00000027 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:55:36.0093802+07:00 0HMT3EP20GCLQ:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:55:36.0093810+07:00 0HMT3EP20GCLP:00000027 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:55:36.0108976+07:00 0HMT3EP20GCLP:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:55:36.0108976+07:00 0HMT3EP20GCLQ:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:55:36.0133788+07:00 0HMT3EP20GCLP:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:55:36.0167213+07:00 0HMT3EP20GCLP:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:55:36.0220867+07:00 0HMT3EP20GCLQ:00000011 [INF] Executed DbCommand ("10"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:55:36.0527160+07:00 0HMT3EP20GCLP:00000027 [INF] Executed DbCommand ("28"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:55:36.0556650+07:00 0HMT3EP20GCLP:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:55:36.0568072+07:00 0HMT3EP20GCLP:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:55:36.0578557+07:00 0HMT3EP20GCLP:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:55:36.0589356+07:00 0HMT3EP20GCLP:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:55:36.0598172+07:00 0HMT3EP20GCLP:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:55:36.0754942+07:00 0HMT3EP20GCM5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:55:36.0760567+07:00 0HMT3EP20GCM5:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:55:36.0780451+07:00 0HMT3EP20GCM5:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:55:36.0785472+07:00 0HMT3EP20GCM5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:55:36.0789139+07:00 0HMT3EP20GCM5:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:55:36.0808039+07:00 0HMT3EP20GCM5:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:55:36.0822517+07:00 0HMT3EP20GCM5:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T08:55:36.1006206+07:00 0HMT3EP20GCLP:00000028 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:55:36.1011540+07:00 0HMT3EP20GCLP:00000028 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:55:36.1027550+07:00 0HMT3EP20GCLP:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:55:36.1037615+07:00 0HMT3EP20GCLQ:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:55:36.1049324+07:00 0HMT3EP20GCLQ:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:55:36.1049324+07:00 0HMT3EP20GCLP:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:55:36.1076356+07:00 0HMT3EP20GCLP:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:55:36.1079539+07:00 0HMT3EP20GCLQ:00000012 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:55:36.1094693+07:00 0HMT3EP20GCLP:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:55:36.1094693+07:00 0HMT3EP20GCLQ:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:55:36.1122684+07:00 0HMT3EP20GCLP:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:55:36.1134267+07:00 0HMT3EP20GCLP:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:55:36.1142943+07:00 0HMT3EP20GCLP:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:55:36.1152222+07:00 0HMT3EP20GCLP:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:55:36.1160986+07:00 0HMT3EP20GCLP:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:55:37.3658902+07:00 0HMT3EP20GCLP:0000002A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:55:37.3663985+07:00 0HMT3EP20GCLP:0000002A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:55:37.3677051+07:00 0HMT3EP20GCLP:0000002A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:55:37.3708593+07:00 0HMT3EP20GCLP:0000002A [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T08:55:37.5573770+07:00 0HMT3EP20GCLP:0000002C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:55:37.5580562+07:00 0HMT3EP20GCLP:0000002C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:55:37.5604308+07:00 0HMT3EP20GCLP:0000002C [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:55:37.5650389+07:00 0HMT3EP20GCLP:0000002C [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T08:56:34.7540118+07:00 0HMT3EP20GCM0:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:56:34.7588834+07:00 0HMT3EP20GCM0:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:56:34.7607003+07:00 0HMT3EP20GCM1:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:56:34.7623995+07:00 0HMT3EP20GCM1:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:56:34.7729555+07:00 0HMT3EP20GCM1:00000006 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:56:34.7729555+07:00 0HMT3EP20GCM0:00000006 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:56:34.7786137+07:00 0HMT3EP20GCM1:00000006 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:56:34.7797621+07:00 0HMT3EP20GCM0:00000006 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:56:34.7917590+07:00 0HMT3EP20GCM0:00000006 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:56:34.8023581+07:00 0HMT3EP20GCM0:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:56:34.8043884+07:00 0HMT3EP20GCM0:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:56:34.8058360+07:00 0HMT3EP20GCM0:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:56:34.8066103+07:00 0HMT3EP20GCM0:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:56:34.8074086+07:00 0HMT3EP20GCM0:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:56:34.8081576+07:00 0HMT3EP20GCM0:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:56:36.0682891+07:00 0HMT3EP20GCM6:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:56:36.0688404+07:00 0HMT3EP20GCM6:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:56:36.0703710+07:00 0HMT3EP20GCM6:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:56:36.0922037+07:00 0HMT3EP20GCM6:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:56:36.0927271+07:00 0HMT3EP20GCM6:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:56:36.0940063+07:00 0HMT3EP20GCM6:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:56:36.0957678+07:00 0HMT3EP20GCM6:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T08:56:36.1125849+07:00 0HMT3EP20GCM0:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:56:36.1125839+07:00 0HMT3EP20GCM1:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T08:56:36.1130372+07:00 0HMT3EP20GCM1:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:56:36.1130445+07:00 0HMT3EP20GCM0:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T08:56:36.1142767+07:00 0HMT3EP20GCM1:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:56:36.1142799+07:00 0HMT3EP20GCM0:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T08:56:36.1156788+07:00 0HMT3EP20GCM0:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:56:36.1156789+07:00 0HMT3EP20GCM1:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T08:56:36.1196382+07:00 0HMT3EP20GCM0:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T08:56:36.1205568+07:00 0HMT3EP20GCM0:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T08:56:36.1213517+07:00 0HMT3EP20GCM0:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:56:36.1221920+07:00 0HMT3EP20GCM0:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:56:36.1229948+07:00 0HMT3EP20GCM0:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T08:56:36.1238243+07:00 0HMT3EP20GCM0:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T08:56:36.1245781+07:00 0HMT3EP20GCM0:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:01:26.0539781+07:00 0HMT3EP20GCM5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:01:26.0674625+07:00 0HMT3EP20GCM5:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:01:26.0774124+07:00 0HMT3EP20GCM5:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:01:26.1794998+07:00 0HMT3EP20GCM7:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:01:26.1800478+07:00 0HMT3EP20GCM7:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:01:26.1814646+07:00 0HMT3EP20GCM7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:01:26.1871682+07:00 0HMT3EP20GCM7:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:01:26.1896845+07:00 0HMT3EP20GCM8:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:01:26.1926212+07:00 0HMT3EP20GCM8:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:01:26.1940081+07:00 0HMT3EP20GCM8:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:01:26.1944795+07:00 0HMT3EP20GCM7:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T09:01:26.1988921+07:00 0HMT3EP20GCM8:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T09:01:26.1995292+07:00 0HMT3EP20GCM7:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T09:01:26.2028852+07:00 0HMT3EP20GCM7:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:01:26.2090411+07:00 0HMT3EP20GCM7:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T09:01:26.2172908+07:00 0HMT3EP20GCM7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:01:26.2192925+07:00 0HMT3EP20GCM7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T09:01:26.2206215+07:00 0HMT3EP20GCM7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:01:26.3552807+07:00 0HMT3EP20GCM9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:01:26.3558887+07:00 0HMT3EP20GCM9:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:01:26.3584955+07:00 0HMT3EP20GCM9:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:01:26.3784588+07:00 0HMT3EP20GCM9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:01:26.3802385+07:00 0HMT3EP20GCM9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:01:26.3816097+07:00 0HMT3EP20GCM9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:01:27.1178181+07:00 0HMT3EP20GCM6:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:01:27.1235961+07:00 0HMT3EP20GCM6:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:01:27.1287053+07:00 0HMT3EP20GCM6:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:01:28.3413679+07:00 0HMT3EP20GCM7:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:01:28.3419305+07:00 0HMT3EP20GCM7:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:01:28.3434153+07:00 0HMT3EP20GCM7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:01:28.3460358+07:00 0HMT3EP20GCM7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:01:28.3476576+07:00 0HMT3EP20GCM8:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:01:28.3486342+07:00 0HMT3EP20GCM7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T09:01:28.3487050+07:00 0HMT3EP20GCM8:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:01:28.3503439+07:00 0HMT3EP20GCM7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T09:01:28.3507417+07:00 0HMT3EP20GCM8:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:01:28.3514747+07:00 0HMT3EP20GCM7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:01:28.3537027+07:00 0HMT3EP20GCM8:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T09:01:28.3542264+07:00 0HMT3EP20GCM7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T09:01:28.3559021+07:00 0HMT3EP20GCM7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:01:28.3569416+07:00 0HMT3EP20GCM7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T09:01:28.3581020+07:00 0HMT3EP20GCM7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:01:28.3980250+07:00 0HMT3EP20GCMA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:01:28.3987968+07:00 0HMT3EP20GCMA:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:01:28.4007566+07:00 0HMT3EP20GCMA:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:01:28.4304307+07:00 0HMT3EP20GCMA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:01:28.4309852+07:00 0HMT3EP20GCMA:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:01:28.4323071+07:00 0HMT3EP20GCMA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:01:28.4341676+07:00 0HMT3EP20GCMA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T09:01:28.4493449+07:00 0HMT3EP20GCM7:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:01:28.4498518+07:00 0HMT3EP20GCM7:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:01:28.4512175+07:00 0HMT3EP20GCM8:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:01:28.4517975+07:00 0HMT3EP20GCM7:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:01:28.4517976+07:00 0HMT3EP20GCM8:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:01:28.4534308+07:00 0HMT3EP20GCM7:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:01:28.4537979+07:00 0HMT3EP20GCM8:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:01:28.4558028+07:00 0HMT3EP20GCM8:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T09:01:28.4559856+07:00 0HMT3EP20GCM7:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T09:01:28.4581963+07:00 0HMT3EP20GCM7:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T09:01:28.4593609+07:00 0HMT3EP20GCM7:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:01:28.4607058+07:00 0HMT3EP20GCM7:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T09:01:28.4618333+07:00 0HMT3EP20GCM7:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:01:28.4630998+07:00 0HMT3EP20GCM7:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T09:01:28.4641879+07:00 0HMT3EP20GCM7:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:01:29.2335852+07:00 0HMT3EP20GCM7:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:01:29.2340561+07:00 0HMT3EP20GCM7:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:01:29.2352939+07:00 0HMT3EP20GCM7:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:01:29.2390453+07:00 0HMT3EP20GCM7:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T09:01:29.3434354+07:00 0HMT3EP20GCM7:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:01:29.3439167+07:00 0HMT3EP20GCM7:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:01:29.3458306+07:00 0HMT3EP20GCM7:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:01:29.3495370+07:00 0HMT3EP20GCM7:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T09:02:28.5868359+07:00 0HMT3EP20GCMA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:02:28.5877208+07:00 0HMT3EP20GCMA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:02:28.5978422+07:00 0HMT3EP20GCMA:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:02:28.6649651+07:00 0HMT3EP20GCM7:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:02:28.6655869+07:00 0HMT3EP20GCM7:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:02:28.6672138+07:00 0HMT3EP20GCM7:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:02:28.6702517+07:00 0HMT3EP20GCM8:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:02:28.6708855+07:00 0HMT3EP20GCM8:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:02:28.6711636+07:00 0HMT3EP20GCM7:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:02:28.6726947+07:00 0HMT3EP20GCM8:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:02:28.6787782+07:00 0HMT3EP20GCM8:00000006 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T09:02:28.6798991+07:00 0HMT3EP20GCM7:0000000C [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T09:02:28.6835994+07:00 0HMT3EP20GCM7:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T09:02:28.6876318+07:00 0HMT3EP20GCM7:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:02:28.6918522+07:00 0HMT3EP20GCM7:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T09:02:28.6936777+07:00 0HMT3EP20GCM7:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:02:28.6953526+07:00 0HMT3EP20GCM7:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T09:02:28.6967194+07:00 0HMT3EP20GCM7:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:02:28.7999993+07:00 0HMT3EP20GCMB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:02:28.8006845+07:00 0HMT3EP20GCMB:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:02:28.8028000+07:00 0HMT3EP20GCMB:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:02:28.8283664+07:00 0HMT3EP20GCMB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:02:28.8313428+07:00 0HMT3EP20GCMB:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:02:28.8331958+07:00 0HMT3EP20GCMB:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:02:30.4223168+07:00 0HMT3EP20GCM7:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:02:30.4230926+07:00 0HMT3EP20GCM7:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:02:30.4247752+07:00 0HMT3EP20GCM7:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:02:30.4249568+07:00 0HMT3EP20GCM8:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:02:30.4255394+07:00 0HMT3EP20GCM8:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:02:30.4262597+07:00 0HMT3EP20GCM7:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:02:30.4273992+07:00 0HMT3EP20GCM8:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:02:30.4290715+07:00 0HMT3EP20GCM8:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T09:02:30.4290753+07:00 0HMT3EP20GCM7:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T09:02:30.4322957+07:00 0HMT3EP20GCM7:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T09:02:30.4347178+07:00 0HMT3EP20GCM7:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:02:30.4362899+07:00 0HMT3EP20GCM7:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T09:02:30.4376565+07:00 0HMT3EP20GCM7:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:02:30.4389073+07:00 0HMT3EP20GCM7:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T09:02:30.4399719+07:00 0HMT3EP20GCM7:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:02:30.4461764+07:00 0HMT3EP20GCMC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:02:30.4467860+07:00 0HMT3EP20GCMC:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:02:30.4488792+07:00 0HMT3EP20GCMC:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:02:30.4538502+07:00 0HMT3EP20GCMC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:02:30.4543125+07:00 0HMT3EP20GCMC:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:02:30.4555292+07:00 0HMT3EP20GCMC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:02:30.4575460+07:00 0HMT3EP20GCMC:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T09:02:30.4843785+07:00 0HMT3EP20GCM7:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:02:30.4848870+07:00 0HMT3EP20GCM7:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:02:30.4862395+07:00 0HMT3EP20GCM7:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:02:30.4882166+07:00 0HMT3EP20GCM7:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:02:30.4882481+07:00 0HMT3EP20GCM8:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:02:30.4891887+07:00 0HMT3EP20GCM8:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:02:30.4902960+07:00 0HMT3EP20GCM7:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T09:02:30.4909743+07:00 0HMT3EP20GCM8:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:02:30.4918098+07:00 0HMT3EP20GCM7:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T09:02:30.4953083+07:00 0HMT3EP20GCM7:0000000E [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:02:30.4963720+07:00 0HMT3EP20GCM8:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T09:02:30.5067813+07:00 0HMT3EP20GCM7:0000000E [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T09:02:30.5078113+07:00 0HMT3EP20GCM7:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:02:30.5087343+07:00 0HMT3EP20GCM7:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T09:02:30.5095170+07:00 0HMT3EP20GCM7:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T09:02:32.1530182+07:00 0HMT3EP20GCM7:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:02:32.1535255+07:00 0HMT3EP20GCM7:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:02:32.1550462+07:00 0HMT3EP20GCM7:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:02:32.1586905+07:00 0HMT3EP20GCM7:00000010 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T09:02:32.2456247+07:00 0HMT3EP20GCM7:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:02:32.2460904+07:00 0HMT3EP20GCM7:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:02:32.2473958+07:00 0HMT3EP20GCM7:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:02:32.2508004+07:00 0HMT3EP20GCM7:00000012 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T09:06:34.9360669+07:00 0HMT3EP20GCMD:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:06:34.9400253+07:00 0HMT3EP20GCMD:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:06:34.9489947+07:00 0HMT3EP20GCMD:00000003 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:06:34.9525143+07:00 0HMT3EP20GCMD:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T09:06:35.2211832+07:00 0HMT3EP20GCMD:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:06:35.2216591+07:00 0HMT3EP20GCMD:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:06:35.2229197+07:00 0HMT3EP20GCMD:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:06:35.2253264+07:00 0HMT3EP20GCMD:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T09:06:35.2672517+07:00 0HMT3EP20GCMD:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:06:35.2677527+07:00 0HMT3EP20GCMD:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:06:35.2691947+07:00 0HMT3EP20GCMD:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:06:35.2727609+07:00 0HMT3EP20GCMD:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T09:06:37.5618637+07:00 0HMT3EP20GCMD:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:06:37.5623524+07:00 0HMT3EP20GCMD:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:06:37.5636028+07:00 0HMT3EP20GCMD:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:06:37.5654248+07:00 0HMT3EP20GCMD:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T09:06:38.1217041+07:00 0HMT3EP20GCMD:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:06:38.1221374+07:00 0HMT3EP20GCMD:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:06:38.1233830+07:00 0HMT3EP20GCMD:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:06:38.1252020+07:00 0HMT3EP20GCMD:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T09:06:38.1662833+07:00 0HMT3EP20GCMD:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T09:06:38.1671395+07:00 0HMT3EP20GCMD:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T09:06:38.1687655+07:00 0HMT3EP20GCMD:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T09:06:38.1711613+07:00 0HMT3EP20GCMD:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T12:36:09.6189203+07:00 0HMT3EP20GCMC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:36:09.6262281+07:00 0HMT3EP20GCMC:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:36:09.6414453+07:00 0HMT3EP20GCMC:00000002 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:36:26.6618223+07:00 0HMT3EP20GCME:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:36:26.6622757+07:00 0HMT3EP20GCMF:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:36:26.6635665+07:00 0HMT3EP20GCME:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:36:26.6659000+07:00 0HMT3EP20GCMG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:36:26.6689703+07:00 0HMT3EP20GCMF:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:36:26.6711776+07:00 0HMT3EP20GCMG:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:36:26.6753908+07:00 0HMT3EP20GCMF:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:36:26.6753908+07:00 0HMT3EP20GCME:00000003 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:36:26.6798935+07:00 0HMT3EP20GCMG:00000002 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:36:26.6822987+07:00 0HMT3EP20GCME:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:36:26.6823243+07:00 0HMT3EP20GCMF:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:36:26.6826172+07:00 0HMT3EP20GCMG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:36:26.6830049+07:00 0HMT3EP20GCMG:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:36:26.6847160+07:00 0HMT3EP20GCMG:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:36:26.6869982+07:00 0HMT3EP20GCMG:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T12:36:26.6895709+07:00 0HMT3EP20GCME:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:36:26.6943149+07:00 0HMT3EP20GCME:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:36:26.6988034+07:00 0HMT3EP20GCME:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:36:26.7022765+07:00 0HMT3EP20GCME:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:36:26.7039707+07:00 0HMT3EP20GCME:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:36:26.7051188+07:00 0HMT3EP20GCME:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:36:26.7064702+07:00 0HMT3EP20GCME:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:36:26.7425824+07:00 0HMT3EP20GCME:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:36:26.7433616+07:00 0HMT3EP20GCMF:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:36:26.7436987+07:00 0HMT3EP20GCME:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:36:26.7437847+07:00 0HMT3EP20GCMF:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:36:26.7455057+07:00 0HMT3EP20GCMF:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:36:26.7458196+07:00 0HMT3EP20GCME:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:36:26.7476757+07:00 0HMT3EP20GCME:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:36:26.7487950+07:00 0HMT3EP20GCMF:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:36:26.7533291+07:00 0HMT3EP20GCME:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:36:26.7550877+07:00 0HMT3EP20GCME:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:36:26.7566034+07:00 0HMT3EP20GCME:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:36:26.7583026+07:00 0HMT3EP20GCME:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:36:26.7593899+07:00 0HMT3EP20GCME:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:36:26.7608096+07:00 0HMT3EP20GCME:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:36:26.7618265+07:00 0HMT3EP20GCME:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:36:40.4919119+07:00 0HMT3EP20GCME:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:36:40.4928789+07:00 0HMT3EP20GCME:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:36:40.4943766+07:00 0HMT3EP20GCME:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:36:40.4982877+07:00 0HMT3EP20GCME:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:36:40.6188842+07:00 0HMT3EP20GCME:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:36:40.6197055+07:00 0HMT3EP20GCME:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:36:40.6214420+07:00 0HMT3EP20GCME:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:36:40.6258331+07:00 0HMT3EP20GCME:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T12:40:14.7032323+07:00 0HMT3EP20GCMH:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:40:14.7038090+07:00 0HMT3EP20GCMH:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:40:14.7135297+07:00 0HMT3EP20GCMH:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:40:14.7172651+07:00 0HMT3EP20GCMH:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:40:14.9165916+07:00 0HMT3EP20GCMH:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:40:14.9171470+07:00 0HMT3EP20GCMH:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:40:14.9185470+07:00 0HMT3EP20GCMH:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:40:14.9222651+07:00 0HMT3EP20GCMH:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:40:15.0105090+07:00 0HMT3EP20GCMH:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:40:15.0110187+07:00 0HMT3EP20GCMH:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:40:15.0127169+07:00 0HMT3EP20GCMH:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:40:15.0163161+07:00 0HMT3EP20GCMH:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T12:40:27.1471670+07:00 0HMT3EP20GCMG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:40:27.1542617+07:00 0HMT3EP20GCMG:00000002 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:40:27.1567225+07:00 0HMT3EP20GCMG:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:40:27.2828164+07:00 0HMT3EP20GCMH:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:40:27.2836877+07:00 0HMT3EP20GCMH:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:40:27.2874480+07:00 0HMT3EP20GCMH:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:40:27.2876834+07:00 0HMT3EP20GCMI:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:40:27.2895692+07:00 0HMT3EP20GCMI:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:40:27.2935287+07:00 0HMT3EP20GCMI:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:40:27.2941456+07:00 0HMT3EP20GCMH:0000000A [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:40:27.3011935+07:00 0HMT3EP20GCMI:00000002 [INF] Executed DbCommand ("7"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:40:27.3036517+07:00 0HMT3EP20GCMH:0000000A [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:40:27.3073035+07:00 0HMT3EP20GCMH:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:40:27.3125569+07:00 0HMT3EP20GCMH:0000000A [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:40:27.3165093+07:00 0HMT3EP20GCMH:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:40:27.3178265+07:00 0HMT3EP20GCMH:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:40:27.3192855+07:00 0HMT3EP20GCMH:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:40:27.3202659+07:00 0HMT3EP20GCMH:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:40:54.3931144+07:00 0HMT3EP20GCMJ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:40:54.3950276+07:00 0HMT3EP20GCMJ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:40:54.4146060+07:00 0HMT3EP20GCMJ:00000002 [INF] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:40:54.4150290+07:00 0HMT3EP20GCMI:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:40:54.4217181+07:00 0HMT3EP20GCMI:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:40:54.4250632+07:00 0HMT3EP20GCMI:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:40:54.4281017+07:00 0HMT3EP20GCMJ:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:40:54.4309655+07:00 0HMT3EP20GCMI:00000005 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:40:54.4366278+07:00 0HMT3EP20GCMJ:00000002 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:40:54.4442838+07:00 0HMT3EP20GCMJ:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:40:54.4465506+07:00 0HMT3EP20GCMK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:40:54.4472876+07:00 0HMT3EP20GCMK:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:40:54.4487977+07:00 0HMT3EP20GCMJ:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:40:54.4495442+07:00 0HMT3EP20GCMK:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:40:54.4523184+07:00 0HMT3EP20GCMJ:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:40:54.4542498+07:00 0HMT3EP20GCMJ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:40:54.4559999+07:00 0HMT3EP20GCMJ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:40:54.4577224+07:00 0HMT3EP20GCMJ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:40:54.4771269+07:00 0HMT3EP20GCMK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:40:54.4778805+07:00 0HMT3EP20GCMK:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:40:54.4795362+07:00 0HMT3EP20GCMK:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:40:54.4828838+07:00 0HMT3EP20GCMK:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T12:40:54.5239766+07:00 0HMT3EP20GCMI:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:40:54.5239770+07:00 0HMT3EP20GCMJ:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:40:54.5247869+07:00 0HMT3EP20GCMJ:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:40:54.5247869+07:00 0HMT3EP20GCMI:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:40:54.5263190+07:00 0HMT3EP20GCMI:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:40:54.5263613+07:00 0HMT3EP20GCMJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:40:54.5311764+07:00 0HMT3EP20GCMI:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:40:54.5311765+07:00 0HMT3EP20GCMJ:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:40:54.5518538+07:00 0HMT3EP20GCMJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:40:54.5532603+07:00 0HMT3EP20GCMJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:40:54.5543964+07:00 0HMT3EP20GCMJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:40:54.5554958+07:00 0HMT3EP20GCMJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:40:54.5565104+07:00 0HMT3EP20GCMJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:40:54.5575399+07:00 0HMT3EP20GCMJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:40:54.5589380+07:00 0HMT3EP20GCMJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:40:55.3219956+07:00 0HMT3EP20GCMJ:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:40:55.3225730+07:00 0HMT3EP20GCMJ:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:40:55.3242354+07:00 0HMT3EP20GCMJ:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:40:55.3273969+07:00 0HMT3EP20GCMJ:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:40:55.4222456+07:00 0HMT3EP20GCMJ:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:40:55.4227235+07:00 0HMT3EP20GCMJ:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:40:55.4240327+07:00 0HMT3EP20GCMJ:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:40:55.4271133+07:00 0HMT3EP20GCMJ:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T12:42:23.6234145+07:00 0HMT3EP20GCMJ:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:42:23.6240136+07:00 0HMT3EP20GCMJ:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:42:23.6324292+07:00 0HMT3EP20GCMJ:00000009 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:42:23.6374558+07:00 0HMT3EP20GCMJ:00000009 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:42:23.8276451+07:00 0HMT3EP20GCMJ:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:42:23.8281276+07:00 0HMT3EP20GCMJ:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:42:23.8294017+07:00 0HMT3EP20GCMJ:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:42:23.8315539+07:00 0HMT3EP20GCMJ:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:42:23.8801684+07:00 0HMT3EP20GCMJ:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:42:23.8807579+07:00 0HMT3EP20GCMJ:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:42:23.8826069+07:00 0HMT3EP20GCMJ:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:42:23.8859494+07:00 0HMT3EP20GCMJ:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T12:47:28.7373959+07:00 0HMT3EP20GCMK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:47:28.7433568+07:00 0HMT3EP20GCMK:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:47:28.7536509+07:00 0HMT3EP20GCMK:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:47:28.8187911+07:00 0HMT3EP20GCML:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:47:28.8191512+07:00 0HMT3EP20GCMM:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:47:28.8193529+07:00 0HMT3EP20GCML:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:47:28.8208985+07:00 0HMT3EP20GCML:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:47:28.8228935+07:00 0HMT3EP20GCMM:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:47:28.8247677+07:00 0HMT3EP20GCMM:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:47:28.8252393+07:00 0HMT3EP20GCML:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:47:28.8297695+07:00 0HMT3EP20GCMM:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:47:28.8331259+07:00 0HMT3EP20GCML:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:47:28.8357189+07:00 0HMT3EP20GCML:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:47:28.8383679+07:00 0HMT3EP20GCML:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:47:28.8410808+07:00 0HMT3EP20GCML:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:47:28.8425387+07:00 0HMT3EP20GCML:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:47:28.8436688+07:00 0HMT3EP20GCML:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:47:28.8447944+07:00 0HMT3EP20GCML:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:47:30.8346783+07:00 0HMT3EP20GCML:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:47:30.8351720+07:00 0HMT3EP20GCML:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:47:30.8372021+07:00 0HMT3EP20GCMM:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:47:30.8377594+07:00 0HMT3EP20GCMM:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:47:30.8455254+07:00 0HMT3EP20GCML:00000004 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:47:30.8507260+07:00 0HMT3EP20GCML:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:47:30.8511795+07:00 0HMT3EP20GCMM:00000004 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:47:30.8571179+07:00 0HMT3EP20GCMM:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:47:30.8583668+07:00 0HMT3EP20GCML:00000004 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:47:30.8691881+07:00 0HMT3EP20GCML:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:47:30.8740490+07:00 0HMT3EP20GCML:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:47:30.8764208+07:00 0HMT3EP20GCML:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:47:30.8793676+07:00 0HMT3EP20GCML:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:47:30.8822843+07:00 0HMT3EP20GCML:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:47:30.8859559+07:00 0HMT3EP20GCML:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:47:30.9300958+07:00 0HMT3EP20GCMO:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:47:30.9306422+07:00 0HMT3EP20GCMO:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:47:30.9445121+07:00 0HMT3EP20GCMO:00000002 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:47:30.9452848+07:00 0HMT3EP20GCMO:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:47:30.9457320+07:00 0HMT3EP20GCMO:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:47:30.9558097+07:00 0HMT3EP20GCMO:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:47:30.9592783+07:00 0HMT3EP20GCMO:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T12:47:30.9915451+07:00 0HMT3EP20GCML:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:47:30.9921263+07:00 0HMT3EP20GCML:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:47:30.9941893+07:00 0HMT3EP20GCMM:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:47:30.9947237+07:00 0HMT3EP20GCMM:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:47:31.0038773+07:00 0HMT3EP20GCML:00000005 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:47:31.0080488+07:00 0HMT3EP20GCML:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:47:31.0081703+07:00 0HMT3EP20GCMM:00000005 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:47:31.0117131+07:00 0HMT3EP20GCMM:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:47:31.0147206+07:00 0HMT3EP20GCML:00000005 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:47:31.0191758+07:00 0HMT3EP20GCML:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:47:31.0233864+07:00 0HMT3EP20GCML:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:47:31.0272219+07:00 0HMT3EP20GCML:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:47:31.0328327+07:00 0HMT3EP20GCML:00000005 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:47:31.0342791+07:00 0HMT3EP20GCML:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:47:31.0357911+07:00 0HMT3EP20GCML:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:47:31.8320255+07:00 0HMT3EP20GCML:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:47:31.8329641+07:00 0HMT3EP20GCML:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:47:31.8436141+07:00 0HMT3EP20GCML:00000007 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:47:31.8481380+07:00 0HMT3EP20GCML:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:47:32.2556250+07:00 0HMT3EP20GCML:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:47:32.2563722+07:00 0HMT3EP20GCML:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:47:32.2577527+07:00 0HMT3EP20GCML:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:47:32.2610587+07:00 0HMT3EP20GCML:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T12:48:25.1392199+07:00 0HMT3EP20GCMO:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:48:25.1495226+07:00 0HMT3EP20GCMO:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:48:25.1556768+07:00 0HMT3EP20GCMO:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:48:25.1811512+07:00 0HMT3EP20GCML:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:48:25.1819361+07:00 0HMT3EP20GCML:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:48:25.1842246+07:00 0HMT3EP20GCML:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:48:25.1877141+07:00 0HMT3EP20GCMM:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:48:25.1882620+07:00 0HMT3EP20GCMM:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:48:25.1883413+07:00 0HMT3EP20GCML:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:48:25.1901358+07:00 0HMT3EP20GCMM:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:48:25.1934110+07:00 0HMT3EP20GCMM:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:48:25.1938511+07:00 0HMT3EP20GCML:0000000C [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:48:25.1970063+07:00 0HMT3EP20GCML:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:48:25.1989926+07:00 0HMT3EP20GCML:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:48:25.2005577+07:00 0HMT3EP20GCML:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:48:25.2017383+07:00 0HMT3EP20GCML:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:48:25.2031743+07:00 0HMT3EP20GCML:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:48:25.2047310+07:00 0HMT3EP20GCML:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:48:25.3167995+07:00 0HMT3EP20GCMP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:48:25.3174529+07:00 0HMT3EP20GCMP:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:48:25.3194697+07:00 0HMT3EP20GCMP:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:48:25.3344584+07:00 0HMT3EP20GCMP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:48:25.3351488+07:00 0HMT3EP20GCMP:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:48:25.3365877+07:00 0HMT3EP20GCMP:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:48:25.3389934+07:00 0HMT3EP20GCMP:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T12:48:25.3873221+07:00 0HMT3EP20GCMM:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:48:25.3873220+07:00 0HMT3EP20GCML:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:48:25.3882843+07:00 0HMT3EP20GCML:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:48:25.3882776+07:00 0HMT3EP20GCMM:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:48:25.3900893+07:00 0HMT3EP20GCMM:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:48:25.3901900+07:00 0HMT3EP20GCML:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:48:25.3917820+07:00 0HMT3EP20GCML:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:48:25.3918723+07:00 0HMT3EP20GCMM:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:48:25.3957323+07:00 0HMT3EP20GCML:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:48:25.3970723+07:00 0HMT3EP20GCML:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:48:25.3985576+07:00 0HMT3EP20GCML:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:48:25.4000202+07:00 0HMT3EP20GCML:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:48:25.4013160+07:00 0HMT3EP20GCML:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:48:25.4028752+07:00 0HMT3EP20GCML:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:48:25.4041100+07:00 0HMT3EP20GCML:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:48:25.4042388+07:00 0HMT3EP20GCMQ:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:48:25.4047573+07:00 0HMT3EP20GCMQ:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:48:25.4064875+07:00 0HMT3EP20GCMQ:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:48:25.4231471+07:00 0HMT3EP20GCMQ:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-23T12:48:25.4302047+07:00 0HMT3EP20GCMQ:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__message_CreatedTime_0='?' (DbType = DateTime2), @__message_Id_1='?' (Size = 100), @__message_ChatRoomId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE (([m].[CreatedTime] >= @__message_CreatedTime_0) AND ([m].[Id] <> @__message_Id_1)) AND ([m].[ChatRoomId] = @__message_ChatRoomId_2)" (0723d8ff)
2023-08-23T12:48:25.4745325+07:00 0HMT3EP20GCMP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:48:25.4751672+07:00 0HMT3EP20GCMP:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:48:25.4774350+07:00 0HMT3EP20GCMP:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:48:25.5424572+07:00 0HMT3EP20GCML:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:48:25.5430419+07:00 0HMT3EP20GCML:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:48:25.5445432+07:00 0HMT3EP20GCML:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:48:25.5450108+07:00 0HMT3EP20GCMM:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:48:25.5464657+07:00 0HMT3EP20GCMM:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:48:25.5464732+07:00 0HMT3EP20GCML:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:48:25.5485320+07:00 0HMT3EP20GCMM:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:48:25.5486137+07:00 0HMT3EP20GCML:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:48:25.5496922+07:00 0HMT3EP20GCMM:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:48:25.5496914+07:00 0HMT3EP20GCML:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:48:25.5521133+07:00 0HMT3EP20GCML:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:48:25.5533178+07:00 0HMT3EP20GCML:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:48:25.5542480+07:00 0HMT3EP20GCML:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:48:25.5555396+07:00 0HMT3EP20GCML:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:48:25.5564735+07:00 0HMT3EP20GCML:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:48:27.3532779+07:00 0HMT3EP20GCMQ:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:48:27.3532768+07:00 0HMT3EP20GCML:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:48:27.3538284+07:00 0HMT3EP20GCMQ:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:48:27.3538283+07:00 0HMT3EP20GCML:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:48:27.3553350+07:00 0HMT3EP20GCML:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:48:27.3552546+07:00 0HMT3EP20GCMQ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:48:27.3570474+07:00 0HMT3EP20GCMQ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:48:27.3570475+07:00 0HMT3EP20GCML:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:48:27.3637780+07:00 0HMT3EP20GCML:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:48:27.3654318+07:00 0HMT3EP20GCML:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:48:27.3666983+07:00 0HMT3EP20GCML:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:48:27.3675758+07:00 0HMT3EP20GCML:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:48:27.3687292+07:00 0HMT3EP20GCML:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:48:27.3697353+07:00 0HMT3EP20GCML:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:48:27.3706086+07:00 0HMT3EP20GCML:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:48:27.3906579+07:00 0HMT3EP20GCMS:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:48:27.3914771+07:00 0HMT3EP20GCMS:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:48:27.3928659+07:00 0HMT3EP20GCMS:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:48:27.3933878+07:00 0HMT3EP20GCMS:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:48:27.3936573+07:00 0HMT3EP20GCMS:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:48:27.3949849+07:00 0HMT3EP20GCMS:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:48:27.3965832+07:00 0HMT3EP20GCMS:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T12:48:27.4169302+07:00 0HMT3EP20GCMM:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:48:27.4169304+07:00 0HMT3EP20GCML:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:48:27.4175429+07:00 0HMT3EP20GCMM:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:48:27.4175429+07:00 0HMT3EP20GCML:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:48:27.4188055+07:00 0HMT3EP20GCMM:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:48:27.4188085+07:00 0HMT3EP20GCML:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:48:27.4206107+07:00 0HMT3EP20GCMM:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:48:27.4207032+07:00 0HMT3EP20GCML:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:48:27.4251774+07:00 0HMT3EP20GCML:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:48:27.4263065+07:00 0HMT3EP20GCML:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:48:27.4272843+07:00 0HMT3EP20GCML:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:48:27.4282165+07:00 0HMT3EP20GCML:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:48:27.4290024+07:00 0HMT3EP20GCML:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:48:27.4298246+07:00 0HMT3EP20GCML:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:48:27.4305842+07:00 0HMT3EP20GCML:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:48:28.2313552+07:00 0HMT3EP20GCML:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:48:28.2318964+07:00 0HMT3EP20GCML:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:48:28.2331564+07:00 0HMT3EP20GCML:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:48:28.2346685+07:00 0HMT3EP20GCML:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:48:28.5785283+07:00 0HMT3EP20GCML:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:48:28.5791941+07:00 0HMT3EP20GCML:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:48:28.5806503+07:00 0HMT3EP20GCML:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:48:28.5830141+07:00 0HMT3EP20GCML:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T12:48:29.5836784+07:00 0HMT3EP20GCML:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:48:29.5842670+07:00 0HMT3EP20GCML:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:48:29.5857272+07:00 0HMT3EP20GCML:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:48:29.5877293+07:00 0HMT3EP20GCML:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:48:29.8219489+07:00 0HMT3EP20GCML:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:48:29.8224592+07:00 0HMT3EP20GCML:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:48:29.8240948+07:00 0HMT3EP20GCML:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:48:29.8263954+07:00 0HMT3EP20GCML:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:48:29.9885143+07:00 0HMT3EP20GCML:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:48:29.9890998+07:00 0HMT3EP20GCML:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:48:29.9905045+07:00 0HMT3EP20GCML:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:48:29.9928245+07:00 0HMT3EP20GCML:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T12:51:47.9469940+07:00 0HMT3EP20GCMS:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:51:47.9476498+07:00 0HMT3EP20GCMS:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:51:47.9579723+07:00 0HMT3EP20GCMS:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:51:47.9887057+07:00 0HMT3EP20GCMT:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:51:47.9892260+07:00 0HMT3EP20GCMT:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:51:47.9913530+07:00 0HMT3EP20GCMT:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:51:47.9958779+07:00 0HMT3EP20GCMU:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:51:47.9965893+07:00 0HMT3EP20GCMU:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:51:47.9969981+07:00 0HMT3EP20GCMT:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:51:47.9981665+07:00 0HMT3EP20GCMU:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:51:48.0020055+07:00 0HMT3EP20GCMU:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:51:48.0024645+07:00 0HMT3EP20GCMT:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:51:48.0058014+07:00 0HMT3EP20GCMT:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:51:48.0088265+07:00 0HMT3EP20GCMT:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:51:48.0110359+07:00 0HMT3EP20GCMT:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:51:48.0119899+07:00 0HMT3EP20GCMT:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:51:48.0128858+07:00 0HMT3EP20GCMT:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:51:48.0137591+07:00 0HMT3EP20GCMT:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:51:48.1020206+07:00 0HMT3EP20GCMV:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:51:48.1025812+07:00 0HMT3EP20GCMV:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:51:48.1039959+07:00 0HMT3EP20GCMV:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:51:48.1214908+07:00 0HMT3EP20GCMV:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:51:48.1221475+07:00 0HMT3EP20GCMV:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:51:48.1238684+07:00 0HMT3EP20GCMV:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:51:49.8065576+07:00 0HMT3EP20GCMT:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:51:49.8065578+07:00 0HMT3EP20GCMU:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:51:49.8071187+07:00 0HMT3EP20GCMT:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:51:49.8071186+07:00 0HMT3EP20GCMU:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:51:49.8188782+07:00 0HMT3EP20GCMT:00000004 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:51:49.8227255+07:00 0HMT3EP20GCMT:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:51:49.8228870+07:00 0HMT3EP20GCMU:00000004 [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:51:49.8261933+07:00 0HMT3EP20GCMU:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:51:49.8286199+07:00 0HMT3EP20GCMT:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:51:49.8314437+07:00 0HMT3EP20GCMT:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:51:49.8352779+07:00 0HMT3EP20GCMT:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:51:49.8382193+07:00 0HMT3EP20GCMT:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:51:49.8415766+07:00 0HMT3EP20GCMT:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:51:49.8445801+07:00 0HMT3EP20GCMT:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:51:49.8497383+07:00 0HMT3EP20GCMT:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:51:49.9123956+07:00 0HMT3EP20GCN0:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:51:49.9131369+07:00 0HMT3EP20GCN0:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:51:49.9256221+07:00 0HMT3EP20GCN0:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:51:49.9387301+07:00 0HMT3EP20GCN0:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:51:49.9396818+07:00 0HMT3EP20GCN0:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:51:49.9416551+07:00 0HMT3EP20GCN0:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:51:49.9440174+07:00 0HMT3EP20GCN0:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T12:51:49.9647901+07:00 0HMT3EP20GCMU:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:51:49.9647902+07:00 0HMT3EP20GCMT:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:51:49.9654338+07:00 0HMT3EP20GCMT:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:51:49.9654338+07:00 0HMT3EP20GCMU:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:51:49.9757376+07:00 0HMT3EP20GCMU:00000005 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:51:49.9800623+07:00 0HMT3EP20GCMU:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:51:49.9810600+07:00 0HMT3EP20GCMT:00000005 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:51:49.9847908+07:00 0HMT3EP20GCMT:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:51:49.9894823+07:00 0HMT3EP20GCMT:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:51:49.9915637+07:00 0HMT3EP20GCMT:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:51:49.9954485+07:00 0HMT3EP20GCMT:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:51:49.9984101+07:00 0HMT3EP20GCMT:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:51:50.0042556+07:00 0HMT3EP20GCMT:00000005 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:51:50.0077252+07:00 0HMT3EP20GCMT:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:51:50.0110983+07:00 0HMT3EP20GCMT:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:51:51.0750076+07:00 0HMT3EP20GCMT:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:51:51.0755205+07:00 0HMT3EP20GCMT:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:51:51.0838377+07:00 0HMT3EP20GCMT:00000007 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:51:51.0880379+07:00 0HMT3EP20GCMT:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:51:51.4587070+07:00 0HMT3EP20GCMT:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:51:51.4593529+07:00 0HMT3EP20GCMT:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:51:51.4679145+07:00 0HMT3EP20GCMT:00000009 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:51:51.4708230+07:00 0HMT3EP20GCMT:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T12:53:04.5203088+07:00 0HMT3EP20GCMT:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:04.5208995+07:00 0HMT3EP20GCMT:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:04.5318727+07:00 0HMT3EP20GCMT:0000000B [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:04.5353181+07:00 0HMT3EP20GCMT:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:53:05.0753209+07:00 0HMT3EP20GCMT:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:05.0758733+07:00 0HMT3EP20GCMT:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:05.0771927+07:00 0HMT3EP20GCMT:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:05.0786495+07:00 0HMT3EP20GCMT:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:53:05.1250434+07:00 0HMT3EP20GCMT:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:05.1256637+07:00 0HMT3EP20GCMT:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:05.1271744+07:00 0HMT3EP20GCMT:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:05.1302337+07:00 0HMT3EP20GCMT:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T12:53:28.6488366+07:00 0HMT3EP20GCMT:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:28.6493460+07:00 0HMT3EP20GCMT:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:28.6508056+07:00 0HMT3EP20GCMT:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:28.6525977+07:00 0HMT3EP20GCMT:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:53:29.6365095+07:00 0HMT3EP20GCMT:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:29.6369873+07:00 0HMT3EP20GCMT:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:29.6382906+07:00 0HMT3EP20GCMT:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:29.6402264+07:00 0HMT3EP20GCMT:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:53:29.6799877+07:00 0HMT3EP20GCMT:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:29.6805411+07:00 0HMT3EP20GCMT:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:29.6824662+07:00 0HMT3EP20GCMT:00000015 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:29.6854623+07:00 0HMT3EP20GCMT:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T12:53:33.6276812+07:00 0HMT3EP20GCN0:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:33.6312398+07:00 0HMT3EP20GCN0:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:33.6333895+07:00 0HMT3EP20GCN0:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:33.6719496+07:00 0HMT3EP20GCMT:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:33.6724437+07:00 0HMT3EP20GCMT:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:33.6739406+07:00 0HMT3EP20GCMT:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:33.6751274+07:00 0HMT3EP20GCMU:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:33.6777534+07:00 0HMT3EP20GCMU:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:33.6829810+07:00 0HMT3EP20GCMU:00000007 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:33.6830102+07:00 0HMT3EP20GCMT:00000017 [INF] Executed DbCommand ("9"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:33.6927780+07:00 0HMT3EP20GCMT:00000017 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:53:33.6931826+07:00 0HMT3EP20GCMU:00000007 [INF] Executed DbCommand ("7"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:53:33.6963644+07:00 0HMT3EP20GCMT:00000017 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:53:33.7002731+07:00 0HMT3EP20GCMT:00000017 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:33.7035729+07:00 0HMT3EP20GCMT:00000017 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:33.7049391+07:00 0HMT3EP20GCMT:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:33.7058693+07:00 0HMT3EP20GCMT:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:33.7066735+07:00 0HMT3EP20GCMT:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:33.7694543+07:00 0HMT3EP20GCN1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:33.7701234+07:00 0HMT3EP20GCN1:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:33.7719524+07:00 0HMT3EP20GCN1:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:33.8102682+07:00 0HMT3EP20GCN1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:33.8119053+07:00 0HMT3EP20GCN1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:33.8135891+07:00 0HMT3EP20GCN1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:35.4778551+07:00 0HMT3EP20GCMT:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:35.4783985+07:00 0HMT3EP20GCMT:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:35.4792327+07:00 0HMT3EP20GCMU:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:35.4796000+07:00 0HMT3EP20GCMU:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:35.4797011+07:00 0HMT3EP20GCMT:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:35.4811637+07:00 0HMT3EP20GCMU:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:35.4812483+07:00 0HMT3EP20GCMT:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:35.4843494+07:00 0HMT3EP20GCMU:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:53:35.4862784+07:00 0HMT3EP20GCMT:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:53:35.4887938+07:00 0HMT3EP20GCMT:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:53:35.4902789+07:00 0HMT3EP20GCMT:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:35.4915972+07:00 0HMT3EP20GCMT:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:35.4925635+07:00 0HMT3EP20GCMT:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:35.4934684+07:00 0HMT3EP20GCMT:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:35.4942384+07:00 0HMT3EP20GCMT:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:35.5248813+07:00 0HMT3EP20GCN2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:35.5258187+07:00 0HMT3EP20GCN2:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:35.5276237+07:00 0HMT3EP20GCN2:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:35.5494940+07:00 0HMT3EP20GCN2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:35.5501229+07:00 0HMT3EP20GCN2:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:35.5520347+07:00 0HMT3EP20GCN2:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:35.5558194+07:00 0HMT3EP20GCN2:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T12:53:35.5692466+07:00 0HMT3EP20GCMT:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:35.5699182+07:00 0HMT3EP20GCMT:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:35.5721710+07:00 0HMT3EP20GCMT:00000019 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:35.5723118+07:00 0HMT3EP20GCMU:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:35.5727143+07:00 0HMT3EP20GCMU:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:35.5737892+07:00 0HMT3EP20GCMT:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:35.5745417+07:00 0HMT3EP20GCMU:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:35.5773366+07:00 0HMT3EP20GCMT:00000019 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:53:35.5772605+07:00 0HMT3EP20GCMU:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:53:35.5878497+07:00 0HMT3EP20GCMT:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:53:35.5888118+07:00 0HMT3EP20GCMT:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:35.5896524+07:00 0HMT3EP20GCMT:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:35.5907886+07:00 0HMT3EP20GCMT:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:35.5918003+07:00 0HMT3EP20GCMT:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:35.5926561+07:00 0HMT3EP20GCMT:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:36.4977038+07:00 0HMT3EP20GCMT:0000001B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:36.4982701+07:00 0HMT3EP20GCMT:0000001B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:36.4997920+07:00 0HMT3EP20GCMT:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:36.5019964+07:00 0HMT3EP20GCMT:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:53:36.7690094+07:00 0HMT3EP20GCMT:0000001D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:36.7694913+07:00 0HMT3EP20GCMT:0000001D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:36.7708284+07:00 0HMT3EP20GCMT:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:36.7726962+07:00 0HMT3EP20GCMT:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T12:53:43.8688666+07:00 0HMT3EP20GCMT:0000001F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:43.8693890+07:00 0HMT3EP20GCMT:0000001F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:43.8708828+07:00 0HMT3EP20GCMT:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:43.8728246+07:00 0HMT3EP20GCMT:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:53:44.1735338+07:00 0HMT3EP20GCMT:00000021 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:44.1741947+07:00 0HMT3EP20GCMT:00000021 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:44.1756383+07:00 0HMT3EP20GCMT:00000021 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:44.1773428+07:00 0HMT3EP20GCMT:00000021 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:53:44.2240801+07:00 0HMT3EP20GCMT:00000023 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:44.2246112+07:00 0HMT3EP20GCMT:00000023 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:44.2259303+07:00 0HMT3EP20GCMT:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:44.2280923+07:00 0HMT3EP20GCMT:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T12:53:45.7929497+07:00 0HMT3EP20GCN2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:45.7934017+07:00 0HMT3EP20GCN2:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:45.7951144+07:00 0HMT3EP20GCN2:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:45.8211680+07:00 0HMT3EP20GCMT:00000025 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:45.8218390+07:00 0HMT3EP20GCMT:00000025 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:45.8234970+07:00 0HMT3EP20GCMT:00000025 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:45.8260166+07:00 0HMT3EP20GCMT:00000025 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:45.8272314+07:00 0HMT3EP20GCMU:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:45.8277355+07:00 0HMT3EP20GCMU:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:45.8279998+07:00 0HMT3EP20GCMT:00000025 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:53:45.8289219+07:00 0HMT3EP20GCMT:00000025 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:53:45.8292171+07:00 0HMT3EP20GCMU:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:45.8297646+07:00 0HMT3EP20GCMT:00000025 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:45.8306193+07:00 0HMT3EP20GCMU:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:53:45.8307165+07:00 0HMT3EP20GCMT:00000025 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:45.8329739+07:00 0HMT3EP20GCMT:00000025 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:45.8339068+07:00 0HMT3EP20GCMT:00000025 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:45.8351163+07:00 0HMT3EP20GCMT:00000025 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:45.9540836+07:00 0HMT3EP20GCN3:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:45.9550452+07:00 0HMT3EP20GCN3:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:45.9570994+07:00 0HMT3EP20GCN3:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:45.9742559+07:00 0HMT3EP20GCN3:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:45.9748055+07:00 0HMT3EP20GCN3:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:45.9762027+07:00 0HMT3EP20GCN3:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:45.9774745+07:00 0HMT3EP20GCN3:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T12:53:45.9935587+07:00 0HMT3EP20GCN3:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:45.9942985+07:00 0HMT3EP20GCN3:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:45.9964284+07:00 0HMT3EP20GCN3:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:46.0565087+07:00 0HMT3EP20GCMT:00000026 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:46.0565557+07:00 0HMT3EP20GCMU:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:46.0570009+07:00 0HMT3EP20GCMT:00000026 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:46.0570072+07:00 0HMT3EP20GCMU:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:46.0584944+07:00 0HMT3EP20GCMU:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:46.0585488+07:00 0HMT3EP20GCMT:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:46.0607658+07:00 0HMT3EP20GCMU:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:53:46.0607660+07:00 0HMT3EP20GCMT:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:46.0929385+07:00 0HMT3EP20GCMT:00000026 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:53:46.0934650+07:00 0HMT3EP20GCN4:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:46.1202259+07:00 0HMT3EP20GCN4:00000003 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:46.1378241+07:00 0HMT3EP20GCN4:00000003 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:46.1514282+07:00 0HMT3EP20GCMT:00000026 [INF] Executed DbCommand ("13"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:53:46.1551574+07:00 0HMT3EP20GCN6:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:46.1709182+07:00 0HMT3EP20GCN4:00000003 [INF] Executed DbCommand ("15"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-23T12:53:46.1898237+07:00 0HMT3EP20GCN7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:46.1944041+07:00 0HMT3EP20GCN6:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:46.1951861+07:00 0HMT3EP20GCN7:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:46.1998855+07:00 0HMT3EP20GCN6:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:46.2022210+07:00 0HMT3EP20GCN7:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:46.2022624+07:00 0HMT3EP20GCMT:00000026 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:46.2123147+07:00 0HMT3EP20GCN7:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:53:46.2123001+07:00 0HMT3EP20GCMT:00000026 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:46.2174221+07:00 0HMT3EP20GCN6:00000002 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:46.2350114+07:00 0HMT3EP20GCMT:00000026 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:46.2350114+07:00 0HMT3EP20GCN4:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__message_CreatedTime_0='?' (DbType = DateTime2), @__message_Id_1='?' (Size = 100), @__message_ChatRoomId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE (([m].[CreatedTime] >= @__message_CreatedTime_0) AND ([m].[Id] <> @__message_Id_1)) AND ([m].[ChatRoomId] = @__message_ChatRoomId_2)" (0723d8ff)
2023-08-23T12:53:46.2488129+07:00 0HMT3EP20GCN6:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:53:46.3000506+07:00 0HMT3EP20GCMT:00000026 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:46.3639313+07:00 0HMT3EP20GCN6:00000002 [INF] Executed DbCommand ("20"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:53:46.3640260+07:00 0HMT3EP20GCMT:00000026 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:46.4715279+07:00 0HMT3EP20GCN6:00000002 [INF] Executed DbCommand ("19"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:46.4891903+07:00 0HMT3EP20GCN6:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:46.4904251+07:00 0HMT3EP20GCN6:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:46.4916330+07:00 0HMT3EP20GCN6:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:46.4927923+07:00 0HMT3EP20GCN6:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:47.9672969+07:00 0HMT3EP20GCN8:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:47.9679505+07:00 0HMT3EP20GCN8:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:47.9694136+07:00 0HMT3EP20GCN8:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:47.9711163+07:00 0HMT3EP20GCN8:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:47.9738102+07:00 0HMT3EP20GCN8:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:53:47.9744505+07:00 0HMT3EP20GCN9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:47.9748957+07:00 0HMT3EP20GCN8:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:53:47.9751784+07:00 0HMT3EP20GCN9:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:47.9757517+07:00 0HMT3EP20GCN8:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:47.9766602+07:00 0HMT3EP20GCN8:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:47.9768995+07:00 0HMT3EP20GCN9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:47.9776533+07:00 0HMT3EP20GCN8:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:47.9790115+07:00 0HMT3EP20GCN9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:53:47.9790891+07:00 0HMT3EP20GCN8:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:47.9830292+07:00 0HMT3EP20GCN8:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:48.0304856+07:00 0HMT3EP20GCNA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:48.0309761+07:00 0HMT3EP20GCNA:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:48.0323982+07:00 0HMT3EP20GCNA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:48.0524024+07:00 0HMT3EP20GCNA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:48.0528573+07:00 0HMT3EP20GCNA:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:48.0542218+07:00 0HMT3EP20GCNA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:48.0553554+07:00 0HMT3EP20GCNA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T12:53:48.0747725+07:00 0HMT3EP20GCN8:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:48.0754146+07:00 0HMT3EP20GCN8:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:48.0769938+07:00 0HMT3EP20GCN8:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:48.0798822+07:00 0HMT3EP20GCN8:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:48.0820377+07:00 0HMT3EP20GCN8:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:53:48.0838543+07:00 0HMT3EP20GCN8:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:53:48.0849467+07:00 0HMT3EP20GCN8:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:48.0861116+07:00 0HMT3EP20GCN8:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:48.0876397+07:00 0HMT3EP20GCN8:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:48.0893267+07:00 0HMT3EP20GCN8:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:48.0905991+07:00 0HMT3EP20GCN8:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:48.0979836+07:00 0HMT3EP20GCN8:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:48.0984348+07:00 0HMT3EP20GCN8:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:48.0998207+07:00 0HMT3EP20GCN8:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:48.1014262+07:00 0HMT3EP20GCN8:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:53:48.9357959+07:00 0HMT3EP20GCNA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:48.9363767+07:00 0HMT3EP20GCNA:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:48.9378591+07:00 0HMT3EP20GCNA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:48.9628892+07:00 0HMT3EP20GCN9:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:48.9628894+07:00 0HMT3EP20GCN8:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:48.9633975+07:00 0HMT3EP20GCN9:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:48.9634791+07:00 0HMT3EP20GCN8:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:48.9648301+07:00 0HMT3EP20GCN8:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:48.9648868+07:00 0HMT3EP20GCN9:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:48.9666330+07:00 0HMT3EP20GCN8:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:48.9666415+07:00 0HMT3EP20GCN9:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:53:48.9731477+07:00 0HMT3EP20GCN8:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:53:48.9745864+07:00 0HMT3EP20GCN8:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:53:48.9755041+07:00 0HMT3EP20GCN8:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:48.9764686+07:00 0HMT3EP20GCN8:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:48.9772427+07:00 0HMT3EP20GCN8:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:48.9780644+07:00 0HMT3EP20GCN8:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:48.9788122+07:00 0HMT3EP20GCN8:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:48.9965596+07:00 0HMT3EP20GCNB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:48.9974862+07:00 0HMT3EP20GCNB:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:48.9994619+07:00 0HMT3EP20GCNB:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:49.0628643+07:00 0HMT3EP20GCNB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:49.0636915+07:00 0HMT3EP20GCNB:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:49.0655050+07:00 0HMT3EP20GCNB:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:49.0670773+07:00 0HMT3EP20GCNB:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T12:53:49.0686892+07:00 0HMT3EP20GCN8:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:49.0690335+07:00 0HMT3EP20GCN9:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:49.0692835+07:00 0HMT3EP20GCN8:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:49.0694480+07:00 0HMT3EP20GCN9:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:49.0710227+07:00 0HMT3EP20GCN9:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:49.0710642+07:00 0HMT3EP20GCN8:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:49.0729152+07:00 0HMT3EP20GCN9:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:53:49.0729148+07:00 0HMT3EP20GCN8:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:49.0783053+07:00 0HMT3EP20GCN8:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:53:49.0797301+07:00 0HMT3EP20GCN8:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:53:49.0809574+07:00 0HMT3EP20GCN8:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:49.0821299+07:00 0HMT3EP20GCN8:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:49.0829084+07:00 0HMT3EP20GCN8:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:49.0837160+07:00 0HMT3EP20GCN8:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:49.0843452+07:00 0HMT3EP20GCN8:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:49.1855872+07:00 0HMT3EP20GCNB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:49.1860468+07:00 0HMT3EP20GCNB:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:49.1873213+07:00 0HMT3EP20GCNB:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:49.2451441+07:00 0HMT3EP20GCN8:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:49.2452587+07:00 0HMT3EP20GCN9:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:49.2457618+07:00 0HMT3EP20GCN8:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:49.2457620+07:00 0HMT3EP20GCN9:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:49.2470250+07:00 0HMT3EP20GCN9:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:49.2470319+07:00 0HMT3EP20GCN8:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:49.2489842+07:00 0HMT3EP20GCN9:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:53:49.2489888+07:00 0HMT3EP20GCN8:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:49.2540727+07:00 0HMT3EP20GCN8:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:53:49.2574528+07:00 0HMT3EP20GCN8:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:53:49.2588214+07:00 0HMT3EP20GCN8:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:49.2599247+07:00 0HMT3EP20GCN8:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:49.2609871+07:00 0HMT3EP20GCN8:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:49.2622341+07:00 0HMT3EP20GCN8:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:49.2635393+07:00 0HMT3EP20GCN8:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:50.8786731+07:00 0HMT3EP20GCN9:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:50.8792547+07:00 0HMT3EP20GCN9:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:50.8806729+07:00 0HMT3EP20GCN9:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:50.8823664+07:00 0HMT3EP20GCN9:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:50.8837171+07:00 0HMT3EP20GCND:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:50.8845853+07:00 0HMT3EP20GCND:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:50.8849114+07:00 0HMT3EP20GCN9:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:53:50.8861655+07:00 0HMT3EP20GCN9:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:53:50.8869741+07:00 0HMT3EP20GCND:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:50.8872498+07:00 0HMT3EP20GCN9:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:50.8885313+07:00 0HMT3EP20GCN9:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:50.8885476+07:00 0HMT3EP20GCND:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:53:50.8910771+07:00 0HMT3EP20GCN9:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:50.8922164+07:00 0HMT3EP20GCN9:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:50.8930838+07:00 0HMT3EP20GCN9:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:50.9567501+07:00 0HMT3EP20GCNE:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:50.9576230+07:00 0HMT3EP20GCNE:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:50.9599806+07:00 0HMT3EP20GCNE:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:50.9729121+07:00 0HMT3EP20GCNE:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:50.9741772+07:00 0HMT3EP20GCNE:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:50.9766917+07:00 0HMT3EP20GCNE:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:50.9783341+07:00 0HMT3EP20GCNE:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T12:53:50.9921423+07:00 0HMT3EP20GCN9:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:50.9928259+07:00 0HMT3EP20GCN9:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:50.9944786+07:00 0HMT3EP20GCN9:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:50.9948811+07:00 0HMT3EP20GCND:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:50.9954322+07:00 0HMT3EP20GCND:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:50.9960182+07:00 0HMT3EP20GCN9:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:50.9974979+07:00 0HMT3EP20GCND:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:50.9984633+07:00 0HMT3EP20GCN9:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:53:50.9991373+07:00 0HMT3EP20GCND:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:53:51.0016216+07:00 0HMT3EP20GCN9:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:53:51.0030023+07:00 0HMT3EP20GCN9:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:51.0046340+07:00 0HMT3EP20GCN9:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:51.0056348+07:00 0HMT3EP20GCN9:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:51.0065432+07:00 0HMT3EP20GCN9:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:53:51.0074237+07:00 0HMT3EP20GCN9:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:53:51.8766642+07:00 0HMT3EP20GCN9:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:51.8771135+07:00 0HMT3EP20GCN9:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:51.8783489+07:00 0HMT3EP20GCN9:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:51.8796443+07:00 0HMT3EP20GCN9:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:53:51.9863709+07:00 0HMT3EP20GCN9:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:53:51.9868561+07:00 0HMT3EP20GCN9:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:53:51.9881421+07:00 0HMT3EP20GCN9:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:53:51.9899560+07:00 0HMT3EP20GCN9:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T12:54:00.9528404+07:00 0HMT3EP20GCNE:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:54:00.9533323+07:00 0HMT3EP20GCNE:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:54:00.9547187+07:00 0HMT3EP20GCNE:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:54:01.0187117+07:00 0HMT3EP20GCN9:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:54:01.0192969+07:00 0HMT3EP20GCN9:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:54:01.0207585+07:00 0HMT3EP20GCN9:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:54:01.0220666+07:00 0HMT3EP20GCN9:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:54:01.0246026+07:00 0HMT3EP20GCND:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:54:01.0246041+07:00 0HMT3EP20GCN9:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:54:01.0250227+07:00 0HMT3EP20GCND:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:54:01.0257207+07:00 0HMT3EP20GCN9:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:54:01.0266160+07:00 0HMT3EP20GCND:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:54:01.0267369+07:00 0HMT3EP20GCN9:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:54:01.0279084+07:00 0HMT3EP20GCND:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:54:01.0286912+07:00 0HMT3EP20GCN9:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:54:01.0304702+07:00 0HMT3EP20GCN9:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:54:01.0319922+07:00 0HMT3EP20GCN9:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:54:01.0334923+07:00 0HMT3EP20GCN9:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:54:01.1148529+07:00 0HMT3EP20GCNF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:54:01.1160061+07:00 0HMT3EP20GCNF:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:54:01.1184445+07:00 0HMT3EP20GCNF:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:54:01.1703140+07:00 0HMT3EP20GCNF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:54:01.1709763+07:00 0HMT3EP20GCNF:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:54:01.1725219+07:00 0HMT3EP20GCNF:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:54:02.6705030+07:00 0HMT3EP20GCN9:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:54:02.6710554+07:00 0HMT3EP20GCN9:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:54:02.6741580+07:00 0HMT3EP20GCND:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:54:02.6746522+07:00 0HMT3EP20GCND:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:54:02.6810237+07:00 0HMT3EP20GCN9:00000010 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:54:02.6853319+07:00 0HMT3EP20GCND:00000006 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:54:02.6853589+07:00 0HMT3EP20GCN9:00000010 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:54:02.6858238+07:00 0HMT3EP20GCNG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:54:02.6863170+07:00 0HMT3EP20GCNG:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:54:02.6889367+07:00 0HMT3EP20GCNG:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:54:02.6896908+07:00 0HMT3EP20GCNG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:54:02.6900256+07:00 0HMT3EP20GCNG:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:54:02.6901538+07:00 0HMT3EP20GCN9:00000010 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:54:02.6902634+07:00 0HMT3EP20GCND:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:54:02.6916482+07:00 0HMT3EP20GCNG:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:54:02.6931775+07:00 0HMT3EP20GCN9:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:54:02.6947670+07:00 0HMT3EP20GCNG:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T12:54:02.6968300+07:00 0HMT3EP20GCN9:00000010 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:54:02.6991190+07:00 0HMT3EP20GCN9:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:54:02.7004192+07:00 0HMT3EP20GCN9:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:54:02.7014047+07:00 0HMT3EP20GCN9:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:54:02.7022605+07:00 0HMT3EP20GCN9:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:54:02.7189322+07:00 0HMT3EP20GCN9:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:54:02.7190913+07:00 0HMT3EP20GCND:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:54:02.7194778+07:00 0HMT3EP20GCND:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:54:02.7194778+07:00 0HMT3EP20GCN9:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:54:02.7213084+07:00 0HMT3EP20GCN9:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:54:02.7213084+07:00 0HMT3EP20GCND:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:54:02.7229748+07:00 0HMT3EP20GCN9:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:54:02.7229748+07:00 0HMT3EP20GCND:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:54:02.7268443+07:00 0HMT3EP20GCN9:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:54:02.7279250+07:00 0HMT3EP20GCN9:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:54:02.7288770+07:00 0HMT3EP20GCN9:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:54:02.7298594+07:00 0HMT3EP20GCN9:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:54:02.7306851+07:00 0HMT3EP20GCN9:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:54:02.7315962+07:00 0HMT3EP20GCN9:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:54:02.7325539+07:00 0HMT3EP20GCN9:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:54:03.7462519+07:00 0HMT3EP20GCN9:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:54:03.7467441+07:00 0HMT3EP20GCN9:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:54:03.7559163+07:00 0HMT3EP20GCN9:00000013 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:54:03.7597036+07:00 0HMT3EP20GCN9:00000013 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:54:04.0989598+07:00 0HMT3EP20GCN9:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:54:04.0994856+07:00 0HMT3EP20GCN9:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:54:04.1092349+07:00 0HMT3EP20GCN9:00000015 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:54:04.1129203+07:00 0HMT3EP20GCN9:00000015 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T12:55:44.1856242+07:00 0HMT3EP20GCN9:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:55:44.1862015+07:00 0HMT3EP20GCN9:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:55:44.1954471+07:00 0HMT3EP20GCN9:00000017 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:55:44.1991683+07:00 0HMT3EP20GCN9:00000017 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:55:44.5372941+07:00 0HMT3EP20GCN9:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:55:44.5377913+07:00 0HMT3EP20GCN9:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:55:44.5390847+07:00 0HMT3EP20GCN9:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:55:44.5417457+07:00 0HMT3EP20GCN9:00000019 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:55:44.5847251+07:00 0HMT3EP20GCN9:0000001B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:55:44.5854138+07:00 0HMT3EP20GCN9:0000001B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:55:44.5868664+07:00 0HMT3EP20GCN9:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:55:44.5898921+07:00 0HMT3EP20GCN9:0000001B [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T12:59:43.0508493+07:00 0HMT3EP20GCNG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:59:43.0552905+07:00 0HMT3EP20GCNG:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:59:43.0686509+07:00 0HMT3EP20GCNG:00000002 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:59:43.1199651+07:00 0HMT3EP20GCNH:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:59:43.1205139+07:00 0HMT3EP20GCNH:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:59:43.1219567+07:00 0HMT3EP20GCNH:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:59:43.1251513+07:00 0HMT3EP20GCNI:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:59:43.1259811+07:00 0HMT3EP20GCNH:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:59:43.1296676+07:00 0HMT3EP20GCNI:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:59:43.1315125+07:00 0HMT3EP20GCNI:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:59:43.1314245+07:00 0HMT3EP20GCNH:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:59:43.1354125+07:00 0HMT3EP20GCNH:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:59:43.1355078+07:00 0HMT3EP20GCNI:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:59:43.1386165+07:00 0HMT3EP20GCNH:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:59:43.1411443+07:00 0HMT3EP20GCNH:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:59:43.1424145+07:00 0HMT3EP20GCNH:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:59:43.1438094+07:00 0HMT3EP20GCNH:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:59:43.1448886+07:00 0HMT3EP20GCNH:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:59:43.2459698+07:00 0HMT3EP20GCNJ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:59:43.2465500+07:00 0HMT3EP20GCNJ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:59:43.2488096+07:00 0HMT3EP20GCNJ:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:59:43.2670088+07:00 0HMT3EP20GCNJ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:59:43.2678972+07:00 0HMT3EP20GCNJ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:59:43.2696596+07:00 0HMT3EP20GCNJ:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:59:44.9975234+07:00 0HMT3EP20GCNH:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:59:44.9978105+07:00 0HMT3EP20GCNI:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:59:44.9980245+07:00 0HMT3EP20GCNH:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:59:44.9981274+07:00 0HMT3EP20GCNI:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:59:44.9997047+07:00 0HMT3EP20GCNH:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:59:44.9997046+07:00 0HMT3EP20GCNI:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:59:45.0040283+07:00 0HMT3EP20GCNH:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:59:45.0040276+07:00 0HMT3EP20GCNI:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:59:45.0202200+07:00 0HMT3EP20GCNH:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:59:45.0222840+07:00 0HMT3EP20GCNH:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:59:45.0236578+07:00 0HMT3EP20GCNH:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:59:45.0250101+07:00 0HMT3EP20GCNH:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:59:45.0260530+07:00 0HMT3EP20GCNH:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:59:45.0269580+07:00 0HMT3EP20GCNH:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:59:45.0277205+07:00 0HMT3EP20GCNH:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:59:45.0384199+07:00 0HMT3EP20GCNK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:59:45.0392741+07:00 0HMT3EP20GCNK:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:59:45.0410052+07:00 0HMT3EP20GCNK:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:59:45.0414242+07:00 0HMT3EP20GCNK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:59:45.0417213+07:00 0HMT3EP20GCNK:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:59:45.0429175+07:00 0HMT3EP20GCNK:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:59:45.0448175+07:00 0HMT3EP20GCNK:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T12:59:45.0737980+07:00 0HMT3EP20GCNH:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:59:45.0748879+07:00 0HMT3EP20GCNH:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:59:45.0752702+07:00 0HMT3EP20GCNI:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:59:45.0759072+07:00 0HMT3EP20GCNI:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:59:45.0776537+07:00 0HMT3EP20GCNH:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:59:45.0776469+07:00 0HMT3EP20GCNI:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:59:45.0811439+07:00 0HMT3EP20GCNI:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T12:59:45.0811447+07:00 0HMT3EP20GCNH:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:59:45.0848321+07:00 0HMT3EP20GCNH:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T12:59:45.0860825+07:00 0HMT3EP20GCNH:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T12:59:45.0870521+07:00 0HMT3EP20GCNH:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:59:45.0878887+07:00 0HMT3EP20GCNH:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:59:45.0887505+07:00 0HMT3EP20GCNH:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:59:45.0896295+07:00 0HMT3EP20GCNH:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T12:59:45.0903760+07:00 0HMT3EP20GCNH:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T12:59:45.7808061+07:00 0HMT3EP20GCNH:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:59:45.7815903+07:00 0HMT3EP20GCNH:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:59:45.7830025+07:00 0HMT3EP20GCNH:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:59:45.7865742+07:00 0HMT3EP20GCNH:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T12:59:46.1930996+07:00 0HMT3EP20GCNH:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T12:59:46.1937782+07:00 0HMT3EP20GCNH:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T12:59:46.1956290+07:00 0HMT3EP20GCNH:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T12:59:46.1992090+07:00 0HMT3EP20GCNH:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:02:16.8327393+07:00 0HMT3EP20GCNK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:16.8347360+07:00 0HMT3EP20GCNK:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:16.8514108+07:00 0HMT3EP20GCNK:00000002 [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:16.9433497+07:00 0HMT3EP20GCNL:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:16.9438211+07:00 0HMT3EP20GCNL:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:16.9454789+07:00 0HMT3EP20GCNL:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:16.9495990+07:00 0HMT3EP20GCNL:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:16.9541081+07:00 0HMT3EP20GCNL:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:02:16.9563533+07:00 0HMT3EP20GCNM:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:16.9569355+07:00 0HMT3EP20GCNM:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:16.9570009+07:00 0HMT3EP20GCNL:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:02:16.9590978+07:00 0HMT3EP20GCNM:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:16.9626761+07:00 0HMT3EP20GCNL:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:16.9645839+07:00 0HMT3EP20GCNM:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:02:16.9662219+07:00 0HMT3EP20GCNL:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:02:16.9672250+07:00 0HMT3EP20GCNL:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:16.9682035+07:00 0HMT3EP20GCNL:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:02:16.9690299+07:00 0HMT3EP20GCNL:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:18.7239996+07:00 0HMT3EP20GCNL:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:18.7245361+07:00 0HMT3EP20GCNL:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:18.7258963+07:00 0HMT3EP20GCNL:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:18.7280302+07:00 0HMT3EP20GCNL:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:18.7297058+07:00 0HMT3EP20GCNL:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:02:18.7307590+07:00 0HMT3EP20GCNL:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:02:18.7324794+07:00 0HMT3EP20GCNL:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:18.7342542+07:00 0HMT3EP20GCNL:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:02:18.7359124+07:00 0HMT3EP20GCNL:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:18.7374633+07:00 0HMT3EP20GCNL:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:02:18.7385461+07:00 0HMT3EP20GCNL:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:18.7402471+07:00 0HMT3EP20GCNM:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:18.7413004+07:00 0HMT3EP20GCNM:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:18.7446984+07:00 0HMT3EP20GCNM:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:18.7484065+07:00 0HMT3EP20GCNM:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:02:18.8394854+07:00 0HMT3EP20GCNN:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:18.8402225+07:00 0HMT3EP20GCNN:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:18.8425569+07:00 0HMT3EP20GCNN:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:18.8497172+07:00 0HMT3EP20GCNN:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:18.8501861+07:00 0HMT3EP20GCNN:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:18.8516362+07:00 0HMT3EP20GCNN:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:18.8547136+07:00 0HMT3EP20GCNN:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T13:02:18.8718013+07:00 0HMT3EP20GCNM:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:18.8718013+07:00 0HMT3EP20GCNL:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:18.8723748+07:00 0HMT3EP20GCNL:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:18.8723792+07:00 0HMT3EP20GCNM:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:18.8736529+07:00 0HMT3EP20GCNL:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:18.8736841+07:00 0HMT3EP20GCNM:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:18.8752307+07:00 0HMT3EP20GCNL:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:18.8752936+07:00 0HMT3EP20GCNM:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:02:18.8797529+07:00 0HMT3EP20GCNL:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:02:18.8815625+07:00 0HMT3EP20GCNL:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:02:18.8826194+07:00 0HMT3EP20GCNL:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:18.8836947+07:00 0HMT3EP20GCNL:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:02:18.8849044+07:00 0HMT3EP20GCNL:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:18.8860194+07:00 0HMT3EP20GCNL:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:02:18.8868335+07:00 0HMT3EP20GCNL:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:28.3031308+07:00 0HMT3EP20GCNL:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:28.3037639+07:00 0HMT3EP20GCNL:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:28.3050925+07:00 0HMT3EP20GCNL:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:28.3084810+07:00 0HMT3EP20GCNL:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:02:28.4093416+07:00 0HMT3EP20GCNL:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:28.4100510+07:00 0HMT3EP20GCNL:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:28.4115724+07:00 0HMT3EP20GCNL:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:28.4154003+07:00 0HMT3EP20GCNL:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:02:44.1109780+07:00 0HMT3EP20GCNN:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:44.1115159+07:00 0HMT3EP20GCNN:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:44.1128596+07:00 0HMT3EP20GCNN:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:44.1860098+07:00 0HMT3EP20GCNL:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:44.1870939+07:00 0HMT3EP20GCNL:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:44.1887463+07:00 0HMT3EP20GCNM:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:44.1888109+07:00 0HMT3EP20GCNL:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:44.1894948+07:00 0HMT3EP20GCNM:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:44.1908394+07:00 0HMT3EP20GCNL:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:44.1921010+07:00 0HMT3EP20GCNM:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:44.1942734+07:00 0HMT3EP20GCNM:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:02:44.1942790+07:00 0HMT3EP20GCNL:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:02:44.1964870+07:00 0HMT3EP20GCNL:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:02:44.1976142+07:00 0HMT3EP20GCNL:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:44.1987752+07:00 0HMT3EP20GCNL:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:02:44.1995301+07:00 0HMT3EP20GCNL:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:44.2004501+07:00 0HMT3EP20GCNL:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:02:44.2013309+07:00 0HMT3EP20GCNL:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:44.2865092+07:00 0HMT3EP20GCNO:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:44.2875318+07:00 0HMT3EP20GCNO:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:44.2897384+07:00 0HMT3EP20GCNO:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:44.3214304+07:00 0HMT3EP20GCNO:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:44.3220729+07:00 0HMT3EP20GCNO:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:44.3241260+07:00 0HMT3EP20GCNO:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:46.2475498+07:00 0HMT3EP20GCNL:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:46.2480306+07:00 0HMT3EP20GCNL:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:46.2497617+07:00 0HMT3EP20GCNL:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:46.2499129+07:00 0HMT3EP20GCNM:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:46.2503415+07:00 0HMT3EP20GCNM:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:46.2513531+07:00 0HMT3EP20GCNL:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:46.2523843+07:00 0HMT3EP20GCNM:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:46.2552020+07:00 0HMT3EP20GCNM:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:02:46.2815744+07:00 0HMT3EP20GCNL:0000000F [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:02:46.2899494+07:00 0HMT3EP20GCNL:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:02:46.2915617+07:00 0HMT3EP20GCNL:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:46.2927471+07:00 0HMT3EP20GCNL:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:02:46.2936827+07:00 0HMT3EP20GCNL:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:46.2949233+07:00 0HMT3EP20GCNL:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:02:46.2958129+07:00 0HMT3EP20GCNL:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:46.4087119+07:00 0HMT3EP20GCNP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:46.4094331+07:00 0HMT3EP20GCNP:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:46.4109994+07:00 0HMT3EP20GCNP:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:46.4268322+07:00 0HMT3EP20GCNP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:46.4274473+07:00 0HMT3EP20GCNP:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:46.4291570+07:00 0HMT3EP20GCNP:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:46.4307047+07:00 0HMT3EP20GCNP:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T13:02:46.4445803+07:00 0HMT3EP20GCNL:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:46.4451011+07:00 0HMT3EP20GCNL:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:46.4467434+07:00 0HMT3EP20GCNL:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:46.4489169+07:00 0HMT3EP20GCNL:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:46.4503846+07:00 0HMT3EP20GCNM:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:46.4514567+07:00 0HMT3EP20GCNL:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:02:46.4514565+07:00 0HMT3EP20GCNM:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:46.4527532+07:00 0HMT3EP20GCNL:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:02:46.4535888+07:00 0HMT3EP20GCNL:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:46.4535892+07:00 0HMT3EP20GCNM:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:46.4551242+07:00 0HMT3EP20GCNL:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:02:46.4551198+07:00 0HMT3EP20GCNM:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:02:46.4575517+07:00 0HMT3EP20GCNL:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:46.4591941+07:00 0HMT3EP20GCNL:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:02:46.4606038+07:00 0HMT3EP20GCNL:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:02:47.5394444+07:00 0HMT3EP20GCNL:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:47.5400546+07:00 0HMT3EP20GCNL:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:47.5415094+07:00 0HMT3EP20GCNL:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:47.5442957+07:00 0HMT3EP20GCNL:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:02:47.6276192+07:00 0HMT3EP20GCNL:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:02:47.6281297+07:00 0HMT3EP20GCNL:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:02:47.6294305+07:00 0HMT3EP20GCNL:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:02:47.6315874+07:00 0HMT3EP20GCNL:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:07:57.5832138+07:00 0HMT3EP20GCNQ:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:07:57.5877186+07:00 0HMT3EP20GCNQ:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:07:57.5989882+07:00 0HMT3EP20GCNQ:00000003 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:07:57.6034649+07:00 0HMT3EP20GCNQ:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:07:57.9226668+07:00 0HMT3EP20GCNQ:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:07:57.9231274+07:00 0HMT3EP20GCNQ:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:07:57.9249010+07:00 0HMT3EP20GCNQ:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:07:57.9267643+07:00 0HMT3EP20GCNQ:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:07:57.9714791+07:00 0HMT3EP20GCNQ:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:07:57.9721178+07:00 0HMT3EP20GCNQ:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:07:57.9734725+07:00 0HMT3EP20GCNQ:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:07:57.9766310+07:00 0HMT3EP20GCNQ:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:08:45.9672305+07:00 0HMT3EP20GCNQ:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:08:45.9678393+07:00 0HMT3EP20GCNQ:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:08:45.9841231+07:00 0HMT3EP20GCNQ:00000009 [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:08:45.9884961+07:00 0HMT3EP20GCNQ:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:08:46.2376489+07:00 0HMT3EP20GCNQ:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:08:46.2382848+07:00 0HMT3EP20GCNQ:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:08:46.2398099+07:00 0HMT3EP20GCNQ:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:08:46.2415242+07:00 0HMT3EP20GCNQ:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:08:46.2803580+07:00 0HMT3EP20GCNQ:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:08:46.2808658+07:00 0HMT3EP20GCNQ:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:08:46.2821143+07:00 0HMT3EP20GCNQ:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:08:46.2847597+07:00 0HMT3EP20GCNQ:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:09:04.4391539+07:00 0HMT3EP20GCNQ:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:09:04.4396179+07:00 0HMT3EP20GCNQ:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:09:04.4409896+07:00 0HMT3EP20GCNQ:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:09:04.4427583+07:00 0HMT3EP20GCNQ:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:09:04.8020300+07:00 0HMT3EP20GCNQ:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:09:04.8026141+07:00 0HMT3EP20GCNQ:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:09:04.8039408+07:00 0HMT3EP20GCNQ:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:09:04.8058990+07:00 0HMT3EP20GCNQ:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:09:04.8505668+07:00 0HMT3EP20GCNQ:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:09:04.8512264+07:00 0HMT3EP20GCNQ:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:09:04.8525830+07:00 0HMT3EP20GCNQ:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:09:04.8545875+07:00 0HMT3EP20GCNQ:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:09:32.2341306+07:00 0HMT3EP20GCNQ:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:09:32.2346175+07:00 0HMT3EP20GCNQ:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:09:32.2453698+07:00 0HMT3EP20GCNQ:00000015 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:09:32.2494874+07:00 0HMT3EP20GCNQ:00000015 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:09:32.5266151+07:00 0HMT3EP20GCNQ:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:09:32.5271139+07:00 0HMT3EP20GCNQ:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:09:32.5374435+07:00 0HMT3EP20GCNQ:00000017 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:09:32.5417545+07:00 0HMT3EP20GCNQ:00000017 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:09:32.6003461+07:00 0HMT3EP20GCNQ:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:09:32.6011190+07:00 0HMT3EP20GCNQ:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:09:32.6103435+07:00 0HMT3EP20GCNQ:00000019 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:09:32.6134644+07:00 0HMT3EP20GCNQ:00000019 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:10:06.7432575+07:00 0HMT3EP20GCNQ:0000001B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:10:06.7438560+07:00 0HMT3EP20GCNQ:0000001B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:10:06.7590805+07:00 0HMT3EP20GCNQ:0000001B [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:10:06.7644446+07:00 0HMT3EP20GCNQ:0000001B [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:10:06.9765732+07:00 0HMT3EP20GCNQ:0000001D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:10:06.9770839+07:00 0HMT3EP20GCNQ:0000001D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:10:06.9790742+07:00 0HMT3EP20GCNQ:0000001D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:10:06.9811099+07:00 0HMT3EP20GCNQ:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:10:07.0366184+07:00 0HMT3EP20GCNQ:0000001F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:10:07.0370839+07:00 0HMT3EP20GCNQ:0000001F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:10:07.0383908+07:00 0HMT3EP20GCNQ:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:10:07.0422222+07:00 0HMT3EP20GCNQ:0000001F [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:10:32.6915214+07:00 0HMT3EP20GCNQ:00000021 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:10:32.6920010+07:00 0HMT3EP20GCNQ:00000021 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:10:32.6939989+07:00 0HMT3EP20GCNQ:00000021 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:10:32.6961201+07:00 0HMT3EP20GCNQ:00000021 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:10:32.9144981+07:00 0HMT3EP20GCNQ:00000023 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:10:32.9152011+07:00 0HMT3EP20GCNQ:00000023 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:10:32.9173583+07:00 0HMT3EP20GCNQ:00000023 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:10:32.9202017+07:00 0HMT3EP20GCNQ:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:10:32.9874439+07:00 0HMT3EP20GCNQ:00000025 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:10:32.9879870+07:00 0HMT3EP20GCNQ:00000025 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:10:32.9893211+07:00 0HMT3EP20GCNQ:00000025 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:10:32.9913157+07:00 0HMT3EP20GCNQ:00000025 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:10:33.4353125+07:00 0HMT3EP20GCNP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:10:33.4408248+07:00 0HMT3EP20GCNP:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:10:33.4425893+07:00 0HMT3EP20GCNP:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:10:33.5068877+07:00 0HMT3EP20GCNR:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:10:33.5068876+07:00 0HMT3EP20GCNQ:00000028 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:10:33.5074506+07:00 0HMT3EP20GCNQ:00000028 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:10:33.5089232+07:00 0HMT3EP20GCNQ:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:10:33.5119236+07:00 0HMT3EP20GCNR:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:10:33.5127657+07:00 0HMT3EP20GCNQ:00000028 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:10:33.5133856+07:00 0HMT3EP20GCNR:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:10:33.5199155+07:00 0HMT3EP20GCNR:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:10:33.5199155+07:00 0HMT3EP20GCNQ:00000028 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:10:33.5407677+07:00 0HMT3EP20GCNQ:00000028 [INF] Executed DbCommand ("5"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:10:33.5567035+07:00 0HMT3EP20GCNQ:00000028 [INF] Executed DbCommand ("7"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:10:33.5603359+07:00 0HMT3EP20GCNQ:00000028 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:10:33.5617463+07:00 0HMT3EP20GCNQ:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:10:33.5628098+07:00 0HMT3EP20GCNQ:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:10:33.5639524+07:00 0HMT3EP20GCNQ:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:10:35.8741298+07:00 0HMT3EP20GCNR:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:10:35.8746910+07:00 0HMT3EP20GCNR:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:10:35.8775675+07:00 0HMT3EP20GCNU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:10:35.8785777+07:00 0HMT3EP20GCNU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:10:35.8868289+07:00 0HMT3EP20GCNR:00000005 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:10:35.8909691+07:00 0HMT3EP20GCNR:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:10:35.8909994+07:00 0HMT3EP20GCNU:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:10:35.8958214+07:00 0HMT3EP20GCNU:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:10:35.8992895+07:00 0HMT3EP20GCNR:00000005 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:10:35.9039566+07:00 0HMT3EP20GCNR:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:10:35.9080893+07:00 0HMT3EP20GCNR:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:10:35.9123183+07:00 0HMT3EP20GCNR:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:10:35.9142010+07:00 0HMT3EP20GCNR:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:10:35.9155292+07:00 0HMT3EP20GCNR:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:10:35.9163902+07:00 0HMT3EP20GCNR:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:10:36.0573315+07:00 0HMT3EP20GCNT:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:10:36.0579872+07:00 0HMT3EP20GCNT:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:10:36.0734710+07:00 0HMT3EP20GCNT:00000002 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:10:36.1170650+07:00 0HMT3EP20GCNT:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:10:36.1180186+07:00 0HMT3EP20GCNT:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:10:36.1307572+07:00 0HMT3EP20GCNT:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:10:36.1339369+07:00 0HMT3EP20GCNT:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T13:10:36.2074333+07:00 0HMT3EP20GCNR:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:10:36.2078122+07:00 0HMT3EP20GCNU:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:10:36.2080687+07:00 0HMT3EP20GCNR:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:10:36.2082629+07:00 0HMT3EP20GCNU:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:10:36.2185099+07:00 0HMT3EP20GCNR:00000006 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:10:36.2220989+07:00 0HMT3EP20GCNR:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:10:36.2226206+07:00 0HMT3EP20GCNU:00000003 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:10:36.2276383+07:00 0HMT3EP20GCNU:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:10:36.2282657+07:00 0HMT3EP20GCNR:00000006 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:10:36.2313419+07:00 0HMT3EP20GCNR:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:10:36.2348871+07:00 0HMT3EP20GCNR:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:10:36.2376758+07:00 0HMT3EP20GCNR:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:10:36.2413045+07:00 0HMT3EP20GCNR:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:10:36.2436395+07:00 0HMT3EP20GCNR:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:10:36.2473216+07:00 0HMT3EP20GCNR:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:10:36.4466812+07:00 0HMT3EP20GCNR:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:10:36.4472395+07:00 0HMT3EP20GCNR:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:10:36.4576665+07:00 0HMT3EP20GCNR:00000007 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:10:36.4615204+07:00 0HMT3EP20GCNR:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:10:36.5376721+07:00 0HMT3EP20GCNR:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:10:36.5383311+07:00 0HMT3EP20GCNR:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:10:36.5401413+07:00 0HMT3EP20GCNR:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:10:36.5435411+07:00 0HMT3EP20GCNR:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:11:25.6129328+07:00 0HMT3EP20GCNR:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:25.6134425+07:00 0HMT3EP20GCNR:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:25.6224334+07:00 0HMT3EP20GCNR:0000000A [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:25.6257886+07:00 0HMT3EP20GCNR:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:11:25.8454151+07:00 0HMT3EP20GCNR:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:25.8458867+07:00 0HMT3EP20GCNR:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:25.8471492+07:00 0HMT3EP20GCNR:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:25.8489242+07:00 0HMT3EP20GCNR:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:11:25.8962170+07:00 0HMT3EP20GCNR:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:25.8969414+07:00 0HMT3EP20GCNR:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:25.8984786+07:00 0HMT3EP20GCNR:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:25.9015591+07:00 0HMT3EP20GCNR:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:11:29.3010890+07:00 0HMT3EP20GCNR:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:29.3015785+07:00 0HMT3EP20GCNR:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:29.3028432+07:00 0HMT3EP20GCNR:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:29.3043545+07:00 0HMT3EP20GCNR:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:11:29.4916497+07:00 0HMT3EP20GCNR:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:29.4921110+07:00 0HMT3EP20GCNR:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:29.4933888+07:00 0HMT3EP20GCNR:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:29.4951368+07:00 0HMT3EP20GCNR:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:11:29.5375553+07:00 0HMT3EP20GCNR:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:29.5381526+07:00 0HMT3EP20GCNR:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:29.5397606+07:00 0HMT3EP20GCNR:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:29.5418074+07:00 0HMT3EP20GCNR:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:11:29.9226671+07:00 0HMT3EP20GCNT:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:29.9244848+07:00 0HMT3EP20GCNT:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:29.9261798+07:00 0HMT3EP20GCNT:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:29.9616939+07:00 0HMT3EP20GCNR:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:29.9625521+07:00 0HMT3EP20GCNR:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:29.9629226+07:00 0HMT3EP20GCNU:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:29.9633915+07:00 0HMT3EP20GCNU:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:29.9647384+07:00 0HMT3EP20GCNR:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:29.9648755+07:00 0HMT3EP20GCNU:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:29.9692737+07:00 0HMT3EP20GCNR:00000013 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:29.9694171+07:00 0HMT3EP20GCNU:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:11:29.9804588+07:00 0HMT3EP20GCNR:00000013 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:11:29.9899813+07:00 0HMT3EP20GCNR:00000013 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:11:29.9942044+07:00 0HMT3EP20GCNR:00000013 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:29.9969813+07:00 0HMT3EP20GCNR:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:11:29.9985784+07:00 0HMT3EP20GCNR:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:30.0000855+07:00 0HMT3EP20GCNR:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:11:30.0010306+07:00 0HMT3EP20GCNR:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:30.0388385+07:00 0HMT3EP20GCNV:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:30.0395212+07:00 0HMT3EP20GCNV:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:30.0409656+07:00 0HMT3EP20GCNV:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:30.0668145+07:00 0HMT3EP20GCNV:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:30.0674086+07:00 0HMT3EP20GCNV:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:30.0689131+07:00 0HMT3EP20GCNV:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:31.2905994+07:00 0HMT3EP20GCNR:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:31.2913731+07:00 0HMT3EP20GCNR:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:31.2914510+07:00 0HMT3EP20GCNU:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:31.2917945+07:00 0HMT3EP20GCNU:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:31.2929538+07:00 0HMT3EP20GCNU:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:31.2929751+07:00 0HMT3EP20GCNR:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:31.2946098+07:00 0HMT3EP20GCNR:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:31.2953572+07:00 0HMT3EP20GCNU:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:11:31.3031619+07:00 0HMT3EP20GCNR:00000014 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:11:31.3067690+07:00 0HMT3EP20GCNR:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:11:31.3077127+07:00 0HMT3EP20GCNR:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:31.3086366+07:00 0HMT3EP20GCNR:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:11:31.3093861+07:00 0HMT3EP20GCNR:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:31.3102705+07:00 0HMT3EP20GCNR:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:11:31.3111719+07:00 0HMT3EP20GCNR:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:31.3831559+07:00 0HMT3EP20GCO0:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:31.3837560+07:00 0HMT3EP20GCO0:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:31.3852912+07:00 0HMT3EP20GCO0:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:31.3881975+07:00 0HMT3EP20GCO0:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:31.3886897+07:00 0HMT3EP20GCO0:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:31.3900015+07:00 0HMT3EP20GCO0:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:31.3925076+07:00 0HMT3EP20GCO0:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T13:11:31.4101098+07:00 0HMT3EP20GCNR:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:31.4107203+07:00 0HMT3EP20GCNR:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:31.4111813+07:00 0HMT3EP20GCNU:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:31.4114881+07:00 0HMT3EP20GCNU:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:31.4121320+07:00 0HMT3EP20GCNR:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:31.4124686+07:00 0HMT3EP20GCNU:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:31.4133972+07:00 0HMT3EP20GCNR:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:31.4145625+07:00 0HMT3EP20GCNU:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:11:31.4171583+07:00 0HMT3EP20GCNR:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:11:31.4184270+07:00 0HMT3EP20GCNR:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:11:31.4198446+07:00 0HMT3EP20GCNR:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:31.4213844+07:00 0HMT3EP20GCNR:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:11:31.4223149+07:00 0HMT3EP20GCNR:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:31.4234009+07:00 0HMT3EP20GCNR:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:11:31.4242026+07:00 0HMT3EP20GCNR:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:33.8180756+07:00 0HMT3EP20GCNR:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:33.8186678+07:00 0HMT3EP20GCNR:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:33.8199731+07:00 0HMT3EP20GCNR:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:33.8220070+07:00 0HMT3EP20GCNR:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:11:33.8905715+07:00 0HMT3EP20GCNR:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:33.8911244+07:00 0HMT3EP20GCNR:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:33.8924540+07:00 0HMT3EP20GCNR:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:33.8942338+07:00 0HMT3EP20GCNR:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:11:36.1406600+07:00 0HMT3EP20GCNR:0000001B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:36.1411368+07:00 0HMT3EP20GCNR:0000001B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:36.1425034+07:00 0HMT3EP20GCNR:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:36.1444298+07:00 0HMT3EP20GCNR:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:11:36.3387722+07:00 0HMT3EP20GCNR:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:36.3395059+07:00 0HMT3EP20GCNR:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:36.3409116+07:00 0HMT3EP20GCNR:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:36.3425604+07:00 0HMT3EP20GCNR:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:11:36.3832393+07:00 0HMT3EP20GCNR:0000001D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:36.3838225+07:00 0HMT3EP20GCNR:0000001D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:36.3852095+07:00 0HMT3EP20GCNR:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:36.3873950+07:00 0HMT3EP20GCNR:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:11:36.7725284+07:00 0HMT3EP20GCO0:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:36.7731489+07:00 0HMT3EP20GCO0:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:36.7744477+07:00 0HMT3EP20GCO0:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:36.8281027+07:00 0HMT3EP20GCNR:00000020 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:36.8286162+07:00 0HMT3EP20GCNR:00000020 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:36.8299662+07:00 0HMT3EP20GCNR:00000020 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:36.8314696+07:00 0HMT3EP20GCNR:00000020 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:36.8324791+07:00 0HMT3EP20GCNU:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:36.8330295+07:00 0HMT3EP20GCNU:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:36.8338526+07:00 0HMT3EP20GCNR:00000020 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:11:36.8349651+07:00 0HMT3EP20GCNU:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:36.8349973+07:00 0HMT3EP20GCNR:00000020 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:11:36.8362730+07:00 0HMT3EP20GCNR:00000020 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:36.8362743+07:00 0HMT3EP20GCNU:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:11:36.8387576+07:00 0HMT3EP20GCNR:00000020 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:11:36.8395969+07:00 0HMT3EP20GCNR:00000020 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:36.8404537+07:00 0HMT3EP20GCNR:00000020 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:11:36.8412237+07:00 0HMT3EP20GCNR:00000020 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:38.4181804+07:00 0HMT3EP20GCNR:00000022 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:38.4181805+07:00 0HMT3EP20GCNU:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:38.4190339+07:00 0HMT3EP20GCNU:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:38.4190342+07:00 0HMT3EP20GCNR:00000022 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:38.4211130+07:00 0HMT3EP20GCNR:00000022 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:38.4211071+07:00 0HMT3EP20GCNU:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:38.4225529+07:00 0HMT3EP20GCNR:00000022 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:38.4227185+07:00 0HMT3EP20GCNU:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:11:38.4269579+07:00 0HMT3EP20GCNR:00000022 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:11:38.4279634+07:00 0HMT3EP20GCNR:00000022 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:11:38.4287655+07:00 0HMT3EP20GCNR:00000022 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:38.4295898+07:00 0HMT3EP20GCNR:00000022 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:11:38.4303193+07:00 0HMT3EP20GCNR:00000022 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:38.4311140+07:00 0HMT3EP20GCNR:00000022 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:11:38.4318420+07:00 0HMT3EP20GCNR:00000022 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:38.5175232+07:00 0HMT3EP20GCO1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:38.5180963+07:00 0HMT3EP20GCO1:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:38.5197465+07:00 0HMT3EP20GCO1:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:38.5202289+07:00 0HMT3EP20GCO1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:38.5205592+07:00 0HMT3EP20GCO1:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:38.5217709+07:00 0HMT3EP20GCO1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:38.5229876+07:00 0HMT3EP20GCO1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T13:11:38.5382838+07:00 0HMT3EP20GCNR:00000023 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:38.5387775+07:00 0HMT3EP20GCNR:00000023 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:38.5400467+07:00 0HMT3EP20GCNU:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:11:38.5404948+07:00 0HMT3EP20GCNR:00000023 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:38.5405444+07:00 0HMT3EP20GCNU:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:11:38.5423756+07:00 0HMT3EP20GCNR:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:38.5426281+07:00 0HMT3EP20GCNU:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:11:38.5447690+07:00 0HMT3EP20GCNU:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:11:38.5447666+07:00 0HMT3EP20GCNR:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:11:38.5470156+07:00 0HMT3EP20GCNR:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:11:38.5479735+07:00 0HMT3EP20GCNR:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:38.5491738+07:00 0HMT3EP20GCNR:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:11:38.5500478+07:00 0HMT3EP20GCNR:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:11:38.5509466+07:00 0HMT3EP20GCNR:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:11:38.5517965+07:00 0HMT3EP20GCNR:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:17:00.8410045+07:00 0HMT3EP20GCO2:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:17:00.8415939+07:00 0HMT3EP20GCO2:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:17:00.8514673+07:00 0HMT3EP20GCO2:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:17:00.8557183+07:00 0HMT3EP20GCO2:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:17:00.9882271+07:00 0HMT3EP20GCO2:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:17:00.9887535+07:00 0HMT3EP20GCO2:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:17:00.9901578+07:00 0HMT3EP20GCO2:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:17:00.9932675+07:00 0HMT3EP20GCO2:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:23:42.0717227+07:00 0HMT3EP20GCO3:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:23:42.0764242+07:00 0HMT3EP20GCO3:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:23:42.0869899+07:00 0HMT3EP20GCO3:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:23:42.0908288+07:00 0HMT3EP20GCO3:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:23:42.4060653+07:00 0HMT3EP20GCO3:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:23:42.4065499+07:00 0HMT3EP20GCO3:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:23:42.4078194+07:00 0HMT3EP20GCO3:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:23:42.4099312+07:00 0HMT3EP20GCO3:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:23:42.4583568+07:00 0HMT3EP20GCO3:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:23:42.4588958+07:00 0HMT3EP20GCO3:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:23:42.4601800+07:00 0HMT3EP20GCO3:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:23:42.4635848+07:00 0HMT3EP20GCO3:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:24:04.2893442+07:00 0HMT3EP20GCO3:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:24:04.2898024+07:00 0HMT3EP20GCO3:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:24:04.2977833+07:00 0HMT3EP20GCO3:00000009 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:24:04.3149162+07:00 0HMT3EP20GCO3:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-23T13:24:04.3303344+07:00 0HMT3EP20GCO3:00000009 [INF] Executed DbCommand ("4"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-23T13:24:04.3641525+07:00 0HMT3EP20GCO3:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:24:04.3647812+07:00 0HMT3EP20GCO3:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:24:04.3705085+07:00 0HMT3EP20GCO3:0000000B [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:24:04.3732442+07:00 0HMT3EP20GCO3:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:24:04.3764708+07:00 0HMT3EP20GCO3:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T13:28:30.1390403+07:00 0HMT3EP20GCO5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:28:30.1397530+07:00 0HMT3EP20GCO5:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:28:30.1530459+07:00 0HMT3EP20GCO5:00000002 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:28:30.1577755+07:00 0HMT3EP20GCO5:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:28:30.7123606+07:00 0HMT3EP20GCO5:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:28:30.7127947+07:00 0HMT3EP20GCO5:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:28:30.7139986+07:00 0HMT3EP20GCO5:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:28:30.7153691+07:00 0HMT3EP20GCO5:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:28:31.2998007+07:00 0HMT3EP20GCO5:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:28:31.3003158+07:00 0HMT3EP20GCO5:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:28:31.3016691+07:00 0HMT3EP20GCO5:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:28:31.3035252+07:00 0HMT3EP20GCO5:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:28:31.3464790+07:00 0HMT3EP20GCO4:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:28:31.3470349+07:00 0HMT3EP20GCO4:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:28:31.3483287+07:00 0HMT3EP20GCO4:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:28:31.3512268+07:00 0HMT3EP20GCO4:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:28:35.6194566+07:00 0HMT3EP20GCO7:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:28:35.6203128+07:00 0HMT3EP20GCO6:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:28:35.6222207+07:00 0HMT3EP20GCO7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:28:35.6244525+07:00 0HMT3EP20GCO7:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:28:35.6297110+07:00 0HMT3EP20GCO6:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:28:35.6298191+07:00 0HMT3EP20GCO8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:28:35.6337985+07:00 0HMT3EP20GCO6:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:28:35.6338571+07:00 0HMT3EP20GCO7:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:28:35.6403279+07:00 0HMT3EP20GCO8:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:28:35.6427029+07:00 0HMT3EP20GCO8:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:28:35.6432158+07:00 0HMT3EP20GCO6:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:28:35.6435720+07:00 0HMT3EP20GCO8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:28:35.6438474+07:00 0HMT3EP20GCO7:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:28:35.6438782+07:00 0HMT3EP20GCO8:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:28:35.6452570+07:00 0HMT3EP20GCO8:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:28:35.6463705+07:00 0HMT3EP20GCO7:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:28:35.6468826+07:00 0HMT3EP20GCO8:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T13:28:35.6488698+07:00 0HMT3EP20GCO7:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:28:35.6509868+07:00 0HMT3EP20GCO7:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:28:35.6519051+07:00 0HMT3EP20GCO7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:28:35.6528584+07:00 0HMT3EP20GCO7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:28:35.6536895+07:00 0HMT3EP20GCO7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:28:35.6669892+07:00 0HMT3EP20GCO7:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:28:35.6670162+07:00 0HMT3EP20GCO6:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:28:35.6674593+07:00 0HMT3EP20GCO7:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:28:35.6674593+07:00 0HMT3EP20GCO6:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:28:35.6686836+07:00 0HMT3EP20GCO7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:28:35.6686845+07:00 0HMT3EP20GCO6:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:28:35.6698538+07:00 0HMT3EP20GCO6:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:28:35.6698538+07:00 0HMT3EP20GCO7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:28:35.6745854+07:00 0HMT3EP20GCO7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:28:35.6782341+07:00 0HMT3EP20GCO7:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:28:35.6799731+07:00 0HMT3EP20GCO7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:28:35.6814624+07:00 0HMT3EP20GCO7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:28:35.6825572+07:00 0HMT3EP20GCO7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:28:35.6836794+07:00 0HMT3EP20GCO7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:28:35.6847354+07:00 0HMT3EP20GCO7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:28:42.6419030+07:00 0HMT3EP20GCO7:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:28:42.6424620+07:00 0HMT3EP20GCO7:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:28:42.6437152+07:00 0HMT3EP20GCO7:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:28:42.6462503+07:00 0HMT3EP20GCO7:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:28:48.4569673+07:00 0HMT3EP20GCO7:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:28:48.4575849+07:00 0HMT3EP20GCO7:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:28:48.4588862+07:00 0HMT3EP20GCO7:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:28:48.4606014+07:00 0HMT3EP20GCO7:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:28:48.5167894+07:00 0HMT3EP20GCO7:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:28:48.5173497+07:00 0HMT3EP20GCO7:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:28:48.5186480+07:00 0HMT3EP20GCO7:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:28:48.5188549+07:00 0HMT3EP20GCO6:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:28:48.5193952+07:00 0HMT3EP20GCO6:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:28:48.5200728+07:00 0HMT3EP20GCO7:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:28:48.5212609+07:00 0HMT3EP20GCO6:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:28:48.5230650+07:00 0HMT3EP20GCO6:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:28:48.5263097+07:00 0HMT3EP20GCO7:0000000A [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:28:48.5278763+07:00 0HMT3EP20GCO7:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:28:48.5291227+07:00 0HMT3EP20GCO7:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:28:48.8220268+07:00 0HMT3EP20GCOA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:28:48.8230967+07:00 0HMT3EP20GCOA:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:28:48.8243040+07:00 0HMT3EP20GCOA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:28:48.8246957+07:00 0HMT3EP20GCOA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:28:48.8249508+07:00 0HMT3EP20GCOA:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:28:48.8260440+07:00 0HMT3EP20GCOA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:28:48.8271476+07:00 0HMT3EP20GCOA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T13:28:48.8409865+07:00 0HMT3EP20GCO6:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:28:48.8409865+07:00 0HMT3EP20GCO7:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:28:48.8414637+07:00 0HMT3EP20GCO7:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:28:48.8414637+07:00 0HMT3EP20GCO6:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:28:48.8428348+07:00 0HMT3EP20GCO7:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:28:48.8428877+07:00 0HMT3EP20GCO6:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:28:48.8443821+07:00 0HMT3EP20GCO6:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:28:48.8459585+07:00 0HMT3EP20GCO7:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:28:48.8529070+07:00 0HMT3EP20GCO7:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:28:48.8544753+07:00 0HMT3EP20GCO7:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:28:48.8553952+07:00 0HMT3EP20GCO7:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:28:50.3211612+07:00 0HMT3EP20GCO7:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:28:50.3216816+07:00 0HMT3EP20GCO7:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:28:50.3230001+07:00 0HMT3EP20GCO7:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:28:50.3253729+07:00 0HMT3EP20GCO7:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:28:50.3998423+07:00 0HMT3EP20GCO7:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:28:50.4003766+07:00 0HMT3EP20GCO7:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:28:50.4017885+07:00 0HMT3EP20GCO7:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:28:50.4042480+07:00 0HMT3EP20GCO7:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:28:50.4084795+07:00 0HMT3EP20GCO7:0000000F [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T13:54:32.0657948+07:00 0HMT3EP20GCO8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:54:32.0662110+07:00 0HMT3EP20GCOA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:54:32.1140448+07:00 0HMT3EP20GCO8:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:54:32.1296443+07:00 0HMT3EP20GCOA:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:54:32.1457019+07:00 0HMT3EP20GCO8:00000002 [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:54:32.1457020+07:00 0HMT3EP20GCOA:00000002 [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:54:32.9076384+07:00 0HMT3EP20GCO1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:54:32.9082315+07:00 0HMT3EP20GCO1:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:54:32.9096328+07:00 0HMT3EP20GCO1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:54:32.9826408+07:00 0HMT3EP20GCOB:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:54:32.9831529+07:00 0HMT3EP20GCOB:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:54:32.9832391+07:00 0HMT3EP20GCOC:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:54:32.9835112+07:00 0HMT3EP20GCOC:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:54:32.9844777+07:00 0HMT3EP20GCOB:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:54:32.9845461+07:00 0HMT3EP20GCOC:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:54:32.9903719+07:00 0HMT3EP20GCOB:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:54:32.9903720+07:00 0HMT3EP20GCOC:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:54:32.9960585+07:00 0HMT3EP20GCOB:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:54:32.9991171+07:00 0HMT3EP20GCOB:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:54:33.0020007+07:00 0HMT3EP20GCOB:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:54:33.0041645+07:00 0HMT3EP20GCOB:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:54:33.0052769+07:00 0HMT3EP20GCOB:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:54:33.0066039+07:00 0HMT3EP20GCOB:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:54:33.0077732+07:00 0HMT3EP20GCOB:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:54:33.0641875+07:00 0HMT3EP20GCOD:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:54:33.0641875+07:00 0HMT3EP20GCOE:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:54:33.0654630+07:00 0HMT3EP20GCOD:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:54:33.0654631+07:00 0HMT3EP20GCOE:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:54:33.0660042+07:00 0HMT3EP20GCOF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:54:33.0676391+07:00 0HMT3EP20GCOE:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:54:33.0676392+07:00 0HMT3EP20GCOD:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:54:33.0702061+07:00 0HMT3EP20GCOD:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:54:33.0702024+07:00 0HMT3EP20GCOE:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:54:33.0726490+07:00 0HMT3EP20GCOF:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:54:33.0750318+07:00 0HMT3EP20GCOF:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:54:33.0755806+07:00 0HMT3EP20GCOF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:54:33.0760058+07:00 0HMT3EP20GCOF:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:54:33.0774128+07:00 0HMT3EP20GCOF:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:54:33.0779049+07:00 0HMT3EP20GCOE:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:54:33.0798199+07:00 0HMT3EP20GCOF:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T13:54:33.0806300+07:00 0HMT3EP20GCOE:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:54:33.0817683+07:00 0HMT3EP20GCOE:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:54:33.1080769+07:00 0HMT3EP20GCOE:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:54:33.1080769+07:00 0HMT3EP20GCOD:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:54:33.1088597+07:00 0HMT3EP20GCOD:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:54:33.1088902+07:00 0HMT3EP20GCOE:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:54:33.1110754+07:00 0HMT3EP20GCOD:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:54:33.1111158+07:00 0HMT3EP20GCOE:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:54:33.1135511+07:00 0HMT3EP20GCOD:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:54:33.1135547+07:00 0HMT3EP20GCOE:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:54:33.1189256+07:00 0HMT3EP20GCOE:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:54:33.1205153+07:00 0HMT3EP20GCOE:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:54:33.1216884+07:00 0HMT3EP20GCOE:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:54:34.7159897+07:00 0HMT3EP20GCOB:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:54:34.7166972+07:00 0HMT3EP20GCOB:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:54:34.7186471+07:00 0HMT3EP20GCOB:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:54:34.7205533+07:00 0HMT3EP20GCOB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:54:34.7225068+07:00 0HMT3EP20GCOC:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:54:34.7231768+07:00 0HMT3EP20GCOC:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:54:34.7234131+07:00 0HMT3EP20GCOB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:54:34.7246266+07:00 0HMT3EP20GCOB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:54:34.7248547+07:00 0HMT3EP20GCOC:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:54:34.7256672+07:00 0HMT3EP20GCOB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:54:34.7268560+07:00 0HMT3EP20GCOC:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:54:34.7304275+07:00 0HMT3EP20GCOB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:54:34.7339982+07:00 0HMT3EP20GCOB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:54:34.7354111+07:00 0HMT3EP20GCOB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:54:34.7363890+07:00 0HMT3EP20GCOB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:54:34.8058398+07:00 0HMT3EP20GCOH:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:54:34.8064045+07:00 0HMT3EP20GCOH:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:54:34.8079035+07:00 0HMT3EP20GCOH:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:54:34.8172187+07:00 0HMT3EP20GCOH:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:54:34.8177466+07:00 0HMT3EP20GCOH:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:54:34.8190347+07:00 0HMT3EP20GCOH:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:54:34.8205459+07:00 0HMT3EP20GCOH:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T13:54:34.8446685+07:00 0HMT3EP20GCOB:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:54:34.8454104+07:00 0HMT3EP20GCOB:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:54:34.8469088+07:00 0HMT3EP20GCOB:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:54:34.8472416+07:00 0HMT3EP20GCOC:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:54:34.8481020+07:00 0HMT3EP20GCOC:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:54:34.8486542+07:00 0HMT3EP20GCOB:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:54:34.8503358+07:00 0HMT3EP20GCOC:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:54:34.8516378+07:00 0HMT3EP20GCOC:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:54:34.8516610+07:00 0HMT3EP20GCOB:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:54:34.8546720+07:00 0HMT3EP20GCOB:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:54:34.8556405+07:00 0HMT3EP20GCOB:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:54:34.8569268+07:00 0HMT3EP20GCOB:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:54:34.8577886+07:00 0HMT3EP20GCOB:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:54:34.8586837+07:00 0HMT3EP20GCOB:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:54:34.8596430+07:00 0HMT3EP20GCOB:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:55:02.4809564+07:00 0HMT3EP20GCOF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:55:02.4832554+07:00 0HMT3EP20GCOF:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:55:02.4990253+07:00 0HMT3EP20GCOF:00000002 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:55:02.9822288+07:00 0HMT3EP20GCOD:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:55:02.9822288+07:00 0HMT3EP20GCOE:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:55:02.9826810+07:00 0HMT3EP20GCOE:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:55:02.9826810+07:00 0HMT3EP20GCOD:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:55:02.9840651+07:00 0HMT3EP20GCOE:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:55:02.9840721+07:00 0HMT3EP20GCOD:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:55:02.9879102+07:00 0HMT3EP20GCOD:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:55:02.9879102+07:00 0HMT3EP20GCOE:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:55:02.9934462+07:00 0HMT3EP20GCOD:00000006 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:55:02.9965785+07:00 0HMT3EP20GCOD:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:55:03.0029473+07:00 0HMT3EP20GCOD:00000006 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:55:03.2969996+07:00 0HMT3EP20GCOI:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:55:03.2980884+07:00 0HMT3EP20GCOI:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:55:03.2995554+07:00 0HMT3EP20GCOI:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:55:03.3000582+07:00 0HMT3EP20GCOI:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:55:03.3003907+07:00 0HMT3EP20GCOI:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:55:03.3015310+07:00 0HMT3EP20GCOI:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:55:03.3032235+07:00 0HMT3EP20GCOI:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T13:55:03.3167143+07:00 0HMT3EP20GCOD:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:55:03.3167744+07:00 0HMT3EP20GCOE:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:55:03.3172237+07:00 0HMT3EP20GCOD:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:55:03.3172244+07:00 0HMT3EP20GCOE:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:55:03.3184877+07:00 0HMT3EP20GCOE:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:55:03.3184797+07:00 0HMT3EP20GCOD:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:55:03.3198916+07:00 0HMT3EP20GCOE:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:55:03.3198929+07:00 0HMT3EP20GCOD:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:55:03.3243567+07:00 0HMT3EP20GCOD:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:55:03.3261347+07:00 0HMT3EP20GCOD:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:55:03.3272033+07:00 0HMT3EP20GCOD:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:55:03.4159096+07:00 0HMT3EP20GCOH:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:55:03.4164309+07:00 0HMT3EP20GCOH:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:55:03.4178352+07:00 0HMT3EP20GCOH:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:55:03.4547179+07:00 0HMT3EP20GCOB:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:55:03.4552330+07:00 0HMT3EP20GCOB:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:55:03.4566053+07:00 0HMT3EP20GCOB:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:55:03.4570403+07:00 0HMT3EP20GCOC:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:55:03.4577833+07:00 0HMT3EP20GCOC:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:55:03.4581176+07:00 0HMT3EP20GCOB:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:55:03.4598153+07:00 0HMT3EP20GCOC:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:55:03.4616333+07:00 0HMT3EP20GCOC:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:55:03.4654947+07:00 0HMT3EP20GCOB:00000007 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:55:03.4669111+07:00 0HMT3EP20GCOB:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:55:03.4678049+07:00 0HMT3EP20GCOB:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:55:03.4698368+07:00 0HMT3EP20GCOB:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:55:03.4709615+07:00 0HMT3EP20GCOB:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:55:03.4719636+07:00 0HMT3EP20GCOB:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:55:03.4726399+07:00 0HMT3EP20GCOB:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:55:04.9403041+07:00 0HMT3EP20GCOB:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:55:04.9410725+07:00 0HMT3EP20GCOB:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:55:04.9425180+07:00 0HMT3EP20GCOB:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:55:04.9440711+07:00 0HMT3EP20GCOB:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:55:04.9444053+07:00 0HMT3EP20GCOC:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:55:04.9455735+07:00 0HMT3EP20GCOC:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:55:04.9465374+07:00 0HMT3EP20GCOB:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:55:04.9472016+07:00 0HMT3EP20GCOC:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:55:04.9476286+07:00 0HMT3EP20GCOB:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:55:04.9492173+07:00 0HMT3EP20GCOC:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:55:04.9491500+07:00 0HMT3EP20GCOB:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:55:04.9536323+07:00 0HMT3EP20GCOB:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:55:04.9551615+07:00 0HMT3EP20GCOB:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:55:04.9562123+07:00 0HMT3EP20GCOB:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:55:04.9571046+07:00 0HMT3EP20GCOB:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:55:04.9636321+07:00 0HMT3EP20GCOJ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:55:04.9641167+07:00 0HMT3EP20GCOJ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:55:04.9660319+07:00 0HMT3EP20GCOJ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:55:05.0388740+07:00 0HMT3EP20GCOJ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:55:05.0394956+07:00 0HMT3EP20GCOJ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:55:05.0408000+07:00 0HMT3EP20GCOJ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:55:05.0419580+07:00 0HMT3EP20GCOJ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T13:55:05.0672697+07:00 0HMT3EP20GCOB:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:55:05.0674363+07:00 0HMT3EP20GCOC:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:55:05.0677702+07:00 0HMT3EP20GCOB:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:55:05.0677746+07:00 0HMT3EP20GCOC:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:55:05.0690521+07:00 0HMT3EP20GCOC:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:55:05.0690521+07:00 0HMT3EP20GCOB:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:55:05.0704652+07:00 0HMT3EP20GCOB:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:55:05.0705644+07:00 0HMT3EP20GCOC:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:55:05.0750086+07:00 0HMT3EP20GCOB:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:55:05.0762624+07:00 0HMT3EP20GCOB:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:55:05.0772756+07:00 0HMT3EP20GCOB:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:55:05.0784802+07:00 0HMT3EP20GCOB:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:55:05.0796790+07:00 0HMT3EP20GCOB:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:55:05.0807998+07:00 0HMT3EP20GCOB:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T13:55:05.0817271+07:00 0HMT3EP20GCOB:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:55:06.4784085+07:00 0HMT3EP20GCOD:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:55:06.4788681+07:00 0HMT3EP20GCOD:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:55:06.4801499+07:00 0HMT3EP20GCOD:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:55:06.4836277+07:00 0HMT3EP20GCOD:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:55:06.5464420+07:00 0HMT3EP20GCOD:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:55:06.5470208+07:00 0HMT3EP20GCOD:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:55:06.5482749+07:00 0HMT3EP20GCOD:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:55:06.5510407+07:00 0HMT3EP20GCOD:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:56:04.4041811+07:00 0HMT3EP20GCOI:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:56:04.4086271+07:00 0HMT3EP20GCOI:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:56:04.4236661+07:00 0HMT3EP20GCOI:00000002 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:56:05.6514497+07:00 0HMT3EP20GCOE:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:56:05.6514498+07:00 0HMT3EP20GCOD:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:56:05.6520342+07:00 0HMT3EP20GCOE:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:56:05.6520341+07:00 0HMT3EP20GCOD:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:56:05.6537569+07:00 0HMT3EP20GCOE:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:56:05.6537568+07:00 0HMT3EP20GCOD:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:56:05.6590677+07:00 0HMT3EP20GCOD:0000000D [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:56:05.6590676+07:00 0HMT3EP20GCOE:00000009 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:56:05.6649317+07:00 0HMT3EP20GCOE:00000009 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:56:05.6683531+07:00 0HMT3EP20GCOE:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:56:05.6726928+07:00 0HMT3EP20GCOE:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:56:05.9557157+07:00 0HMT3EP20GCOK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:56:05.9566322+07:00 0HMT3EP20GCOK:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:56:05.9585122+07:00 0HMT3EP20GCOK:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:56:05.9594890+07:00 0HMT3EP20GCOK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:56:05.9597844+07:00 0HMT3EP20GCOK:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:56:05.9609560+07:00 0HMT3EP20GCOK:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:56:05.9625499+07:00 0HMT3EP20GCOK:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T13:56:05.9760329+07:00 0HMT3EP20GCOD:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:56:05.9760331+07:00 0HMT3EP20GCOE:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:56:05.9764853+07:00 0HMT3EP20GCOE:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:56:05.9764862+07:00 0HMT3EP20GCOD:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:56:05.9777366+07:00 0HMT3EP20GCOD:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:56:05.9777366+07:00 0HMT3EP20GCOE:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:56:05.9791283+07:00 0HMT3EP20GCOE:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:56:05.9791285+07:00 0HMT3EP20GCOD:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T13:56:05.9836268+07:00 0HMT3EP20GCOE:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T13:56:05.9846605+07:00 0HMT3EP20GCOE:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T13:56:05.9854824+07:00 0HMT3EP20GCOE:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T13:56:06.3908858+07:00 0HMT3EP20GCOE:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:56:06.3913644+07:00 0HMT3EP20GCOE:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:56:06.3926213+07:00 0HMT3EP20GCOE:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:56:06.3954951+07:00 0HMT3EP20GCOE:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:56:06.4642326+07:00 0HMT3EP20GCOE:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:56:06.4648808+07:00 0HMT3EP20GCOE:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:56:06.4663241+07:00 0HMT3EP20GCOE:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:56:06.4696280+07:00 0HMT3EP20GCOE:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:56:44.6664443+07:00 0HMT3EP20GCOB:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:56:44.6669556+07:00 0HMT3EP20GCOB:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:56:44.6682688+07:00 0HMT3EP20GCOB:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:56:44.6700296+07:00 0HMT3EP20GCOB:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:56:44.8275534+07:00 0HMT3EP20GCOB:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:56:44.8280700+07:00 0HMT3EP20GCOB:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:56:44.8300129+07:00 0HMT3EP20GCOB:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:56:44.8327148+07:00 0HMT3EP20GCOB:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:57:30.2021775+07:00 0HMT3EP20GCOB:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:57:30.2029345+07:00 0HMT3EP20GCOB:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:57:30.2133158+07:00 0HMT3EP20GCOB:0000000F [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:57:30.2177673+07:00 0HMT3EP20GCOB:0000000F [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:57:30.4238864+07:00 0HMT3EP20GCOB:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:57:30.4243922+07:00 0HMT3EP20GCOB:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:57:30.4257699+07:00 0HMT3EP20GCOB:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:57:30.4279927+07:00 0HMT3EP20GCOB:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:57:30.4796621+07:00 0HMT3EP20GCOB:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:57:30.4802123+07:00 0HMT3EP20GCOB:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:57:30.4815648+07:00 0HMT3EP20GCOB:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:57:30.4842196+07:00 0HMT3EP20GCOB:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:57:40.1377983+07:00 0HMT3EP20GCOB:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:57:40.1382902+07:00 0HMT3EP20GCOB:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:57:40.1397135+07:00 0HMT3EP20GCOB:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:57:40.1414011+07:00 0HMT3EP20GCOB:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:57:40.3564394+07:00 0HMT3EP20GCOB:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:57:40.3569521+07:00 0HMT3EP20GCOB:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:57:40.3581988+07:00 0HMT3EP20GCOB:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:57:40.3598010+07:00 0HMT3EP20GCOB:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:57:40.4055648+07:00 0HMT3EP20GCOB:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:57:40.4061009+07:00 0HMT3EP20GCOB:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:57:40.4073994+07:00 0HMT3EP20GCOB:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:57:40.4091629+07:00 0HMT3EP20GCOB:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:57:42.4880699+07:00 0HMT3EP20GCOB:0000001A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:57:42.4885551+07:00 0HMT3EP20GCOB:0000001A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:57:42.4905561+07:00 0HMT3EP20GCOB:0000001A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:57:42.4927722+07:00 0HMT3EP20GCOB:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:57:42.7176383+07:00 0HMT3EP20GCOB:0000001B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:57:42.7183809+07:00 0HMT3EP20GCOB:0000001B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:57:42.7198335+07:00 0HMT3EP20GCOB:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:57:42.7218933+07:00 0HMT3EP20GCOB:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:57:42.7682172+07:00 0HMT3EP20GCOB:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:57:42.7688470+07:00 0HMT3EP20GCOB:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:57:42.7704945+07:00 0HMT3EP20GCOB:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:57:42.7738821+07:00 0HMT3EP20GCOB:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:59:08.8109534+07:00 0HMT3EP20GCOB:0000001E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:59:08.8114919+07:00 0HMT3EP20GCOB:0000001E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:59:08.8220482+07:00 0HMT3EP20GCOB:0000001E [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:59:08.8266934+07:00 0HMT3EP20GCOB:0000001E [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:59:09.0809618+07:00 0HMT3EP20GCOB:00000020 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:59:09.0814395+07:00 0HMT3EP20GCOB:00000020 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:59:09.0830446+07:00 0HMT3EP20GCOB:00000020 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:59:09.0850566+07:00 0HMT3EP20GCOB:00000020 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:59:09.1321938+07:00 0HMT3EP20GCOB:00000022 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:59:09.1326938+07:00 0HMT3EP20GCOB:00000022 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:59:09.1339974+07:00 0HMT3EP20GCOB:00000022 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:59:09.1374173+07:00 0HMT3EP20GCOB:00000022 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T13:59:16.7231977+07:00 0HMT3EP20GCOB:00000024 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:59:16.7237420+07:00 0HMT3EP20GCOB:00000024 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:59:16.7330591+07:00 0HMT3EP20GCOB:00000024 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:59:16.7364194+07:00 0HMT3EP20GCOB:00000024 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:59:18.2935816+07:00 0HMT3EP20GCOB:00000026 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:59:18.2941244+07:00 0HMT3EP20GCOB:00000026 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:59:18.2959470+07:00 0HMT3EP20GCOB:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:59:18.2982892+07:00 0HMT3EP20GCOB:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T13:59:18.3382332+07:00 0HMT3EP20GCOB:00000028 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T13:59:18.3395014+07:00 0HMT3EP20GCOB:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T13:59:18.3411451+07:00 0HMT3EP20GCOB:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T13:59:18.3445401+07:00 0HMT3EP20GCOB:00000028 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T14:00:20.0046596+07:00 0HMT3EP20GCOB:0000002A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:00:20.0056499+07:00 0HMT3EP20GCOB:0000002A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:00:20.0195070+07:00 0HMT3EP20GCOB:0000002A [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:00:20.0236690+07:00 0HMT3EP20GCOB:0000002A [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T14:00:20.2310270+07:00 0HMT3EP20GCOB:0000002C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:00:20.2315979+07:00 0HMT3EP20GCOB:0000002C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:00:20.2330319+07:00 0HMT3EP20GCOB:0000002C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:00:20.2352673+07:00 0HMT3EP20GCOB:0000002C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T14:00:20.3156904+07:00 0HMT3EP20GCOB:0000002E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:00:20.3163114+07:00 0HMT3EP20GCOB:0000002E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:00:20.3298664+07:00 0HMT3EP20GCOB:0000002E [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:00:20.3333808+07:00 0HMT3EP20GCOB:0000002E [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T14:00:23.9923508+07:00 0HMT3EP20GCOB:0000002F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:00:23.9928788+07:00 0HMT3EP20GCOB:0000002F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:00:24.0035238+07:00 0HMT3EP20GCOB:0000002F [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:00:24.0075998+07:00 0HMT3EP20GCOB:0000002F [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T14:00:25.8958962+07:00 0HMT3EP20GCOB:00000031 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:00:25.8963938+07:00 0HMT3EP20GCOB:00000031 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:00:25.8982841+07:00 0HMT3EP20GCOB:00000031 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:00:25.9004530+07:00 0HMT3EP20GCOB:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T14:00:25.9443628+07:00 0HMT3EP20GCOB:00000033 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:00:25.9449195+07:00 0HMT3EP20GCOB:00000033 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:00:25.9463531+07:00 0HMT3EP20GCOB:00000033 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:00:25.9494719+07:00 0HMT3EP20GCOB:00000033 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T14:00:41.0197057+07:00 0HMT3EP20GCOJ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:00:41.0202301+07:00 0HMT3EP20GCOJ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:00:41.0216113+07:00 0HMT3EP20GCOJ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:00:41.0926536+07:00 0HMT3EP20GCOB:00000035 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:00:41.0934203+07:00 0HMT3EP20GCOB:00000035 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:00:41.0953239+07:00 0HMT3EP20GCOB:00000035 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:00:41.0991565+07:00 0HMT3EP20GCOL:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:00:41.1000105+07:00 0HMT3EP20GCOB:00000035 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:00:41.1044365+07:00 0HMT3EP20GCOL:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:00:41.1070583+07:00 0HMT3EP20GCOB:00000035 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T14:00:41.1072345+07:00 0HMT3EP20GCOL:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:00:41.1105794+07:00 0HMT3EP20GCOB:00000035 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T14:00:41.1119953+07:00 0HMT3EP20GCOL:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T14:00:41.1137213+07:00 0HMT3EP20GCOB:00000035 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:00:41.1191440+07:00 0HMT3EP20GCOB:00000035 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T14:00:41.1205838+07:00 0HMT3EP20GCOB:00000035 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:00:41.1221268+07:00 0HMT3EP20GCOB:00000035 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T14:00:41.1231669+07:00 0HMT3EP20GCOB:00000035 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:00:41.2044733+07:00 0HMT3EP20GCOM:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:00:41.2050802+07:00 0HMT3EP20GCOM:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:00:41.2064341+07:00 0HMT3EP20GCOM:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:00:41.2250729+07:00 0HMT3EP20GCOM:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:00:41.2275106+07:00 0HMT3EP20GCOM:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:00:41.2291696+07:00 0HMT3EP20GCOM:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:00:45.2084388+07:00 0HMT3EP20GCOL:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:00:45.2084387+07:00 0HMT3EP20GCOB:00000036 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:00:45.2090218+07:00 0HMT3EP20GCOB:00000036 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:00:45.2090218+07:00 0HMT3EP20GCOL:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:00:45.2105065+07:00 0HMT3EP20GCOL:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:00:45.2105119+07:00 0HMT3EP20GCOB:00000036 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:00:45.2140781+07:00 0HMT3EP20GCOL:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T14:00:45.2140782+07:00 0HMT3EP20GCOB:00000036 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:00:45.2381563+07:00 0HMT3EP20GCOB:00000036 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T14:00:45.2410316+07:00 0HMT3EP20GCOB:00000036 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T14:00:45.2431816+07:00 0HMT3EP20GCOB:00000036 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:00:45.2452091+07:00 0HMT3EP20GCOB:00000036 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T14:00:45.2472045+07:00 0HMT3EP20GCOB:00000036 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:00:45.2490015+07:00 0HMT3EP20GCOB:00000036 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T14:00:45.2500827+07:00 0HMT3EP20GCOB:00000036 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:00:45.4686976+07:00 0HMT3EP20GCON:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:00:45.4691930+07:00 0HMT3EP20GCON:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:00:45.4704665+07:00 0HMT3EP20GCON:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:00:45.4726241+07:00 0HMT3EP20GCON:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:00:45.4730511+07:00 0HMT3EP20GCON:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:00:45.4744023+07:00 0HMT3EP20GCON:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:00:45.4761212+07:00 0HMT3EP20GCON:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T14:00:45.4918176+07:00 0HMT3EP20GCOB:00000037 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:00:45.4926651+07:00 0HMT3EP20GCOB:00000037 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:00:45.4940582+07:00 0HMT3EP20GCOB:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:00:45.4955251+07:00 0HMT3EP20GCOB:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:00:45.4978776+07:00 0HMT3EP20GCOB:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T14:00:45.4990193+07:00 0HMT3EP20GCOB:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T14:00:45.5000171+07:00 0HMT3EP20GCOB:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:00:45.5005865+07:00 0HMT3EP20GCOL:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:00:45.5012013+07:00 0HMT3EP20GCOB:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T14:00:45.5013746+07:00 0HMT3EP20GCOL:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:00:45.5021209+07:00 0HMT3EP20GCOB:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:00:45.5028500+07:00 0HMT3EP20GCOL:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:00:45.5029554+07:00 0HMT3EP20GCOB:00000037 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T14:00:45.5036863+07:00 0HMT3EP20GCOB:00000037 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:00:45.5045069+07:00 0HMT3EP20GCOL:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T14:00:46.1727346+07:00 0HMT3EP20GCOB:00000039 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:00:46.1733116+07:00 0HMT3EP20GCOB:00000039 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:00:46.1746771+07:00 0HMT3EP20GCOB:00000039 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:00:46.1767913+07:00 0HMT3EP20GCOB:00000039 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T14:00:46.2606313+07:00 0HMT3EP20GCOB:0000003B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:00:46.2611748+07:00 0HMT3EP20GCOB:0000003B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:00:46.2627010+07:00 0HMT3EP20GCOB:0000003B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:00:46.2649465+07:00 0HMT3EP20GCOB:0000003B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T14:00:49.8121338+07:00 0HMT3EP20GCOB:0000003D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:00:49.8125968+07:00 0HMT3EP20GCOB:0000003D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:00:49.8140679+07:00 0HMT3EP20GCOB:0000003D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:00:49.8154687+07:00 0HMT3EP20GCOB:0000003D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T14:00:50.4763803+07:00 0HMT3EP20GCOB:0000003E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:00:50.4768468+07:00 0HMT3EP20GCOB:0000003E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:00:50.4782205+07:00 0HMT3EP20GCOB:0000003E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:00:50.4800480+07:00 0HMT3EP20GCOB:0000003E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T14:00:50.5307736+07:00 0HMT3EP20GCOB:0000003F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:00:50.5312510+07:00 0HMT3EP20GCOB:0000003F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:00:50.5326735+07:00 0HMT3EP20GCOB:0000003F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:00:50.5351780+07:00 0HMT3EP20GCOB:0000003F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T14:01:56.4835603+07:00 0HMT3EP20GCOB:00000041 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:01:56.4840853+07:00 0HMT3EP20GCOB:00000041 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:01:56.4938454+07:00 0HMT3EP20GCOB:00000041 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:01:56.4975753+07:00 0HMT3EP20GCOB:00000041 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T14:01:57.2445542+07:00 0HMT3EP20GCOB:00000043 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:01:57.2450073+07:00 0HMT3EP20GCOB:00000043 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:01:57.2462571+07:00 0HMT3EP20GCOB:00000043 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:01:57.2477867+07:00 0HMT3EP20GCOB:00000043 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T14:01:57.3013265+07:00 0HMT3EP20GCOB:00000045 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:01:57.3018628+07:00 0HMT3EP20GCOB:00000045 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:01:57.3031617+07:00 0HMT3EP20GCOB:00000045 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:01:57.3060824+07:00 0HMT3EP20GCOB:00000045 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T14:02:35.0153384+07:00 0HMT3EP20GCOB:00000047 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:02:35.0160773+07:00 0HMT3EP20GCOB:00000047 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:02:35.0271811+07:00 0HMT3EP20GCOB:00000047 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:02:35.0317764+07:00 0HMT3EP20GCOB:00000047 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T14:02:35.2743552+07:00 0HMT3EP20GCOB:00000049 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:02:35.2748565+07:00 0HMT3EP20GCOB:00000049 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:02:35.2761765+07:00 0HMT3EP20GCOB:00000049 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:02:35.2783263+07:00 0HMT3EP20GCOB:00000049 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T14:02:35.3194871+07:00 0HMT3EP20GCOB:0000004B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:02:35.3201070+07:00 0HMT3EP20GCOB:0000004B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:02:35.3216792+07:00 0HMT3EP20GCOB:0000004B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:02:35.3253963+07:00 0HMT3EP20GCOB:0000004B [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T14:02:39.1700724+07:00 0HMT3EP20GCOB:0000004C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:02:39.1706387+07:00 0HMT3EP20GCOB:0000004C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:02:39.1719760+07:00 0HMT3EP20GCOB:0000004C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:02:39.1735112+07:00 0HMT3EP20GCOB:0000004C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T14:02:39.5440720+07:00 0HMT3EP20GCOB:0000004D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:02:39.5445989+07:00 0HMT3EP20GCOB:0000004D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:02:39.5458731+07:00 0HMT3EP20GCOB:0000004D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:02:39.5485944+07:00 0HMT3EP20GCOB:0000004D [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T14:02:39.5891442+07:00 0HMT3EP20GCOB:0000004E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:02:39.5897026+07:00 0HMT3EP20GCOB:0000004E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:02:39.5914138+07:00 0HMT3EP20GCOB:0000004E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:02:39.5936793+07:00 0HMT3EP20GCOB:0000004E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T14:02:42.8756649+07:00 0HMT3EP20GCOB:00000050 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:02:42.8762146+07:00 0HMT3EP20GCOB:00000050 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:02:42.8775588+07:00 0HMT3EP20GCOB:00000050 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:02:42.8793658+07:00 0HMT3EP20GCOB:00000050 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T14:02:43.2874795+07:00 0HMT3EP20GCOB:00000052 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:02:43.2879783+07:00 0HMT3EP20GCOB:00000052 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:02:43.2892418+07:00 0HMT3EP20GCOB:00000052 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:02:43.2908379+07:00 0HMT3EP20GCOB:00000052 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T14:02:43.3350779+07:00 0HMT3EP20GCOB:00000054 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:02:43.3359892+07:00 0HMT3EP20GCOB:00000054 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:02:43.3383989+07:00 0HMT3EP20GCOB:00000054 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:02:43.3409193+07:00 0HMT3EP20GCOB:00000054 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T14:04:51.6199130+07:00 0HMT3EP20GCOP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:04:51.6204964+07:00 0HMT3EP20GCOP:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:04:51.6348114+07:00 0HMT3EP20GCOP:00000002 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:04:51.6392316+07:00 0HMT3EP20GCOP:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T14:04:51.8637079+07:00 0HMT3EP20GCOP:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:04:51.8642797+07:00 0HMT3EP20GCOP:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:04:51.8658970+07:00 0HMT3EP20GCOP:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:04:51.8684408+07:00 0HMT3EP20GCOP:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T14:04:51.9112356+07:00 0HMT3EP20GCOO:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:04:51.9117473+07:00 0HMT3EP20GCOO:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:04:51.9130593+07:00 0HMT3EP20GCOO:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:04:51.9156061+07:00 0HMT3EP20GCOO:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T14:04:54.6462506+07:00 0HMT3EP20GCOP:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:04:54.6467297+07:00 0HMT3EP20GCOP:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:04:54.6480478+07:00 0HMT3EP20GCOP:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:04:54.6500107+07:00 0HMT3EP20GCOP:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T14:04:55.2973252+07:00 0HMT3EP20GCOP:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:04:55.2980246+07:00 0HMT3EP20GCOP:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:04:55.2994733+07:00 0HMT3EP20GCOP:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:04:55.3009441+07:00 0HMT3EP20GCOP:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T14:04:55.3664159+07:00 0HMT3EP20GCOO:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:04:55.3669123+07:00 0HMT3EP20GCOO:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:04:55.3683706+07:00 0HMT3EP20GCOO:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:04:55.3702568+07:00 0HMT3EP20GCOO:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T14:04:57.0908865+07:00 0HMT3EP20GCOP:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:04:57.0914587+07:00 0HMT3EP20GCOP:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:04:57.0930184+07:00 0HMT3EP20GCOP:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:04:57.0962152+07:00 0HMT3EP20GCOP:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-23T14:04:57.0982089+07:00 0HMT3EP20GCOP:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-23T14:04:57.1319448+07:00 0HMT3EP20GCOO:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:04:57.1325513+07:00 0HMT3EP20GCOO:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:04:57.1347664+07:00 0HMT3EP20GCOO:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:04:57.1379773+07:00 0HMT3EP20GCOO:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T14:04:57.1415452+07:00 0HMT3EP20GCOO:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T14:04:57.4475948+07:00 0HMT3EP20GCOQ:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:04:57.4480463+07:00 0HMT3EP20GCOQ:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:04:57.4493775+07:00 0HMT3EP20GCOQ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:04:57.4508632+07:00 0HMT3EP20GCOQ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T14:04:57.4530023+07:00 0HMT3EP20GCOQ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T14:05:05.6884389+07:00 0HMT3EP20GCOP:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:05:05.6889393+07:00 0HMT3EP20GCOP:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:05:05.6902049+07:00 0HMT3EP20GCOP:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:05:05.6917871+07:00 0HMT3EP20GCOP:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-23T14:05:05.6935328+07:00 0HMT3EP20GCOP:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-23T14:05:05.7142285+07:00 0HMT3EP20GCOQ:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:05:05.7147685+07:00 0HMT3EP20GCOQ:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:05:05.7160950+07:00 0HMT3EP20GCOQ:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:05:05.7184869+07:00 0HMT3EP20GCOQ:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T14:05:05.7205424+07:00 0HMT3EP20GCOQ:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T14:05:05.7443975+07:00 0HMT3EP20GCOO:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:05:05.7449301+07:00 0HMT3EP20GCOO:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:05:05.7462851+07:00 0HMT3EP20GCOO:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:05:05.7479579+07:00 0HMT3EP20GCOO:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T14:05:05.7507618+07:00 0HMT3EP20GCOO:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T14:05:19.7295478+07:00 0HMT3EP20GCOK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:05:19.7305693+07:00 0HMT3EP20GCOK:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:05:19.7341859+07:00 0HMT3EP20GCOK:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:05:20.7509039+07:00 0HMT3EP20GCOR:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:05:20.7508973+07:00 0HMT3EP20GCOQ:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:05:20.7516205+07:00 0HMT3EP20GCOR:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:05:20.7516207+07:00 0HMT3EP20GCOQ:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:05:20.7530057+07:00 0HMT3EP20GCOR:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:05:20.7530057+07:00 0HMT3EP20GCOQ:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:05:20.7572390+07:00 0HMT3EP20GCOR:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:05:20.7572467+07:00 0HMT3EP20GCOQ:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T14:05:20.7618036+07:00 0HMT3EP20GCOR:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T14:05:20.7645574+07:00 0HMT3EP20GCOR:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T14:05:20.7693669+07:00 0HMT3EP20GCOR:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:05:21.0614759+07:00 0HMT3EP20GCOS:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:05:21.0621194+07:00 0HMT3EP20GCOS:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:05:21.0642902+07:00 0HMT3EP20GCOS:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:05:21.0652883+07:00 0HMT3EP20GCOS:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:05:21.0659766+07:00 0HMT3EP20GCOS:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:05:21.0685026+07:00 0HMT3EP20GCOS:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:05:21.0706937+07:00 0HMT3EP20GCOS:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T14:05:21.0885207+07:00 0HMT3EP20GCOQ:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:05:21.0886349+07:00 0HMT3EP20GCOR:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:05:21.0891759+07:00 0HMT3EP20GCOR:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:05:21.0891850+07:00 0HMT3EP20GCOQ:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:05:21.0908205+07:00 0HMT3EP20GCOR:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:05:21.0908310+07:00 0HMT3EP20GCOQ:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:05:21.0927174+07:00 0HMT3EP20GCOQ:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T14:05:21.0927260+07:00 0HMT3EP20GCOR:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:05:21.0975318+07:00 0HMT3EP20GCOR:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T14:05:21.0992291+07:00 0HMT3EP20GCOR:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T14:05:21.1003762+07:00 0HMT3EP20GCOR:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:29:04.5769523+07:00 0HMT3EP20GCOT:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:29:04.5805017+07:00 0HMT3EP20GCOT:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:29:04.5916783+07:00 0HMT3EP20GCOT:00000003 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:29:04.5953149+07:00 0HMT3EP20GCOT:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T14:29:04.6348394+07:00 0HMT3EP20GCOT:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:29:04.6353121+07:00 0HMT3EP20GCOT:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:29:04.6371918+07:00 0HMT3EP20GCOT:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:29:04.6409280+07:00 0HMT3EP20GCOT:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T14:29:20.8188212+07:00 0HMT3EP20GCOS:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:29:20.8227704+07:00 0HMT3EP20GCOS:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:29:20.8483211+07:00 0HMT3EP20GCOS:00000002 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:29:21.5262926+07:00 0HMT3EP20GCOU:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:29:21.5262925+07:00 0HMT3EP20GCOT:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:29:21.5273072+07:00 0HMT3EP20GCOU:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:29:21.5289526+07:00 0HMT3EP20GCOU:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:29:21.5307546+07:00 0HMT3EP20GCOT:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:29:21.5329577+07:00 0HMT3EP20GCOT:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:29:21.5334190+07:00 0HMT3EP20GCOU:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:29:21.5374124+07:00 0HMT3EP20GCOT:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T14:29:21.5397717+07:00 0HMT3EP20GCOU:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T14:29:21.5428257+07:00 0HMT3EP20GCOU:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T14:29:21.5457682+07:00 0HMT3EP20GCOU:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:29:21.7614928+07:00 0HMT3EP20GCON:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:29:21.7621278+07:00 0HMT3EP20GCON:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:29:21.7636544+07:00 0HMT3EP20GCON:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:29:21.8350299+07:00 0HMT3EP20GCOV:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:29:21.8355063+07:00 0HMT3EP20GCOV:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:29:21.8367945+07:00 0HMT3EP20GCOV:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:29:21.8392000+07:00 0HMT3EP20GCOV:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:29:21.8480600+07:00 0HMT3EP20GCOV:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T14:29:21.8484405+07:00 0HMT3EP20GCP0:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:29:21.8492675+07:00 0HMT3EP20GCP0:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:29:21.8496323+07:00 0HMT3EP20GCOV:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T14:29:21.8509876+07:00 0HMT3EP20GCOV:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:29:21.8511763+07:00 0HMT3EP20GCP0:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:29:21.8529152+07:00 0HMT3EP20GCP0:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:29:21.8537417+07:00 0HMT3EP20GCP0:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:29:21.8545824+07:00 0HMT3EP20GCOV:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T14:29:21.8556343+07:00 0HMT3EP20GCP0:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:29:21.8556937+07:00 0HMT3EP20GCOV:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:29:21.8574291+07:00 0HMT3EP20GCOV:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T14:29:21.8586414+07:00 0HMT3EP20GCP0:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T14:29:21.8586422+07:00 0HMT3EP20GCOV:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:29:21.8632620+07:00 0HMT3EP20GCOV:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:29:21.8637840+07:00 0HMT3EP20GCOV:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:29:21.8658535+07:00 0HMT3EP20GCOV:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:29:21.8686341+07:00 0HMT3EP20GCOV:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T14:29:21.8783062+07:00 0HMT3EP20GCOU:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:29:21.8785284+07:00 0HMT3EP20GCOT:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:29:21.8790066+07:00 0HMT3EP20GCOT:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:29:21.8790064+07:00 0HMT3EP20GCOU:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:29:21.8807184+07:00 0HMT3EP20GCOT:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:29:21.8807185+07:00 0HMT3EP20GCOU:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:29:21.8829433+07:00 0HMT3EP20GCOU:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:29:21.8830248+07:00 0HMT3EP20GCOT:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T14:29:21.8872838+07:00 0HMT3EP20GCOU:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T14:29:21.8889830+07:00 0HMT3EP20GCOU:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T14:29:21.8904285+07:00 0HMT3EP20GCOU:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:29:22.4472620+07:00 0HMT3EP20GCOU:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:29:22.4477267+07:00 0HMT3EP20GCOU:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:29:22.4490164+07:00 0HMT3EP20GCOU:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:29:22.4523263+07:00 0HMT3EP20GCOU:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T14:29:22.5179261+07:00 0HMT3EP20GCOU:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:29:22.5187665+07:00 0HMT3EP20GCOU:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:29:22.5208140+07:00 0HMT3EP20GCOU:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:29:22.5247055+07:00 0HMT3EP20GCOU:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T14:29:23.2954260+07:00 0HMT3EP20GCOU:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:29:23.2960645+07:00 0HMT3EP20GCOU:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:29:23.2974544+07:00 0HMT3EP20GCOU:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:29:23.3007834+07:00 0HMT3EP20GCOU:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T14:29:23.9116289+07:00 0HMT3EP20GCOV:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:29:23.9121989+07:00 0HMT3EP20GCOV:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:29:23.9126159+07:00 0HMT3EP20GCP1:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:29:23.9129599+07:00 0HMT3EP20GCP1:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:29:23.9137400+07:00 0HMT3EP20GCOV:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:29:23.9141333+07:00 0HMT3EP20GCP1:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:29:23.9151747+07:00 0HMT3EP20GCP1:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T14:29:23.9151731+07:00 0HMT3EP20GCOV:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:29:23.9196021+07:00 0HMT3EP20GCOV:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T14:29:23.9210624+07:00 0HMT3EP20GCOV:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T14:29:23.9221790+07:00 0HMT3EP20GCOV:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:29:23.9234237+07:00 0HMT3EP20GCOV:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T14:29:23.9244380+07:00 0HMT3EP20GCOV:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:29:23.9254958+07:00 0HMT3EP20GCOV:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T14:29:23.9264611+07:00 0HMT3EP20GCOV:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:29:23.9918547+07:00 0HMT3EP20GCP2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:29:23.9924771+07:00 0HMT3EP20GCP2:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:29:23.9938415+07:00 0HMT3EP20GCP2:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:29:23.9984643+07:00 0HMT3EP20GCP2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:29:23.9990793+07:00 0HMT3EP20GCP2:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:29:24.0006059+07:00 0HMT3EP20GCP2:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:29:24.0021403+07:00 0HMT3EP20GCP2:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T14:29:24.0315578+07:00 0HMT3EP20GCOV:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:29:24.0320968+07:00 0HMT3EP20GCOV:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:29:24.0322100+07:00 0HMT3EP20GCP1:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:29:24.0324881+07:00 0HMT3EP20GCP1:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:29:24.0334118+07:00 0HMT3EP20GCOV:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:29:24.0334298+07:00 0HMT3EP20GCP1:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:29:24.0346453+07:00 0HMT3EP20GCOV:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:29:24.0346453+07:00 0HMT3EP20GCP1:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T14:29:24.0389385+07:00 0HMT3EP20GCOV:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T14:29:24.0401188+07:00 0HMT3EP20GCOV:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T14:29:24.0412364+07:00 0HMT3EP20GCOV:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:29:24.0426398+07:00 0HMT3EP20GCOV:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T14:29:24.0436788+07:00 0HMT3EP20GCOV:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:29:24.0448175+07:00 0HMT3EP20GCOV:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T14:29:24.0457730+07:00 0HMT3EP20GCOV:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:54:12.2812344+07:00 0HMT3EP20GCP6:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:54:12.2963311+07:00 0HMT3EP20GCP6:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:54:12.3076805+07:00 0HMT3EP20GCP6:00000003 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:54:12.3119678+07:00 0HMT3EP20GCP6:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:54:12.3164349+07:00 0HMT3EP20GCP6:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T14:54:12.3188922+07:00 0HMT3EP20GCP6:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T14:54:12.3216559+07:00 0HMT3EP20GCP6:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:54:12.3233974+07:00 0HMT3EP20GCP6:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T14:54:12.3242282+07:00 0HMT3EP20GCP6:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:54:12.3250458+07:00 0HMT3EP20GCP6:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T14:54:12.3259897+07:00 0HMT3EP20GCP6:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:57:10.1053804+07:00 0HMT3EP20GCP4:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:57:10.1053804+07:00 0HMT3EP20GCP3:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:57:10.1060539+07:00 0HMT3EP20GCP3:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:57:10.1094516+07:00 0HMT3EP20GCP4:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:57:10.1161293+07:00 0HMT3EP20GCP3:00000004 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:57:10.1161505+07:00 0HMT3EP20GCP4:00000004 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:57:10.1244038+07:00 0HMT3EP20GCP4:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T14:57:10.1256220+07:00 0HMT3EP20GCP3:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:57:10.1662023+07:00 0HMT3EP20GCP3:00000004 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T14:57:10.2017800+07:00 0HMT3EP20GCP3:00000004 [INF] Executed DbCommand ("10"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T14:57:10.2229884+07:00 0HMT3EP20GCP3:00000004 [INF] Executed DbCommand ("10"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:57:10.4691779+07:00 0HMT3EP20GCP8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:57:10.4701718+07:00 0HMT3EP20GCP8:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:57:10.4728787+07:00 0HMT3EP20GCP8:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:57:10.4948549+07:00 0HMT3EP20GCP8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:57:10.4956144+07:00 0HMT3EP20GCP8:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:57:10.4971567+07:00 0HMT3EP20GCP8:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:57:10.4995040+07:00 0HMT3EP20GCP8:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T14:57:11.5788584+07:00 0HMT3EP20GCP9:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:57:11.5795702+07:00 0HMT3EP20GCP9:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:57:11.5815148+07:00 0HMT3EP20GCP9:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:57:11.5832820+07:00 0HMT3EP20GCP9:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:57:11.5881171+07:00 0HMT3EP20GCPA:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:57:11.5884832+07:00 0HMT3EP20GCP9:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T14:57:11.5885987+07:00 0HMT3EP20GCPA:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:57:11.5899074+07:00 0HMT3EP20GCP9:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T14:57:11.5908300+07:00 0HMT3EP20GCPA:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:57:11.5921860+07:00 0HMT3EP20GCP9:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:57:11.5948987+07:00 0HMT3EP20GCPA:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T14:57:11.5960028+07:00 0HMT3EP20GCP9:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T14:57:11.5973361+07:00 0HMT3EP20GCP9:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:57:11.5988153+07:00 0HMT3EP20GCP9:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T14:57:11.6002360+07:00 0HMT3EP20GCP9:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:57:11.6909989+07:00 0HMT3EP20GCPB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:57:11.6914484+07:00 0HMT3EP20GCPB:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:57:11.6927487+07:00 0HMT3EP20GCPB:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:57:11.7072076+07:00 0HMT3EP20GCPB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:57:11.7078163+07:00 0HMT3EP20GCPB:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:57:11.7091898+07:00 0HMT3EP20GCPB:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:57:11.7103567+07:00 0HMT3EP20GCPB:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T14:58:03.3973468+07:00 0HMT3EP20GCPC:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:58:03.4018516+07:00 0HMT3EP20GCPC:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:58:03.4025272+07:00 0HMT3EP20GCPD:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:58:03.4044879+07:00 0HMT3EP20GCPD:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:58:03.4178327+07:00 0HMT3EP20GCPC:00000003 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:58:03.4178327+07:00 0HMT3EP20GCPD:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:58:03.4232281+07:00 0HMT3EP20GCPE:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:58:03.4259757+07:00 0HMT3EP20GCPE:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:58:03.4270903+07:00 0HMT3EP20GCPC:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:58:03.4297197+07:00 0HMT3EP20GCPE:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:58:03.4305608+07:00 0HMT3EP20GCPD:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:58:03.4318415+07:00 0HMT3EP20GCPD:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:58:03.4341592+07:00 0HMT3EP20GCPD:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:58:03.4360787+07:00 0HMT3EP20GCPE:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T14:58:03.4400661+07:00 0HMT3EP20GCPD:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T14:58:03.4451303+07:00 0HMT3EP20GCPC:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T14:58:03.4475314+07:00 0HMT3EP20GCPC:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T14:58:03.4503341+07:00 0HMT3EP20GCPC:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:58:03.4635364+07:00 0HMT3EP20GCPC:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:58:03.4635970+07:00 0HMT3EP20GCPE:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:58:03.4640283+07:00 0HMT3EP20GCPC:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:58:03.4640234+07:00 0HMT3EP20GCPE:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:58:03.4652612+07:00 0HMT3EP20GCPC:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:58:03.4652647+07:00 0HMT3EP20GCPE:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:58:03.4670516+07:00 0HMT3EP20GCPC:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:58:03.4670516+07:00 0HMT3EP20GCPE:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T14:58:03.4712148+07:00 0HMT3EP20GCPC:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T14:58:03.4729009+07:00 0HMT3EP20GCPC:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T14:58:03.4743743+07:00 0HMT3EP20GCPC:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:58:04.0876533+07:00 0HMT3EP20GCP9:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:58:04.0881457+07:00 0HMT3EP20GCP9:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:58:04.0891544+07:00 0HMT3EP20GCPA:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:58:04.0897321+07:00 0HMT3EP20GCP9:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:58:04.0897322+07:00 0HMT3EP20GCPA:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:58:04.0913027+07:00 0HMT3EP20GCP9:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:58:04.0918116+07:00 0HMT3EP20GCPA:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:58:04.0943297+07:00 0HMT3EP20GCPA:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T14:58:04.0993263+07:00 0HMT3EP20GCP9:00000006 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T14:58:04.1018208+07:00 0HMT3EP20GCP9:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T14:58:04.1027728+07:00 0HMT3EP20GCP9:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:58:04.1045842+07:00 0HMT3EP20GCP9:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T14:58:04.1054312+07:00 0HMT3EP20GCP9:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:58:04.1063922+07:00 0HMT3EP20GCP9:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T14:58:04.1074177+07:00 0HMT3EP20GCP9:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:58:04.1267288+07:00 0HMT3EP20GCPG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:58:04.1271951+07:00 0HMT3EP20GCPG:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:58:04.1284979+07:00 0HMT3EP20GCPG:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:58:04.1322622+07:00 0HMT3EP20GCPG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:58:04.1327428+07:00 0HMT3EP20GCPG:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:58:04.1341501+07:00 0HMT3EP20GCPG:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:58:04.1353835+07:00 0HMT3EP20GCPG:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T14:58:04.1496397+07:00 0HMT3EP20GCP9:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:58:04.1501780+07:00 0HMT3EP20GCP9:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:58:04.1512934+07:00 0HMT3EP20GCPA:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T14:58:04.1515148+07:00 0HMT3EP20GCP9:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:58:04.1516490+07:00 0HMT3EP20GCPA:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T14:58:04.1529243+07:00 0HMT3EP20GCP9:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:58:04.1533177+07:00 0HMT3EP20GCPA:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T14:58:04.1552183+07:00 0HMT3EP20GCPA:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T14:58:04.1567185+07:00 0HMT3EP20GCP9:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T14:58:04.1579665+07:00 0HMT3EP20GCP9:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T14:58:04.1588323+07:00 0HMT3EP20GCP9:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:58:04.1602978+07:00 0HMT3EP20GCP9:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T14:58:04.1611987+07:00 0HMT3EP20GCP9:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T14:58:04.1623258+07:00 0HMT3EP20GCP9:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T14:58:04.1631713+07:00 0HMT3EP20GCP9:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:38:45.0490571+07:00 0HMT3EP20GCPK:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:38:45.0537385+07:00 0HMT3EP20GCPK:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:38:45.0693289+07:00 0HMT3EP20GCPK:00000003 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:38:45.0738039+07:00 0HMT3EP20GCPK:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:38:45.0788626+07:00 0HMT3EP20GCPK:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T15:38:45.0810931+07:00 0HMT3EP20GCPK:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T15:38:45.0838335+07:00 0HMT3EP20GCPK:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:38:45.0860935+07:00 0HMT3EP20GCPK:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T15:38:45.0872889+07:00 0HMT3EP20GCPK:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:38:45.0884369+07:00 0HMT3EP20GCPK:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T15:38:45.0893722+07:00 0HMT3EP20GCPK:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:40:35.0790977+07:00 0HMT3EP20GCPH:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:40:35.0791045+07:00 0HMT3EP20GCPI:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:40:35.0796855+07:00 0HMT3EP20GCPI:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:40:35.0830934+07:00 0HMT3EP20GCPH:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:40:35.0890207+07:00 0HMT3EP20GCPH:00000004 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:40:35.0890465+07:00 0HMT3EP20GCPI:00000004 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:40:35.0931287+07:00 0HMT3EP20GCPI:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T15:40:35.0931288+07:00 0HMT3EP20GCPH:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:40:35.0971320+07:00 0HMT3EP20GCPH:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T15:40:35.0994480+07:00 0HMT3EP20GCPH:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T15:40:35.1026467+07:00 0HMT3EP20GCPH:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:40:35.3984866+07:00 0HMT3EP20GCPM:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:40:35.3989242+07:00 0HMT3EP20GCPM:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:40:35.4001043+07:00 0HMT3EP20GCPM:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:40:35.4005465+07:00 0HMT3EP20GCPM:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:40:35.4007797+07:00 0HMT3EP20GCPM:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:40:35.4017003+07:00 0HMT3EP20GCPM:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:40:35.4033429+07:00 0HMT3EP20GCPM:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T15:40:35.4142662+07:00 0HMT3EP20GCPI:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:40:35.4142661+07:00 0HMT3EP20GCPH:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:40:35.4147157+07:00 0HMT3EP20GCPI:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:40:35.4147156+07:00 0HMT3EP20GCPH:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:40:35.4159371+07:00 0HMT3EP20GCPH:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:40:35.4159582+07:00 0HMT3EP20GCPI:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:40:35.4175495+07:00 0HMT3EP20GCPH:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:40:35.4175495+07:00 0HMT3EP20GCPI:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T15:40:35.4222648+07:00 0HMT3EP20GCPH:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T15:40:35.4233793+07:00 0HMT3EP20GCPH:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T15:40:35.4242249+07:00 0HMT3EP20GCPH:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:40:35.5104491+07:00 0HMT3EP20GCPN:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:40:35.5110497+07:00 0HMT3EP20GCPN:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:40:35.5137834+07:00 0HMT3EP20GCPN:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:40:35.5173818+07:00 0HMT3EP20GCPN:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:40:35.5177682+07:00 0HMT3EP20GCPO:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:40:35.5187260+07:00 0HMT3EP20GCPO:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:40:35.5201265+07:00 0HMT3EP20GCPO:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:40:35.5213975+07:00 0HMT3EP20GCPO:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T15:40:35.5230647+07:00 0HMT3EP20GCPN:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T15:40:35.5234537+07:00 0HMT3EP20GCPP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:40:35.5240778+07:00 0HMT3EP20GCPP:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:40:35.5241455+07:00 0HMT3EP20GCPN:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T15:40:35.5251526+07:00 0HMT3EP20GCPN:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:40:35.5259812+07:00 0HMT3EP20GCPP:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:40:35.5273961+07:00 0HMT3EP20GCPN:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T15:40:35.5283523+07:00 0HMT3EP20GCPN:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:40:35.5291835+07:00 0HMT3EP20GCPN:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T15:40:35.5299883+07:00 0HMT3EP20GCPN:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:40:35.5384059+07:00 0HMT3EP20GCPP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:40:35.5389802+07:00 0HMT3EP20GCPP:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:40:35.5403866+07:00 0HMT3EP20GCPP:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:40:35.5418248+07:00 0HMT3EP20GCPP:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T15:40:35.5604387+07:00 0HMT3EP20GCPN:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:40:35.5609110+07:00 0HMT3EP20GCPN:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:40:35.5621387+07:00 0HMT3EP20GCPO:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:40:35.5622579+07:00 0HMT3EP20GCPN:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:40:35.5625777+07:00 0HMT3EP20GCPO:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:40:35.5634883+07:00 0HMT3EP20GCPN:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:40:35.5641118+07:00 0HMT3EP20GCPO:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:40:35.5657933+07:00 0HMT3EP20GCPO:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T15:40:35.5664100+07:00 0HMT3EP20GCPN:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T15:40:35.5686266+07:00 0HMT3EP20GCPN:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T15:40:35.5695682+07:00 0HMT3EP20GCPN:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:40:35.5707015+07:00 0HMT3EP20GCPN:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T15:40:35.5714890+07:00 0HMT3EP20GCPN:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:40:35.5722564+07:00 0HMT3EP20GCPN:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T15:40:35.5730051+07:00 0HMT3EP20GCPN:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:40:45.6774989+07:00 0HMT3EP20GCPN:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:40:45.6785439+07:00 0HMT3EP20GCPN:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:40:45.6791388+07:00 0HMT3EP20GCPO:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:40:45.6796061+07:00 0HMT3EP20GCPO:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:40:45.6938001+07:00 0HMT3EP20GCPN:00000006 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:40:45.7033210+07:00 0HMT3EP20GCPO:00000006 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:40:45.7034148+07:00 0HMT3EP20GCPN:00000006 [INF] Executed DbCommand ("9"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:40:45.7177287+07:00 0HMT3EP20GCPO:00000006 [INF] Executed DbCommand ("14"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T15:40:45.7314940+07:00 0HMT3EP20GCPN:00000006 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T15:40:45.7437847+07:00 0HMT3EP20GCPN:00000006 [INF] Executed DbCommand ("7"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T15:40:45.7479009+07:00 0HMT3EP20GCPN:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:40:45.7517081+07:00 0HMT3EP20GCPN:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T15:40:45.7588221+07:00 0HMT3EP20GCPN:00000006 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:40:45.7632350+07:00 0HMT3EP20GCPN:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T15:40:45.7677570+07:00 0HMT3EP20GCPN:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:40:46.0823383+07:00 0HMT3EP20GCPI:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:40:46.0823944+07:00 0HMT3EP20GCPH:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:40:46.0828080+07:00 0HMT3EP20GCPH:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:40:46.0828338+07:00 0HMT3EP20GCPI:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:40:46.0916381+07:00 0HMT3EP20GCPI:00000007 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:40:46.0946218+07:00 0HMT3EP20GCPI:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:40:46.0956474+07:00 0HMT3EP20GCPH:00000007 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:40:46.0982321+07:00 0HMT3EP20GCPI:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T15:40:46.0982374+07:00 0HMT3EP20GCPH:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T15:40:46.1001727+07:00 0HMT3EP20GCPI:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T15:40:46.1024371+07:00 0HMT3EP20GCPI:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:41:50.0866197+07:00 0HMT3EP20GCPI:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:41:50.0866196+07:00 0HMT3EP20GCPH:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:41:50.0873956+07:00 0HMT3EP20GCPH:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:41:50.0873956+07:00 0HMT3EP20GCPI:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:41:50.0973976+07:00 0HMT3EP20GCPH:00000009 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:41:50.1006713+07:00 0HMT3EP20GCPH:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:41:50.1008123+07:00 0HMT3EP20GCPI:00000009 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:41:50.1052093+07:00 0HMT3EP20GCPI:00000009 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T15:41:50.1055072+07:00 0HMT3EP20GCPH:00000009 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T15:41:50.1086887+07:00 0HMT3EP20GCPH:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T15:41:50.1116433+07:00 0HMT3EP20GCPH:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:41:50.4433197+07:00 0HMT3EP20GCPN:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:41:50.4438154+07:00 0HMT3EP20GCPN:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:41:50.4439426+07:00 0HMT3EP20GCPO:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:41:50.4442931+07:00 0HMT3EP20GCPO:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:41:50.4564065+07:00 0HMT3EP20GCPN:00000008 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:41:50.4593492+07:00 0HMT3EP20GCPO:00000008 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:41:50.4595173+07:00 0HMT3EP20GCPN:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:41:50.4629761+07:00 0HMT3EP20GCPO:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T15:41:50.4653348+07:00 0HMT3EP20GCPN:00000008 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T15:41:50.4687782+07:00 0HMT3EP20GCPN:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T15:41:50.4720634+07:00 0HMT3EP20GCPN:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:41:50.4752522+07:00 0HMT3EP20GCPN:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T15:41:50.4786852+07:00 0HMT3EP20GCPN:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:41:50.4810038+07:00 0HMT3EP20GCPN:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T15:41:50.4832175+07:00 0HMT3EP20GCPN:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:56:12.2340018+07:00 0HMT3EP20GCPR:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:56:12.2343402+07:00 0HMT3EP20GCPQ:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:56:12.2383348+07:00 0HMT3EP20GCPR:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:56:12.2416062+07:00 0HMT3EP20GCPQ:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:56:12.2526539+07:00 0HMT3EP20GCPR:00000003 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:56:12.2566965+07:00 0HMT3EP20GCPQ:00000003 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:56:12.2591975+07:00 0HMT3EP20GCPR:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T15:56:12.2618718+07:00 0HMT3EP20GCPQ:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:56:12.2698108+07:00 0HMT3EP20GCPQ:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T15:56:12.2730764+07:00 0HMT3EP20GCPQ:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T15:56:12.2767085+07:00 0HMT3EP20GCPQ:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:56:12.2792335+07:00 0HMT3EP20GCPQ:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T15:56:12.2802175+07:00 0HMT3EP20GCPQ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:56:12.2811608+07:00 0HMT3EP20GCPQ:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T15:56:12.2820301+07:00 0HMT3EP20GCPQ:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:56:12.4057666+07:00 0HMT3EP20GCPS:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:56:12.4058006+07:00 0HMT3EP20GCPT:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:56:12.4061776+07:00 0HMT3EP20GCPS:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:56:12.4061783+07:00 0HMT3EP20GCPT:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:56:12.4142409+07:00 0HMT3EP20GCPT:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:56:12.4142409+07:00 0HMT3EP20GCPS:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:56:12.4175330+07:00 0HMT3EP20GCPT:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:56:12.4176298+07:00 0HMT3EP20GCPS:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T15:56:12.4230630+07:00 0HMT3EP20GCPT:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T15:56:12.4250538+07:00 0HMT3EP20GCPT:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T15:56:12.4260172+07:00 0HMT3EP20GCPT:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:57:19.0846837+07:00 0HMT3EP20GCPS:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:57:19.0846838+07:00 0HMT3EP20GCPT:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:57:19.0852016+07:00 0HMT3EP20GCPT:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:57:19.0852016+07:00 0HMT3EP20GCPS:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:57:19.0951473+07:00 0HMT3EP20GCPS:00000005 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:57:19.0951721+07:00 0HMT3EP20GCPT:00000005 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:57:19.0990656+07:00 0HMT3EP20GCPT:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T15:57:19.0990600+07:00 0HMT3EP20GCPS:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:57:19.1152733+07:00 0HMT3EP20GCPS:00000005 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T15:57:19.1525309+07:00 0HMT3EP20GCPS:00000005 [INF] Executed DbCommand ("23"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T15:57:19.1753776+07:00 0HMT3EP20GCPS:00000005 [INF] Executed DbCommand ("12"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:57:19.3998958+07:00 0HMT3EP20GCPV:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:57:19.4003772+07:00 0HMT3EP20GCPV:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:57:19.4016155+07:00 0HMT3EP20GCPV:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:57:19.4030464+07:00 0HMT3EP20GCPV:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:57:19.4058720+07:00 0HMT3EP20GCQ0:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:57:19.4061156+07:00 0HMT3EP20GCPV:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T15:57:19.4064739+07:00 0HMT3EP20GCQ0:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:57:19.4071650+07:00 0HMT3EP20GCPV:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T15:57:19.4085727+07:00 0HMT3EP20GCQ0:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:57:19.4085967+07:00 0HMT3EP20GCPV:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:57:19.4101769+07:00 0HMT3EP20GCQ0:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T15:57:19.9432808+07:00 0HMT3EP20GCPQ:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:57:19.9438038+07:00 0HMT3EP20GCPQ:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:57:19.9451109+07:00 0HMT3EP20GCPQ:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:57:19.9466316+07:00 0HMT3EP20GCPQ:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:57:19.9473872+07:00 0HMT3EP20GCPR:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:57:19.9484789+07:00 0HMT3EP20GCPR:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:57:19.9503647+07:00 0HMT3EP20GCPR:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:57:19.9524474+07:00 0HMT3EP20GCPR:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T15:57:19.9558589+07:00 0HMT3EP20GCPQ:00000005 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T15:57:19.9816409+07:00 0HMT3EP20GCPQ:00000005 [INF] Executed DbCommand ("11"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T15:57:19.9934710+07:00 0HMT3EP20GCQ2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:57:19.9934634+07:00 0HMT3EP20GCPQ:00000005 [INF] Executed DbCommand ("11"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:57:20.0047106+07:00 0HMT3EP20GCQ2:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:57:20.0181677+07:00 0HMT3EP20GCQ2:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:57:20.0299692+07:00 0HMT3EP20GCQ2:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T15:57:20.0298849+07:00 0HMT3EP20GCPQ:00000005 [INF] Executed DbCommand ("11"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T15:57:20.0318578+07:00 0HMT3EP20GCQ3:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:57:20.0537973+07:00 0HMT3EP20GCPQ:00000005 [INF] Executed DbCommand ("10"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:57:20.0570207+07:00 0HMT3EP20GCPQ:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T15:57:20.0571730+07:00 0HMT3EP20GCQ3:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:57:20.0580850+07:00 0HMT3EP20GCPQ:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:57:20.0600554+07:00 0HMT3EP20GCQ3:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:57:20.0844945+07:00 0HMT3EP20GCQ3:00000003 [INF] Executed DbCommand ("12"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:57:20.1321923+07:00 0HMT3EP20GCQ3:00000003 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T15:57:20.1558888+07:00 0HMT3EP20GCQ3:00000003 [INF] Executed DbCommand ("11"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T15:57:20.1574437+07:00 0HMT3EP20GCQ3:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:57:20.1584784+07:00 0HMT3EP20GCQ3:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T15:57:20.1593937+07:00 0HMT3EP20GCQ3:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:57:20.1603040+07:00 0HMT3EP20GCQ3:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T15:57:20.1611664+07:00 0HMT3EP20GCQ3:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:59:30.0869507+07:00 0HMT3EP20GCPM:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:59:30.0875664+07:00 0HMT3EP20GCPM:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:59:30.0880723+07:00 0HMT3EP20GCPV:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:59:30.0880972+07:00 0HMT3EP20GCQ0:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:59:30.0884651+07:00 0HMT3EP20GCPV:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:59:30.0884856+07:00 0HMT3EP20GCQ0:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:59:30.0967804+07:00 0HMT3EP20GCPM:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:59:30.1044426+07:00 0HMT3EP20GCQ0:00000004 [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:59:30.1044425+07:00 0HMT3EP20GCPV:00000004 [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:59:30.1157401+07:00 0HMT3EP20GCPV:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:59:30.1158546+07:00 0HMT3EP20GCQ0:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T15:59:30.1204324+07:00 0HMT3EP20GCPV:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T15:59:30.1249651+07:00 0HMT3EP20GCPV:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T15:59:30.1297516+07:00 0HMT3EP20GCPV:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:59:30.4038138+07:00 0HMT3EP20GCQ4:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:59:30.4050436+07:00 0HMT3EP20GCQ4:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:59:30.4063913+07:00 0HMT3EP20GCQ4:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:59:30.4068907+07:00 0HMT3EP20GCQ4:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:59:30.4071905+07:00 0HMT3EP20GCQ4:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:59:30.4084646+07:00 0HMT3EP20GCQ4:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:59:30.4107736+07:00 0HMT3EP20GCQ4:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T15:59:31.5096983+07:00 0HMT3EP20GCPP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:59:31.5099974+07:00 0HMT3EP20GCQ5:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:59:31.5102997+07:00 0HMT3EP20GCPP:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:59:31.5103444+07:00 0HMT3EP20GCQ5:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:59:31.5117287+07:00 0HMT3EP20GCQ5:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:59:31.5117287+07:00 0HMT3EP20GCPP:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:59:31.5190378+07:00 0HMT3EP20GCQ5:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:59:31.5192901+07:00 0HMT3EP20GCQ6:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:59:31.5240221+07:00 0HMT3EP20GCQ6:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:59:31.5265569+07:00 0HMT3EP20GCQ6:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:59:31.5299358+07:00 0HMT3EP20GCQ6:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T15:59:31.5336943+07:00 0HMT3EP20GCQ5:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T15:59:31.5750529+07:00 0HMT3EP20GCQ5:00000003 [INF] Executed DbCommand ("26"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T15:59:31.6129026+07:00 0HMT3EP20GCQ5:00000003 [INF] Executed DbCommand ("11"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:59:31.6359755+07:00 0HMT3EP20GCQ5:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T15:59:31.6370977+07:00 0HMT3EP20GCQ5:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:59:31.6370919+07:00 0HMT3EP20GCQ7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:59:31.6375102+07:00 0HMT3EP20GCQ7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:59:31.6380615+07:00 0HMT3EP20GCQ5:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T15:59:31.6388661+07:00 0HMT3EP20GCQ5:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T15:59:31.6411021+07:00 0HMT3EP20GCQ7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:59:31.6648561+07:00 0HMT3EP20GCQ7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T15:59:31.6858940+07:00 0HMT3EP20GCQ7:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T15:59:31.6981306+07:00 0HMT3EP20GCQ7:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T15:59:31.7210199+07:00 0HMT3EP20GCQ7:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:01:07.2920901+07:00 0HMT3EP20GCQ7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:01:07.2926803+07:00 0HMT3EP20GCQ7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:01:07.3020849+07:00 0HMT3EP20GCQ7:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:02:07.8573806+07:00 0HMT3EP20GCQ8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:02:07.8580331+07:00 0HMT3EP20GCQ8:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:02:07.8670736+07:00 0HMT3EP20GCQ8:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:02:21.5297497+07:00 0HMT3EP20GCQ8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:02:21.5302226+07:00 0HMT3EP20GCQ8:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:02:21.5382959+07:00 0HMT3EP20GCQ8:00000002 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:02:21.5403475+07:00 0HMT3EP20GCQ8:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:04:06.1392826+07:00 0HMT3EP20GCPG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:06.1392828+07:00 0HMT3EP20GCPB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:06.1392828+07:00 0HMT3EP20GCP2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:06.1414837+07:00 0HMT3EP20GCPG:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:06.1414830+07:00 0HMT3EP20GCP2:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:06.1414829+07:00 0HMT3EP20GCPB:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:06.1421591+07:00 0HMT3EP20GCQ8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:06.1601155+07:00 0HMT3EP20GCP2:00000002 [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:06.1602528+07:00 0HMT3EP20GCPG:00000002 [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:06.1611999+07:00 0HMT3EP20GCPB:00000002 [INF] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:06.1666249+07:00 0HMT3EP20GCQ8:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:06.1737876+07:00 0HMT3EP20GCQ8:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:06.3003784+07:00 0HMT3EP20GCQ9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:06.3023842+07:00 0HMT3EP20GCQ9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:06.3049964+07:00 0HMT3EP20GCQ9:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:06.3056982+07:00 0HMT3EP20GCQA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:06.3071770+07:00 0HMT3EP20GCQA:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:06.3081763+07:00 0HMT3EP20GCQ9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:06.3087991+07:00 0HMT3EP20GCQ9:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:06.3098700+07:00 0HMT3EP20GCQA:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:06.3108014+07:00 0HMT3EP20GCQ9:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:06.3108581+07:00 0HMT3EP20GCQA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:06.3119249+07:00 0HMT3EP20GCQA:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:06.3143989+07:00 0HMT3EP20GCQB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:06.3144223+07:00 0HMT3EP20GCQA:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:06.3155206+07:00 0HMT3EP20GCQB:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:06.3162089+07:00 0HMT3EP20GCQ9:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:04:06.3175348+07:00 0HMT3EP20GCQA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:04:06.3175344+07:00 0HMT3EP20GCQB:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:06.3202182+07:00 0HMT3EP20GCQC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:06.3202185+07:00 0HMT3EP20GCQB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:06.3209213+07:00 0HMT3EP20GCQB:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:06.3209213+07:00 0HMT3EP20GCQC:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:06.3227442+07:00 0HMT3EP20GCQC:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:06.3227442+07:00 0HMT3EP20GCQB:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:06.3238927+07:00 0HMT3EP20GCQB:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:04:06.3240354+07:00 0HMT3EP20GCQC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:06.3251432+07:00 0HMT3EP20GCQC:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:06.3264130+07:00 0HMT3EP20GCQC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:06.3281055+07:00 0HMT3EP20GCQC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:04:06.3685839+07:00 0HMT3EP20GCQC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:06.3685839+07:00 0HMT3EP20GCQA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:06.3685839+07:00 0HMT3EP20GCQB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:06.3690991+07:00 0HMT3EP20GCQC:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:06.3690998+07:00 0HMT3EP20GCQA:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:06.3690989+07:00 0HMT3EP20GCQB:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:06.3758205+07:00 0HMT3EP20GCQB:00000002 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:06.3758201+07:00 0HMT3EP20GCQC:00000002 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:06.3758202+07:00 0HMT3EP20GCQA:00000002 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:06.4102723+07:00 0HMT3EP20GCQ9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:06.4152199+07:00 0HMT3EP20GCQ9:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:06.4170321+07:00 0HMT3EP20GCQ9:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:18.2875274+07:00 0HMT3EP20GCQD:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:18.2879911+07:00 0HMT3EP20GCQD:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:18.2893112+07:00 0HMT3EP20GCQD:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:18.3677368+07:00 0HMT3EP20GCQD:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T16:04:19.5238168+07:00 0HMT3EP20GCQD:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:19.5251613+07:00 0HMT3EP20GCQD:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:19.5259701+07:00 0HMT3EP20GCQF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:19.5264762+07:00 0HMT3EP20GCQF:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:19.5269945+07:00 0HMT3EP20GCQD:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:19.5281890+07:00 0HMT3EP20GCQF:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:19.5308534+07:00 0HMT3EP20GCQD:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:19.5351139+07:00 0HMT3EP20GCQF:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:04:19.5377150+07:00 0HMT3EP20GCQE:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:19.5385972+07:00 0HMT3EP20GCQE:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:19.5407066+07:00 0HMT3EP20GCQE:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:19.5422527+07:00 0HMT3EP20GCQE:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:19.5428101+07:00 0HMT3EP20GCQE:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:19.5428441+07:00 0HMT3EP20GCQD:00000006 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:04:19.5443719+07:00 0HMT3EP20GCQE:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:19.5458585+07:00 0HMT3EP20GCQE:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:04:19.5460092+07:00 0HMT3EP20GCQD:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:04:19.5487878+07:00 0HMT3EP20GCQD:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:19.5515171+07:00 0HMT3EP20GCQD:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:04:19.5532130+07:00 0HMT3EP20GCQD:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:19.5543264+07:00 0HMT3EP20GCQD:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:04:19.5555540+07:00 0HMT3EP20GCQD:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:19.5944451+07:00 0HMT3EP20GCQD:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:19.5944449+07:00 0HMT3EP20GCQF:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:19.5952496+07:00 0HMT3EP20GCQD:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:19.5952497+07:00 0HMT3EP20GCQF:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:19.5973046+07:00 0HMT3EP20GCQF:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:19.5974641+07:00 0HMT3EP20GCQD:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:19.5990264+07:00 0HMT3EP20GCQD:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:19.5990259+07:00 0HMT3EP20GCQF:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:04:19.6048375+07:00 0HMT3EP20GCQD:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:04:19.6067229+07:00 0HMT3EP20GCQD:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:04:19.6082214+07:00 0HMT3EP20GCQD:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:19.6099896+07:00 0HMT3EP20GCQD:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:04:19.6109563+07:00 0HMT3EP20GCQD:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:19.6121696+07:00 0HMT3EP20GCQD:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:04:19.6132593+07:00 0HMT3EP20GCQD:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:20.8476291+07:00 0HMT3EP20GCQD:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:20.8481007+07:00 0HMT3EP20GCQD:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:20.8494004+07:00 0HMT3EP20GCQD:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:20.8605962+07:00 0HMT3EP20GCQD:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T16:04:25.4173717+07:00 0HMT3EP20GCQE:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:25.4179314+07:00 0HMT3EP20GCQE:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:25.4196102+07:00 0HMT3EP20GCQE:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:27.1337367+07:00 0HMT3EP20GCQD:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:27.1344889+07:00 0HMT3EP20GCQD:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:27.1360167+07:00 0HMT3EP20GCQD:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:27.1380270+07:00 0HMT3EP20GCQD:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:27.1436197+07:00 0HMT3EP20GCQF:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:27.1443524+07:00 0HMT3EP20GCQF:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:27.1447912+07:00 0HMT3EP20GCQD:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:04:27.1459910+07:00 0HMT3EP20GCQF:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:27.1460761+07:00 0HMT3EP20GCQD:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:04:27.1470222+07:00 0HMT3EP20GCQF:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:04:27.1471611+07:00 0HMT3EP20GCQD:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:27.1505171+07:00 0HMT3EP20GCQD:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:04:27.1516390+07:00 0HMT3EP20GCQD:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:27.1535274+07:00 0HMT3EP20GCQD:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:04:27.1545771+07:00 0HMT3EP20GCQD:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:27.1703803+07:00 0HMT3EP20GCQH:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:27.1709556+07:00 0HMT3EP20GCQH:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:27.1723559+07:00 0HMT3EP20GCQH:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:27.3470771+07:00 0HMT3EP20GCQH:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:27.3479559+07:00 0HMT3EP20GCQH:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:27.3496470+07:00 0HMT3EP20GCQH:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:27.3510820+07:00 0HMT3EP20GCQH:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:04:27.4021053+07:00 0HMT3EP20GCQD:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:27.4030934+07:00 0HMT3EP20GCQD:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:27.4036002+07:00 0HMT3EP20GCQF:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:27.4040186+07:00 0HMT3EP20GCQF:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:27.4046960+07:00 0HMT3EP20GCQD:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:27.4052806+07:00 0HMT3EP20GCQF:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:27.4077752+07:00 0HMT3EP20GCQD:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:27.4101075+07:00 0HMT3EP20GCQF:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:04:27.4124088+07:00 0HMT3EP20GCQD:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:04:27.4146257+07:00 0HMT3EP20GCQD:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:04:27.4158463+07:00 0HMT3EP20GCQD:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:27.4175306+07:00 0HMT3EP20GCQD:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:04:27.4190782+07:00 0HMT3EP20GCQD:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:27.4209608+07:00 0HMT3EP20GCQD:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:04:27.4223163+07:00 0HMT3EP20GCQD:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:28.0416293+07:00 0HMT3EP20GCQD:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:28.0420957+07:00 0HMT3EP20GCQD:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:28.0433211+07:00 0HMT3EP20GCQD:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:28.0451542+07:00 0HMT3EP20GCQD:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T16:04:38.5098730+07:00 0HMT3EP20GCQD:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:38.5105336+07:00 0HMT3EP20GCQD:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:38.5121515+07:00 0HMT3EP20GCQD:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:38.5142494+07:00 0HMT3EP20GCQD:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:38.5184118+07:00 0HMT3EP20GCQF:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:38.5199021+07:00 0HMT3EP20GCQF:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:38.5199658+07:00 0HMT3EP20GCQD:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:04:38.5218820+07:00 0HMT3EP20GCQD:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:04:38.5221261+07:00 0HMT3EP20GCQF:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:38.5232059+07:00 0HMT3EP20GCQD:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:38.5246112+07:00 0HMT3EP20GCQD:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:04:38.5246047+07:00 0HMT3EP20GCQF:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:04:38.5276010+07:00 0HMT3EP20GCQD:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:38.5293241+07:00 0HMT3EP20GCQD:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:04:38.5314080+07:00 0HMT3EP20GCQD:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:38.5448467+07:00 0HMT3EP20GCQI:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:38.5454678+07:00 0HMT3EP20GCQI:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:38.5469997+07:00 0HMT3EP20GCQI:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:38.5685369+07:00 0HMT3EP20GCQI:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:38.5690113+07:00 0HMT3EP20GCQI:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:38.5703706+07:00 0HMT3EP20GCQI:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:38.5719429+07:00 0HMT3EP20GCQI:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:04:38.6021392+07:00 0HMT3EP20GCQD:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:38.6029549+07:00 0HMT3EP20GCQD:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:38.6050862+07:00 0HMT3EP20GCQD:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:38.6065151+07:00 0HMT3EP20GCQD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:38.6065195+07:00 0HMT3EP20GCQF:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:38.6081039+07:00 0HMT3EP20GCQF:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:38.6095458+07:00 0HMT3EP20GCQD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:04:38.6101041+07:00 0HMT3EP20GCQF:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:38.6113300+07:00 0HMT3EP20GCQD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:04:38.6128547+07:00 0HMT3EP20GCQF:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:04:38.6127542+07:00 0HMT3EP20GCQD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:38.6157926+07:00 0HMT3EP20GCQD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:04:38.6169959+07:00 0HMT3EP20GCQD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:38.6181796+07:00 0HMT3EP20GCQD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:04:38.6194336+07:00 0HMT3EP20GCQD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:39.4785612+07:00 0HMT3EP20GCQD:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:39.4792873+07:00 0HMT3EP20GCQD:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:39.4810967+07:00 0HMT3EP20GCQD:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:39.4831561+07:00 0HMT3EP20GCQD:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T16:04:42.4491991+07:00 0HMT3EP20GCQI:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:42.4496707+07:00 0HMT3EP20GCQI:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:42.4497079+07:00 0HMT3EP20GCQH:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:42.4499915+07:00 0HMT3EP20GCQH:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:42.4509660+07:00 0HMT3EP20GCQI:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:42.4509665+07:00 0HMT3EP20GCQH:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:42.5011866+07:00 0HMT3EP20GCQJ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:42.5018182+07:00 0HMT3EP20GCQJ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:42.5033271+07:00 0HMT3EP20GCQJ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:42.5376931+07:00 0HMT3EP20GCQJ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:42.5382006+07:00 0HMT3EP20GCQJ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:42.5394697+07:00 0HMT3EP20GCQJ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:44.6000040+07:00 0HMT3EP20GCQD:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:44.6005783+07:00 0HMT3EP20GCQF:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:44.6007275+07:00 0HMT3EP20GCQD:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:44.6009276+07:00 0HMT3EP20GCQF:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:44.6020599+07:00 0HMT3EP20GCQF:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:44.6020599+07:00 0HMT3EP20GCQD:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:44.6034778+07:00 0HMT3EP20GCQD:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:44.6034779+07:00 0HMT3EP20GCQF:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:04:44.6081833+07:00 0HMT3EP20GCQD:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:04:44.6095019+07:00 0HMT3EP20GCQD:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:04:44.6105507+07:00 0HMT3EP20GCQD:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:44.6116180+07:00 0HMT3EP20GCQD:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:04:44.6124912+07:00 0HMT3EP20GCQD:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:44.6137829+07:00 0HMT3EP20GCQD:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:04:44.6150856+07:00 0HMT3EP20GCQD:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:44.6372877+07:00 0HMT3EP20GCQL:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:44.6379482+07:00 0HMT3EP20GCQL:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:44.6406214+07:00 0HMT3EP20GCQL:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:44.6760355+07:00 0HMT3EP20GCQL:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:44.6765399+07:00 0HMT3EP20GCQL:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:44.6780999+07:00 0HMT3EP20GCQL:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:44.6797288+07:00 0HMT3EP20GCQL:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:04:44.7019791+07:00 0HMT3EP20GCQD:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:44.7024285+07:00 0HMT3EP20GCQD:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:44.7038344+07:00 0HMT3EP20GCQD:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:44.7053051+07:00 0HMT3EP20GCQD:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:44.7055438+07:00 0HMT3EP20GCQF:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:44.7072116+07:00 0HMT3EP20GCQF:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:44.7083588+07:00 0HMT3EP20GCQD:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:04:44.7087181+07:00 0HMT3EP20GCQF:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:44.7094301+07:00 0HMT3EP20GCQD:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:04:44.7106451+07:00 0HMT3EP20GCQD:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:44.7106413+07:00 0HMT3EP20GCQF:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:04:44.7135508+07:00 0HMT3EP20GCQD:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:04:44.7146460+07:00 0HMT3EP20GCQD:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:44.7162304+07:00 0HMT3EP20GCQD:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:04:44.7172934+07:00 0HMT3EP20GCQD:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:04:45.3048171+07:00 0HMT3EP20GCQD:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:04:45.3052914+07:00 0HMT3EP20GCQD:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:04:45.3066940+07:00 0HMT3EP20GCQD:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:04:45.3090378+07:00 0HMT3EP20GCQD:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T16:07:15.1316685+07:00 0HMT3EP20GCQM:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:15.1325226+07:00 0HMT3EP20GCQM:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:15.1472290+07:00 0HMT3EP20GCQN:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:15.1479182+07:00 0HMT3EP20GCQM:00000003 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:15.1479285+07:00 0HMT3EP20GCQN:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:15.1507117+07:00 0HMT3EP20GCQN:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:15.1560016+07:00 0HMT3EP20GCQM:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:07:15.1580970+07:00 0HMT3EP20GCQN:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:07:15.1639810+07:00 0HMT3EP20GCQM:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:07:15.1692561+07:00 0HMT3EP20GCQO:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:15.1706286+07:00 0HMT3EP20GCQO:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:15.1708731+07:00 0HMT3EP20GCQM:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:07:15.1775844+07:00 0HMT3EP20GCQO:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:15.1814224+07:00 0HMT3EP20GCQM:00000003 [INF] Executed DbCommand ("9"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:07:15.1859383+07:00 0HMT3EP20GCQM:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:07:15.1907144+07:00 0HMT3EP20GCQM:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:07:15.1958389+07:00 0HMT3EP20GCQM:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:07:15.1994430+07:00 0HMT3EP20GCQM:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:07:15.2171310+07:00 0HMT3EP20GCQO:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:15.2181402+07:00 0HMT3EP20GCQO:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:15.2359625+07:00 0HMT3EP20GCQO:00000002 [INF] Executed DbCommand ("17"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:15.2388896+07:00 0HMT3EP20GCQO:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:07:15.2768884+07:00 0HMT3EP20GCQM:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:15.2777580+07:00 0HMT3EP20GCQM:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:15.2790512+07:00 0HMT3EP20GCQN:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:15.2797130+07:00 0HMT3EP20GCQN:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:15.2985474+07:00 0HMT3EP20GCQN:00000004 [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:15.3040420+07:00 0HMT3EP20GCQM:00000004 [INF] Executed DbCommand ("26"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:15.3061815+07:00 0HMT3EP20GCQN:00000004 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:07:15.3093492+07:00 0HMT3EP20GCQM:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:07:15.3169714+07:00 0HMT3EP20GCQM:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:07:15.3205027+07:00 0HMT3EP20GCQM:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:07:15.3262235+07:00 0HMT3EP20GCQM:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:07:15.3305624+07:00 0HMT3EP20GCQM:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:07:15.3350098+07:00 0HMT3EP20GCQM:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:07:15.3403565+07:00 0HMT3EP20GCQM:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:07:15.3453501+07:00 0HMT3EP20GCQM:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:07:16.0919909+07:00 0HMT3EP20GCQM:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:16.0925373+07:00 0HMT3EP20GCQM:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:16.1021834+07:00 0HMT3EP20GCQM:00000006 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:16.1058781+07:00 0HMT3EP20GCQM:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T16:07:16.2236743+07:00 0HMT3EP20GCQM:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:16.2243282+07:00 0HMT3EP20GCQM:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:16.2260362+07:00 0HMT3EP20GCQM:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:16.2334884+07:00 0HMT3EP20GCQM:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T16:07:23.7346469+07:00 0HMT3EP20GCQM:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:23.7352095+07:00 0HMT3EP20GCQM:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:23.7364526+07:00 0HMT3EP20GCQM:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:23.8210270+07:00 0HMT3EP20GCQM:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-23T16:07:23.8942002+07:00 0HMT3EP20GCQM:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:23.8950004+07:00 0HMT3EP20GCQM:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:23.8965220+07:00 0HMT3EP20GCQM:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:23.8990208+07:00 0HMT3EP20GCQM:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T16:07:23.9030499+07:00 0HMT3EP20GCQM:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T16:07:34.4631639+07:00 0HMT3EP20GCQM:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:34.4638570+07:00 0HMT3EP20GCQM:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:34.4658998+07:00 0HMT3EP20GCQM:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:34.4682872+07:00 0HMT3EP20GCQM:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T16:07:34.6992404+07:00 0HMT3EP20GCQM:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:34.6997250+07:00 0HMT3EP20GCQM:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:34.7009624+07:00 0HMT3EP20GCQM:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:34.7028019+07:00 0HMT3EP20GCQM:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T16:07:34.7560056+07:00 0HMT3EP20GCQM:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:34.7567942+07:00 0HMT3EP20GCQM:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:34.7588222+07:00 0HMT3EP20GCQM:00000012 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:34.7614180+07:00 0HMT3EP20GCQM:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T16:07:35.7505700+07:00 0HMT3EP20GCQL:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:35.7541233+07:00 0HMT3EP20GCQO:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:35.7548501+07:00 0HMT3EP20GCQL:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:35.7572155+07:00 0HMT3EP20GCQO:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:35.7572412+07:00 0HMT3EP20GCQL:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:35.7612406+07:00 0HMT3EP20GCQO:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:37.6442474+07:00 0HMT3EP20GCQM:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:37.6457535+07:00 0HMT3EP20GCQM:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:37.6471964+07:00 0HMT3EP20GCQN:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:37.6475756+07:00 0HMT3EP20GCQN:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:37.6484281+07:00 0HMT3EP20GCQM:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:37.6488887+07:00 0HMT3EP20GCQN:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:37.6531358+07:00 0HMT3EP20GCQM:00000016 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:07:37.6550403+07:00 0HMT3EP20GCQN:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:07:37.6591599+07:00 0HMT3EP20GCQM:00000016 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:07:37.6615623+07:00 0HMT3EP20GCQM:00000016 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:07:37.6648930+07:00 0HMT3EP20GCQM:00000016 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:07:37.6679120+07:00 0HMT3EP20GCQM:00000016 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:07:37.6692701+07:00 0HMT3EP20GCQM:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:07:37.6710771+07:00 0HMT3EP20GCQM:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:07:37.6721000+07:00 0HMT3EP20GCQM:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:07:37.6763459+07:00 0HMT3EP20GCQP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:37.6769930+07:00 0HMT3EP20GCQP:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:37.6794142+07:00 0HMT3EP20GCQP:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:37.7952323+07:00 0HMT3EP20GCQP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:37.7958680+07:00 0HMT3EP20GCQP:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:37.7972247+07:00 0HMT3EP20GCQP:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:37.7993133+07:00 0HMT3EP20GCQP:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:07:37.8172657+07:00 0HMT3EP20GCQN:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:37.8172932+07:00 0HMT3EP20GCQM:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:37.8178627+07:00 0HMT3EP20GCQN:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:37.8178627+07:00 0HMT3EP20GCQM:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:37.8191071+07:00 0HMT3EP20GCQM:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:37.8191586+07:00 0HMT3EP20GCQN:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:37.8205476+07:00 0HMT3EP20GCQM:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:07:37.8206411+07:00 0HMT3EP20GCQN:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:07:37.8252036+07:00 0HMT3EP20GCQM:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:07:37.8271046+07:00 0HMT3EP20GCQM:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:07:37.8281866+07:00 0HMT3EP20GCQM:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:07:37.8292265+07:00 0HMT3EP20GCQM:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:07:37.8300792+07:00 0HMT3EP20GCQM:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:07:37.8309384+07:00 0HMT3EP20GCQM:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:07:37.8317268+07:00 0HMT3EP20GCQM:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:07:38.5257860+07:00 0HMT3EP20GCQM:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:38.5262794+07:00 0HMT3EP20GCQM:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:38.5275601+07:00 0HMT3EP20GCQM:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:38.5295178+07:00 0HMT3EP20GCQM:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T16:07:38.6581627+07:00 0HMT3EP20GCQM:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:07:38.6587926+07:00 0HMT3EP20GCQM:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:07:38.6605439+07:00 0HMT3EP20GCQM:00000019 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:07:38.6630181+07:00 0HMT3EP20GCQM:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T16:08:25.9058733+07:00 0HMT3EP20GCQP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:08:25.9065187+07:00 0HMT3EP20GCQP:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:08:25.9172712+07:00 0HMT3EP20GCQP:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:08:26.0661549+07:00 0HMT3EP20GCQM:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:08:26.0666719+07:00 0HMT3EP20GCQM:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:08:26.0679408+07:00 0HMT3EP20GCQM:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:08:26.0717424+07:00 0HMT3EP20GCQM:0000001C [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:08:26.0767027+07:00 0HMT3EP20GCQM:0000001C [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:08:26.0785970+07:00 0HMT3EP20GCQM:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:08:26.0814747+07:00 0HMT3EP20GCQM:0000001C [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:08:26.0828002+07:00 0HMT3EP20GCQM:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:08:26.0839307+07:00 0HMT3EP20GCQM:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:08:26.0849708+07:00 0HMT3EP20GCQM:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:08:26.0863883+07:00 0HMT3EP20GCQM:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:08:28.0852363+07:00 0HMT3EP20GCQN:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:08:28.0861254+07:00 0HMT3EP20GCQN:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:08:28.0875728+07:00 0HMT3EP20GCQN:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:08:28.0893011+07:00 0HMT3EP20GCQN:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:08:28.0915243+07:00 0HMT3EP20GCQN:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:08:28.0925155+07:00 0HMT3EP20GCQN:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:08:28.0933259+07:00 0HMT3EP20GCQN:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:08:28.0941676+07:00 0HMT3EP20GCQN:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:08:28.0949267+07:00 0HMT3EP20GCQN:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:08:28.0958815+07:00 0HMT3EP20GCQN:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:08:28.0969203+07:00 0HMT3EP20GCQN:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:08:28.1101466+07:00 0HMT3EP20GCQN:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:08:28.1108535+07:00 0HMT3EP20GCQN:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:08:28.1122949+07:00 0HMT3EP20GCQN:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:08:28.1155536+07:00 0HMT3EP20GCQN:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:08:28.1871557+07:00 0HMT3EP20GCQQ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:08:28.1876129+07:00 0HMT3EP20GCQQ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:08:28.1888711+07:00 0HMT3EP20GCQQ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:08:28.1999638+07:00 0HMT3EP20GCQQ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:08:28.2004166+07:00 0HMT3EP20GCQQ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:08:28.2016993+07:00 0HMT3EP20GCQQ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:08:28.2038241+07:00 0HMT3EP20GCQQ:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:08:28.2379798+07:00 0HMT3EP20GCQN:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:08:28.2385221+07:00 0HMT3EP20GCQN:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:08:28.2395275+07:00 0HMT3EP20GCQR:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:08:28.2399508+07:00 0HMT3EP20GCQR:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:08:28.2399508+07:00 0HMT3EP20GCQN:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:08:28.2412119+07:00 0HMT3EP20GCQN:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:08:28.2413189+07:00 0HMT3EP20GCQR:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:08:28.2437613+07:00 0HMT3EP20GCQR:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:08:28.2444322+07:00 0HMT3EP20GCQN:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:08:28.2464491+07:00 0HMT3EP20GCQN:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:08:28.2472858+07:00 0HMT3EP20GCQN:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:08:28.2481610+07:00 0HMT3EP20GCQN:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:08:28.2488767+07:00 0HMT3EP20GCQN:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:08:28.2496726+07:00 0HMT3EP20GCQN:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:08:28.2504081+07:00 0HMT3EP20GCQN:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:08:43.8100029+07:00 0HMT3EP20GCQN:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:08:43.8105327+07:00 0HMT3EP20GCQN:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:08:43.8119900+07:00 0HMT3EP20GCQN:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:08:43.8156347+07:00 0HMT3EP20GCQN:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T16:08:46.4268656+07:00 0HMT3EP20GCPD:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:08:46.4271001+07:00 0HMT3EP20GCQ4:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:08:46.4293478+07:00 0HMT3EP20GCQ4:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:08:46.4355759+07:00 0HMT3EP20GCPD:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:08:46.4441694+07:00 0HMT3EP20GCQ4:00000002 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:08:46.4469981+07:00 0HMT3EP20GCPD:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:08:46.4470751+07:00 0HMT3EP20GCP0:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:08:46.4514067+07:00 0HMT3EP20GCP0:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:08:46.4515862+07:00 0HMT3EP20GCP8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:08:46.4921391+07:00 0HMT3EP20GCP8:00000002 [INF] Executed DbCommand ("40"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:08:46.5120403+07:00 0HMT3EP20GCP0:00000002 [INF] Executed DbCommand ("42"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:08:46.5123622+07:00 0HMT3EP20GCP8:00000002 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:09:41.2932686+07:00 0HMT3EP20GCQN:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:09:41.2937909+07:00 0HMT3EP20GCQN:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:09:41.3034357+07:00 0HMT3EP20GCQN:0000000F [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:09:41.3072521+07:00 0HMT3EP20GCQN:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-23T16:09:41.3517442+07:00 0HMT3EP20GCQN:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:09:41.3524317+07:00 0HMT3EP20GCQN:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:09:41.3540495+07:00 0HMT3EP20GCQN:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:09:41.3575418+07:00 0HMT3EP20GCQN:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T16:09:41.3599162+07:00 0HMT3EP20GCQN:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T16:10:42.9675340+07:00 0HMT3EP20GCQS:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:42.9687423+07:00 0HMT3EP20GCQS:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:42.9835546+07:00 0HMT3EP20GCQS:00000002 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:42.9840634+07:00 0HMT3EP20GCQN:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:42.9845698+07:00 0HMT3EP20GCQN:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:42.9876572+07:00 0HMT3EP20GCQN:00000014 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:42.9897299+07:00 0HMT3EP20GCQS:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:10:42.9924656+07:00 0HMT3EP20GCQN:00000014 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:10:42.9973030+07:00 0HMT3EP20GCQS:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:10:43.0001842+07:00 0HMT3EP20GCQS:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:10:43.0035960+07:00 0HMT3EP20GCQS:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:10:43.0072523+07:00 0HMT3EP20GCQS:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:10:43.0087972+07:00 0HMT3EP20GCQS:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:10:43.0103925+07:00 0HMT3EP20GCQS:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:10:43.0113955+07:00 0HMT3EP20GCQS:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:10:43.0633031+07:00 0HMT3EP20GCQT:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:43.0642466+07:00 0HMT3EP20GCQT:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:43.0656983+07:00 0HMT3EP20GCQT:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:43.0978848+07:00 0HMT3EP20GCQT:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:43.0986617+07:00 0HMT3EP20GCQT:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:43.1004219+07:00 0HMT3EP20GCQT:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:43.1033558+07:00 0HMT3EP20GCQT:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:10:43.1356976+07:00 0HMT3EP20GCQS:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:43.1364095+07:00 0HMT3EP20GCQS:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:43.1378805+07:00 0HMT3EP20GCQS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:43.1394795+07:00 0HMT3EP20GCQS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:10:43.1406567+07:00 0HMT3EP20GCQN:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:43.1412461+07:00 0HMT3EP20GCQN:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:43.1421047+07:00 0HMT3EP20GCQS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:10:43.1433721+07:00 0HMT3EP20GCQS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:10:43.1437736+07:00 0HMT3EP20GCQN:00000015 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:43.1444171+07:00 0HMT3EP20GCQS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:10:43.1455971+07:00 0HMT3EP20GCQN:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:10:43.1466603+07:00 0HMT3EP20GCQS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:10:43.1487545+07:00 0HMT3EP20GCQS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:10:43.1503127+07:00 0HMT3EP20GCQS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:10:43.1518567+07:00 0HMT3EP20GCQS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:10:44.3434145+07:00 0HMT3EP20GCQS:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:44.3440406+07:00 0HMT3EP20GCQS:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:44.3455236+07:00 0HMT3EP20GCQS:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:44.3498350+07:00 0HMT3EP20GCQS:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T16:10:44.4614935+07:00 0HMT3EP20GCQS:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:44.4620645+07:00 0HMT3EP20GCQS:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:44.4633877+07:00 0HMT3EP20GCQS:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:44.4663062+07:00 0HMT3EP20GCQS:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T16:10:51.2464120+07:00 0HMT3EP20GCQQ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:51.2493379+07:00 0HMT3EP20GCQQ:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:51.2597083+07:00 0HMT3EP20GCQQ:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:51.2626981+07:00 0HMT3EP20GCQT:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:51.2658646+07:00 0HMT3EP20GCQT:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:51.2707909+07:00 0HMT3EP20GCQT:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:51.3958177+07:00 0HMT3EP20GCQS:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:51.3964436+07:00 0HMT3EP20GCQS:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:51.3985015+07:00 0HMT3EP20GCQS:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:51.4015715+07:00 0HMT3EP20GCQS:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:10:51.4025330+07:00 0HMT3EP20GCQN:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:51.4033961+07:00 0HMT3EP20GCQN:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:51.4046719+07:00 0HMT3EP20GCQS:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:10:51.4060348+07:00 0HMT3EP20GCQN:00000016 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:51.4064257+07:00 0HMT3EP20GCQS:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:10:51.4092678+07:00 0HMT3EP20GCQN:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:10:51.4094933+07:00 0HMT3EP20GCQS:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:10:51.4144017+07:00 0HMT3EP20GCQS:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:10:51.4155779+07:00 0HMT3EP20GCQS:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:10:51.4167760+07:00 0HMT3EP20GCQS:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:10:51.4183534+07:00 0HMT3EP20GCQS:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:10:51.4403387+07:00 0HMT3EP20GCQU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:51.4412306+07:00 0HMT3EP20GCQU:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:51.4438338+07:00 0HMT3EP20GCQU:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:51.4578644+07:00 0HMT3EP20GCQU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:51.4587976+07:00 0HMT3EP20GCQU:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:51.4620447+07:00 0HMT3EP20GCQU:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:53.3837781+07:00 0HMT3EP20GCQS:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:53.3850024+07:00 0HMT3EP20GCQS:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:53.3876712+07:00 0HMT3EP20GCQS:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:53.3901045+07:00 0HMT3EP20GCQS:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:10:53.3949643+07:00 0HMT3EP20GCQS:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:10:53.3976099+07:00 0HMT3EP20GCQS:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:10:53.3991160+07:00 0HMT3EP20GCQS:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:10:53.4008458+07:00 0HMT3EP20GCQS:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:10:53.4023312+07:00 0HMT3EP20GCQS:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:10:53.4041280+07:00 0HMT3EP20GCQS:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:10:53.4056328+07:00 0HMT3EP20GCQN:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:53.4056350+07:00 0HMT3EP20GCQS:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:10:53.4064987+07:00 0HMT3EP20GCQN:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:53.4095293+07:00 0HMT3EP20GCQN:00000018 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:53.4124271+07:00 0HMT3EP20GCQN:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:10:53.5202029+07:00 0HMT3EP20GCR0:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:53.5206895+07:00 0HMT3EP20GCR0:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:53.5222053+07:00 0HMT3EP20GCR0:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:53.5468464+07:00 0HMT3EP20GCR0:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:53.5473886+07:00 0HMT3EP20GCR0:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:53.5487158+07:00 0HMT3EP20GCR0:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:53.5502238+07:00 0HMT3EP20GCR0:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:10:53.5703684+07:00 0HMT3EP20GCQS:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:53.5709324+07:00 0HMT3EP20GCQS:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:53.5721624+07:00 0HMT3EP20GCQN:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:53.5724864+07:00 0HMT3EP20GCQS:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:53.5726636+07:00 0HMT3EP20GCQN:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:53.5742337+07:00 0HMT3EP20GCQS:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:10:53.5746413+07:00 0HMT3EP20GCQN:00000019 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:53.5785643+07:00 0HMT3EP20GCQS:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:10:53.5784414+07:00 0HMT3EP20GCQN:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:10:53.5809043+07:00 0HMT3EP20GCQS:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:10:53.5821541+07:00 0HMT3EP20GCQS:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:10:53.5844681+07:00 0HMT3EP20GCQS:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:10:53.5857417+07:00 0HMT3EP20GCQS:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:10:53.5873120+07:00 0HMT3EP20GCQS:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:10:53.5889469+07:00 0HMT3EP20GCQS:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:10:54.8314189+07:00 0HMT3EP20GCQS:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:54.8321094+07:00 0HMT3EP20GCQS:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:54.8340777+07:00 0HMT3EP20GCQS:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:54.8376199+07:00 0HMT3EP20GCQS:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T16:10:59.2028194+07:00 0HMT3EP20GCQS:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:59.2033406+07:00 0HMT3EP20GCQS:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:59.2046179+07:00 0HMT3EP20GCQS:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:59.2083452+07:00 0HMT3EP20GCQS:00000011 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-23T16:10:59.2396061+07:00 0HMT3EP20GCQS:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:10:59.2402458+07:00 0HMT3EP20GCQS:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:10:59.2418726+07:00 0HMT3EP20GCQS:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:10:59.2448845+07:00 0HMT3EP20GCQS:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T16:10:59.2485890+07:00 0HMT3EP20GCQS:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T16:11:03.6100586+07:00 0HMT3EP20GCQS:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:03.6109926+07:00 0HMT3EP20GCQS:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:03.6132760+07:00 0HMT3EP20GCQS:00000016 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:03.6151489+07:00 0HMT3EP20GCQS:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:03.6197542+07:00 0HMT3EP20GCQS:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:11:03.6226307+07:00 0HMT3EP20GCQS:00000016 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:11:03.6235111+07:00 0HMT3EP20GCQN:0000001A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:03.6278734+07:00 0HMT3EP20GCQS:00000016 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:03.6278733+07:00 0HMT3EP20GCQN:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:03.6304772+07:00 0HMT3EP20GCQS:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:11:03.6307937+07:00 0HMT3EP20GCQN:0000001A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:03.6320898+07:00 0HMT3EP20GCQS:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:03.6334230+07:00 0HMT3EP20GCQN:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:11:03.6363354+07:00 0HMT3EP20GCQS:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:11:03.6377999+07:00 0HMT3EP20GCQS:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:03.7003539+07:00 0HMT3EP20GCR1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:03.7011863+07:00 0HMT3EP20GCR1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:03.7038903+07:00 0HMT3EP20GCR1:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:03.7052304+07:00 0HMT3EP20GCR1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:03.7059352+07:00 0HMT3EP20GCR1:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:03.7077366+07:00 0HMT3EP20GCR1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:03.7093663+07:00 0HMT3EP20GCR1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:11:03.7428613+07:00 0HMT3EP20GCQS:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:03.7434768+07:00 0HMT3EP20GCQS:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:03.7451630+07:00 0HMT3EP20GCQS:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:03.7471099+07:00 0HMT3EP20GCQS:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:03.7500989+07:00 0HMT3EP20GCQN:0000001B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:03.7503965+07:00 0HMT3EP20GCQS:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:11:03.7505288+07:00 0HMT3EP20GCQN:0000001B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:03.7515689+07:00 0HMT3EP20GCQS:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:11:03.7524931+07:00 0HMT3EP20GCQN:0000001B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:03.7527099+07:00 0HMT3EP20GCQS:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:03.7540402+07:00 0HMT3EP20GCQN:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:11:03.7540444+07:00 0HMT3EP20GCQS:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:11:03.7574763+07:00 0HMT3EP20GCQS:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:03.7588525+07:00 0HMT3EP20GCQS:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:11:03.7602362+07:00 0HMT3EP20GCQS:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:09.3790367+07:00 0HMT3EP20GCQS:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:09.3799140+07:00 0HMT3EP20GCQS:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:09.3814617+07:00 0HMT3EP20GCQS:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:09.3838864+07:00 0HMT3EP20GCQS:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:09.3867238+07:00 0HMT3EP20GCQS:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:11:09.3872540+07:00 0HMT3EP20GCQN:0000001D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:09.3883084+07:00 0HMT3EP20GCQN:0000001D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:09.3883965+07:00 0HMT3EP20GCQS:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:11:09.3895775+07:00 0HMT3EP20GCQS:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:09.3902032+07:00 0HMT3EP20GCQN:0000001D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:09.3910274+07:00 0HMT3EP20GCQS:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:11:09.3922847+07:00 0HMT3EP20GCQN:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:11:09.3922847+07:00 0HMT3EP20GCQS:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:09.3951973+07:00 0HMT3EP20GCQS:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:11:09.3962510+07:00 0HMT3EP20GCQS:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:16.4568583+07:00 0HMT3EP20GCQS:0000001B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:16.4569784+07:00 0HMT3EP20GCQN:0000001F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:16.4574121+07:00 0HMT3EP20GCQN:0000001F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:16.4574129+07:00 0HMT3EP20GCQS:0000001B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:16.4587741+07:00 0HMT3EP20GCQS:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:16.4588382+07:00 0HMT3EP20GCQN:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:16.4603403+07:00 0HMT3EP20GCQN:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:11:16.4605864+07:00 0HMT3EP20GCQS:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:16.4649210+07:00 0HMT3EP20GCQS:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:11:16.4667505+07:00 0HMT3EP20GCQS:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:11:16.4682715+07:00 0HMT3EP20GCQS:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:16.4699302+07:00 0HMT3EP20GCQS:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:11:16.4712229+07:00 0HMT3EP20GCQS:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:16.4727439+07:00 0HMT3EP20GCQS:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:11:16.4738425+07:00 0HMT3EP20GCQS:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:22.3465322+07:00 0HMT3EP20GCQN:00000021 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:22.3471867+07:00 0HMT3EP20GCQN:00000021 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:22.3508483+07:00 0HMT3EP20GCQN:00000021 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:22.3555206+07:00 0HMT3EP20GCQN:00000021 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:22.3615802+07:00 0HMT3EP20GCQN:00000021 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:11:22.3633655+07:00 0HMT3EP20GCQN:00000021 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:11:22.3647372+07:00 0HMT3EP20GCQN:00000021 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:22.3660650+07:00 0HMT3EP20GCQN:00000021 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:11:22.3674698+07:00 0HMT3EP20GCQN:00000021 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:22.3685325+07:00 0HMT3EP20GCQN:00000021 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:11:22.3697655+07:00 0HMT3EP20GCQN:00000021 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:22.3845039+07:00 0HMT3EP20GCR3:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:22.3981698+07:00 0HMT3EP20GCR3:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:22.4101398+07:00 0HMT3EP20GCR3:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:22.4108807+07:00 0HMT3EP20GCR3:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:22.4215646+07:00 0HMT3EP20GCR3:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:22.4349116+07:00 0HMT3EP20GCR3:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:22.4490537+07:00 0HMT3EP20GCR3:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:11:23.3898272+07:00 0HMT3EP20GCR2:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:23.3904232+07:00 0HMT3EP20GCR2:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:23.3922493+07:00 0HMT3EP20GCR2:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:23.3949955+07:00 0HMT3EP20GCR2:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:23.4006976+07:00 0HMT3EP20GCR2:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:11:23.4007481+07:00 0HMT3EP20GCR4:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:23.4012813+07:00 0HMT3EP20GCR4:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:23.4023396+07:00 0HMT3EP20GCR2:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:11:23.4034792+07:00 0HMT3EP20GCR4:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:23.4034595+07:00 0HMT3EP20GCR2:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:23.4051421+07:00 0HMT3EP20GCR2:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:11:23.4051333+07:00 0HMT3EP20GCR4:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:11:23.4079974+07:00 0HMT3EP20GCR2:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:23.4093039+07:00 0HMT3EP20GCR2:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:11:23.4104998+07:00 0HMT3EP20GCR2:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:23.4877884+07:00 0HMT3EP20GCR5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:23.4883891+07:00 0HMT3EP20GCR5:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:23.4902529+07:00 0HMT3EP20GCR5:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:23.5211220+07:00 0HMT3EP20GCR5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:23.5223133+07:00 0HMT3EP20GCR5:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:23.5258249+07:00 0HMT3EP20GCR5:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:23.5277907+07:00 0HMT3EP20GCR5:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:11:23.7456174+07:00 0HMT3EP20GCR3:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:23.7456241+07:00 0HMT3EP20GCR0:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:23.7456384+07:00 0HMT3EP20GCR1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:23.7457511+07:00 0HMT3EP20GCR5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:23.7460823+07:00 0HMT3EP20GCR0:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:23.7460843+07:00 0HMT3EP20GCR3:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:23.7462793+07:00 0HMT3EP20GCR5:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:23.7473312+07:00 0HMT3EP20GCR0:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:23.7473348+07:00 0HMT3EP20GCR3:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:23.7502564+07:00 0HMT3EP20GCR5:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:23.7689426+07:00 0HMT3EP20GCR1:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:23.7761898+07:00 0HMT3EP20GCR1:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:59.9153478+07:00 0HMT3EP20GCR2:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:59.9181909+07:00 0HMT3EP20GCR2:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:59.9235542+07:00 0HMT3EP20GCR4:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:59.9247073+07:00 0HMT3EP20GCR4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:59.9316663+07:00 0HMT3EP20GCR4:00000005 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:59.9316901+07:00 0HMT3EP20GCR2:00000006 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:59.9364116+07:00 0HMT3EP20GCR2:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:59.9364116+07:00 0HMT3EP20GCR4:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:11:59.9421722+07:00 0HMT3EP20GCR2:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:11:59.9451946+07:00 0HMT3EP20GCR7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:11:59.9454279+07:00 0HMT3EP20GCR2:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:11:59.9456775+07:00 0HMT3EP20GCR7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:11:59.9480061+07:00 0HMT3EP20GCR7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:11:59.9497281+07:00 0HMT3EP20GCR2:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:59.9535028+07:00 0HMT3EP20GCR2:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:11:59.9547552+07:00 0HMT3EP20GCR2:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:11:59.9563737+07:00 0HMT3EP20GCR2:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:11:59.9575205+07:00 0HMT3EP20GCR2:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:12:00.0700528+07:00 0HMT3EP20GCR7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:12:00.0706192+07:00 0HMT3EP20GCR7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:12:00.0719309+07:00 0HMT3EP20GCR7:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:12:00.0744331+07:00 0HMT3EP20GCR7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:12:00.1216256+07:00 0HMT3EP20GCR4:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:12:00.1216256+07:00 0HMT3EP20GCR2:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:12:00.1224905+07:00 0HMT3EP20GCR4:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:12:00.1225420+07:00 0HMT3EP20GCR2:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:12:00.1244469+07:00 0HMT3EP20GCR4:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:12:00.1244671+07:00 0HMT3EP20GCR2:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:12:00.1265415+07:00 0HMT3EP20GCR4:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:12:00.1265421+07:00 0HMT3EP20GCR2:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:12:00.1307496+07:00 0HMT3EP20GCR2:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:12:00.1318315+07:00 0HMT3EP20GCR2:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:12:00.1330061+07:00 0HMT3EP20GCR2:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:12:00.1344769+07:00 0HMT3EP20GCR2:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:12:00.1361573+07:00 0HMT3EP20GCR2:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:12:00.1380762+07:00 0HMT3EP20GCR2:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:12:00.1392473+07:00 0HMT3EP20GCR2:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:12:00.9891914+07:00 0HMT3EP20GCR2:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:12:00.9898090+07:00 0HMT3EP20GCR2:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:12:00.9912127+07:00 0HMT3EP20GCR2:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:12:00.9943033+07:00 0HMT3EP20GCR2:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T16:12:01.1113505+07:00 0HMT3EP20GCR2:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:12:01.1119706+07:00 0HMT3EP20GCR2:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:12:01.1134997+07:00 0HMT3EP20GCR2:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:12:01.1164368+07:00 0HMT3EP20GCR2:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T16:12:06.9845011+07:00 0HMT3EP20GCR7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:12:06.9851090+07:00 0HMT3EP20GCR7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:12:06.9868831+07:00 0HMT3EP20GCR7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:12:07.0972226+07:00 0HMT3EP20GCR2:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:12:07.0983275+07:00 0HMT3EP20GCR4:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:12:07.0983526+07:00 0HMT3EP20GCR2:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:12:07.0989084+07:00 0HMT3EP20GCR4:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:12:07.1003376+07:00 0HMT3EP20GCR2:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:12:07.1003376+07:00 0HMT3EP20GCR4:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:12:07.1025068+07:00 0HMT3EP20GCR4:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:12:07.1033018+07:00 0HMT3EP20GCR2:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:12:07.1127747+07:00 0HMT3EP20GCR2:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:12:07.1145423+07:00 0HMT3EP20GCR2:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:12:07.1171585+07:00 0HMT3EP20GCR2:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:12:07.1194899+07:00 0HMT3EP20GCR2:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:12:07.1219133+07:00 0HMT3EP20GCR2:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:12:07.1239830+07:00 0HMT3EP20GCR2:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:12:07.1256628+07:00 0HMT3EP20GCR2:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:12:09.1319618+07:00 0HMT3EP20GCR2:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:12:09.1321321+07:00 0HMT3EP20GCR4:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:12:09.1324641+07:00 0HMT3EP20GCR2:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:12:09.1325460+07:00 0HMT3EP20GCR4:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:12:09.1343045+07:00 0HMT3EP20GCR4:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:12:09.1342827+07:00 0HMT3EP20GCR2:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:12:09.1362855+07:00 0HMT3EP20GCR2:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:12:09.1373194+07:00 0HMT3EP20GCR4:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:12:09.1462305+07:00 0HMT3EP20GCR2:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:12:09.1503041+07:00 0HMT3EP20GCR2:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:12:09.1517553+07:00 0HMT3EP20GCR2:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:12:09.1534737+07:00 0HMT3EP20GCR2:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:12:09.1546204+07:00 0HMT3EP20GCR2:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:12:09.1561609+07:00 0HMT3EP20GCR2:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:12:09.1577355+07:00 0HMT3EP20GCR2:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:12:09.2651402+07:00 0HMT3EP20GCR9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:12:09.2656172+07:00 0HMT3EP20GCR9:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:12:09.2670557+07:00 0HMT3EP20GCR9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:12:09.2696253+07:00 0HMT3EP20GCR9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:12:09.2700893+07:00 0HMT3EP20GCR9:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:12:09.2716605+07:00 0HMT3EP20GCR9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:12:09.2732254+07:00 0HMT3EP20GCR9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:12:09.2970290+07:00 0HMT3EP20GCR2:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:12:09.2976526+07:00 0HMT3EP20GCR2:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:12:09.2979125+07:00 0HMT3EP20GCR4:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:12:09.2983381+07:00 0HMT3EP20GCR4:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:12:09.2996548+07:00 0HMT3EP20GCR2:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:12:09.3003732+07:00 0HMT3EP20GCR4:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:12:09.3020506+07:00 0HMT3EP20GCR2:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:12:09.3040345+07:00 0HMT3EP20GCR4:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:12:09.3064817+07:00 0HMT3EP20GCR2:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:12:09.3077982+07:00 0HMT3EP20GCR2:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:12:09.3091697+07:00 0HMT3EP20GCR2:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:12:09.3104770+07:00 0HMT3EP20GCR2:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:12:09.3113583+07:00 0HMT3EP20GCR2:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:12:09.3124147+07:00 0HMT3EP20GCR2:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:12:09.3135698+07:00 0HMT3EP20GCR2:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:12:09.9817339+07:00 0HMT3EP20GCR2:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:12:09.9823171+07:00 0HMT3EP20GCR2:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:12:09.9837303+07:00 0HMT3EP20GCR2:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:12:09.9857471+07:00 0HMT3EP20GCR2:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T16:19:26.2039916+07:00 0HMT3EP20GCRA:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:26.2046850+07:00 0HMT3EP20GCRB:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:26.2084118+07:00 0HMT3EP20GCRA:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:26.2128052+07:00 0HMT3EP20GCRB:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:26.2270550+07:00 0HMT3EP20GCRB:00000003 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:26.2270550+07:00 0HMT3EP20GCRA:00000003 [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:26.2338242+07:00 0HMT3EP20GCRB:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:19:26.2338242+07:00 0HMT3EP20GCRA:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:26.2836178+07:00 0HMT3EP20GCRA:00000003 [INF] Executed DbCommand ("33"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:19:26.3338964+07:00 0HMT3EP20GCRA:00000003 [INF] Executed DbCommand ("35"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:26.3400249+07:00 0HMT3EP20GCRA:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:26.3636803+07:00 0HMT3EP20GCRA:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:26.3646839+07:00 0HMT3EP20GCRA:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:26.3657157+07:00 0HMT3EP20GCRA:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:26.3667098+07:00 0HMT3EP20GCRA:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:26.5169872+07:00 0HMT3EP20GCRC:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:26.5177780+07:00 0HMT3EP20GCRC:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:26.5196566+07:00 0HMT3EP20GCRC:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:26.5211128+07:00 0HMT3EP20GCRC:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:26.5238674+07:00 0HMT3EP20GCRC:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:19:26.5253138+07:00 0HMT3EP20GCRC:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:26.5264101+07:00 0HMT3EP20GCRC:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:26.5275730+07:00 0HMT3EP20GCRC:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:26.5291149+07:00 0HMT3EP20GCRC:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:26.5305762+07:00 0HMT3EP20GCRC:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:26.5317553+07:00 0HMT3EP20GCRC:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:26.5411866+07:00 0HMT3EP20GCRC:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:26.5417447+07:00 0HMT3EP20GCRC:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:26.5441275+07:00 0HMT3EP20GCRC:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:26.5466585+07:00 0HMT3EP20GCRC:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:19:26.6037640+07:00 0HMT3EP20GCRE:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:26.6043476+07:00 0HMT3EP20GCRE:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:26.6061979+07:00 0HMT3EP20GCRE:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:26.6067654+07:00 0HMT3EP20GCRE:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:26.6071505+07:00 0HMT3EP20GCRE:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:26.6084780+07:00 0HMT3EP20GCRE:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:26.6113549+07:00 0HMT3EP20GCRE:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:19:26.6359270+07:00 0HMT3EP20GCRC:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:26.6370933+07:00 0HMT3EP20GCRC:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:26.6397268+07:00 0HMT3EP20GCRC:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:26.6399901+07:00 0HMT3EP20GCRD:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:26.6406469+07:00 0HMT3EP20GCRD:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:26.6416400+07:00 0HMT3EP20GCRC:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:26.6443184+07:00 0HMT3EP20GCRD:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:26.6467447+07:00 0HMT3EP20GCRD:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:19:26.6476884+07:00 0HMT3EP20GCRC:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:19:26.6506679+07:00 0HMT3EP20GCRC:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:26.6521346+07:00 0HMT3EP20GCRC:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:26.6534556+07:00 0HMT3EP20GCRC:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:26.6546615+07:00 0HMT3EP20GCRC:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:26.6557750+07:00 0HMT3EP20GCRC:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:26.6566489+07:00 0HMT3EP20GCRC:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:27.2463308+07:00 0HMT3EP20GCRD:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:27.2464319+07:00 0HMT3EP20GCRC:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:27.2468232+07:00 0HMT3EP20GCRD:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:27.2468232+07:00 0HMT3EP20GCRC:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:27.2481476+07:00 0HMT3EP20GCRC:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:27.2481492+07:00 0HMT3EP20GCRD:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:27.2516069+07:00 0HMT3EP20GCRD:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:19:27.2516069+07:00 0HMT3EP20GCRC:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:27.2622564+07:00 0HMT3EP20GCRC:00000006 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:19:27.2706190+07:00 0HMT3EP20GCRC:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:27.2722451+07:00 0HMT3EP20GCRC:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:27.2740119+07:00 0HMT3EP20GCRC:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:27.2750728+07:00 0HMT3EP20GCRC:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:27.2759578+07:00 0HMT3EP20GCRC:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:27.2771101+07:00 0HMT3EP20GCRC:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:34.0187170+07:00 0HMT3EP20GCRE:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:34.0221558+07:00 0HMT3EP20GCR9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:34.0225648+07:00 0HMT3EP20GCRE:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:34.0240403+07:00 0HMT3EP20GCR9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:34.0240879+07:00 0HMT3EP20GCRE:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:34.0279808+07:00 0HMT3EP20GCR9:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:36.0001076+07:00 0HMT3EP20GCRC:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:36.0009629+07:00 0HMT3EP20GCRC:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:36.0032264+07:00 0HMT3EP20GCRC:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:36.0065172+07:00 0HMT3EP20GCRC:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:36.0099487+07:00 0HMT3EP20GCRC:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:19:36.0133793+07:00 0HMT3EP20GCRD:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:36.0133876+07:00 0HMT3EP20GCRC:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:36.0153524+07:00 0HMT3EP20GCRD:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:36.0169070+07:00 0HMT3EP20GCRC:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:36.0186305+07:00 0HMT3EP20GCRD:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:36.0187305+07:00 0HMT3EP20GCRC:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:36.0209354+07:00 0HMT3EP20GCRC:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:36.0220098+07:00 0HMT3EP20GCRD:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:19:36.0255257+07:00 0HMT3EP20GCRC:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:36.0275478+07:00 0HMT3EP20GCRC:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:36.1530139+07:00 0HMT3EP20GCRF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:36.1536087+07:00 0HMT3EP20GCRF:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:36.1549065+07:00 0HMT3EP20GCRF:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:36.1605118+07:00 0HMT3EP20GCRF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:36.1611992+07:00 0HMT3EP20GCRF:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:36.1633761+07:00 0HMT3EP20GCRF:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:36.1650437+07:00 0HMT3EP20GCRF:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:19:36.1843463+07:00 0HMT3EP20GCRC:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:36.1848396+07:00 0HMT3EP20GCRC:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:36.1857933+07:00 0HMT3EP20GCRD:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:36.1863694+07:00 0HMT3EP20GCRD:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:36.1864236+07:00 0HMT3EP20GCRC:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:36.1887324+07:00 0HMT3EP20GCRC:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:36.1886187+07:00 0HMT3EP20GCRD:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:36.1918877+07:00 0HMT3EP20GCRD:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:19:36.1934015+07:00 0HMT3EP20GCRC:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:19:36.1947525+07:00 0HMT3EP20GCRC:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:36.1960452+07:00 0HMT3EP20GCRC:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:36.1972982+07:00 0HMT3EP20GCRC:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:36.1983948+07:00 0HMT3EP20GCRC:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:36.1994881+07:00 0HMT3EP20GCRC:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:36.2014647+07:00 0HMT3EP20GCRC:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:36.9915786+07:00 0HMT3EP20GCRC:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:36.9920832+07:00 0HMT3EP20GCRC:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:36.9934252+07:00 0HMT3EP20GCRC:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:36.9971407+07:00 0HMT3EP20GCRC:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T16:19:40.9933628+07:00 0HMT3EP20GCRC:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:40.9938868+07:00 0HMT3EP20GCRC:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:40.9954876+07:00 0HMT3EP20GCRC:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:40.9986914+07:00 0HMT3EP20GCRC:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-23T16:19:41.0337671+07:00 0HMT3EP20GCRC:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:41.0345844+07:00 0HMT3EP20GCRC:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:41.0361878+07:00 0HMT3EP20GCRC:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:41.0399177+07:00 0HMT3EP20GCRC:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T16:19:41.0441523+07:00 0HMT3EP20GCRC:00000010 [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T16:19:48.3843129+07:00 0HMT3EP20GCRC:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:48.3848810+07:00 0HMT3EP20GCRC:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:48.3862376+07:00 0HMT3EP20GCRC:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:48.3882250+07:00 0HMT3EP20GCRC:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:48.3927771+07:00 0HMT3EP20GCRD:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:48.3933705+07:00 0HMT3EP20GCRD:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:48.3951563+07:00 0HMT3EP20GCRD:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:48.3952352+07:00 0HMT3EP20GCRC:00000012 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:19:48.3970105+07:00 0HMT3EP20GCRD:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:19:48.3981902+07:00 0HMT3EP20GCRC:00000012 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T16:19:48.3999823+07:00 0HMT3EP20GCRC:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:48.4033313+07:00 0HMT3EP20GCRC:00000012 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:48.4052376+07:00 0HMT3EP20GCRC:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:48.4068692+07:00 0HMT3EP20GCRC:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:48.4083688+07:00 0HMT3EP20GCRC:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:51.8331638+07:00 0HMT3EP20GCRF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:51.8339271+07:00 0HMT3EP20GCRF:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:51.8361676+07:00 0HMT3EP20GCRF:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:51.9098738+07:00 0HMT3EP20GCRG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:51.9106783+07:00 0HMT3EP20GCRG:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:51.9129688+07:00 0HMT3EP20GCRG:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:51.9191849+07:00 0HMT3EP20GCRG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:51.9198775+07:00 0HMT3EP20GCRG:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:51.9217023+07:00 0HMT3EP20GCRG:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:54.3028483+07:00 0HMT3EP20GCRC:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:54.3037077+07:00 0HMT3EP20GCRC:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:54.3052728+07:00 0HMT3EP20GCRC:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:54.3073998+07:00 0HMT3EP20GCRC:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:54.3075346+07:00 0HMT3EP20GCRD:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:54.3088999+07:00 0HMT3EP20GCRD:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:54.3102101+07:00 0HMT3EP20GCRC:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:19:54.3105649+07:00 0HMT3EP20GCRD:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:54.3141541+07:00 0HMT3EP20GCRC:00000015 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:54.3148659+07:00 0HMT3EP20GCRD:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:19:54.3176410+07:00 0HMT3EP20GCRC:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:54.3196325+07:00 0HMT3EP20GCRC:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:54.3209346+07:00 0HMT3EP20GCRC:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:54.3221607+07:00 0HMT3EP20GCRC:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:54.3230358+07:00 0HMT3EP20GCRC:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:54.3362927+07:00 0HMT3EP20GCRH:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:54.3369073+07:00 0HMT3EP20GCRH:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:54.3382933+07:00 0HMT3EP20GCRH:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:54.4400392+07:00 0HMT3EP20GCRH:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:54.4405225+07:00 0HMT3EP20GCRH:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:54.4418332+07:00 0HMT3EP20GCRH:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:54.4435541+07:00 0HMT3EP20GCRH:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:19:54.4806796+07:00 0HMT3EP20GCRC:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:54.4808258+07:00 0HMT3EP20GCRD:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:19:54.4812456+07:00 0HMT3EP20GCRC:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:54.4812455+07:00 0HMT3EP20GCRD:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:19:54.4827148+07:00 0HMT3EP20GCRC:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:54.4827460+07:00 0HMT3EP20GCRD:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:19:54.4842100+07:00 0HMT3EP20GCRD:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:19:54.4842319+07:00 0HMT3EP20GCRC:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:54.4894098+07:00 0HMT3EP20GCRC:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:19:54.4905931+07:00 0HMT3EP20GCRC:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:54.4916209+07:00 0HMT3EP20GCRC:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:54.4926660+07:00 0HMT3EP20GCRC:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:54.4936757+07:00 0HMT3EP20GCRC:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:19:54.4948994+07:00 0HMT3EP20GCRC:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:19:54.4959736+07:00 0HMT3EP20GCRC:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:20:29.9456308+07:00 0HMT3EP20GCRC:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:20:29.9463140+07:00 0HMT3EP20GCRC:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:20:29.9463136+07:00 0HMT3EP20GCRD:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:20:29.9467002+07:00 0HMT3EP20GCRD:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:20:29.9571528+07:00 0HMT3EP20GCRC:00000018 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:20:29.9601746+07:00 0HMT3EP20GCRD:0000000C [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:20:29.9616246+07:00 0HMT3EP20GCRC:00000018 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:20:29.9641166+07:00 0HMT3EP20GCRD:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:20:29.9722095+07:00 0HMT3EP20GCRC:00000018 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:20:29.9799557+07:00 0HMT3EP20GCRC:00000018 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:20:29.9841153+07:00 0HMT3EP20GCRC:00000018 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:20:29.9858681+07:00 0HMT3EP20GCRC:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:20:29.9867969+07:00 0HMT3EP20GCRC:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:20:29.9878921+07:00 0HMT3EP20GCRC:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:20:29.9889744+07:00 0HMT3EP20GCRC:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:20:30.7991669+07:00 0HMT3EP20GCRD:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:20:30.7999659+07:00 0HMT3EP20GCRD:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:20:30.8012319+07:00 0HMT3EP20GCRD:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:20:30.8030173+07:00 0HMT3EP20GCRD:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:20:30.8052250+07:00 0HMT3EP20GCRD:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:20:30.8074494+07:00 0HMT3EP20GCRD:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:20:30.8139102+07:00 0HMT3EP20GCRD:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:20:30.8151302+07:00 0HMT3EP20GCRD:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:20:30.8159134+07:00 0HMT3EP20GCRD:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:20:30.8167167+07:00 0HMT3EP20GCRD:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:20:30.8175154+07:00 0HMT3EP20GCRD:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:20:30.8317507+07:00 0HMT3EP20GCRD:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:20:30.8324191+07:00 0HMT3EP20GCRD:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:20:30.8385006+07:00 0HMT3EP20GCRD:00000010 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:20:30.8431137+07:00 0HMT3EP20GCRD:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:20:30.8750944+07:00 0HMT3EP20GCRI:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:20:30.8758872+07:00 0HMT3EP20GCRI:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:20:30.8780657+07:00 0HMT3EP20GCRI:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:20:30.8814157+07:00 0HMT3EP20GCRI:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:20:30.8819070+07:00 0HMT3EP20GCRI:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:20:30.8831811+07:00 0HMT3EP20GCRI:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:20:30.8849289+07:00 0HMT3EP20GCRI:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:20:30.9478087+07:00 0HMT3EP20GCRD:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:20:30.9484825+07:00 0HMT3EP20GCRD:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:20:30.9485545+07:00 0HMT3EP20GCRJ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:20:30.9488255+07:00 0HMT3EP20GCRJ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:20:30.9496984+07:00 0HMT3EP20GCRD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:20:30.9497543+07:00 0HMT3EP20GCRJ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:20:30.9510315+07:00 0HMT3EP20GCRJ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:20:30.9520636+07:00 0HMT3EP20GCRD:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:20:30.9606729+07:00 0HMT3EP20GCRD:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:20:30.9624956+07:00 0HMT3EP20GCRD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:20:30.9636338+07:00 0HMT3EP20GCRD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:20:30.9650588+07:00 0HMT3EP20GCRD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:20:30.9663956+07:00 0HMT3EP20GCRD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:20:30.9677047+07:00 0HMT3EP20GCRD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:20:30.9689577+07:00 0HMT3EP20GCRD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:29:40.7065632+07:00 0HMT3EP20GCRK:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:29:40.7109216+07:00 0HMT3EP20GCRK:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:29:40.7216254+07:00 0HMT3EP20GCRK:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:29:40.7274966+07:00 0HMT3EP20GCRK:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T16:29:41.2113620+07:00 0HMT3EP20GCRK:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:29:41.2121748+07:00 0HMT3EP20GCRK:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:29:41.2135715+07:00 0HMT3EP20GCRK:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:29:41.2153775+07:00 0HMT3EP20GCRK:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T16:29:41.6339681+07:00 0HMT3EP20GCRK:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:29:41.6344360+07:00 0HMT3EP20GCRK:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:29:41.6358866+07:00 0HMT3EP20GCRK:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:29:41.6409282+07:00 0HMT3EP20GCRK:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T16:29:41.8738538+07:00 0HMT3EP20GCRK:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:29:41.8743161+07:00 0HMT3EP20GCRK:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:29:41.8757803+07:00 0HMT3EP20GCRK:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:29:41.8769169+07:00 0HMT3EP20GCRK:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T16:34:45.3047263+07:00 0HMT3EP20GCRL:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:34:45.3061540+07:00 0HMT3EP20GCRM:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:34:45.3099999+07:00 0HMT3EP20GCRL:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:34:45.3130380+07:00 0HMT3EP20GCRM:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:34:45.3231782+07:00 0HMT3EP20GCRL:00000003 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:34:45.3270267+07:00 0HMT3EP20GCRM:00000003 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:34:45.3282655+07:00 0HMT3EP20GCRL:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:34:45.3326698+07:00 0HMT3EP20GCRM:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:34:45.3362786+07:00 0HMT3EP20GCRL:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:34:45.3398951+07:00 0HMT3EP20GCRL:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:34:45.3446687+07:00 0HMT3EP20GCRL:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:34:45.3465071+07:00 0HMT3EP20GCRL:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:34:45.3477449+07:00 0HMT3EP20GCRL:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:34:45.3495833+07:00 0HMT3EP20GCRL:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:34:45.3507012+07:00 0HMT3EP20GCRL:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:35:21.1781427+07:00 0HMT3EP20GCRL:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:35:21.1791369+07:00 0HMT3EP20GCRL:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:35:21.1934967+07:00 0HMT3EP20GCRL:00000005 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:35:21.2052235+07:00 0HMT3EP20GCRL:00000005 [INF] Executed DbCommand ("11"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:35:21.2118234+07:00 0HMT3EP20GCRN:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:35:21.2141027+07:00 0HMT3EP20GCRN:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:35:21.2142969+07:00 0HMT3EP20GCRL:00000005 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:35:21.2157790+07:00 0HMT3EP20GCRN:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:35:21.2162250+07:00 0HMT3EP20GCRL:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:35:21.2171076+07:00 0HMT3EP20GCRN:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:35:21.2173463+07:00 0HMT3EP20GCRN:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:35:21.2183830+07:00 0HMT3EP20GCRL:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:35:21.2189747+07:00 0HMT3EP20GCRN:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:35:21.2201754+07:00 0HMT3EP20GCRL:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:35:21.2209422+07:00 0HMT3EP20GCRN:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:35:21.2220155+07:00 0HMT3EP20GCRL:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:35:21.2231315+07:00 0HMT3EP20GCRL:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:35:21.2243301+07:00 0HMT3EP20GCRL:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:36:42.2678020+07:00 0HMT3EP20GCRM:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:36:42.2683866+07:00 0HMT3EP20GCRM:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:36:42.2687787+07:00 0HMT3EP20GCRO:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:36:42.2690643+07:00 0HMT3EP20GCRO:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:36:42.2789704+07:00 0HMT3EP20GCRO:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:36:42.2791489+07:00 0HMT3EP20GCRM:00000007 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:36:42.2841883+07:00 0HMT3EP20GCRM:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:36:42.2842837+07:00 0HMT3EP20GCRO:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:36:42.2962723+07:00 0HMT3EP20GCRM:00000007 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:36:42.2983614+07:00 0HMT3EP20GCRM:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:36:42.3016710+07:00 0HMT3EP20GCRM:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:36:42.3030767+07:00 0HMT3EP20GCRM:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:36:42.3040542+07:00 0HMT3EP20GCRM:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:36:42.3049512+07:00 0HMT3EP20GCRM:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:36:42.3055880+07:00 0HMT3EP20GCRM:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:36:42.3579590+07:00 0HMT3EP20GCRP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:36:42.3584588+07:00 0HMT3EP20GCRP:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:36:42.3599033+07:00 0HMT3EP20GCRP:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:36:42.3942465+07:00 0HMT3EP20GCRP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:36:42.3947083+07:00 0HMT3EP20GCRP:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:36:42.3965411+07:00 0HMT3EP20GCRP:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:36:42.3993067+07:00 0HMT3EP20GCRP:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:36:51.6223321+07:00 0HMT3EP20GCRM:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:36:51.6231087+07:00 0HMT3EP20GCRM:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:36:51.6246169+07:00 0HMT3EP20GCRM:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:36:51.6262508+07:00 0HMT3EP20GCRM:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:36:51.6287581+07:00 0HMT3EP20GCRM:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:36:51.6288687+07:00 0HMT3EP20GCRO:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:36:51.6292574+07:00 0HMT3EP20GCRO:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:36:51.6306352+07:00 0HMT3EP20GCRM:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:36:51.6318251+07:00 0HMT3EP20GCRO:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:36:51.6325155+07:00 0HMT3EP20GCRM:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:36:51.6334421+07:00 0HMT3EP20GCRO:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:36:51.6345286+07:00 0HMT3EP20GCRM:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:36:51.6359350+07:00 0HMT3EP20GCRM:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:36:51.6369786+07:00 0HMT3EP20GCRM:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:36:51.6380649+07:00 0HMT3EP20GCRM:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:36:51.7031366+07:00 0HMT3EP20GCRQ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:36:51.7037029+07:00 0HMT3EP20GCRQ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:36:51.7050778+07:00 0HMT3EP20GCRQ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:36:51.7420155+07:00 0HMT3EP20GCRQ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:36:51.7424872+07:00 0HMT3EP20GCRQ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:36:51.7437484+07:00 0HMT3EP20GCRQ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:36:51.7449663+07:00 0HMT3EP20GCRQ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:46:01.6708820+07:00 0HMT3EP20GCRP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:46:01.6900913+07:00 0HMT3EP20GCRH:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:46:01.7039280+07:00 0HMT3EP20GCRQ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:46:01.7075788+07:00 0HMT3EP20GCRN:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:46:01.7085889+07:00 0HMT3EP20GCRP:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:46:01.7091082+07:00 0HMT3EP20GCRQ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:46:01.7130930+07:00 0HMT3EP20GCRN:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:46:01.7265182+07:00 0HMT3EP20GCRI:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:46:01.7370235+07:00 0HMT3EP20GCRP:00000002 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:46:01.7370154+07:00 0HMT3EP20GCRH:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:46:01.7387342+07:00 0HMT3EP20GCRI:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:46:01.7422540+07:00 0HMT3EP20GCRQ:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:46:01.7460713+07:00 0HMT3EP20GCRH:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:46:01.7460956+07:00 0HMT3EP20GCRI:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:46:01.7620830+07:00 0HMT3EP20GCRN:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:46:09.3234844+07:00 0HMT3EP20GCRT:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:46:09.3240419+07:00 0HMT3EP20GCRS:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:46:09.3307271+07:00 0HMT3EP20GCRT:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:46:09.3312669+07:00 0HMT3EP20GCRS:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:46:09.3369158+07:00 0HMT3EP20GCRS:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:46:09.3369118+07:00 0HMT3EP20GCRT:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:46:09.3387649+07:00 0HMT3EP20GCRU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:46:09.3393636+07:00 0HMT3EP20GCRU:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:46:09.3475219+07:00 0HMT3EP20GCRS:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:46:09.3474966+07:00 0HMT3EP20GCRU:00000002 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:46:09.3476465+07:00 0HMT3EP20GCRT:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:46:09.3482663+07:00 0HMT3EP20GCRU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:46:09.3486892+07:00 0HMT3EP20GCRU:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:46:09.3540168+07:00 0HMT3EP20GCRU:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:46:09.3648736+07:00 0HMT3EP20GCRU:00000002 [INF] Executed DbCommand ("7"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:46:09.3811898+07:00 0HMT3EP20GCRS:00000003 [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:46:09.3959154+07:00 0HMT3EP20GCRS:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:46:09.3992813+07:00 0HMT3EP20GCRS:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:46:09.4010960+07:00 0HMT3EP20GCRS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:46:09.4023752+07:00 0HMT3EP20GCRS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:46:09.4038167+07:00 0HMT3EP20GCRS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:46:09.4049191+07:00 0HMT3EP20GCRS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:46:09.4319086+07:00 0HMT3EP20GCRT:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:46:09.4321547+07:00 0HMT3EP20GCRS:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:46:09.4325261+07:00 0HMT3EP20GCRT:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:46:09.4325926+07:00 0HMT3EP20GCRS:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:46:09.4340858+07:00 0HMT3EP20GCRT:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:46:09.4340862+07:00 0HMT3EP20GCRS:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:46:09.4362852+07:00 0HMT3EP20GCRS:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:46:09.4362830+07:00 0HMT3EP20GCRT:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:46:09.4426435+07:00 0HMT3EP20GCRS:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:46:09.4452018+07:00 0HMT3EP20GCRS:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:46:09.4468482+07:00 0HMT3EP20GCRS:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:46:09.4486373+07:00 0HMT3EP20GCRS:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:46:09.4500917+07:00 0HMT3EP20GCRS:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:46:09.4514068+07:00 0HMT3EP20GCRS:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:46:09.4525669+07:00 0HMT3EP20GCRS:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:46:17.6609142+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-23T16:46:17.6680409+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-23T16:46:17.6682696+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-23T16:46:17.6683009+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-23T16:46:17.9693154+07:00 0HMT3NN68EMAN:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-23T16:46:19.1545519+07:00 0HMT3NN68EMAN:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:46:19.1545515+07:00 0HMT3NN68EMAO:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:46:19.1545509+07:00 0HMT3NN68EMAP:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:46:20.2011435+07:00 0HMT3NN68EMAN:00000002 [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:46:20.2011414+07:00 0HMT3NN68EMAO:00000003 [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:46:20.2011419+07:00 0HMT3NN68EMAP:00000003 [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:46:20.2357858+07:00 0HMT3NN68EMAO:00000003 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:46:20.2357858+07:00 0HMT3NN68EMAP:00000003 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:46:20.2357857+07:00 0HMT3NN68EMAN:00000002 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:46:20.3005633+07:00 0HMT3NN68EMAN:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:46:20.3060054+07:00 0HMT3NN68EMAN:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:46:20.3080085+07:00 0HMT3NN68EMAN:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:46:20.7014635+07:00 0HMT3NN68EMAO:00000003 [INF] Executed DbCommand ("50"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:46:20.7014634+07:00 0HMT3NN68EMAP:00000003 [INF] Executed DbCommand ("50"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T16:46:20.7014635+07:00 0HMT3NN68EMAN:00000002 [INF] Executed DbCommand ("50"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:46:20.8770601+07:00 0HMT3NN68EMAO:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:46:20.8993939+07:00 0HMT3NN68EMAO:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:46:20.9070011+07:00 0HMT3NN68EMAO:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:46:20.9234620+07:00 0HMT3NN68EMAO:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:46:20.9243876+07:00 0HMT3NN68EMAO:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:46:20.9253390+07:00 0HMT3NN68EMAO:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:46:20.9260888+07:00 0HMT3NN68EMAO:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:48:05.9759193+07:00 0HMT3NN68EMAR:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:48:05.9771641+07:00 0HMT3NN68EMAR:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:48:05.9869395+07:00 0HMT3NN68EMAR:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:48:05.9875411+07:00 0HMT3NN68EMAR:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:48:05.9879714+07:00 0HMT3NN68EMAR:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:48:05.9891849+07:00 0HMT3NN68EMAR:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:48:05.9913826+07:00 0HMT3NN68EMAR:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T16:58:31.3779565+07:00 0HMT3NN68EMAS:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:58:31.3827802+07:00 0HMT3NN68EMAS:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:58:31.3944935+07:00 0HMT3NN68EMAS:00000003 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:58:31.3997962+07:00 0HMT3NN68EMAS:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:58:31.4045008+07:00 0HMT3NN68EMAS:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T16:58:31.4073944+07:00 0HMT3NN68EMAS:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:58:31.4111526+07:00 0HMT3NN68EMAS:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:58:31.4127001+07:00 0HMT3NN68EMAS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:58:31.4137004+07:00 0HMT3NN68EMAS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:58:31.4147256+07:00 0HMT3NN68EMAS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T16:58:31.4163331+07:00 0HMT3NN68EMAS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T16:58:31.4957574+07:00 0HMT3NN68EMAU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:58:31.5107839+07:00 0HMT3NN68EMAU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:58:31.5147149+07:00 0HMT3NN68EMAU:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:58:31.5396183+07:00 0HMT3NN68EMAU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T16:58:31.5531527+07:00 0HMT3NN68EMAU:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T16:58:31.5688501+07:00 0HMT3NN68EMAU:00000002 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T16:58:31.5718632+07:00 0HMT3NN68EMAU:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T17:07:06.7314806+07:00 0HMT3NN68EMAR:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T17:07:06.7314805+07:00 0HMT3NN68EMAU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T17:07:06.7314807+07:00 0HMT3NN68EMAN:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T17:07:06.7358660+07:00 0HMT3NN68EMAN:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T17:07:06.7361776+07:00 0HMT3NN68EMAR:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T17:07:06.7382163+07:00 0HMT3NN68EMAU:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T17:07:06.7481286+07:00 0HMT3NN68EMAU:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T17:07:06.7481287+07:00 0HMT3NN68EMAN:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T17:07:06.7481288+07:00 0HMT3NN68EMAR:00000002 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T20:32:39.5256789+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-23T20:32:39.5352090+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-23T20:32:39.5420825+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-23T20:32:39.5421287+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-23T20:32:57.5488153+07:00 0HMT3RLR3VE2I:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-23T20:32:58.8305994+07:00 0HMT3RLR3VE2I:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T20:32:58.8306085+07:00 0HMT3RLR3VE2G:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T20:32:58.8306007+07:00 0HMT3RLR3VE2H:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T20:32:59.4620432+07:00 0HMT3RLR3VE2I:00000002 [INF] Executed DbCommand ("26"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T20:32:59.4620399+07:00 0HMT3RLR3VE2G:00000003 [INF] Executed DbCommand ("26"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T20:32:59.4620494+07:00 0HMT3RLR3VE2H:00000003 [INF] Executed DbCommand ("26"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T20:32:59.5095099+07:00 0HMT3RLR3VE2G:00000003 [INF] Executed DbCommand ("32"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T20:32:59.5095100+07:00 0HMT3RLR3VE2I:00000002 [INF] Executed DbCommand ("32"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T20:32:59.5095100+07:00 0HMT3RLR3VE2H:00000003 [INF] Executed DbCommand ("32"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T20:32:59.5886382+07:00 0HMT3RLR3VE2I:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T20:32:59.5943546+07:00 0HMT3RLR3VE2I:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T20:32:59.5959500+07:00 0HMT3RLR3VE2I:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T20:33:00.0615413+07:00 0HMT3RLR3VE2H:00000003 [INF] Executed DbCommand ("72"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T20:33:00.0615412+07:00 0HMT3RLR3VE2I:00000002 [INF] Executed DbCommand ("72"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T20:33:00.0615414+07:00 0HMT3RLR3VE2G:00000003 [INF] Executed DbCommand ("72"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T20:33:00.1505510+07:00 0HMT3RLR3VE2H:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T20:33:00.1513184+07:00 0HMT3RLR3VE2H:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T20:33:00.1527663+07:00 0HMT3RLR3VE2H:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T20:33:00.1551243+07:00 0HMT3RLR3VE2J:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T20:33:00.1556999+07:00 0HMT3RLR3VE2J:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T20:33:00.1584717+07:00 0HMT3RLR3VE2J:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T20:33:00.1625742+07:00 0HMT3RLR3VE2J:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T20:33:00.1625742+07:00 0HMT3RLR3VE2H:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T20:33:00.2777237+07:00 0HMT3RLR3VE2H:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T20:33:00.2777224+07:00 0HMT3RLR3VE2G:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T20:33:00.3064496+07:00 0HMT3RLR3VE2H:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T20:33:00.3064496+07:00 0HMT3RLR3VE2G:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T20:33:00.3180942+07:00 0HMT3RLR3VE2G:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T20:33:00.3180942+07:00 0HMT3RLR3VE2H:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T20:33:00.3364308+07:00 0HMT3RLR3VE2G:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T20:33:00.3364309+07:00 0HMT3RLR3VE2H:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T20:33:00.3375344+07:00 0HMT3RLR3VE2G:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T20:33:00.3376999+07:00 0HMT3RLR3VE2H:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T20:33:00.3391526+07:00 0HMT3RLR3VE2H:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T20:33:00.3391481+07:00 0HMT3RLR3VE2G:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T20:33:00.3402988+07:00 0HMT3RLR3VE2H:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T20:33:00.3402941+07:00 0HMT3RLR3VE2G:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T20:33:05.4750149+07:00 0HMT3RLR3VE2H:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T20:33:05.4758010+07:00 0HMT3RLR3VE2H:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T20:33:05.4776847+07:00 0HMT3RLR3VE2H:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T20:33:05.5071707+07:00 0HMT3RLR3VE2H:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T20:33:05.5524077+07:00 0HMT3RLR3VE2H:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T20:33:05.5529501+07:00 0HMT3RLR3VE2H:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T20:33:05.5543787+07:00 0HMT3RLR3VE2H:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T20:33:05.5569170+07:00 0HMT3RLR3VE2H:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T20:33:05.7440219+07:00 0HMT3RLR3VE2H:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T20:33:05.7445210+07:00 0HMT3RLR3VE2H:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T20:33:05.7462830+07:00 0HMT3RLR3VE2H:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T20:33:05.7495666+07:00 0HMT3RLR3VE2H:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T20:33:16.7971612+07:00 0HMT3RLR3VE2H:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T20:33:16.7976572+07:00 0HMT3RLR3VE2H:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T20:33:16.7989415+07:00 0HMT3RLR3VE2H:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T20:33:17.0146140+07:00 0HMT3RLR3VE2H:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-23T20:33:17.0893608+07:00 0HMT3RLR3VE2H:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T20:33:17.0899242+07:00 0HMT3RLR3VE2H:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T20:33:17.0912944+07:00 0HMT3RLR3VE2H:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T20:33:17.1123185+07:00 0HMT3RLR3VE2H:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T20:33:17.1450148+07:00 0HMT3RLR3VE2H:0000000D [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T20:33:19.5584423+07:00 0HMT3RLR3VE2H:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T20:33:19.5589696+07:00 0HMT3RLR3VE2H:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T20:33:19.5607225+07:00 0HMT3RLR3VE2H:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T20:33:19.5719766+07:00 0HMT3RLR3VE2H:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-23T20:33:19.5787082+07:00 0HMT3RLR3VE2H:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@p2='?' (Size = 100), @p0='?' (Size = 50), @p1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Messages] SET [FileStatus] = @p0, [FileUrls] = @p1
WHERE [Id] = @p2;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T20:33:19.6113426+07:00 0HMT3RLR3VE2H:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T20:33:19.6118939+07:00 0HMT3RLR3VE2H:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T20:33:19.6133678+07:00 0HMT3RLR3VE2H:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T20:33:19.6156451+07:00 0HMT3RLR3VE2H:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T20:33:37.1555799+07:00 0HMT3RLR3VE2H:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T20:33:37.1561369+07:00 0HMT3RLR3VE2H:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T20:33:37.1644448+07:00 0HMT3RLR3VE2H:00000012 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T20:33:37.1730129+07:00 0HMT3RLR3VE2H:00000012 [INF] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-23T20:33:37.2157281+07:00 0HMT3RLR3VE2H:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T20:33:37.2163786+07:00 0HMT3RLR3VE2H:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T20:33:37.2220345+07:00 0HMT3RLR3VE2H:00000014 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T20:33:37.2255646+07:00 0HMT3RLR3VE2H:00000014 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T20:33:37.2291179+07:00 0HMT3RLR3VE2H:00000014 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T20:33:38.3705358+07:00 0HMT3RLR3VE2H:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T20:33:38.3714126+07:00 0HMT3RLR3VE2H:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T20:33:38.3769639+07:00 0HMT3RLR3VE2H:00000016 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T20:33:38.3801370+07:00 0HMT3RLR3VE2H:00000016 [INF] Executed DbCommand ("3"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-23T20:33:38.3818577+07:00 0HMT3RLR3VE2H:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@p2='?' (Size = 100), @p0='?' (Size = 50), @p1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Messages] SET [FileStatus] = @p0, [FileUrls] = @p1
WHERE [Id] = @p2;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T20:33:38.4094910+07:00 0HMT3RLR3VE2H:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T20:33:38.4100248+07:00 0HMT3RLR3VE2H:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T20:33:38.4161260+07:00 0HMT3RLR3VE2H:00000017 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T20:33:38.4181283+07:00 0HMT3RLR3VE2H:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T20:47:26.8064509+07:00 0HMT3RLR3VE2K:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T20:47:26.8100799+07:00 0HMT3RLR3VE2K:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T20:47:26.8240131+07:00 0HMT3RLR3VE2K:00000003 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T20:47:26.8280980+07:00 0HMT3RLR3VE2K:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T20:47:27.0497153+07:00 0HMT3RLR3VE2K:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T20:47:27.0502020+07:00 0HMT3RLR3VE2K:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T20:47:27.0514955+07:00 0HMT3RLR3VE2K:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T20:47:27.0534342+07:00 0HMT3RLR3VE2K:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T20:47:27.0925820+07:00 0HMT3RLR3VE2K:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T20:47:27.0937434+07:00 0HMT3RLR3VE2K:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T20:47:27.0953581+07:00 0HMT3RLR3VE2K:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T20:47:27.0982688+07:00 0HMT3RLR3VE2K:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T21:05:12.9835060+07:00 0HMT3RLR3VE2M:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:05:12.9837769+07:00 0HMT3RLR3VE2L:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:05:13.0059637+07:00 0HMT3RLR3VE2M:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:05:13.0091836+07:00 0HMT3RLR3VE2L:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:05:13.0240448+07:00 0HMT3RLR3VE2M:00000003 [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:05:13.0240449+07:00 0HMT3RLR3VE2L:00000003 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:05:13.0313729+07:00 0HMT3RLR3VE2M:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T21:05:13.0313729+07:00 0HMT3RLR3VE2L:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:05:13.0456842+07:00 0HMT3RLR3VE2L:00000003 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:05:13.0574091+07:00 0HMT3RLR3VE2L:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:05:13.0610105+07:00 0HMT3RLR3VE2L:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:05:13.0681390+07:00 0HMT3RLR3VE2L:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:05:13.0745108+07:00 0HMT3RLR3VE2L:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:05:13.0806231+07:00 0HMT3RLR3VE2L:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:05:13.0818241+07:00 0HMT3RLR3VE2L:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:05:14.2973279+07:00 0HMT3RLR3VE2L:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:05:14.2973287+07:00 0HMT3RLR3VE2M:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:05:14.2981675+07:00 0HMT3RLR3VE2M:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:05:14.2981675+07:00 0HMT3RLR3VE2L:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:05:14.3013532+07:00 0HMT3RLR3VE2L:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:05:14.3013532+07:00 0HMT3RLR3VE2M:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:05:14.3071723+07:00 0HMT3RLR3VE2M:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T21:05:14.3071697+07:00 0HMT3RLR3VE2L:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:05:14.3230601+07:00 0HMT3RLR3VE2L:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:05:14.3245566+07:00 0HMT3RLR3VE2L:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:05:14.3258605+07:00 0HMT3RLR3VE2L:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:05:14.3270572+07:00 0HMT3RLR3VE2L:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:05:14.3280333+07:00 0HMT3RLR3VE2L:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:05:14.3290010+07:00 0HMT3RLR3VE2L:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:05:14.3300135+07:00 0HMT3RLR3VE2L:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:14:04.7457979+07:00 0HMT3RLR3VE2N:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:14:04.7457978+07:00 0HMT3RLR3VE2O:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:14:04.7537583+07:00 0HMT3RLR3VE2N:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:14:04.7580496+07:00 0HMT3RLR3VE2O:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:14:04.7910195+07:00 0HMT3RLR3VE2O:00000003 [INF] Executed DbCommand ("33"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:14:04.7910195+07:00 0HMT3RLR3VE2N:00000003 [INF] Executed DbCommand ("37"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:14:04.7962126+07:00 0HMT3RLR3VE2O:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T21:14:04.7964702+07:00 0HMT3RLR3VE2N:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:14:04.8451579+07:00 0HMT3RLR3VE2N:00000003 [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:14:04.9291337+07:00 0HMT3RLR3VE2N:00000003 [INF] Executed DbCommand ("29"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:14:04.9367402+07:00 0HMT3RLR3VE2N:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:14:04.9393147+07:00 0HMT3RLR3VE2N:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:14:04.9409034+07:00 0HMT3RLR3VE2N:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:14:04.9436010+07:00 0HMT3RLR3VE2N:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:14:04.9453125+07:00 0HMT3RLR3VE2N:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:14:18.9381368+07:00 0HMT3RLR3VE2Q:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:14:18.9382726+07:00 0HMT3RLR3VE2P:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:14:18.9387160+07:00 0HMT3RLR3VE2Q:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:14:18.9387150+07:00 0HMT3RLR3VE2P:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:14:18.9499249+07:00 0HMT3RLR3VE2P:00000003 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:14:18.9550090+07:00 0HMT3RLR3VE2P:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:14:18.9567602+07:00 0HMT3RLR3VE2Q:00000003 [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:14:18.9609444+07:00 0HMT3RLR3VE2P:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:14:18.9616946+07:00 0HMT3RLR3VE2Q:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T21:14:18.9639655+07:00 0HMT3RLR3VE2P:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:14:18.9669892+07:00 0HMT3RLR3VE2P:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:14:18.9694887+07:00 0HMT3RLR3VE2P:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:14:18.9704733+07:00 0HMT3RLR3VE2P:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:14:18.9713235+07:00 0HMT3RLR3VE2P:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:14:18.9725697+07:00 0HMT3RLR3VE2P:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:14:19.0969362+07:00 0HMT3RLR3VE2R:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:14:19.0975223+07:00 0HMT3RLR3VE2R:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:14:19.0988790+07:00 0HMT3RLR3VE2R:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:14:19.0995816+07:00 0HMT3RLR3VE2R:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:14:19.1000102+07:00 0HMT3RLR3VE2R:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:14:19.1012944+07:00 0HMT3RLR3VE2R:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:14:19.1032281+07:00 0HMT3RLR3VE2R:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T21:14:19.3730081+07:00 0HMT3RLR3VE2Q:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:14:19.3740436+07:00 0HMT3RLR3VE2Q:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:14:19.3767546+07:00 0HMT3RLR3VE2Q:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:14:19.3789684+07:00 0HMT3RLR3VE2Q:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:14:19.3832901+07:00 0HMT3RLR3VE2Q:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:14:19.3843352+07:00 0HMT3RLR3VE2Q:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:14:19.3852096+07:00 0HMT3RLR3VE2Q:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:14:19.3864759+07:00 0HMT3RLR3VE2Q:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:14:19.3876285+07:00 0HMT3RLR3VE2Q:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:14:19.3892076+07:00 0HMT3RLR3VE2Q:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:14:19.3905337+07:00 0HMT3RLR3VE2Q:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:14:19.4218197+07:00 0HMT3RLR3VE2T:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:14:19.4439974+07:00 0HMT3RLR3VE2T:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:14:19.4567772+07:00 0HMT3RLR3VE2T:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:14:19.4737753+07:00 0HMT3RLR3VE2T:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:14:19.4985823+07:00 0HMT3RLR3VE2T:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:14:19.4999888+07:00 0HMT3RLR3VE2T:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:14:19.5013184+07:00 0HMT3RLR3VE2T:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T21:17:55.4805678+07:00 0HMT3RLR3VE2U:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:17:55.4830257+07:00 0HMT3RLR3VE2U:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:17:55.4932398+07:00 0HMT3RLR3VE2V:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:17:55.4940383+07:00 0HMT3RLR3VE2V:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:17:55.5064490+07:00 0HMT3RLR3VE2U:00000003 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:17:55.5121235+07:00 0HMT3RLR3VE2V:00000003 [INF] Executed DbCommand ("17"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:17:55.5183453+07:00 0HMT3RLR3VE2U:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:17:55.5201481+07:00 0HMT3RLR3VE2V:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T21:17:55.5281450+07:00 0HMT3RLR3VE2U:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:17:55.5364382+07:00 0HMT3RLR3VE2U:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:17:55.5451479+07:00 0HMT3RLR3VE2U:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:17:55.5500967+07:00 0HMT3RLR3VE2U:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:17:55.5519752+07:00 0HMT3RLR3VE2U:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:17:55.5539840+07:00 0HMT3RLR3VE2U:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:17:55.5556679+07:00 0HMT3RLR3VE2U:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:17:55.5972819+07:00 0HMT3RLR3VE30:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:17:55.5979471+07:00 0HMT3RLR3VE30:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:17:55.6028263+07:00 0HMT3RLR3VE30:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:17:55.6198506+07:00 0HMT3RLR3VE30:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:17:55.6210893+07:00 0HMT3RLR3VE30:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:17:55.6237261+07:00 0HMT3RLR3VE30:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:17:55.6262500+07:00 0HMT3RLR3VE30:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T21:17:55.6757332+07:00 0HMT3RLR3VE2U:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:17:55.6766280+07:00 0HMT3RLR3VE2U:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:17:55.6787189+07:00 0HMT3RLR3VE2U:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:17:55.6807659+07:00 0HMT3RLR3VE2U:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:17:55.6824268+07:00 0HMT3RLR3VE2V:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:17:55.6833611+07:00 0HMT3RLR3VE2V:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:17:55.6841630+07:00 0HMT3RLR3VE2U:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:17:55.6855490+07:00 0HMT3RLR3VE2U:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:17:55.6861408+07:00 0HMT3RLR3VE2V:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:17:55.6870697+07:00 0HMT3RLR3VE2U:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:17:55.6881851+07:00 0HMT3RLR3VE2V:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T21:17:55.6900880+07:00 0HMT3RLR3VE2U:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:17:55.6921628+07:00 0HMT3RLR3VE2U:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:17:55.6946189+07:00 0HMT3RLR3VE2U:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:17:55.6966738+07:00 0HMT3RLR3VE2U:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:19:06.3545300+07:00 0HMT3RLR3VE2U:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:19:06.3551512+07:00 0HMT3RLR3VE2U:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:19:06.3552028+07:00 0HMT3RLR3VE2V:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:19:06.3555712+07:00 0HMT3RLR3VE2V:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:19:06.3647376+07:00 0HMT3RLR3VE2U:00000006 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:19:06.3650704+07:00 0HMT3RLR3VE2V:00000006 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:19:06.3714364+07:00 0HMT3RLR3VE2V:00000006 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T21:19:06.3714364+07:00 0HMT3RLR3VE2U:00000006 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:19:06.3785775+07:00 0HMT3RLR3VE2U:00000006 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:19:06.3812067+07:00 0HMT3RLR3VE2U:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:19:06.3844542+07:00 0HMT3RLR3VE2U:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:19:06.3865360+07:00 0HMT3RLR3VE2U:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:19:06.3875771+07:00 0HMT3RLR3VE2U:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:19:06.3886102+07:00 0HMT3RLR3VE2U:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:19:06.3895272+07:00 0HMT3RLR3VE2U:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:23:10.7175127+07:00 0HMT3RLR3VE31:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:23:10.7175047+07:00 0HMT3RLR3VE32:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:23:10.7514397+07:00 0HMT3RLR3VE32:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:23:10.7539454+07:00 0HMT3RLR3VE31:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:23:10.7644356+07:00 0HMT3RLR3VE31:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:23:10.7644356+07:00 0HMT3RLR3VE32:00000003 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:23:10.7695306+07:00 0HMT3RLR3VE32:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T21:23:10.8270735+07:00 0HMT3RLR3VE31:00000003 [INF] Executed DbCommand ("43"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:23:10.8338095+07:00 0HMT3RLR3VE33:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:23:10.8514205+07:00 0HMT3RLR3VE33:00000002 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:23:10.8669437+07:00 0HMT3RLR3VE33:00000002 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:23:10.9021982+07:00 0HMT3RLR3VE31:00000003 [INF] Executed DbCommand ("50"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:23:10.9083454+07:00 0HMT3RLR3VE33:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:23:10.9106045+07:00 0HMT3RLR3VE33:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:23:10.9119630+07:00 0HMT3RLR3VE31:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:23:10.9124379+07:00 0HMT3RLR3VE33:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:23:10.9144586+07:00 0HMT3RLR3VE33:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T21:23:10.9145512+07:00 0HMT3RLR3VE31:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:23:10.9168655+07:00 0HMT3RLR3VE31:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:23:10.9178924+07:00 0HMT3RLR3VE31:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:23:10.9188356+07:00 0HMT3RLR3VE31:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:23:10.9204326+07:00 0HMT3RLR3VE31:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:24:37.7735505+07:00 0HMT3RLR3VE35:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:24:37.7771186+07:00 0HMT3RLR3VE35:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:24:37.7881519+07:00 0HMT3RLR3VE36:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:24:37.7892916+07:00 0HMT3RLR3VE36:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:24:37.7985960+07:00 0HMT3RLR3VE35:00000002 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:24:37.8009589+07:00 0HMT3RLR3VE36:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:24:37.8021860+07:00 0HMT3RLR3VE36:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:24:37.8029658+07:00 0HMT3RLR3VE36:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:24:37.8035218+07:00 0HMT3RLR3VE35:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:24:37.8059535+07:00 0HMT3RLR3VE36:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:24:37.8102037+07:00 0HMT3RLR3VE36:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T21:24:37.8119599+07:00 0HMT3RLR3VE35:00000002 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:24:37.8148754+07:00 0HMT3RLR3VE35:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:24:37.8192931+07:00 0HMT3RLR3VE35:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:24:37.8266684+07:00 0HMT3RLR3VE35:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:24:37.8289894+07:00 0HMT3RLR3VE35:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:24:37.8307048+07:00 0HMT3RLR3VE35:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:24:37.8324397+07:00 0HMT3RLR3VE35:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:24:41.1708912+07:00 0HMT3RLR3VE34:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:24:41.1714130+07:00 0HMT3RLR3VE34:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:24:41.1726854+07:00 0HMT3RLR3VE34:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:24:41.1741093+07:00 0HMT3RLR3VE34:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:24:41.1766264+07:00 0HMT3RLR3VE34:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:24:41.1769470+07:00 0HMT3RLR3VE37:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:24:41.1775136+07:00 0HMT3RLR3VE37:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:24:41.1778469+07:00 0HMT3RLR3VE34:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:24:41.1797869+07:00 0HMT3RLR3VE37:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:24:41.1797869+07:00 0HMT3RLR3VE34:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:24:41.1834515+07:00 0HMT3RLR3VE34:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:24:41.1848751+07:00 0HMT3RLR3VE34:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:24:41.1857355+07:00 0HMT3RLR3VE37:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T21:24:41.1861146+07:00 0HMT3RLR3VE34:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:24:41.1870339+07:00 0HMT3RLR3VE34:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:24:41.2648818+07:00 0HMT3RLR3VE38:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:24:41.2654676+07:00 0HMT3RLR3VE38:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:24:41.2669716+07:00 0HMT3RLR3VE38:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:24:41.2998307+07:00 0HMT3RLR3VE38:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:24:41.3003554+07:00 0HMT3RLR3VE38:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:24:41.3019377+07:00 0HMT3RLR3VE38:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:24:41.3035321+07:00 0HMT3RLR3VE38:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T21:25:37.1800012+07:00 0HMT3RLR3VE34:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:25:37.1806202+07:00 0HMT3RLR3VE34:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:25:37.1929203+07:00 0HMT3RLR3VE34:00000007 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:25:37.1975179+07:00 0HMT3RLR3VE39:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:25:37.1987917+07:00 0HMT3RLR3VE39:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:25:37.2008013+07:00 0HMT3RLR3VE34:00000007 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:25:37.2047679+07:00 0HMT3RLR3VE39:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:25:37.2053730+07:00 0HMT3RLR3VE39:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:25:37.2058086+07:00 0HMT3RLR3VE39:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:25:37.2079399+07:00 0HMT3RLR3VE39:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:25:37.2097473+07:00 0HMT3RLR3VE34:00000007 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:25:37.2101237+07:00 0HMT3RLR3VE39:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T21:25:37.2125021+07:00 0HMT3RLR3VE34:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:25:37.2163662+07:00 0HMT3RLR3VE34:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:25:37.2196434+07:00 0HMT3RLR3VE34:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:25:37.2211516+07:00 0HMT3RLR3VE34:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:25:37.2229205+07:00 0HMT3RLR3VE34:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:25:37.2239847+07:00 0HMT3RLR3VE34:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:25:38.2600990+07:00 0HMT3RLR3VE3A:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:25:38.2609483+07:00 0HMT3RLR3VE3A:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:25:38.2633722+07:00 0HMT3RLR3VE3A:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:25:38.2639727+07:00 0HMT3RLR3VE3A:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:25:38.2649241+07:00 0HMT3RLR3VE3A:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:25:38.2669315+07:00 0HMT3RLR3VE3A:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:25:38.2685768+07:00 0HMT3RLR3VE3A:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T21:26:30.2900801+07:00 0HMT3RLR3VE37:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:26:30.2907210+07:00 0HMT3RLR3VE3B:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:26:30.2909236+07:00 0HMT3RLR3VE37:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:26:30.2912914+07:00 0HMT3RLR3VE3B:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:26:30.3086323+07:00 0HMT3RLR3VE3B:00000003 [INF] Executed DbCommand ("17"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:26:30.3086323+07:00 0HMT3RLR3VE37:00000007 [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:26:30.3145224+07:00 0HMT3RLR3VE37:00000007 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:26:30.3145229+07:00 0HMT3RLR3VE3B:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T21:26:30.3246787+07:00 0HMT3RLR3VE37:00000007 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:26:30.3301941+07:00 0HMT3RLR3VE37:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:26:30.3404791+07:00 0HMT3RLR3VE37:00000007 [INF] Executed DbCommand ("9"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:26:30.3470618+07:00 0HMT3RLR3VE37:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:26:30.3483691+07:00 0HMT3RLR3VE37:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:26:30.3495181+07:00 0HMT3RLR3VE37:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:26:30.3511932+07:00 0HMT3RLR3VE37:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:26:30.4237159+07:00 0HMT3RLR3VE3C:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:26:30.4372701+07:00 0HMT3RLR3VE3C:00000002 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:26:30.4500293+07:00 0HMT3RLR3VE3C:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:26:30.4656735+07:00 0HMT3RLR3VE3C:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:26:30.4812722+07:00 0HMT3RLR3VE3C:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:26:30.4844482+07:00 0HMT3RLR3VE3C:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:26:30.4871696+07:00 0HMT3RLR3VE3C:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T21:26:31.2961884+07:00 0HMT3RLR3VE3B:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:26:31.2968164+07:00 0HMT3RLR3VE3B:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:26:31.2988794+07:00 0HMT3RLR3VE3B:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:26:31.3013103+07:00 0HMT3RLR3VE3B:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:26:31.3047131+07:00 0HMT3RLR3VE3B:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:26:31.3087131+07:00 0HMT3RLR3VE3B:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:26:31.3105315+07:00 0HMT3RLR3VE3B:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:26:31.3119982+07:00 0HMT3RLR3VE3B:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:26:31.3135611+07:00 0HMT3RLR3VE3B:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:26:31.3161929+07:00 0HMT3RLR3VE3B:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:26:31.3179651+07:00 0HMT3RLR3VE3B:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:26:31.3884712+07:00 0HMT3RLR3VE3E:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:26:31.4010930+07:00 0HMT3RLR3VE3E:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:26:31.4135443+07:00 0HMT3RLR3VE3E:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:26:31.4245770+07:00 0HMT3RLR3VE3E:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:26:31.4250341+07:00 0HMT3RLR3VE3E:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:26:31.4262777+07:00 0HMT3RLR3VE3E:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:26:31.4274688+07:00 0HMT3RLR3VE3E:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T21:26:38.0091903+07:00 0HMT3RLR3VE3D:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:26:38.0100082+07:00 0HMT3RLR3VE3D:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:26:38.0120524+07:00 0HMT3RLR3VE3D:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:26:38.0137858+07:00 0HMT3RLR3VE3D:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:26:38.0172561+07:00 0HMT3RLR3VE3D:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:26:38.0186972+07:00 0HMT3RLR3VE3D:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:26:38.0198754+07:00 0HMT3RLR3VE3D:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:26:38.0212319+07:00 0HMT3RLR3VE3D:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:26:38.0226334+07:00 0HMT3RLR3VE3D:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:26:38.0240268+07:00 0HMT3RLR3VE3D:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:26:38.0251540+07:00 0HMT3RLR3VE3D:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:26:38.1323019+07:00 0HMT3RLR3VE3G:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:26:38.1334175+07:00 0HMT3RLR3VE3G:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:26:38.1350253+07:00 0HMT3RLR3VE3G:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:26:38.1366519+07:00 0HMT3RLR3VE3G:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:26:38.1373591+07:00 0HMT3RLR3VE3G:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:26:38.1390461+07:00 0HMT3RLR3VE3G:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:26:38.1408353+07:00 0HMT3RLR3VE3G:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T21:26:40.0446932+07:00 0HMT3RLR3VE3F:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:26:40.0452368+07:00 0HMT3RLR3VE3F:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:26:40.0474072+07:00 0HMT3RLR3VE3F:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:26:40.0495139+07:00 0HMT3RLR3VE3F:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:26:40.0551422+07:00 0HMT3RLR3VE3F:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:26:40.0582445+07:00 0HMT3RLR3VE3F:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:26:40.0593798+07:00 0HMT3RLR3VE3F:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:26:40.0612803+07:00 0HMT3RLR3VE3F:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:26:40.0625921+07:00 0HMT3RLR3VE3F:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:26:40.0678272+07:00 0HMT3RLR3VE3F:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:26:40.0696842+07:00 0HMT3RLR3VE3F:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:26:40.1047805+07:00 0HMT3RLR3VE3I:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:26:40.1332251+07:00 0HMT3RLR3VE3I:00000002 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:26:40.1511293+07:00 0HMT3RLR3VE3I:00000002 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:26:40.1647147+07:00 0HMT3RLR3VE3I:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:26:40.1766536+07:00 0HMT3RLR3VE3I:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:26:40.1874308+07:00 0HMT3RLR3VE3I:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:26:40.1891282+07:00 0HMT3RLR3VE3I:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T21:27:39.0735875+07:00 0HMT3RLR3VE3H:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:27:39.0750651+07:00 0HMT3RLR3VE3H:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:27:39.0979455+07:00 0HMT3RLR3VE3J:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:27:39.1020107+07:00 0HMT3RLR3VE3J:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:27:39.1038056+07:00 0HMT3RLR3VE3H:00000004 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:27:39.1045223+07:00 0HMT3RLR3VE3J:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:27:39.1100220+07:00 0HMT3RLR3VE3J:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T21:27:39.1102420+07:00 0HMT3RLR3VE3H:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:27:39.1607000+07:00 0HMT3RLR3VE3H:00000004 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:27:39.1913608+07:00 0HMT3RLR3VE3K:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:27:39.2161494+07:00 0HMT3RLR3VE3K:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:27:39.2180742+07:00 0HMT3RLR3VE3H:00000004 [INF] Executed DbCommand ("12"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:27:39.2313871+07:00 0HMT3RLR3VE3K:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:27:39.2489081+07:00 0HMT3RLR3VE3H:00000004 [INF] Executed DbCommand ("17"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:27:39.2489967+07:00 0HMT3RLR3VE3K:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:27:39.2518543+07:00 0HMT3RLR3VE3K:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:27:39.2541174+07:00 0HMT3RLR3VE3H:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:27:39.2541959+07:00 0HMT3RLR3VE3K:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:27:39.2562696+07:00 0HMT3RLR3VE3H:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:27:39.2568139+07:00 0HMT3RLR3VE3K:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T21:27:39.2577619+07:00 0HMT3RLR3VE3H:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:27:39.2587553+07:00 0HMT3RLR3VE3H:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:27:40.1204534+07:00 0HMT3RLR3VE3L:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:27:40.1210651+07:00 0HMT3RLR3VE3L:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:27:40.1228106+07:00 0HMT3RLR3VE3L:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:27:40.1245848+07:00 0HMT3RLR3VE3L:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:27:40.1282576+07:00 0HMT3RLR3VE3L:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:27:40.1295484+07:00 0HMT3RLR3VE3L:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:27:40.1306930+07:00 0HMT3RLR3VE3L:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:27:40.1324268+07:00 0HMT3RLR3VE3L:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:27:40.1340872+07:00 0HMT3RLR3VE3L:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:27:40.1359198+07:00 0HMT3RLR3VE3L:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:27:40.1371781+07:00 0HMT3RLR3VE3L:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:27:40.2115893+07:00 0HMT3RLR3VE3N:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:27:40.2240447+07:00 0HMT3RLR3VE3N:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:27:40.2361196+07:00 0HMT3RLR3VE3N:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:27:40.2482489+07:00 0HMT3RLR3VE3N:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:27:40.2488611+07:00 0HMT3RLR3VE3N:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:27:40.2501037+07:00 0HMT3RLR3VE3N:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:27:40.2513874+07:00 0HMT3RLR3VE3N:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T21:27:51.5388434+07:00 0HMT3RLR3VE3O:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:27:51.5398335+07:00 0HMT3RLR3VE3O:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:27:51.5426657+07:00 0HMT3RLR3VE3O:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:27:51.5452491+07:00 0HMT3RLR3VE3O:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:27:51.5480529+07:00 0HMT3RLR3VE3O:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:27:51.5501571+07:00 0HMT3RLR3VE3O:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:27:51.5513202+07:00 0HMT3RLR3VE3O:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:27:51.5532354+07:00 0HMT3RLR3VE3O:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:27:51.5552010+07:00 0HMT3RLR3VE3O:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:27:51.5572101+07:00 0HMT3RLR3VE3O:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:27:51.5585670+07:00 0HMT3RLR3VE3O:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:27:51.6296271+07:00 0HMT3RLR3VE3P:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:27:51.6308908+07:00 0HMT3RLR3VE3P:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:27:51.6449867+07:00 0HMT3RLR3VE3P:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:27:51.6576433+07:00 0HMT3RLR3VE3P:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:27:51.6695580+07:00 0HMT3RLR3VE3P:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:27:51.6710616+07:00 0HMT3RLR3VE3P:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:27:51.6724559+07:00 0HMT3RLR3VE3P:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T21:30:56.1385785+07:00 0HMT3RLR3VE30:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:30:56.1385785+07:00 0HMT3RLR3VE3G:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:30:56.1385785+07:00 0HMT3RLR3VE3I:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:30:56.1385784+07:00 0HMT3RLR3VE3A:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:30:56.1385962+07:00 0HMT3RLR3VE2I:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:30:56.1385784+07:00 0HMT3RLR3VE3E:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:30:56.1385785+07:00 0HMT3RLR3VE38:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:30:56.1386168+07:00 0HMT3RLR3VE3K:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:30:56.1390620+07:00 0HMT3RLR3VE3N:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:30:56.1390732+07:00 0HMT3RLR3VE2T:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:30:56.1390739+07:00 0HMT3RLR3VE39:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:30:56.1391205+07:00 0HMT3RLR3VE33:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:30:56.1391428+07:00 0HMT3RLR3VE36:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:30:56.1403651+07:00 0HMT3RLR3VE3K:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:30:56.1403655+07:00 0HMT3RLR3VE3E:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:30:56.1411889+07:00 0HMT3RLR3VE33:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:30:56.1412764+07:00 0HMT3RLR3VE3G:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:30:56.1417491+07:00 0HMT3RLR3VE2I:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:30:56.1417598+07:00 0HMT3RLR3VE39:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:30:56.1420773+07:00 0HMT3RLR3VE3N:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:30:56.1424790+07:00 0HMT3RLR3VE3A:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:30:56.1427139+07:00 0HMT3RLR3VE2T:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:30:56.1432526+07:00 0HMT3RLR3VE38:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:30:56.1482656+07:00 0HMT3RLR3VE30:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:30:56.1493595+07:00 0HMT3RLR3VE2R:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:30:56.1493594+07:00 0HMT3RLR3VE3P:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:30:56.1493594+07:00 0HMT3RLR3VE3C:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:30:56.1627292+07:00 0HMT3RLR3VE3K:00000002 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:30:56.1627293+07:00 0HMT3RLR3VE3G:00000002 [INF] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:30:56.1628922+07:00 0HMT3RLR3VE39:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:30:56.1630001+07:00 0HMT3RLR3VE2I:00000002 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:30:56.1642865+07:00 0HMT3RLR3VE36:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:30:56.1650047+07:00 0HMT3RLR3VE3I:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:30:56.1654966+07:00 0HMT3RLR3VE38:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:30:56.1655594+07:00 0HMT3RLR3VE33:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:30:56.1655854+07:00 0HMT3RLR3VE3E:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:30:56.1659234+07:00 0HMT3RLR3VE3C:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:30:56.1661428+07:00 0HMT3RLR3VE3P:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:30:56.1662115+07:00 0HMT3RLR3VE2R:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:30:56.1670622+07:00 0HMT3RLR3VE30:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:30:56.1685727+07:00 0HMT3RLR3VE36:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:30:56.1687025+07:00 0HMT3RLR3VE2T:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:30:56.1687757+07:00 0HMT3RLR3VE3C:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:30:56.1695035+07:00 0HMT3RLR3VE3N:00000002 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:30:56.1703386+07:00 0HMT3RLR3VE3P:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:30:56.1706431+07:00 0HMT3RLR3VE2R:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:30:56.1717956+07:00 0HMT3RLR3VE3A:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:30:56.1749265+07:00 0HMT3RLR3VE3I:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:30:58.5077959+07:00 0HMT3RLR3VE3Q:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:30:58.5078283+07:00 0HMT3RLR3VE3R:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:30:58.5091264+07:00 0HMT3RLR3VE3R:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:30:58.5091264+07:00 0HMT3RLR3VE3Q:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:30:58.5123034+07:00 0HMT3RLR3VE3R:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:30:58.5123034+07:00 0HMT3RLR3VE3Q:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:30:58.5189800+07:00 0HMT3RLR3VE3Q:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:30:58.5190184+07:00 0HMT3RLR3VE3R:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T21:30:58.5279551+07:00 0HMT3RLR3VE3Q:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:30:58.5328672+07:00 0HMT3RLR3VE3Q:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:30:58.5373927+07:00 0HMT3RLR3VE3Q:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:30:58.5401822+07:00 0HMT3RLR3VE3Q:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:30:58.5415661+07:00 0HMT3RLR3VE3Q:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:30:58.5427440+07:00 0HMT3RLR3VE3Q:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:30:58.5443710+07:00 0HMT3RLR3VE3Q:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:30:58.6286589+07:00 0HMT3RLR3VE3S:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:30:58.6295327+07:00 0HMT3RLR3VE3S:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:30:58.6318265+07:00 0HMT3RLR3VE3S:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:30:58.6635598+07:00 0HMT3RLR3VE3S:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:30:58.6642903+07:00 0HMT3RLR3VE3S:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:30:58.6676139+07:00 0HMT3RLR3VE3S:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:30:58.6776240+07:00 0HMT3RLR3VE3S:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T21:30:58.7173992+07:00 0HMT3RLR3VE3Q:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:30:58.7174606+07:00 0HMT3RLR3VE3R:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:30:58.7180213+07:00 0HMT3RLR3VE3Q:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:30:58.7180213+07:00 0HMT3RLR3VE3R:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:30:58.7202370+07:00 0HMT3RLR3VE3Q:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:30:58.7202369+07:00 0HMT3RLR3VE3R:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:30:58.7240089+07:00 0HMT3RLR3VE3R:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T21:30:58.7240090+07:00 0HMT3RLR3VE3Q:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:30:58.7297761+07:00 0HMT3RLR3VE3Q:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:30:58.7313074+07:00 0HMT3RLR3VE3Q:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:30:58.7327246+07:00 0HMT3RLR3VE3Q:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:30:58.7347432+07:00 0HMT3RLR3VE3Q:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:30:58.7362923+07:00 0HMT3RLR3VE3Q:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:30:58.7382913+07:00 0HMT3RLR3VE3Q:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:30:58.7398405+07:00 0HMT3RLR3VE3Q:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:31:03.0428193+07:00 0HMT3RLR3VE3Q:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:31:03.0440059+07:00 0HMT3RLR3VE3Q:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:31:03.0453774+07:00 0HMT3RLR3VE3Q:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:31:03.0494580+07:00 0HMT3RLR3VE3Q:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T21:31:03.1657619+07:00 0HMT3RLR3VE3Q:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:31:03.1663707+07:00 0HMT3RLR3VE3Q:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:31:03.1684597+07:00 0HMT3RLR3VE3Q:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:31:03.1724306+07:00 0HMT3RLR3VE3Q:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T21:31:07.5098785+07:00 0HMT3RLR3VE3Q:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:31:07.5105753+07:00 0HMT3RLR3VE3Q:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:31:07.5122864+07:00 0HMT3RLR3VE3Q:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:31:07.5176416+07:00 0HMT3RLR3VE3Q:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-23T21:31:07.5720712+07:00 0HMT3RLR3VE3Q:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:31:07.5726183+07:00 0HMT3RLR3VE3Q:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:31:07.5740983+07:00 0HMT3RLR3VE3Q:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:31:07.5761395+07:00 0HMT3RLR3VE3Q:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T21:31:07.5819151+07:00 0HMT3RLR3VE3Q:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T21:31:08.8043674+07:00 0HMT3RLR3VE3Q:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:31:08.8048526+07:00 0HMT3RLR3VE3Q:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:31:08.8061297+07:00 0HMT3RLR3VE3Q:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:31:08.8088857+07:00 0HMT3RLR3VE3Q:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-23T21:31:08.8111791+07:00 0HMT3RLR3VE3Q:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@p2='?' (Size = 100), @p0='?' (Size = 50), @p1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Messages] SET [FileStatus] = @p0, [FileUrls] = @p1
WHERE [Id] = @p2;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T21:31:08.8770480+07:00 0HMT3RLR3VE3Q:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:31:08.8775985+07:00 0HMT3RLR3VE3Q:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:31:08.8797922+07:00 0HMT3RLR3VE3Q:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:31:08.8840627+07:00 0HMT3RLR3VE3Q:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T21:36:41.6751976+07:00 0HMT3RLR3VE3U:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:36:41.6751976+07:00 0HMT3RLR3VE3T:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:36:41.6938947+07:00 0HMT3RLR3VE3U:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:36:41.7059702+07:00 0HMT3RLR3VE3T:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:36:41.7196023+07:00 0HMT3RLR3VE3T:00000003 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:36:41.7248540+07:00 0HMT3RLR3VE3T:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:36:41.7352107+07:00 0HMT3RLR3VE3U:00000003 [INF] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:36:41.7383996+07:00 0HMT3RLR3VE3T:00000003 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:36:41.7459259+07:00 0HMT3RLR3VE3U:00000003 [INF] Executed DbCommand ("9"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T21:36:41.7657091+07:00 0HMT3RLR3VE3T:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:36:41.8158238+07:00 0HMT3RLR3VE3T:00000003 [INF] Executed DbCommand ("29"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:36:41.8776698+07:00 0HMT3RLR3VE3T:00000003 [INF] Executed DbCommand ("15"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:36:41.8792111+07:00 0HMT3RLR3VE3T:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:36:41.8806489+07:00 0HMT3RLR3VE3T:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:36:41.8822506+07:00 0HMT3RLR3VE3T:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:36:58.2575084+07:00 0HMT3RLR3VE40:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:36:58.2575084+07:00 0HMT3RLR3VE3V:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:36:58.2597878+07:00 0HMT3RLR3VE3V:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:36:58.2597100+07:00 0HMT3RLR3VE40:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:36:58.2623057+07:00 0HMT3RLR3VE40:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:36:58.2623057+07:00 0HMT3RLR3VE3V:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:36:58.2641693+07:00 0HMT3RLR3VE40:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T21:36:58.2641574+07:00 0HMT3RLR3VE3V:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:36:58.2692197+07:00 0HMT3RLR3VE3V:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:36:58.2706668+07:00 0HMT3RLR3VE3V:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:36:58.2716103+07:00 0HMT3RLR3VE3V:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:36:58.2728476+07:00 0HMT3RLR3VE3V:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:36:58.2738702+07:00 0HMT3RLR3VE3V:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:36:58.2748125+07:00 0HMT3RLR3VE3V:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:36:58.2757310+07:00 0HMT3RLR3VE3V:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:36:58.3723442+07:00 0HMT3RLR3VE41:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:36:58.3842621+07:00 0HMT3RLR3VE41:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:36:58.3867996+07:00 0HMT3RLR3VE41:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:36:58.3877719+07:00 0HMT3RLR3VE41:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:36:58.3884604+07:00 0HMT3RLR3VE41:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:36:58.3902234+07:00 0HMT3RLR3VE41:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:36:58.3928873+07:00 0HMT3RLR3VE41:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T21:36:58.4572649+07:00 0HMT3RLR3VE42:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:36:58.4585421+07:00 0HMT3RLR3VE42:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:36:58.4601651+07:00 0HMT3RLR3VE42:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:36:58.4667485+07:00 0HMT3RLR3VE42:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:36:58.4673816+07:00 0HMT3RLR3VE42:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:36:58.4693301+07:00 0HMT3RLR3VE42:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:36:58.4708061+07:00 0HMT3RLR3VE42:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T21:37:00.1034326+07:00 0HMT3RLR3VE3S:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:00.1034551+07:00 0HMT3RLR3VE41:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:00.1083961+07:00 0HMT3RLR3VE42:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:00.1085583+07:00 0HMT3RLR3VE41:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:00.1133466+07:00 0HMT3RLR3VE3S:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:00.1133467+07:00 0HMT3RLR3VE41:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:00.1162996+07:00 0HMT3RLR3VE3S:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:00.1374260+07:00 0HMT3RLR3VE42:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:00.1405339+07:00 0HMT3RLR3VE42:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:01.8556101+07:00 0HMT3RLR3VE40:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:01.8566046+07:00 0HMT3RLR3VE40:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:01.8588910+07:00 0HMT3RLR3VE40:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:01.8611409+07:00 0HMT3RLR3VE40:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:37:01.8625330+07:00 0HMT3RLR3VE44:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:01.8635283+07:00 0HMT3RLR3VE44:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:01.8637232+07:00 0HMT3RLR3VE40:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:37:01.8670049+07:00 0HMT3RLR3VE44:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:01.8670442+07:00 0HMT3RLR3VE40:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:37:01.8699671+07:00 0HMT3RLR3VE44:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T21:37:01.8699665+07:00 0HMT3RLR3VE40:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:37:01.8729251+07:00 0HMT3RLR3VE40:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:37:01.8748410+07:00 0HMT3RLR3VE40:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:37:01.8771622+07:00 0HMT3RLR3VE40:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:37:01.8786596+07:00 0HMT3RLR3VE40:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:37:01.9340533+07:00 0HMT3RLR3VE45:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:01.9348391+07:00 0HMT3RLR3VE45:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:01.9389543+07:00 0HMT3RLR3VE45:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:01.9740604+07:00 0HMT3RLR3VE45:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:01.9745971+07:00 0HMT3RLR3VE45:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:01.9764877+07:00 0HMT3RLR3VE45:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:01.9783465+07:00 0HMT3RLR3VE45:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T21:37:02.1472832+07:00 0HMT3RLR3VE44:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:02.1472832+07:00 0HMT3RLR3VE40:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:02.1479325+07:00 0HMT3RLR3VE44:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:02.1479325+07:00 0HMT3RLR3VE40:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:02.1498469+07:00 0HMT3RLR3VE44:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:02.1498469+07:00 0HMT3RLR3VE40:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:02.1530807+07:00 0HMT3RLR3VE40:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:37:02.1530940+07:00 0HMT3RLR3VE44:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T21:37:02.1578256+07:00 0HMT3RLR3VE40:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:37:02.1592011+07:00 0HMT3RLR3VE40:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:37:02.1602231+07:00 0HMT3RLR3VE40:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:37:02.1615063+07:00 0HMT3RLR3VE40:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:37:02.1637329+07:00 0HMT3RLR3VE40:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:37:02.1650722+07:00 0HMT3RLR3VE40:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:37:02.1660464+07:00 0HMT3RLR3VE40:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:37:02.9932758+07:00 0HMT3RLR3VE40:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:02.9938856+07:00 0HMT3RLR3VE40:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:02.9951721+07:00 0HMT3RLR3VE40:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:02.9983713+07:00 0HMT3RLR3VE40:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T21:37:03.1046235+07:00 0HMT3RLR3VE40:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:03.1054245+07:00 0HMT3RLR3VE40:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:03.1071582+07:00 0HMT3RLR3VE40:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:03.1107477+07:00 0HMT3RLR3VE40:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T21:37:06.7877686+07:00 0HMT3RLR3VE40:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:06.7883476+07:00 0HMT3RLR3VE40:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:06.7898849+07:00 0HMT3RLR3VE40:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:06.7944483+07:00 0HMT3RLR3VE40:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-23T21:37:06.9476502+07:00 0HMT3RLR3VE40:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:06.9481317+07:00 0HMT3RLR3VE40:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:06.9493636+07:00 0HMT3RLR3VE40:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:06.9517143+07:00 0HMT3RLR3VE40:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T21:37:06.9552303+07:00 0HMT3RLR3VE40:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T21:37:07.3866873+07:00 0HMT3RLR3VE40:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:07.3872801+07:00 0HMT3RLR3VE40:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:07.3886391+07:00 0HMT3RLR3VE40:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:07.3904990+07:00 0HMT3RLR3VE40:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T21:37:08.1827270+07:00 0HMT3RLR3VE40:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:08.1832575+07:00 0HMT3RLR3VE40:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:08.1845726+07:00 0HMT3RLR3VE40:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:08.1865979+07:00 0HMT3RLR3VE40:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T21:37:08.2321810+07:00 0HMT3RLR3VE40:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:08.2331105+07:00 0HMT3RLR3VE40:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:08.2349216+07:00 0HMT3RLR3VE40:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:08.2373797+07:00 0HMT3RLR3VE40:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T21:37:09.1455741+07:00 0HMT3RLR3VE40:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:09.1460434+07:00 0HMT3RLR3VE40:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:09.1474067+07:00 0HMT3RLR3VE40:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:09.1501571+07:00 0HMT3RLR3VE40:00000015 [INF] Executed DbCommand ("2"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-23T21:37:09.1522334+07:00 0HMT3RLR3VE40:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@p2='?' (Size = 100), @p0='?' (Size = 50), @p1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Messages] SET [FileStatus] = @p0, [FileUrls] = @p1
WHERE [Id] = @p2;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T21:37:09.2049306+07:00 0HMT3RLR3VE40:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:09.2060030+07:00 0HMT3RLR3VE40:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:09.2085974+07:00 0HMT3RLR3VE40:00000016 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:09.2116679+07:00 0HMT3RLR3VE40:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T21:37:09.2567429+07:00 0HMT3RLR3VE40:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:09.2573595+07:00 0HMT3RLR3VE40:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:09.2589608+07:00 0HMT3RLR3VE40:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:09.2611830+07:00 0HMT3RLR3VE40:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T21:37:09.8080052+07:00 0HMT3RLR3VE40:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:09.8084835+07:00 0HMT3RLR3VE40:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:09.8098451+07:00 0HMT3RLR3VE40:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:09.8117228+07:00 0HMT3RLR3VE40:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T21:37:09.8589917+07:00 0HMT3RLR3VE40:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:09.8598839+07:00 0HMT3RLR3VE40:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:09.8620649+07:00 0HMT3RLR3VE40:00000019 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:09.8645325+07:00 0HMT3RLR3VE40:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T21:37:11.2528966+07:00 0HMT3RLR3VE40:0000001B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:11.2536533+07:00 0HMT3RLR3VE40:0000001B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:11.2550651+07:00 0HMT3RLR3VE40:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:11.2836007+07:00 0HMT3RLR3VE40:0000001B [INF] Executed DbCommand ("2"ms) [Parameters=["@__8__locals1_lastMessageId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[CreatedTime]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__8__locals1_lastMessageId_0" (0723d8ff)
2023-08-23T21:37:11.2991721+07:00 0HMT3RLR3VE40:0000001B [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_3='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100), @__lastMessageTime_1='?' (DbType = DateTime2), @__8__locals1_lastMessageId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_3) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE ([m].[ChatRoomId] = @__chatRoomId_0) AND (([m].[CreatedTime] <= @__lastMessageTime_1) AND ([m].[Id] <> @__8__locals1_lastMessageId_2))
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T21:37:11.3402411+07:00 0HMT3RLR3VE40:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:11.3411396+07:00 0HMT3RLR3VE40:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:11.3428574+07:00 0HMT3RLR3VE40:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:11.3459895+07:00 0HMT3RLR3VE40:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T21:37:11.4394649+07:00 0HMT3RLR3VE40:0000001D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:11.4399844+07:00 0HMT3RLR3VE40:0000001D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:11.4413766+07:00 0HMT3RLR3VE40:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:11.4428592+07:00 0HMT3RLR3VE40:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_lastMessageId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[CreatedTime]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__8__locals1_lastMessageId_0" (0723d8ff)
2023-08-23T21:37:11.4463267+07:00 0HMT3RLR3VE40:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_3='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100), @__lastMessageTime_1='?' (DbType = DateTime2), @__8__locals1_lastMessageId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_3) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE ([m].[ChatRoomId] = @__chatRoomId_0) AND (([m].[CreatedTime] <= @__lastMessageTime_1) AND ([m].[Id] <> @__8__locals1_lastMessageId_2))
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T21:37:11.4988675+07:00 0HMT3RLR3VE40:0000001E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:37:11.4995136+07:00 0HMT3RLR3VE40:0000001E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:37:11.5009167+07:00 0HMT3RLR3VE40:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:37:11.5034344+07:00 0HMT3RLR3VE40:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T21:53:16.4049695+07:00 0HMT3RLR3VE47:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:53:16.4090798+07:00 0HMT3RLR3VE47:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:53:16.4189324+07:00 0HMT3RLR3VE47:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:53:16.4235065+07:00 0HMT3RLR3VE47:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-23T21:53:16.4973365+07:00 0HMT3RLR3VE46:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:53:16.4985705+07:00 0HMT3RLR3VE46:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:53:16.5010909+07:00 0HMT3RLR3VE46:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:53:16.5051105+07:00 0HMT3RLR3VE46:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T21:53:16.5088925+07:00 0HMT3RLR3VE46:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T21:53:18.1891681+07:00 0HMT3RLR3VE46:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:53:18.1896743+07:00 0HMT3RLR3VE46:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:53:18.1910223+07:00 0HMT3RLR3VE46:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:53:18.1940751+07:00 0HMT3RLR3VE46:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-23T21:53:18.1963492+07:00 0HMT3RLR3VE46:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@p2='?' (Size = 100), @p0='?' (Size = 50), @p1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Messages] SET [FileStatus] = @p0, [FileUrls] = @p1
WHERE [Id] = @p2;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T21:53:18.2477661+07:00 0HMT3RLR3VE46:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:53:18.2483147+07:00 0HMT3RLR3VE46:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:53:18.2499654+07:00 0HMT3RLR3VE46:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:53:18.2525327+07:00 0HMT3RLR3VE46:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T21:58:13.4846005+07:00 0HMT3RLR3VE49:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:58:13.4854332+07:00 0HMT3RLR3VE49:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:58:13.4859391+07:00 0HMT3RLR3VE48:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:58:13.4932975+07:00 0HMT3RLR3VE48:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:58:13.5071347+07:00 0HMT3RLR3VE48:00000003 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:58:13.5071341+07:00 0HMT3RLR3VE49:00000003 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:58:13.5170679+07:00 0HMT3RLR3VE49:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T21:58:13.5170448+07:00 0HMT3RLR3VE48:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:58:13.5346041+07:00 0HMT3RLR3VE48:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:58:13.5385249+07:00 0HMT3RLR3VE48:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:58:13.5421808+07:00 0HMT3RLR3VE48:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:58:13.5452160+07:00 0HMT3RLR3VE48:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:58:13.5463693+07:00 0HMT3RLR3VE48:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:58:13.5473513+07:00 0HMT3RLR3VE48:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:58:13.5484044+07:00 0HMT3RLR3VE48:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:58:14.2423007+07:00 0HMT3RLR3VE48:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:58:14.2433247+07:00 0HMT3RLR3VE48:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:58:14.2458871+07:00 0HMT3RLR3VE48:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:58:14.2502557+07:00 0HMT3RLR3VE48:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:58:14.2509670+07:00 0HMT3RLR3VE49:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:58:14.2521397+07:00 0HMT3RLR3VE49:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:58:14.2541508+07:00 0HMT3RLR3VE48:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:58:14.2573896+07:00 0HMT3RLR3VE49:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:58:14.2658432+07:00 0HMT3RLR3VE49:00000005 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T21:58:14.2690443+07:00 0HMT3RLR3VE48:00000005 [INF] Executed DbCommand ("13"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:58:14.2858221+07:00 0HMT3RLR3VE48:00000005 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:58:14.2883097+07:00 0HMT3RLR3VE48:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:58:14.2906318+07:00 0HMT3RLR3VE48:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:58:14.2959388+07:00 0HMT3RLR3VE48:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:58:14.2983665+07:00 0HMT3RLR3VE48:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:58:14.3968969+07:00 0HMT3RLR3VE4A:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:58:14.3979811+07:00 0HMT3RLR3VE4A:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:58:14.4006571+07:00 0HMT3RLR3VE4A:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:58:14.4057987+07:00 0HMT3RLR3VE4A:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:58:14.4064283+07:00 0HMT3RLR3VE4A:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:58:14.4077853+07:00 0HMT3RLR3VE4A:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:58:14.4115741+07:00 0HMT3RLR3VE4A:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T21:58:14.4408282+07:00 0HMT3RLR3VE48:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:58:14.4414555+07:00 0HMT3RLR3VE48:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:58:14.4434284+07:00 0HMT3RLR3VE48:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:58:14.4463019+07:00 0HMT3RLR3VE48:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:58:14.4469485+07:00 0HMT3RLR3VE49:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:58:14.4476572+07:00 0HMT3RLR3VE49:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:58:14.4491462+07:00 0HMT3RLR3VE48:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:58:14.4513257+07:00 0HMT3RLR3VE49:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:58:14.4513776+07:00 0HMT3RLR3VE48:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:58:14.4528608+07:00 0HMT3RLR3VE48:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:58:14.4528609+07:00 0HMT3RLR3VE49:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T21:58:14.4550592+07:00 0HMT3RLR3VE48:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:58:14.4560725+07:00 0HMT3RLR3VE48:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:58:14.4572606+07:00 0HMT3RLR3VE48:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:58:14.4585109+07:00 0HMT3RLR3VE48:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:58:35.0282984+07:00 0HMT3RLR3VE48:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:58:35.0288243+07:00 0HMT3RLR3VE48:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:58:35.0687996+07:00 0HMT3RLR3VE48:00000009 [INF] Executed DbCommand ("40"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:58:35.0688259+07:00 0HMT3RLR3VE49:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:58:35.0699944+07:00 0HMT3RLR3VE49:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:58:35.0723128+07:00 0HMT3RLR3VE49:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:58:35.0750569+07:00 0HMT3RLR3VE48:00000009 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:58:35.0764913+07:00 0HMT3RLR3VE49:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T21:58:35.0825753+07:00 0HMT3RLR3VE48:00000009 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:58:35.0908578+07:00 0HMT3RLR3VE48:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:58:35.0935010+07:00 0HMT3RLR3VE48:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:58:35.0957357+07:00 0HMT3RLR3VE48:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:58:35.0968331+07:00 0HMT3RLR3VE48:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:58:35.0981799+07:00 0HMT3RLR3VE48:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:58:35.0995420+07:00 0HMT3RLR3VE48:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:59:10.2075569+07:00 0HMT3RLR3VE49:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:59:10.2084164+07:00 0HMT3RLR3VE49:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:59:10.2104785+07:00 0HMT3RLR3VE49:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:59:10.2129890+07:00 0HMT3RLR3VE49:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:59:10.2669085+07:00 0HMT3RLR3VE49:00000009 [INF] Executed DbCommand ("38"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T21:59:10.2858019+07:00 0HMT3RLR3VE4C:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:59:10.2879723+07:00 0HMT3RLR3VE4C:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:59:10.2916044+07:00 0HMT3RLR3VE49:00000009 [INF] Executed DbCommand ("12"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T21:59:10.2959342+07:00 0HMT3RLR3VE4C:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:59:10.2995833+07:00 0HMT3RLR3VE49:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:59:10.2996635+07:00 0HMT3RLR3VE4C:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T21:59:10.3004377+07:00 0HMT3RLR3VE4C:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T21:59:10.3011985+07:00 0HMT3RLR3VE49:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:59:10.3022598+07:00 0HMT3RLR3VE49:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:59:10.3027059+07:00 0HMT3RLR3VE4C:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T21:59:10.3037773+07:00 0HMT3RLR3VE49:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T21:59:10.3057353+07:00 0HMT3RLR3VE49:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T21:59:10.3057353+07:00 0HMT3RLR3VE4C:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T22:00:15.4764530+07:00 0HMT3RLR3VE4B:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:00:15.4771679+07:00 0HMT3RLR3VE4B:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:00:15.4922344+07:00 0HMT3RLR3VE4B:00000005 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:00:15.4978625+07:00 0HMT3RLR3VE4D:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:00:15.5016835+07:00 0HMT3RLR3VE4D:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:00:15.5041982+07:00 0HMT3RLR3VE4D:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:00:15.5055662+07:00 0HMT3RLR3VE4B:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:00:15.5100459+07:00 0HMT3RLR3VE4D:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:00:15.5261157+07:00 0HMT3RLR3VE4B:00000005 [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:00:15.5768921+07:00 0HMT3RLR3VE4E:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:00:15.5914602+07:00 0HMT3RLR3VE4E:00000002 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:00:15.6051193+07:00 0HMT3RLR3VE4E:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:00:15.6054011+07:00 0HMT3RLR3VE4B:00000005 [INF] Executed DbCommand ("41"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:00:15.6206278+07:00 0HMT3RLR3VE4E:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:00:15.6240446+07:00 0HMT3RLR3VE4E:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:00:15.6356495+07:00 0HMT3RLR3VE4E:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:00:15.6357086+07:00 0HMT3RLR3VE4B:00000005 [INF] Executed DbCommand ("14"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:00:15.6495170+07:00 0HMT3RLR3VE4E:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T22:00:15.6521968+07:00 0HMT3RLR3VE4B:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:00:15.6531603+07:00 0HMT3RLR3VE4B:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:00:15.6542440+07:00 0HMT3RLR3VE4B:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:00:15.6552875+07:00 0HMT3RLR3VE4B:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:00:26.0287232+07:00 0HMT3RLR3VE4F:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:00:26.0295091+07:00 0HMT3RLR3VE4F:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:00:26.0315409+07:00 0HMT3RLR3VE4F:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:00:26.0338327+07:00 0HMT3RLR3VE4F:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:00:26.0358979+07:00 0HMT3RLR3VE4F:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:00:26.0370105+07:00 0HMT3RLR3VE4F:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:00:26.0380209+07:00 0HMT3RLR3VE4F:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:00:26.0387089+07:00 0HMT3RLR3VE4G:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:00:26.0391395+07:00 0HMT3RLR3VE4F:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:00:26.0394372+07:00 0HMT3RLR3VE4G:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:00:26.0402019+07:00 0HMT3RLR3VE4F:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:00:26.0418709+07:00 0HMT3RLR3VE4G:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:00:26.0427008+07:00 0HMT3RLR3VE4F:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:00:26.0462351+07:00 0HMT3RLR3VE4F:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:00:26.0462312+07:00 0HMT3RLR3VE4G:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:00:26.1320474+07:00 0HMT3RLR3VE4H:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:00:26.1329451+07:00 0HMT3RLR3VE4H:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:00:26.1352284+07:00 0HMT3RLR3VE4H:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:00:26.1716917+07:00 0HMT3RLR3VE4H:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:00:26.1722044+07:00 0HMT3RLR3VE4H:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:00:26.1737522+07:00 0HMT3RLR3VE4H:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:00:26.1749616+07:00 0HMT3RLR3VE4H:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T22:01:03.7025176+07:00 0HMT3RLR3VE4F:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:01:03.7032581+07:00 0HMT3RLR3VE4F:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:01:03.7056030+07:00 0HMT3RLR3VE4G:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:01:03.7061543+07:00 0HMT3RLR3VE4G:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:01:03.7142693+07:00 0HMT3RLR3VE4F:00000006 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:01:03.7143370+07:00 0HMT3RLR3VE4G:00000004 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:01:03.7186529+07:00 0HMT3RLR3VE4F:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:01:03.7202420+07:00 0HMT3RLR3VE4G:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:01:03.7252750+07:00 0HMT3RLR3VE4F:00000006 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:01:03.7388404+07:00 0HMT3RLR3VE4F:00000006 [INF] Executed DbCommand ("5"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:01:03.7478811+07:00 0HMT3RLR3VE4F:00000006 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:01:03.7642771+07:00 0HMT3RLR3VE4F:00000006 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:01:03.7714356+07:00 0HMT3RLR3VE4F:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:01:03.7740560+07:00 0HMT3RLR3VE4F:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:01:03.7869661+07:00 0HMT3RLR3VE4F:00000006 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:01:03.8392390+07:00 0HMT3RLR3VE4I:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:01:03.8620269+07:00 0HMT3RLR3VE4I:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:01:03.8756192+07:00 0HMT3RLR3VE4I:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:01:03.8885914+07:00 0HMT3RLR3VE4I:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:01:03.8890820+07:00 0HMT3RLR3VE4I:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:01:03.8903924+07:00 0HMT3RLR3VE4I:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:01:03.8925691+07:00 0HMT3RLR3VE4I:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T22:01:04.1195540+07:00 0HMT3RLR3VE4J:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:01:04.1200938+07:00 0HMT3RLR3VE4J:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:01:04.1216663+07:00 0HMT3RLR3VE4J:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:01:04.1238288+07:00 0HMT3RLR3VE4J:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:01:04.1289533+07:00 0HMT3RLR3VE4J:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:01:04.1305141+07:00 0HMT3RLR3VE4J:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:01:04.1315338+07:00 0HMT3RLR3VE4J:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:01:04.1324866+07:00 0HMT3RLR3VE4J:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:01:04.1335237+07:00 0HMT3RLR3VE4J:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:01:04.1346625+07:00 0HMT3RLR3VE4J:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:01:04.1360092+07:00 0HMT3RLR3VE4J:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:01:04.1856257+07:00 0HMT3RLR3VE4K:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:01:04.2137611+07:00 0HMT3RLR3VE4K:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:01:04.2240998+07:00 0HMT3RLR3VE4K:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:01:04.2486896+07:00 0HMT3RLR3VE4K:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:01:04.2492327+07:00 0HMT3RLR3VE4K:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:01:04.2505252+07:00 0HMT3RLR3VE4K:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:01:04.2516642+07:00 0HMT3RLR3VE4K:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T22:01:48.1617479+07:00 0HMT3RLR3VE4L:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:01:48.1627285+07:00 0HMT3RLR3VE4L:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:01:48.1789591+07:00 0HMT3RLR3VE4L:00000003 [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:01:48.1840392+07:00 0HMT3RLR3VE4L:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:01:48.1924357+07:00 0HMT3RLR3VE4L:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:01:48.1954455+07:00 0HMT3RLR3VE4L:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:01:48.1985702+07:00 0HMT3RLR3VE4L:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:01:48.2023768+07:00 0HMT3RLR3VE4N:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:01:48.2025718+07:00 0HMT3RLR3VE4L:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:01:48.2052264+07:00 0HMT3RLR3VE4N:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:01:48.2068245+07:00 0HMT3RLR3VE4L:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:01:48.2083016+07:00 0HMT3RLR3VE4N:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:01:48.2083770+07:00 0HMT3RLR3VE4L:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:01:48.2094061+07:00 0HMT3RLR3VE4N:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:01:48.2097072+07:00 0HMT3RLR3VE4L:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:01:48.2102213+07:00 0HMT3RLR3VE4N:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:01:48.2119926+07:00 0HMT3RLR3VE4N:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:01:48.2360026+07:00 0HMT3RLR3VE4N:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T22:01:53.5653044+07:00 0HMT3RLR3VE4M:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:01:53.5658911+07:00 0HMT3RLR3VE4M:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:01:53.5679581+07:00 0HMT3RLR3VE4M:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:01:53.5719851+07:00 0HMT3RLR3VE4M:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:01:53.5756534+07:00 0HMT3RLR3VE4M:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:01:53.5783794+07:00 0HMT3RLR3VE4M:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:01:53.5805229+07:00 0HMT3RLR3VE4M:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:01:53.5817049+07:00 0HMT3RLR3VE4M:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:01:53.5826329+07:00 0HMT3RLR3VE4M:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:01:53.5826330+07:00 0HMT3RLR3VE4O:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:01:53.5832513+07:00 0HMT3RLR3VE4O:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:01:53.5843231+07:00 0HMT3RLR3VE4M:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:01:53.5859464+07:00 0HMT3RLR3VE4O:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:01:53.5862891+07:00 0HMT3RLR3VE4M:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:01:53.5920409+07:00 0HMT3RLR3VE4O:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:01:53.6557169+07:00 0HMT3RLR3VE4P:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:01:53.6562915+07:00 0HMT3RLR3VE4P:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:01:53.6580670+07:00 0HMT3RLR3VE4P:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:01:53.6586947+07:00 0HMT3RLR3VE4P:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:01:53.6592119+07:00 0HMT3RLR3VE4P:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:01:53.6604633+07:00 0HMT3RLR3VE4P:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:01:53.6614886+07:00 0HMT3RLR3VE4P:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T22:01:53.6784938+07:00 0HMT3RLR3VE4M:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:01:53.6793480+07:00 0HMT3RLR3VE4M:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:01:53.6798142+07:00 0HMT3RLR3VE4O:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:01:53.6801869+07:00 0HMT3RLR3VE4O:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:01:53.6807960+07:00 0HMT3RLR3VE4M:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:01:53.6815283+07:00 0HMT3RLR3VE4O:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:01:53.6821113+07:00 0HMT3RLR3VE4M:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:01:53.6845295+07:00 0HMT3RLR3VE4O:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:01:53.6858762+07:00 0HMT3RLR3VE4M:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:01:53.6868703+07:00 0HMT3RLR3VE4M:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:01:53.6877926+07:00 0HMT3RLR3VE4M:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:01:53.6890143+07:00 0HMT3RLR3VE4M:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:01:53.6900049+07:00 0HMT3RLR3VE4M:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:01:53.6917717+07:00 0HMT3RLR3VE4M:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:01:53.6932449+07:00 0HMT3RLR3VE4M:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:01:56.9279724+07:00 0HMT3RLR3VE4M:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:01:56.9285805+07:00 0HMT3RLR3VE4M:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:01:56.9299300+07:00 0HMT3RLR3VE4M:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:01:56.9336059+07:00 0HMT3RLR3VE4M:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T22:01:56.9949865+07:00 0HMT3RLR3VE4M:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:01:56.9954863+07:00 0HMT3RLR3VE4M:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:01:56.9967331+07:00 0HMT3RLR3VE4M:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:01:57.0000619+07:00 0HMT3RLR3VE4M:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T22:03:05.8227524+07:00 0HMT3RLR3VE4O:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:03:05.8228225+07:00 0HMT3RLR3VE4M:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:03:05.8232979+07:00 0HMT3RLR3VE4O:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:03:05.8233026+07:00 0HMT3RLR3VE4M:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:03:05.8330058+07:00 0HMT3RLR3VE4O:00000006 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:03:05.8330059+07:00 0HMT3RLR3VE4M:0000000B [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:03:05.8383268+07:00 0HMT3RLR3VE4O:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:03:05.8383263+07:00 0HMT3RLR3VE4M:0000000B [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:03:05.8442840+07:00 0HMT3RLR3VE4O:00000006 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:03:05.8467612+07:00 0HMT3RLR3VE4Q:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:03:05.8472640+07:00 0HMT3RLR3VE4Q:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:03:05.8473051+07:00 0HMT3RLR3VE4O:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:03:05.8493526+07:00 0HMT3RLR3VE4Q:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:03:05.8508233+07:00 0HMT3RLR3VE4O:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:03:05.8538656+07:00 0HMT3RLR3VE4O:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:03:05.8551942+07:00 0HMT3RLR3VE4O:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:03:05.8562102+07:00 0HMT3RLR3VE4O:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:03:05.8570713+07:00 0HMT3RLR3VE4O:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:03:05.8959095+07:00 0HMT3RLR3VE4Q:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:03:05.8965323+07:00 0HMT3RLR3VE4Q:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:03:05.8978570+07:00 0HMT3RLR3VE4Q:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:03:05.8999847+07:00 0HMT3RLR3VE4Q:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T22:03:05.9125534+07:00 0HMT3RLR3VE4M:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:03:05.9131450+07:00 0HMT3RLR3VE4M:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:03:05.9146459+07:00 0HMT3RLR3VE4O:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:03:05.9147767+07:00 0HMT3RLR3VE4M:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:03:05.9151157+07:00 0HMT3RLR3VE4O:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:03:05.9159087+07:00 0HMT3RLR3VE4M:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:03:05.9169330+07:00 0HMT3RLR3VE4O:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:03:05.9190629+07:00 0HMT3RLR3VE4O:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:03:05.9198616+07:00 0HMT3RLR3VE4M:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:03:05.9217280+07:00 0HMT3RLR3VE4M:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:03:05.9226680+07:00 0HMT3RLR3VE4M:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:03:05.9239585+07:00 0HMT3RLR3VE4M:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:03:05.9249429+07:00 0HMT3RLR3VE4M:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:03:05.9261041+07:00 0HMT3RLR3VE4M:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:03:05.9272007+07:00 0HMT3RLR3VE4M:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:03:07.8541618+07:00 0HMT3RLR3VE4Q:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:03:07.8546828+07:00 0HMT3RLR3VE4Q:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:03:07.8559899+07:00 0HMT3RLR3VE4Q:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:03:07.8740211+07:00 0HMT3RLR3VE4O:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:03:07.8745554+07:00 0HMT3RLR3VE4M:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:03:07.8745572+07:00 0HMT3RLR3VE4O:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:03:07.8748654+07:00 0HMT3RLR3VE4M:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:03:07.8758274+07:00 0HMT3RLR3VE4M:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:03:07.8758273+07:00 0HMT3RLR3VE4O:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:03:07.8768495+07:00 0HMT3RLR3VE4O:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:03:07.8768497+07:00 0HMT3RLR3VE4M:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:03:07.8811431+07:00 0HMT3RLR3VE4O:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:03:07.8823628+07:00 0HMT3RLR3VE4O:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:03:07.8833742+07:00 0HMT3RLR3VE4O:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:03:07.8842799+07:00 0HMT3RLR3VE4O:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:03:07.8852010+07:00 0HMT3RLR3VE4O:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:03:07.8860999+07:00 0HMT3RLR3VE4O:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:03:07.8869369+07:00 0HMT3RLR3VE4O:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:03:07.9054670+07:00 0HMT3RLR3VE4R:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:03:07.9062220+07:00 0HMT3RLR3VE4R:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:03:07.9077758+07:00 0HMT3RLR3VE4R:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:03:07.9104916+07:00 0HMT3RLR3VE4R:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:03:07.9109266+07:00 0HMT3RLR3VE4R:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:03:07.9121244+07:00 0HMT3RLR3VE4R:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:03:07.9133987+07:00 0HMT3RLR3VE4R:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T22:03:07.9206564+07:00 0HMT3RLR3VE4M:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:03:07.9212742+07:00 0HMT3RLR3VE4M:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:03:07.9215346+07:00 0HMT3RLR3VE4O:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:03:07.9218680+07:00 0HMT3RLR3VE4O:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:03:07.9227661+07:00 0HMT3RLR3VE4M:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:03:07.9232336+07:00 0HMT3RLR3VE4O:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:03:07.9241995+07:00 0HMT3RLR3VE4M:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:03:07.9262366+07:00 0HMT3RLR3VE4O:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:03:07.9280138+07:00 0HMT3RLR3VE4M:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:03:07.9290275+07:00 0HMT3RLR3VE4M:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:03:07.9300417+07:00 0HMT3RLR3VE4M:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:03:07.9312870+07:00 0HMT3RLR3VE4M:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:03:07.9327860+07:00 0HMT3RLR3VE4M:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:03:07.9339946+07:00 0HMT3RLR3VE4M:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:03:07.9349993+07:00 0HMT3RLR3VE4M:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:03:08.1823968+07:00 0HMT3RLR3VE4R:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:03:08.1830480+07:00 0HMT3RLR3VE4R:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:03:08.1851348+07:00 0HMT3RLR3VE4R:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:04:02.5988060+07:00 0HMT3RLR3VE4M:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:04:02.5994861+07:00 0HMT3RLR3VE4O:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:04:02.5997112+07:00 0HMT3RLR3VE4M:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:04:02.5999436+07:00 0HMT3RLR3VE4O:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:04:02.6097871+07:00 0HMT3RLR3VE4S:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:04:02.6156809+07:00 0HMT3RLR3VE4O:0000000B [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:04:02.6156812+07:00 0HMT3RLR3VE4M:00000010 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:04:02.6213076+07:00 0HMT3RLR3VE4S:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:04:02.6214890+07:00 0HMT3RLR3VE4O:0000000B [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:04:02.6215172+07:00 0HMT3RLR3VE4M:00000010 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:04:02.6241229+07:00 0HMT3RLR3VE4S:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:04:02.6258735+07:00 0HMT3RLR3VE4S:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:04:02.6269983+07:00 0HMT3RLR3VE4S:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:04:02.6300072+07:00 0HMT3RLR3VE4S:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:04:02.6305568+07:00 0HMT3RLR3VE4O:0000000B [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:04:02.6334294+07:00 0HMT3RLR3VE4S:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T22:04:02.6350886+07:00 0HMT3RLR3VE4O:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:04:02.6399218+07:00 0HMT3RLR3VE4O:0000000B [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:04:02.6455703+07:00 0HMT3RLR3VE4O:0000000B [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:04:02.6483039+07:00 0HMT3RLR3VE4O:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:04:02.6500424+07:00 0HMT3RLR3VE4O:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:04:02.6511558+07:00 0HMT3RLR3VE4O:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:04:02.7136991+07:00 0HMT3RLR3VE4M:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:04:02.7136988+07:00 0HMT3RLR3VE4O:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:04:02.7144923+07:00 0HMT3RLR3VE4O:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:04:02.7144924+07:00 0HMT3RLR3VE4M:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:04:02.7164452+07:00 0HMT3RLR3VE4M:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:04:02.7164452+07:00 0HMT3RLR3VE4O:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:04:02.7185755+07:00 0HMT3RLR3VE4M:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:04:02.7185756+07:00 0HMT3RLR3VE4O:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:04:02.7225746+07:00 0HMT3RLR3VE4M:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:04:02.7236110+07:00 0HMT3RLR3VE4M:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:04:02.7244288+07:00 0HMT3RLR3VE4M:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:04:02.7257310+07:00 0HMT3RLR3VE4M:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:04:02.7268591+07:00 0HMT3RLR3VE4M:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:04:02.7282079+07:00 0HMT3RLR3VE4M:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:04:02.7295546+07:00 0HMT3RLR3VE4M:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:06:12.0120572+07:00 0HMT3RLR3VE4T:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:06:12.0130389+07:00 0HMT3RLR3VE4T:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:06:12.0166462+07:00 0HMT3RLR3VE4U:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:06:12.0171407+07:00 0HMT3RLR3VE4U:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:06:12.0278821+07:00 0HMT3RLR3VE4T:00000003 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:06:12.0278821+07:00 0HMT3RLR3VE4U:00000003 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:06:12.0339617+07:00 0HMT3RLR3VE4U:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:06:12.0340499+07:00 0HMT3RLR3VE4T:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:06:12.0346035+07:00 0HMT3RLR3VE4V:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:06:12.0357264+07:00 0HMT3RLR3VE4V:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:06:12.0373907+07:00 0HMT3RLR3VE4V:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:06:12.0428067+07:00 0HMT3RLR3VE4V:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:06:12.0437345+07:00 0HMT3RLR3VE4V:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:06:12.0455763+07:00 0HMT3RLR3VE4T:00000003 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:06:12.0458030+07:00 0HMT3RLR3VE4V:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:06:12.0532900+07:00 0HMT3RLR3VE4V:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T22:06:12.0532981+07:00 0HMT3RLR3VE4T:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:06:12.0576062+07:00 0HMT3RLR3VE4T:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:06:12.0605036+07:00 0HMT3RLR3VE4T:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:06:12.0615618+07:00 0HMT3RLR3VE4T:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:06:12.0625833+07:00 0HMT3RLR3VE4T:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:06:12.0642041+07:00 0HMT3RLR3VE4T:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:06:12.0904061+07:00 0HMT3RLR3VE4T:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:06:12.0910365+07:00 0HMT3RLR3VE4T:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:06:12.0921004+07:00 0HMT3RLR3VE4U:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:06:12.0924615+07:00 0HMT3RLR3VE4T:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:06:12.0925375+07:00 0HMT3RLR3VE4U:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:06:12.0945201+07:00 0HMT3RLR3VE4T:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:06:12.0946209+07:00 0HMT3RLR3VE4U:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:06:12.0971806+07:00 0HMT3RLR3VE4U:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:06:12.0971806+07:00 0HMT3RLR3VE4T:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:06:12.0997463+07:00 0HMT3RLR3VE4T:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:06:12.1007406+07:00 0HMT3RLR3VE4T:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:06:12.1022439+07:00 0HMT3RLR3VE4T:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:06:12.1038746+07:00 0HMT3RLR3VE4T:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:06:12.1051938+07:00 0HMT3RLR3VE4T:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:06:12.1061906+07:00 0HMT3RLR3VE4T:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:16.7485120+07:00 0HMT3RLR3VE4N:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:16.7485117+07:00 0HMT3RLR3VE4P:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:16.7485118+07:00 0HMT3RLR3VE4E:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:16.7485117+07:00 0HMT3RLR3VE4A:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:16.7485118+07:00 0HMT3RLR3VE4V:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:16.7520448+07:00 0HMT3RLR3VE4E:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:16.7520447+07:00 0HMT3RLR3VE4A:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:16.7669204+07:00 0HMT3RLR3VE4N:00000002 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:16.7669206+07:00 0HMT3RLR3VE4V:00000002 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:16.7689795+07:00 0HMT3RLR3VE4I:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:16.7689794+07:00 0HMT3RLR3VE4C:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:16.7690079+07:00 0HMT3RLR3VE4H:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:16.7693543+07:00 0HMT3RLR3VE4S:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:16.7767008+07:00 0HMT3RLR3VE4K:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:16.7777722+07:00 0HMT3RLR3VE45:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:16.7815660+07:00 0HMT3RLR3VE4P:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:16.7903288+07:00 0HMT3RLR3VE4E:00000002 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:16.7957562+07:00 0HMT3RLR3VE4A:00000002 [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:16.7957562+07:00 0HMT3RLR3VE4K:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:16.8037203+07:00 0HMT3RLR3VE4P:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:16.8037254+07:00 0HMT3RLR3VE4V:00000002 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:16.8037203+07:00 0HMT3RLR3VE4N:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:16.8043906+07:00 0HMT3RLR3VE4H:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:16.8047194+07:00 0HMT3RLR3VE4S:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:16.8137609+07:00 0HMT3RLR3VE4K:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:16.8137613+07:00 0HMT3RLR3VE4C:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:16.8138217+07:00 0HMT3RLR3VE45:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:16.8156588+07:00 0HMT3RLR3VE4I:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:16.8303394+07:00 0HMT3RLR3VE45:00000002 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:16.8303319+07:00 0HMT3RLR3VE4I:00000002 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:16.8303319+07:00 0HMT3RLR3VE4C:00000002 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:16.8303319+07:00 0HMT3RLR3VE4H:00000002 [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:16.8574762+07:00 0HMT3RLR3VE4S:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:16.9628672+07:00 0HMT3RLR3VE50:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:16.9663787+07:00 0HMT3RLR3VE50:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:16.9689200+07:00 0HMT3RLR3VE50:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:16.9730462+07:00 0HMT3RLR3VE51:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:16.9738468+07:00 0HMT3RLR3VE51:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:16.9749493+07:00 0HMT3RLR3VE50:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:16.9753631+07:00 0HMT3RLR3VE51:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:16.9818343+07:00 0HMT3RLR3VE51:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:08:16.9848152+07:00 0HMT3RLR3VE50:00000003 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:08:16.9902709+07:00 0HMT3RLR3VE50:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:08:16.9965976+07:00 0HMT3RLR3VE50:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:17.0038405+07:00 0HMT3RLR3VE50:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:08:17.0063962+07:00 0HMT3RLR3VE50:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:17.0086511+07:00 0HMT3RLR3VE50:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:08:17.0116631+07:00 0HMT3RLR3VE50:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:17.0519146+07:00 0HMT3RLR3VE52:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:17.0539947+07:00 0HMT3RLR3VE52:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:17.0574673+07:00 0HMT3RLR3VE52:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:17.1661200+07:00 0HMT3RLR3VE53:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:17.1661199+07:00 0HMT3RLR3VE52:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:17.1675146+07:00 0HMT3RLR3VE53:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:17.1675144+07:00 0HMT3RLR3VE52:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:17.1703670+07:00 0HMT3RLR3VE52:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:17.1703612+07:00 0HMT3RLR3VE53:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:17.1751385+07:00 0HMT3RLR3VE52:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T22:08:17.2076730+07:00 0HMT3RLR3VE54:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:17.2086420+07:00 0HMT3RLR3VE54:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:17.2118917+07:00 0HMT3RLR3VE54:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:17.2143259+07:00 0HMT3RLR3VE55:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:17.2147023+07:00 0HMT3RLR3VE53:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:17.2150700+07:00 0HMT3RLR3VE55:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:17.2150733+07:00 0HMT3RLR3VE53:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:17.2174511+07:00 0HMT3RLR3VE53:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:17.2174512+07:00 0HMT3RLR3VE55:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:17.2174765+07:00 0HMT3RLR3VE50:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:17.2213236+07:00 0HMT3RLR3VE50:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:17.2265538+07:00 0HMT3RLR3VE53:00000002 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T22:08:17.2268824+07:00 0HMT3RLR3VE51:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:17.2290029+07:00 0HMT3RLR3VE50:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:17.2290367+07:00 0HMT3RLR3VE51:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:17.2321804+07:00 0HMT3RLR3VE51:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:17.2426471+07:00 0HMT3RLR3VE50:00000004 [INF] Executed DbCommand ("12"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:17.2451569+07:00 0HMT3RLR3VE51:00000004 [INF] Executed DbCommand ("10"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:08:17.2921005+07:00 0HMT3RLR3VE50:00000004 [INF] Executed DbCommand ("46"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:08:17.2974491+07:00 0HMT3RLR3VE50:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:08:17.3089256+07:00 0HMT3RLR3VE57:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:17.3089267+07:00 0HMT3RLR3VE50:00000004 [INF] Executed DbCommand ("10"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:17.3090195+07:00 0HMT3RLR3VE56:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:17.3100031+07:00 0HMT3RLR3VE56:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:17.3100054+07:00 0HMT3RLR3VE57:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:17.3159327+07:00 0HMT3RLR3VE50:00000004 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:08:17.3197260+07:00 0HMT3RLR3VE50:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:17.3257161+07:00 0HMT3RLR3VE50:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:08:17.3548000+07:00 0HMT3RLR3VE57:00000002 [INF] Executed DbCommand ("44"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:17.3569364+07:00 0HMT3RLR3VE54:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:17.3589390+07:00 0HMT3RLR3VE54:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:17.3650895+07:00 0HMT3RLR3VE57:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:17.3650895+07:00 0HMT3RLR3VE55:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:17.3678761+07:00 0HMT3RLR3VE56:00000002 [INF] Executed DbCommand ("57"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:17.3678761+07:00 0HMT3RLR3VE57:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:17.3678760+07:00 0HMT3RLR3VE55:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:17.3713684+07:00 0HMT3RLR3VE56:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:17.3747951+07:00 0HMT3RLR3VE55:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:17.3812423+07:00 0HMT3RLR3VE56:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:17.3812835+07:00 0HMT3RLR3VE57:00000002 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:17.3814586+07:00 0HMT3RLR3VE50:00000004 [INF] Executed DbCommand ("13"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:17.3849498+07:00 0HMT3RLR3VE56:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:17.3906168+07:00 0HMT3RLR3VE54:00000002 [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:17.3922308+07:00 0HMT3RLR3VE53:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:17.4115438+07:00 0HMT3RLR3VE53:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:17.4467020+07:00 0HMT3RLR3VE53:00000002 [INF] Executed DbCommand ("33"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:17.4547349+07:00 0HMT3RLR3VE52:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:17.4832189+07:00 0HMT3RLR3VE52:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:17.5055621+07:00 0HMT3RLR3VE52:00000002 [INF] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:20.7920363+07:00 0HMT3RLR3VE51:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:20.7922943+07:00 0HMT3RLR3VE5B:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:20.7931014+07:00 0HMT3RLR3VE5B:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:20.7931012+07:00 0HMT3RLR3VE51:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:20.8018951+07:00 0HMT3RLR3VE5C:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:20.8024724+07:00 0HMT3RLR3VE5C:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:20.8071224+07:00 0HMT3RLR3VE51:00000007 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:20.8071223+07:00 0HMT3RLR3VE5B:00000002 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:20.8139459+07:00 0HMT3RLR3VE5C:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:20.8142323+07:00 0HMT3RLR3VE51:00000007 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:20.8142483+07:00 0HMT3RLR3VE5B:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:08:20.8220074+07:00 0HMT3RLR3VE51:00000007 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:08:20.8258957+07:00 0HMT3RLR3VE51:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:08:20.8300790+07:00 0HMT3RLR3VE51:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:20.8335098+07:00 0HMT3RLR3VE5C:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:20.8346194+07:00 0HMT3RLR3VE5C:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:20.8372050+07:00 0HMT3RLR3VE51:00000007 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:08:20.8381766+07:00 0HMT3RLR3VE5C:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:20.8401356+07:00 0HMT3RLR3VE51:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:20.8429698+07:00 0HMT3RLR3VE5C:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T22:08:20.8429698+07:00 0HMT3RLR3VE51:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:08:20.8445639+07:00 0HMT3RLR3VE51:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:20.9018844+07:00 0HMT3RLR3VE51:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:20.9028974+07:00 0HMT3RLR3VE51:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:20.9056941+07:00 0HMT3RLR3VE51:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:20.9092320+07:00 0HMT3RLR3VE51:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:20.9110323+07:00 0HMT3RLR3VE5B:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:20.9121661+07:00 0HMT3RLR3VE5B:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:20.9122431+07:00 0HMT3RLR3VE51:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:08:20.9142237+07:00 0HMT3RLR3VE51:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:08:20.9156494+07:00 0HMT3RLR3VE5B:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:20.9169395+07:00 0HMT3RLR3VE51:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:20.9180141+07:00 0HMT3RLR3VE5B:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:08:20.9204112+07:00 0HMT3RLR3VE51:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:08:20.9214681+07:00 0HMT3RLR3VE51:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:20.9225391+07:00 0HMT3RLR3VE51:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:08:20.9238075+07:00 0HMT3RLR3VE51:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:30.3398678+07:00 0HMT3RLR3VE5C:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:30.3403213+07:00 0HMT3RLR3VE5C:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:30.3416213+07:00 0HMT3RLR3VE5C:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:30.3842517+07:00 0HMT3RLR3VE51:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:30.3851006+07:00 0HMT3RLR3VE51:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:30.3874107+07:00 0HMT3RLR3VE51:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:30.3896234+07:00 0HMT3RLR3VE51:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:30.3925387+07:00 0HMT3RLR3VE5B:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:30.3935150+07:00 0HMT3RLR3VE51:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:08:30.3936265+07:00 0HMT3RLR3VE5B:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:30.3948446+07:00 0HMT3RLR3VE51:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:08:30.3953469+07:00 0HMT3RLR3VE5B:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:30.3960747+07:00 0HMT3RLR3VE51:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:30.3976396+07:00 0HMT3RLR3VE5B:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:08:30.3976404+07:00 0HMT3RLR3VE51:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:08:30.4018854+07:00 0HMT3RLR3VE51:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:30.4038494+07:00 0HMT3RLR3VE51:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:08:30.4057366+07:00 0HMT3RLR3VE51:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:30.4537566+07:00 0HMT3RLR3VE5D:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:30.4544530+07:00 0HMT3RLR3VE5D:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:30.4567137+07:00 0HMT3RLR3VE5D:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:30.4757875+07:00 0HMT3RLR3VE5D:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:30.4762494+07:00 0HMT3RLR3VE5D:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:30.4775555+07:00 0HMT3RLR3VE5D:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:32.3461968+07:00 0HMT3RLR3VE51:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:32.3464075+07:00 0HMT3RLR3VE5B:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:32.3468210+07:00 0HMT3RLR3VE51:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:32.3468210+07:00 0HMT3RLR3VE5B:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:32.3481684+07:00 0HMT3RLR3VE51:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:32.3482047+07:00 0HMT3RLR3VE5B:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:32.3499193+07:00 0HMT3RLR3VE5B:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:08:32.3499205+07:00 0HMT3RLR3VE51:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:32.3594468+07:00 0HMT3RLR3VE51:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:08:32.3617552+07:00 0HMT3RLR3VE51:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:08:32.3625329+07:00 0HMT3RLR3VE51:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:32.3639709+07:00 0HMT3RLR3VE51:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:08:32.3649313+07:00 0HMT3RLR3VE51:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:32.3659957+07:00 0HMT3RLR3VE51:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:08:32.3670817+07:00 0HMT3RLR3VE51:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:32.3958853+07:00 0HMT3RLR3VE5E:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:32.3963521+07:00 0HMT3RLR3VE5E:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:32.3975674+07:00 0HMT3RLR3VE5E:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:32.4039664+07:00 0HMT3RLR3VE5E:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:32.4044523+07:00 0HMT3RLR3VE5E:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:32.4058231+07:00 0HMT3RLR3VE5E:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:32.4068483+07:00 0HMT3RLR3VE5E:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T22:08:32.4205756+07:00 0HMT3RLR3VE51:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:32.4213266+07:00 0HMT3RLR3VE51:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:32.4236759+07:00 0HMT3RLR3VE51:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:32.4240152+07:00 0HMT3RLR3VE5B:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:32.4245326+07:00 0HMT3RLR3VE5B:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:32.4261789+07:00 0HMT3RLR3VE51:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:32.4267549+07:00 0HMT3RLR3VE5B:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:32.4294573+07:00 0HMT3RLR3VE5B:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:08:32.4298756+07:00 0HMT3RLR3VE51:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:08:32.4318173+07:00 0HMT3RLR3VE51:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:08:32.4334954+07:00 0HMT3RLR3VE51:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:32.4349394+07:00 0HMT3RLR3VE51:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:08:32.4362765+07:00 0HMT3RLR3VE51:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:32.4373001+07:00 0HMT3RLR3VE51:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:08:32.4386214+07:00 0HMT3RLR3VE51:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:08:33.0146796+07:00 0HMT3RLR3VE51:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:33.0153254+07:00 0HMT3RLR3VE51:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:33.0168092+07:00 0HMT3RLR3VE51:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:33.0206995+07:00 0HMT3RLR3VE51:0000000E [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T22:08:33.1245925+07:00 0HMT3RLR3VE51:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:33.1251042+07:00 0HMT3RLR3VE51:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:33.1265575+07:00 0HMT3RLR3VE51:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:33.1300748+07:00 0HMT3RLR3VE51:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T22:08:37.8655493+07:00 0HMT3RLR3VE51:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:37.8660112+07:00 0HMT3RLR3VE51:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:37.8673202+07:00 0HMT3RLR3VE51:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:37.8722112+07:00 0HMT3RLR3VE51:00000012 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-23T22:08:37.9135818+07:00 0HMT3RLR3VE51:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:37.9141557+07:00 0HMT3RLR3VE51:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:37.9160568+07:00 0HMT3RLR3VE51:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:37.9182882+07:00 0HMT3RLR3VE51:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T22:08:37.9229739+07:00 0HMT3RLR3VE51:00000013 [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T22:08:38.7023598+07:00 0HMT3RLR3VE51:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:38.7028878+07:00 0HMT3RLR3VE51:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:38.7042706+07:00 0HMT3RLR3VE51:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:38.7061896+07:00 0HMT3RLR3VE51:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T22:08:39.3317908+07:00 0HMT3RLR3VE51:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:39.3322715+07:00 0HMT3RLR3VE51:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:39.3336243+07:00 0HMT3RLR3VE51:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:39.3353903+07:00 0HMT3RLR3VE51:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T22:08:39.3849022+07:00 0HMT3RLR3VE51:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:39.3854056+07:00 0HMT3RLR3VE51:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:39.3866821+07:00 0HMT3RLR3VE51:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:39.3888220+07:00 0HMT3RLR3VE51:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T22:08:40.0796143+07:00 0HMT3RLR3VE51:0000001B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:40.0800918+07:00 0HMT3RLR3VE51:0000001B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:40.0813596+07:00 0HMT3RLR3VE51:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:40.0850195+07:00 0HMT3RLR3VE51:0000001B [INF] Executed DbCommand ("3"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-23T22:08:40.0870169+07:00 0HMT3RLR3VE51:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@p2='?' (Size = 100), @p0='?' (Size = 50), @p1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Messages] SET [FileStatus] = @p0, [FileUrls] = @p1
WHERE [Id] = @p2;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T22:08:40.1227195+07:00 0HMT3RLR3VE51:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:40.1232974+07:00 0HMT3RLR3VE51:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:40.1247992+07:00 0HMT3RLR3VE51:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:40.1269125+07:00 0HMT3RLR3VE51:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T22:08:46.1305228+07:00 0HMT3RLR3VE51:0000001E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:46.1309979+07:00 0HMT3RLR3VE51:0000001E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:46.1322812+07:00 0HMT3RLR3VE51:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:46.1342809+07:00 0HMT3RLR3VE51:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-23T22:08:53.4131403+07:00 0HMT3RLR3VE51:00000020 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:53.4138022+07:00 0HMT3RLR3VE51:00000020 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:53.4151929+07:00 0HMT3RLR3VE51:00000020 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:53.4169516+07:00 0HMT3RLR3VE51:00000020 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T22:08:53.6135081+07:00 0HMT3RLR3VE51:00000022 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:53.6139960+07:00 0HMT3RLR3VE51:00000022 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:53.6152782+07:00 0HMT3RLR3VE51:00000022 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:53.6177798+07:00 0HMT3RLR3VE51:00000022 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T22:08:53.7225688+07:00 0HMT3RLR3VE51:00000024 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:08:53.7233420+07:00 0HMT3RLR3VE51:00000024 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:08:53.7247262+07:00 0HMT3RLR3VE51:00000024 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:08:53.7276818+07:00 0HMT3RLR3VE51:00000024 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T22:08:53.7300467+07:00 0HMT3RLR3VE51:00000024 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T22:09:01.6299125+07:00 0HMT3RLR3VE5E:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:09:01.6305060+07:00 0HMT3RLR3VE5E:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:09:01.6317686+07:00 0HMT3RLR3VE5E:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:09:01.7056797+07:00 0HMT3RLR3VE5B:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:09:01.7065667+07:00 0HMT3RLR3VE5B:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:09:01.7068778+07:00 0HMT3RLR3VE51:00000026 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:09:01.7074575+07:00 0HMT3RLR3VE51:00000026 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:09:01.7083474+07:00 0HMT3RLR3VE5B:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:09:01.7086206+07:00 0HMT3RLR3VE51:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:09:01.7099583+07:00 0HMT3RLR3VE51:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:09:01.7099589+07:00 0HMT3RLR3VE5B:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:09:01.7144794+07:00 0HMT3RLR3VE5B:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:09:01.7157415+07:00 0HMT3RLR3VE5B:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:09:01.7167243+07:00 0HMT3RLR3VE5B:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:09:01.7181335+07:00 0HMT3RLR3VE5B:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:09:01.7191452+07:00 0HMT3RLR3VE5B:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:09:01.7200932+07:00 0HMT3RLR3VE5B:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:09:01.7209171+07:00 0HMT3RLR3VE5B:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:09:01.7780023+07:00 0HMT3RLR3VE5F:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:09:01.7787642+07:00 0HMT3RLR3VE5F:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:09:01.7806198+07:00 0HMT3RLR3VE5F:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:09:01.8749869+07:00 0HMT3RLR3VE5F:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:09:01.8755435+07:00 0HMT3RLR3VE5F:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:09:01.8774897+07:00 0HMT3RLR3VE5F:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:09:01.8792566+07:00 0HMT3RLR3VE5F:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T22:09:01.8800030+07:00 0HMT3RLR3VE5F:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:09:01.8804541+07:00 0HMT3RLR3VE5F:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:09:01.8832318+07:00 0HMT3RLR3VE5F:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:09:03.8214020+07:00 0HMT3RLR3VE51:00000027 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:09:03.8219690+07:00 0HMT3RLR3VE51:00000027 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:09:03.8223024+07:00 0HMT3RLR3VE5B:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:09:03.8226353+07:00 0HMT3RLR3VE5B:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:09:03.8233375+07:00 0HMT3RLR3VE51:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:09:03.8235740+07:00 0HMT3RLR3VE5B:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:09:03.8257246+07:00 0HMT3RLR3VE5B:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:09:03.8257245+07:00 0HMT3RLR3VE51:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:09:03.8295567+07:00 0HMT3RLR3VE51:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:09:03.8305544+07:00 0HMT3RLR3VE51:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:09:03.8315479+07:00 0HMT3RLR3VE51:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:09:03.8327225+07:00 0HMT3RLR3VE51:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:09:03.8337204+07:00 0HMT3RLR3VE51:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:09:03.8349099+07:00 0HMT3RLR3VE51:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:09:03.8360620+07:00 0HMT3RLR3VE51:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:09:03.9290521+07:00 0HMT3RLR3VE5G:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:09:03.9298795+07:00 0HMT3RLR3VE5G:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:09:03.9321310+07:00 0HMT3RLR3VE5G:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:09:03.9386661+07:00 0HMT3RLR3VE5G:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:09:03.9392476+07:00 0HMT3RLR3VE5G:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:09:03.9406892+07:00 0HMT3RLR3VE5G:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:09:03.9420809+07:00 0HMT3RLR3VE5G:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T22:09:03.9669361+07:00 0HMT3RLR3VE51:00000028 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:09:03.9675405+07:00 0HMT3RLR3VE51:00000028 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:09:03.9690045+07:00 0HMT3RLR3VE51:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:09:03.9694603+07:00 0HMT3RLR3VE5B:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:09:03.9702283+07:00 0HMT3RLR3VE5B:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:09:03.9703651+07:00 0HMT3RLR3VE51:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:09:03.9721550+07:00 0HMT3RLR3VE5B:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:09:03.9734308+07:00 0HMT3RLR3VE5B:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:09:03.9734309+07:00 0HMT3RLR3VE51:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:09:03.9762155+07:00 0HMT3RLR3VE51:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:09:03.9770897+07:00 0HMT3RLR3VE51:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:09:03.9785190+07:00 0HMT3RLR3VE51:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:09:03.9797422+07:00 0HMT3RLR3VE51:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:09:03.9806478+07:00 0HMT3RLR3VE51:00000028 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:09:03.9814486+07:00 0HMT3RLR3VE51:00000028 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:09:04.7825257+07:00 0HMT3RLR3VE51:0000002A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:09:04.7830867+07:00 0HMT3RLR3VE51:0000002A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:09:04.7845624+07:00 0HMT3RLR3VE51:0000002A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:09:04.7862907+07:00 0HMT3RLR3VE51:0000002A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T22:09:04.8986271+07:00 0HMT3RLR3VE51:0000002C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:09:04.8991273+07:00 0HMT3RLR3VE51:0000002C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:09:04.9004243+07:00 0HMT3RLR3VE51:0000002C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:09:04.9024996+07:00 0HMT3RLR3VE51:0000002C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T22:11:48.1892371+07:00 0HMT3RLR3VE5H:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:11:48.1898173+07:00 0HMT3RLR3VE5H:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:11:48.1912799+07:00 0HMT3RLR3VE5I:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:11:48.1926077+07:00 0HMT3RLR3VE5I:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:11:48.2024104+07:00 0HMT3RLR3VE5I:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:11:48.2030069+07:00 0HMT3RLR3VE5H:00000003 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:11:48.2085392+07:00 0HMT3RLR3VE5I:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:11:48.2098765+07:00 0HMT3RLR3VE5H:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:48.2181413+07:00 0HMT3RLR3VE5H:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:11:48.2221303+07:00 0HMT3RLR3VE5H:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:11:48.2251420+07:00 0HMT3RLR3VE5H:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:48.2273462+07:00 0HMT3RLR3VE5H:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:11:48.2284089+07:00 0HMT3RLR3VE5H:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:48.2300610+07:00 0HMT3RLR3VE5H:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:11:48.2311579+07:00 0HMT3RLR3VE5H:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:48.7159399+07:00 0HMT3RLR3VE5I:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:11:48.7172617+07:00 0HMT3RLR3VE5H:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:11:48.7172617+07:00 0HMT3RLR3VE5I:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:11:48.7180795+07:00 0HMT3RLR3VE5H:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:11:48.7190815+07:00 0HMT3RLR3VE5H:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:11:48.7190815+07:00 0HMT3RLR3VE5I:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:11:48.7235916+07:00 0HMT3RLR3VE5I:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:48.7263198+07:00 0HMT3RLR3VE5H:00000005 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:11:48.7441212+07:00 0HMT3RLR3VE5I:00000005 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:11:48.7449380+07:00 0HMT3RLR3VE5J:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:11:48.7472695+07:00 0HMT3RLR3VE5J:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:11:48.7497539+07:00 0HMT3RLR3VE5I:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:11:48.7498677+07:00 0HMT3RLR3VE5J:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:11:48.7509798+07:00 0HMT3RLR3VE5I:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:48.7521658+07:00 0HMT3RLR3VE5I:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:11:48.7532583+07:00 0HMT3RLR3VE5I:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:48.7545804+07:00 0HMT3RLR3VE5I:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:11:48.7562525+07:00 0HMT3RLR3VE5I:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:48.8006037+07:00 0HMT3RLR3VE5J:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:11:48.8012792+07:00 0HMT3RLR3VE5J:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:11:48.8030662+07:00 0HMT3RLR3VE5J:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:11:48.8063548+07:00 0HMT3RLR3VE5J:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T22:11:48.8273594+07:00 0HMT3RLR3VE5H:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:11:48.8288505+07:00 0HMT3RLR3VE5H:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:11:48.8307995+07:00 0HMT3RLR3VE5H:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:11:48.8328778+07:00 0HMT3RLR3VE5H:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:48.8363807+07:00 0HMT3RLR3VE5H:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:11:48.8381178+07:00 0HMT3RLR3VE5H:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:11:48.8398356+07:00 0HMT3RLR3VE5H:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:48.8413799+07:00 0HMT3RLR3VE5H:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:11:48.8426248+07:00 0HMT3RLR3VE5H:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:48.8440849+07:00 0HMT3RLR3VE5H:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:11:48.8459879+07:00 0HMT3RLR3VE5H:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:48.8529958+07:00 0HMT3RLR3VE5I:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:11:48.8535857+07:00 0HMT3RLR3VE5I:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:11:48.8549565+07:00 0HMT3RLR3VE5I:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:11:48.8570919+07:00 0HMT3RLR3VE5I:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:11:52.0272638+07:00 0HMT3RLR3VE5H:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:11:52.0277729+07:00 0HMT3RLR3VE5H:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:11:52.0291871+07:00 0HMT3RLR3VE5H:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:11:52.0292185+07:00 0HMT3RLR3VE5I:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:11:52.0296038+07:00 0HMT3RLR3VE5I:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:11:52.0306205+07:00 0HMT3RLR3VE5H:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:52.0314951+07:00 0HMT3RLR3VE5I:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:11:52.0329002+07:00 0HMT3RLR3VE5I:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:11:52.0329127+07:00 0HMT3RLR3VE5H:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:11:52.0356962+07:00 0HMT3RLR3VE5H:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:11:52.0373470+07:00 0HMT3RLR3VE5H:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:52.0388574+07:00 0HMT3RLR3VE5H:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:11:52.0399556+07:00 0HMT3RLR3VE5H:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:52.0409701+07:00 0HMT3RLR3VE5H:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:11:52.0418183+07:00 0HMT3RLR3VE5H:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:52.3680607+07:00 0HMT3RLR3VE5H:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:11:52.3688552+07:00 0HMT3RLR3VE5H:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:11:52.3705420+07:00 0HMT3RLR3VE5H:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:11:52.3721890+07:00 0HMT3RLR3VE5H:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:52.3746286+07:00 0HMT3RLR3VE5H:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:11:52.3759201+07:00 0HMT3RLR3VE5H:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:11:52.3764662+07:00 0HMT3RLR3VE5I:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:11:52.3768494+07:00 0HMT3RLR3VE5H:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:52.3771110+07:00 0HMT3RLR3VE5I:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:11:52.3778548+07:00 0HMT3RLR3VE5H:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:11:52.3788614+07:00 0HMT3RLR3VE5I:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:11:52.3790134+07:00 0HMT3RLR3VE5H:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:52.3826265+07:00 0HMT3RLR3VE5H:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:11:52.3826309+07:00 0HMT3RLR3VE5I:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:11:52.3855161+07:00 0HMT3RLR3VE5H:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:52.4192220+07:00 0HMT3RLR3VE5K:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:11:52.4199615+07:00 0HMT3RLR3VE5K:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:11:52.4231118+07:00 0HMT3RLR3VE5K:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:11:52.4272839+07:00 0HMT3RLR3VE5K:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:11:52.4277546+07:00 0HMT3RLR3VE5K:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:11:52.4291102+07:00 0HMT3RLR3VE5K:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:11:52.4305903+07:00 0HMT3RLR3VE5K:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T22:11:52.4573003+07:00 0HMT3RLR3VE5I:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:11:52.4577715+07:00 0HMT3RLR3VE5I:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:11:52.4591314+07:00 0HMT3RLR3VE5I:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:11:52.4592644+07:00 0HMT3RLR3VE5H:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:11:52.4596213+07:00 0HMT3RLR3VE5H:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:11:52.4607952+07:00 0HMT3RLR3VE5I:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:52.4619828+07:00 0HMT3RLR3VE5H:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:11:52.4636092+07:00 0HMT3RLR3VE5H:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:11:52.4636092+07:00 0HMT3RLR3VE5I:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:11:52.4660363+07:00 0HMT3RLR3VE5I:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:11:52.4669769+07:00 0HMT3RLR3VE5I:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:52.4680293+07:00 0HMT3RLR3VE5I:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:11:52.4690274+07:00 0HMT3RLR3VE5I:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:11:52.4700405+07:00 0HMT3RLR3VE5I:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:11:52.4709431+07:00 0HMT3RLR3VE5I:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:12:12.7611453+07:00 0HMT3RLR3VE5H:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:12:12.7619384+07:00 0HMT3RLR3VE5H:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:12:12.7632993+07:00 0HMT3RLR3VE5I:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:12:12.7639597+07:00 0HMT3RLR3VE5I:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:12:12.7640606+07:00 0HMT3RLR3VE5H:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:12:12.7659426+07:00 0HMT3RLR3VE5H:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:12:12.7662072+07:00 0HMT3RLR3VE5I:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:12:12.7684065+07:00 0HMT3RLR3VE5H:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:12:12.7684064+07:00 0HMT3RLR3VE5I:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:12:12.7704237+07:00 0HMT3RLR3VE5H:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:12:12.7713280+07:00 0HMT3RLR3VE5H:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:12:12.7726513+07:00 0HMT3RLR3VE5H:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:12:12.7737586+07:00 0HMT3RLR3VE5H:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:12:12.7756904+07:00 0HMT3RLR3VE5H:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:12:12.7795290+07:00 0HMT3RLR3VE5H:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:30.5457308+07:00 0HMT3RLR3VE5H:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:30.5464842+07:00 0HMT3RLR3VE5H:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:30.5508676+07:00 0HMT3RLR3VE5I:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:30.5516362+07:00 0HMT3RLR3VE5I:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:30.5594181+07:00 0HMT3RLR3VE5I:00000010 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:30.5594182+07:00 0HMT3RLR3VE5H:0000000C [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:30.5633523+07:00 0HMT3RLR3VE5I:00000010 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:13:30.5635452+07:00 0HMT3RLR3VE5H:0000000C [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:30.5702141+07:00 0HMT3RLR3VE5H:0000000C [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:13:30.5734454+07:00 0HMT3RLR3VE5H:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:13:30.5767954+07:00 0HMT3RLR3VE5H:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:30.5806066+07:00 0HMT3RLR3VE5H:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:13:30.5819902+07:00 0HMT3RLR3VE5H:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:30.5829335+07:00 0HMT3RLR3VE5H:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:13:30.5838290+07:00 0HMT3RLR3VE5H:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:31.3508120+07:00 0HMT3RLR3VE5I:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:31.3514361+07:00 0HMT3RLR3VE5I:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:31.3535508+07:00 0HMT3RLR3VE5I:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:31.3539876+07:00 0HMT3RLR3VE5H:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:31.3549850+07:00 0HMT3RLR3VE5H:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:31.3580589+07:00 0HMT3RLR3VE5H:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:31.3646887+07:00 0HMT3RLR3VE5I:00000011 [INF] Executed DbCommand ("10"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:31.3725702+07:00 0HMT3RLR3VE5H:0000000D [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:13:31.3749074+07:00 0HMT3RLR3VE5L:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:31.3787024+07:00 0HMT3RLR3VE5L:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:31.3811392+07:00 0HMT3RLR3VE5I:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:13:31.3820329+07:00 0HMT3RLR3VE5L:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:31.3831265+07:00 0HMT3RLR3VE5L:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:31.3838030+07:00 0HMT3RLR3VE5L:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:31.3838476+07:00 0HMT3RLR3VE5I:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:13:31.3848923+07:00 0HMT3RLR3VE5I:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:31.3855981+07:00 0HMT3RLR3VE5L:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:31.3862867+07:00 0HMT3RLR3VE5I:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:13:31.3880192+07:00 0HMT3RLR3VE5I:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:31.3883421+07:00 0HMT3RLR3VE5L:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T22:13:31.3891572+07:00 0HMT3RLR3VE5I:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:13:31.3910497+07:00 0HMT3RLR3VE5I:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:31.4388402+07:00 0HMT3RLR3VE5I:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:31.4388913+07:00 0HMT3RLR3VE5H:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:31.4393506+07:00 0HMT3RLR3VE5H:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:31.4393507+07:00 0HMT3RLR3VE5I:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:31.4406909+07:00 0HMT3RLR3VE5I:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:31.4406909+07:00 0HMT3RLR3VE5H:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:31.4421295+07:00 0HMT3RLR3VE5I:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:13:31.4422127+07:00 0HMT3RLR3VE5H:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:31.4471458+07:00 0HMT3RLR3VE5H:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:13:31.4486366+07:00 0HMT3RLR3VE5H:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:13:31.4499140+07:00 0HMT3RLR3VE5H:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:31.4510023+07:00 0HMT3RLR3VE5H:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:13:31.4521908+07:00 0HMT3RLR3VE5H:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:31.4535097+07:00 0HMT3RLR3VE5H:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:13:31.4544445+07:00 0HMT3RLR3VE5H:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:34.1803220+07:00 0HMT3RLR3VE5H:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:34.1810005+07:00 0HMT3RLR3VE5H:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:34.1831791+07:00 0HMT3RLR3VE5H:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:34.1872921+07:00 0HMT3RLR3VE5H:0000000F [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T22:13:34.2682762+07:00 0HMT3RLR3VE5H:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:34.2687498+07:00 0HMT3RLR3VE5H:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:34.2700668+07:00 0HMT3RLR3VE5H:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:34.2736518+07:00 0HMT3RLR3VE5H:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T22:13:50.8809341+07:00 0HMT3RLR3VE5G:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:50.8809341+07:00 0HMT3RLR3VE5K:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:50.8847343+07:00 0HMT3RLR3VE5J:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:50.8867780+07:00 0HMT3RLR3VE5K:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:50.8859801+07:00 0HMT3RLR3VE5J:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:50.8867808+07:00 0HMT3RLR3VE5G:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:50.8920982+07:00 0HMT3RLR3VE5L:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:50.9113818+07:00 0HMT3RLR3VE5L:00000002 [INF] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:50.9113817+07:00 0HMT3RLR3VE5G:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:50.9113817+07:00 0HMT3RLR3VE5K:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:50.9113818+07:00 0HMT3RLR3VE5J:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:50.9143237+07:00 0HMT3RLR3VE5L:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:50.9892655+07:00 0HMT3RLR3VE5H:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:50.9948922+07:00 0HMT3RLR3VE5H:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:50.9993181+07:00 0HMT3RLR3VE5H:00000012 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:51.0004131+07:00 0HMT3RLR3VE5I:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:51.0063587+07:00 0HMT3RLR3VE5I:00000016 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:51.0074804+07:00 0HMT3RLR3VE5H:00000012 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:13:51.0119391+07:00 0HMT3RLR3VE5I:00000016 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:51.0335455+07:00 0HMT3RLR3VE5I:00000016 [INF] Executed DbCommand ("11"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:51.0481184+07:00 0HMT3RLR3VE5I:00000016 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:13:51.0874433+07:00 0HMT3RLR3VE5I:00000016 [INF] Executed DbCommand ("23"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:13:51.1350240+07:00 0HMT3RLR3VE5I:00000016 [INF] Executed DbCommand ("12"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:51.1495439+07:00 0HMT3RLR3VE5I:00000016 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:13:51.1601095+07:00 0HMT3RLR3VE5I:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:51.1614404+07:00 0HMT3RLR3VE5I:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:13:51.1632747+07:00 0HMT3RLR3VE5I:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:52.4239634+07:00 0HMT3RLR3VE5O:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:52.4239634+07:00 0HMT3RLR3VE5N:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:52.4244760+07:00 0HMT3RLR3VE5N:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:52.4244760+07:00 0HMT3RLR3VE5O:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:52.4265991+07:00 0HMT3RLR3VE5O:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:52.4268386+07:00 0HMT3RLR3VE5N:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:52.4285383+07:00 0HMT3RLR3VE5O:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:13:52.4293436+07:00 0HMT3RLR3VE5N:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:52.4346133+07:00 0HMT3RLR3VE5N:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:13:52.4363968+07:00 0HMT3RLR3VE5N:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:13:52.4376206+07:00 0HMT3RLR3VE5N:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:52.4399679+07:00 0HMT3RLR3VE5N:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:13:52.4418493+07:00 0HMT3RLR3VE5N:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:52.4436289+07:00 0HMT3RLR3VE5N:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:13:52.4448981+07:00 0HMT3RLR3VE5N:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:52.4480788+07:00 0HMT3RLR3VE5P:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:52.4486091+07:00 0HMT3RLR3VE5P:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:52.4498595+07:00 0HMT3RLR3VE5P:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:52.4745094+07:00 0HMT3RLR3VE5P:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:52.4749771+07:00 0HMT3RLR3VE5P:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:52.4762104+07:00 0HMT3RLR3VE5P:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:52.4782168+07:00 0HMT3RLR3VE5P:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-23T22:13:52.4975590+07:00 0HMT3RLR3VE5N:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:52.4975575+07:00 0HMT3RLR3VE5O:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:52.4980848+07:00 0HMT3RLR3VE5N:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:52.4980847+07:00 0HMT3RLR3VE5O:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:52.4993228+07:00 0HMT3RLR3VE5N:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:52.4993404+07:00 0HMT3RLR3VE5O:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:52.5002874+07:00 0HMT3RLR3VE5O:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:13:52.5004384+07:00 0HMT3RLR3VE5N:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:52.5069857+07:00 0HMT3RLR3VE5N:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:13:52.5084191+07:00 0HMT3RLR3VE5N:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:13:52.5095873+07:00 0HMT3RLR3VE5N:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:52.5110546+07:00 0HMT3RLR3VE5N:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:13:52.5121304+07:00 0HMT3RLR3VE5N:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:52.5132618+07:00 0HMT3RLR3VE5N:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:13:52.5140922+07:00 0HMT3RLR3VE5N:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:13:53.5227858+07:00 0HMT3RLR3VE5N:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:13:53.5232663+07:00 0HMT3RLR3VE5N:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:13:53.5244543+07:00 0HMT3RLR3VE5N:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:13:53.5276856+07:00 0HMT3RLR3VE5N:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T22:14:01.0791776+07:00 0HMT3RLR3VE5N:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:14:01.0796799+07:00 0HMT3RLR3VE5N:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:14:01.0812037+07:00 0HMT3RLR3VE5N:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:14:01.0855037+07:00 0HMT3RLR3VE5N:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-23T22:14:01.2182849+07:00 0HMT3RLR3VE5N:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:14:01.2188018+07:00 0HMT3RLR3VE5N:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:14:01.2202211+07:00 0HMT3RLR3VE5N:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:14:01.2234385+07:00 0HMT3RLR3VE5N:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T22:14:01.2297127+07:00 0HMT3RLR3VE5N:0000000A [INF] Executed DbCommand ("4"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T22:14:03.2212668+07:00 0HMT3RLR3VE5N:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:14:03.2218205+07:00 0HMT3RLR3VE5N:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:14:03.2230403+07:00 0HMT3RLR3VE5N:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:14:03.2258022+07:00 0HMT3RLR3VE5N:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-23T22:14:03.2280476+07:00 0HMT3RLR3VE5N:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@p2='?' (Size = 100), @p0='?' (Size = 50), @p1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Messages] SET [FileStatus] = @p0, [FileUrls] = @p1
WHERE [Id] = @p2;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T22:14:03.2600621+07:00 0HMT3RLR3VE5N:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:14:03.2606553+07:00 0HMT3RLR3VE5N:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:14:03.2621749+07:00 0HMT3RLR3VE5N:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:14:03.2646822+07:00 0HMT3RLR3VE5N:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T22:14:14.4226182+07:00 0HMT3RLR3VE5N:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:14:14.4231574+07:00 0HMT3RLR3VE5N:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:14:14.4246827+07:00 0HMT3RLR3VE5N:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:14:14.4262972+07:00 0HMT3RLR3VE5N:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-23T22:14:14.4838321+07:00 0HMT3RLR3VE5N:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:14:14.4843505+07:00 0HMT3RLR3VE5N:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:14:14.4857163+07:00 0HMT3RLR3VE5N:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:14:14.4889159+07:00 0HMT3RLR3VE5N:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T22:14:14.4915721+07:00 0HMT3RLR3VE5N:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T22:14:16.0779092+07:00 0HMT3RLR3VE5N:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:14:16.0784467+07:00 0HMT3RLR3VE5N:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:14:16.0798217+07:00 0HMT3RLR3VE5N:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:14:16.0829188+07:00 0HMT3RLR3VE5N:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T22:14:16.6780552+07:00 0HMT3RLR3VE5N:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:14:16.6785347+07:00 0HMT3RLR3VE5N:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:14:16.6797635+07:00 0HMT3RLR3VE5N:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:14:16.6813207+07:00 0HMT3RLR3VE5N:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T22:14:16.7207367+07:00 0HMT3RLR3VE5N:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:14:16.7212155+07:00 0HMT3RLR3VE5N:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:14:16.7224376+07:00 0HMT3RLR3VE5N:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:14:16.7244053+07:00 0HMT3RLR3VE5N:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T22:14:16.7664153+07:00 0HMT3RLR3VE5N:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:14:16.7669603+07:00 0HMT3RLR3VE5N:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:14:16.7685607+07:00 0HMT3RLR3VE5N:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:14:16.7702401+07:00 0HMT3RLR3VE5N:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-23T22:14:16.7727175+07:00 0HMT3RLR3VE5N:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=["@p2='?' (Size = 100), @p0='?' (Size = 50), @p1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Messages] SET [FileStatus] = @p0, [FileUrls] = @p1
WHERE [Id] = @p2;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T22:14:16.7997538+07:00 0HMT3RLR3VE5N:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:14:16.8003576+07:00 0HMT3RLR3VE5N:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:14:16.8015916+07:00 0HMT3RLR3VE5N:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:14:16.8032995+07:00 0HMT3RLR3VE5N:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T22:14:17.4251491+07:00 0HMT3RLR3VE5N:0000001A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:14:17.4256361+07:00 0HMT3RLR3VE5N:0000001A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:14:17.4269009+07:00 0HMT3RLR3VE5N:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:14:17.4284676+07:00 0HMT3RLR3VE5N:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T22:14:17.8135307+07:00 0HMT3RLR3VE5N:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:14:17.8140081+07:00 0HMT3RLR3VE5N:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:14:17.8152930+07:00 0HMT3RLR3VE5N:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:14:17.8169351+07:00 0HMT3RLR3VE5N:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T22:14:18.0499142+07:00 0HMT3RLR3VE5N:0000001D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:14:18.0503767+07:00 0HMT3RLR3VE5N:0000001D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:14:18.0516884+07:00 0HMT3RLR3VE5N:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:14:18.0532336+07:00 0HMT3RLR3VE5N:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T22:14:18.0892203+07:00 0HMT3RLR3VE5N:0000001E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:14:18.0899730+07:00 0HMT3RLR3VE5N:0000001E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:14:18.0914818+07:00 0HMT3RLR3VE5N:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:14:18.0938450+07:00 0HMT3RLR3VE5N:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T22:15:03.0886265+07:00 0HMT3RLR3VE5N:00000021 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:15:03.0892642+07:00 0HMT3RLR3VE5N:00000021 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:15:03.0904365+07:00 0HMT3RLR3VE5O:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:15:03.0913900+07:00 0HMT3RLR3VE5O:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:15:03.1079046+07:00 0HMT3RLR3VE5N:00000021 [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:15:03.1079045+07:00 0HMT3RLR3VE5O:00000005 [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:15:03.1128017+07:00 0HMT3RLR3VE5O:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-23T22:15:03.1128478+07:00 0HMT3RLR3VE5N:00000021 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:15:03.1212319+07:00 0HMT3RLR3VE5N:00000021 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-23T22:15:03.1241117+07:00 0HMT3RLR3VE5N:00000021 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-23T22:15:03.1267701+07:00 0HMT3RLR3VE5N:00000021 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:15:03.1296348+07:00 0HMT3RLR3VE5N:00000021 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:15:03.1313714+07:00 0HMT3RLR3VE5N:00000021 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:15:03.1323569+07:00 0HMT3RLR3VE5N:00000021 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-23T22:15:03.1330790+07:00 0HMT3RLR3VE5N:00000021 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-23T22:15:41.0816773+07:00 0HMT3RLR3VE5N:00000023 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:15:41.0824272+07:00 0HMT3RLR3VE5N:00000023 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:15:41.0840035+07:00 0HMT3RLR3VE5N:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:15:41.0872760+07:00 0HMT3RLR3VE5N:00000023 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-23T22:15:41.1693936+07:00 0HMT3RLR3VE5N:00000025 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:15:41.1698811+07:00 0HMT3RLR3VE5N:00000025 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:15:41.1711791+07:00 0HMT3RLR3VE5N:00000025 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:15:41.1749186+07:00 0HMT3RLR3VE5N:00000025 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T22:15:45.3428166+07:00 0HMT3RLR3VE5N:00000027 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:15:45.3432668+07:00 0HMT3RLR3VE5N:00000027 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:15:45.3445003+07:00 0HMT3RLR3VE5N:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:15:45.3474318+07:00 0HMT3RLR3VE5N:00000027 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-23T22:15:45.3816074+07:00 0HMT3RLR3VE5N:00000028 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:15:45.3825040+07:00 0HMT3RLR3VE5N:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:15:45.3838291+07:00 0HMT3RLR3VE5N:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:15:45.3860006+07:00 0HMT3RLR3VE5N:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T22:15:45.3903565+07:00 0HMT3RLR3VE5N:00000028 [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T22:15:47.5294989+07:00 0HMT3RLR3VE5N:0000002A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:15:47.5300498+07:00 0HMT3RLR3VE5N:0000002A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:15:47.5314378+07:00 0HMT3RLR3VE5N:0000002A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:15:47.5337425+07:00 0HMT3RLR3VE5N:0000002A [INF] Executed DbCommand ("2"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-23T22:15:47.5354049+07:00 0HMT3RLR3VE5N:0000002A [INF] Executed DbCommand ("1"ms) [Parameters=["@p2='?' (Size = 100), @p0='?' (Size = 50), @p1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Messages] SET [FileStatus] = @p0, [FileUrls] = @p1
WHERE [Id] = @p2;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-23T22:15:47.5657811+07:00 0HMT3RLR3VE5N:0000002C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:15:47.5662906+07:00 0HMT3RLR3VE5N:0000002C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:15:47.5676343+07:00 0HMT3RLR3VE5N:0000002C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-23T22:15:47.5695307+07:00 0HMT3RLR3VE5N:0000002C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-23T22:16:25.2696689+07:00 0HMT3RLR3VE5P:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-23T22:16:25.2712989+07:00 0HMT3RLR3VE5P:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-23T22:16:25.2815706+07:00 0HMT3RLR3VE5P:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
