2023-08-20T10:43:28.6530814+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T10:43:28.6614929+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T10:43:28.6623558+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T10:43:28.6624442+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T10:43:37.3692321+07:00 0HMT15UHEK44B:00000003 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T10:43:38.6974712+07:00 0HMT15UHEK44B:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:43:39.9920060+07:00 0HMT15UHEK44B:00000003 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:43:40.0514413+07:00 0HMT15UHEK44B:00000003 [INF] Executed DbCommand ("43"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:43:40.5545475+07:00 0HMT15UHEK44B:00000003 [INF] Executed DbCommand ("48"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T10:43:48.5287323+07:00 0HMT15UHEK44B:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:43:48.5345865+07:00 0HMT15UHEK44B:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:43:48.5359212+07:00 0HMT15UHEK44B:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:43:48.5426320+07:00 0HMT15UHEK44B:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T10:43:52.6560729+07:00 0HMT15UHEK44B:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:43:52.6610963+07:00 0HMT15UHEK44B:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:43:52.6711699+07:00 0HMT15UHEK44B:00000006 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:43:52.6748239+07:00 0HMT15UHEK44B:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T10:44:31.0445438+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T10:44:31.0572040+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T10:44:31.0576941+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T10:44:31.0577384+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T10:44:38.1490206+07:00 0HMT15V3I964B:00000003 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T10:44:39.0714612+07:00 0HMT15V3I964B:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:44:39.4613683+07:00 0HMT15V3I964B:00000003 [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:44:39.5055367+07:00 0HMT15V3I964B:00000003 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:44:40.0977206+07:00 0HMT15V3I964B:00000003 [INF] Executed DbCommand ("57"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T10:45:02.1620977+07:00 0HMT15V3I964B:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:45:02.1730975+07:00 0HMT15V3I964B:00000005 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:45:02.1834564+07:00 0HMT15V3I964B:00000005 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:45:02.1906254+07:00 0HMT15V3I964B:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T10:45:03.7858345+07:00 0HMT15V3I964B:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:45:03.7904580+07:00 0HMT15V3I964B:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:45:03.7918479+07:00 0HMT15V3I964B:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:45:03.7940011+07:00 0HMT15V3I964B:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T10:45:52.1066488+07:00 0HMT15V3I964B:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:45:52.1073674+07:00 0HMT15V3I964B:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:45:52.1090473+07:00 0HMT15V3I964B:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:45:52.1109742+07:00 0HMT15V3I964B:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T10:46:19.7351897+07:00 0HMT15V3I964B:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:46:19.7357023+07:00 0HMT15V3I964B:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:46:19.7459856+07:00 0HMT15V3I964B:0000000B [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:46:19.7915798+07:00 0HMT15V3I964B:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T10:46:19.9605041+07:00 0HMT15V3I964B:0000000B [INF] Executed DbCommand ("7"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Bio], [DateOfBirth], [DisplayName], [Email], [Gender], [PhotoUrl])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-20T10:46:20.0829671+07:00 0HMT15V3I964B:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:46:20.0835134+07:00 0HMT15V3I964B:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:46:20.0849505+07:00 0HMT15V3I964B:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:46:20.3008731+07:00 0HMT15V3I964B:0000000D [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T10:46:20.4006495+07:00 0HMT15V3I964D:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:46:20.4011228+07:00 0HMT15V3I964D:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:46:20.4023889+07:00 0HMT15V3I964D:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:46:20.4118908+07:00 0HMT15V3I964B:0000000D [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE 0 = 1
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE 0 = 1
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T10:46:20.4498711+07:00 0HMT15V3I964D:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T10:46:20.4718409+07:00 0HMT15V3I964E:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:46:20.4728234+07:00 0HMT15V3I964E:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:46:20.4742326+07:00 0HMT15V3I964E:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:46:20.4898452+07:00 0HMT15V3I964E:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:46:20.4907035+07:00 0HMT15V3I964E:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:46:20.4924171+07:00 0HMT15V3I964E:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:46:20.5005446+07:00 0HMT15V3I964E:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T10:46:26.5122055+07:00 0HMT15V3I964D:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:46:26.5126957+07:00 0HMT15V3I964D:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:46:26.5139690+07:00 0HMT15V3I964D:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:46:26.5289034+07:00 0HMT15V3I964D:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__ToLower_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE ((@__ToLower_0 LIKE N'') OR (CHARINDEX(@__ToLower_0, LOWER([u].[Email])) > 0)) OR ((LOWER([u].[Email]) LIKE N'') OR (CHARINDEX(LOWER([u].[Email]), @__ToLower_0) > 0))" (0723d8ff)
2023-08-20T10:46:27.1553276+07:00 0HMT15V3I964D:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:46:27.1558159+07:00 0HMT15V3I964D:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:46:27.1571696+07:00 0HMT15V3I964D:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:46:27.1593563+07:00 0HMT15V3I964D:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T10:46:27.1921006+07:00 0HMT15V3I964D:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:46:27.1925543+07:00 0HMT15V3I964D:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:46:27.1938073+07:00 0HMT15V3I964D:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:46:27.1954576+07:00 0HMT15V3I964D:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T10:46:27.2361493+07:00 0HMT15V3I964D:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:46:27.2367624+07:00 0HMT15V3I964D:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:46:27.2392753+07:00 0HMT15V3I964D:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:46:27.2421134+07:00 0HMT15V3I964D:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__ToLower_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE ((@__ToLower_0 LIKE N'') OR (CHARINDEX(@__ToLower_0, LOWER([u].[Email])) > 0)) OR ((LOWER([u].[Email]) LIKE N'') OR (CHARINDEX(LOWER([u].[Email]), @__ToLower_0) > 0))" (0723d8ff)
2023-08-20T10:46:27.2605430+07:00 0HMT15V3I964D:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:46:27.2610770+07:00 0HMT15V3I964D:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:46:27.2626145+07:00 0HMT15V3I964D:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:46:27.2645773+07:00 0HMT15V3I964D:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__ToLower_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE ((@__ToLower_0 LIKE N'') OR (CHARINDEX(@__ToLower_0, LOWER([u].[Email])) > 0)) OR ((LOWER([u].[Email]) LIKE N'') OR (CHARINDEX(LOWER([u].[Email]), @__ToLower_0) > 0))" (0723d8ff)
2023-08-20T10:46:27.7701760+07:00 0HMT15V3I964D:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:46:27.7706323+07:00 0HMT15V3I964D:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:46:27.7721215+07:00 0HMT15V3I964D:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:46:27.7834831+07:00 0HMT15V3I964D:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__user1Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__user1Id_0) AND ([c].[ChatRoomType] = N'ONE')" (0723d8ff)
2023-08-20T10:46:27.7882371+07:00 0HMT15V3I964D:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE 0 = 1" (0723d8ff)
2023-08-20T10:46:27.8424073+07:00 0HMT15V3I964D:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [ChatRooms] ([Id], [ChatRoomType], [CreatedTime], [CreatorId], [IsDeleted], [Name], [PhotoUrl], [UpdatedTime])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);" (0723d8ff)
2023-08-20T10:46:27.8720641+07:00 0HMT15V3I964D:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (Size = 50), @p6='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserChatRooms] ([Id], [ChatRoomId], [CreatedTime], [IsMuted], [LastMessageReadId], [MembershipStatus], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-20T10:46:27.8726841+07:00 0HMT15V3I964D:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (Size = 50), @p6='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserChatRooms] ([Id], [ChatRoomId], [CreatedTime], [IsMuted], [LastMessageReadId], [MembershipStatus], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-20T10:46:27.8792001+07:00 0HMT15V3I964D:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] IN (N'lbFAUpmyDQVVSxHTHtCYlsydvPg2', N'b22AvNVCNCeghQl40LhM0HenykD3')" (0723d8ff)
2023-08-20T10:46:27.8900626+07:00 0HMT15V3I964D:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=["@__8__locals1_chatRoomSummary_ChatRoom_Id_0='?' (Size = 100), @__user_Id_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__8__locals1_chatRoomSummary_ChatRoom_Id_0) AND ([u].[UserId] = @__user_Id_1)" (0723d8ff)
2023-08-20T10:46:27.8912325+07:00 0HMT15V3I964D:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=["@__8__locals1_chatRoomSummary_ChatRoom_Id_0='?' (Size = 100), @__user_Id_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__8__locals1_chatRoomSummary_ChatRoom_Id_0) AND ([u].[UserId] = @__user_Id_1)" (0723d8ff)
2023-08-20T10:46:27.9026340+07:00 0HMT15V3I964D:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=["@__chatRoom_Id_0='?' (Size = 100), @__chatRoom_CreatorId_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__chatRoom_Id_0) AND ([u].[UserId] = @__chatRoom_CreatorId_1)" (0723d8ff)
2023-08-20T10:46:27.9131067+07:00 0HMT15V3I964D:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:46:27.9136025+07:00 0HMT15V3I964D:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:46:27.9151674+07:00 0HMT15V3I964D:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:46:27.9175921+07:00 0HMT15V3I964D:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__ToLower_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE ((@__ToLower_0 LIKE N'') OR (CHARINDEX(@__ToLower_0, LOWER([u].[Email])) > 0)) OR ((LOWER([u].[Email]) LIKE N'') OR (CHARINDEX(LOWER([u].[Email]), @__ToLower_0) > 0))" (0723d8ff)
2023-08-20T10:46:27.9234323+07:00 0HMT15V3I964D:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:46:27.9241887+07:00 0HMT15V3I964D:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:46:27.9242413+07:00 0HMT15V3I964B:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:46:27.9259777+07:00 0HMT15V3I964D:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:46:27.9286581+07:00 0HMT15V3I964B:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:46:27.9314322+07:00 0HMT15V3I964B:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:46:27.9543913+07:00 0HMT15V3I964D:0000000E [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 100), @p6='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserRelationships] ([Id], [CreatedTime], [InitiatorUserId], [RelationshipType], [Status], [TargetUserId], [UpdatedTime])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-20T10:46:27.9608340+07:00 0HMT15V3I964B:00000010 [INF] Executed DbCommand ("5"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T10:46:27.9673037+07:00 0HMT15V3I964D:0000000E [INF] Executed DbCommand ("3"ms) [Parameters=["@__userRelationship_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE [u].[Id] = @__userRelationship_Id_0" (0723d8ff)
2023-08-20T10:46:27.9871808+07:00 0HMT15V3I964D:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:46:27.9889651+07:00 0HMT15V3I964D:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:46:27.9906618+07:00 0HMT15V3I964D:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:46:27.9930133+07:00 0HMT15V3I964D:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__ToLower_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE ((@__ToLower_0 LIKE N'') OR (CHARINDEX(@__ToLower_0, LOWER([u].[Email])) > 0)) OR ((LOWER([u].[Email]) LIKE N'') OR (CHARINDEX(LOWER([u].[Email]), @__ToLower_0) > 0))" (0723d8ff)
2023-08-20T10:46:31.4486501+07:00 0HMT15V3I964D:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:46:31.4491969+07:00 0HMT15V3I964D:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:46:31.4504875+07:00 0HMT15V3I964D:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:46:31.4703468+07:00 0HMT15V3I964D:00000011 [INF] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T10:46:31.4768524+07:00 0HMT15V3I964D:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T10:46:31.5032723+07:00 0HMT15V3I964D:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:46:31.5038858+07:00 0HMT15V3I964D:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:46:31.5051266+07:00 0HMT15V3I964D:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:46:31.5133613+07:00 0HMT15V3I964D:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T10:46:31.5449080+07:00 0HMT15V3I964D:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T10:53:51.9070770+07:00 0HMT15V3I964I:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:53:51.9104757+07:00 0HMT15V3I964I:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:53:51.9198356+07:00 0HMT15V3I964I:00000003 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:53:51.9249770+07:00 0HMT15V3I964I:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T10:53:51.9279094+07:00 0HMT15V3I964I:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T10:53:51.9473302+07:00 0HMT15V3I964I:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:53:51.9479743+07:00 0HMT15V3I964I:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:53:51.9493899+07:00 0HMT15V3I964I:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:53:51.9527128+07:00 0HMT15V3I964I:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T10:53:51.9550509+07:00 0HMT15V3I964I:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T10:56:17.5391256+07:00 0HMT15V3I964I:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:56:17.5397648+07:00 0HMT15V3I964I:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:56:17.5498161+07:00 0HMT15V3I964I:00000007 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:56:17.5554395+07:00 0HMT15V3I964I:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T10:56:17.5578579+07:00 0HMT15V3I964I:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T10:56:17.5805288+07:00 0HMT15V3I964I:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:56:17.5810989+07:00 0HMT15V3I964I:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:56:17.5826827+07:00 0HMT15V3I964I:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:56:17.5862491+07:00 0HMT15V3I964I:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T10:56:17.5882713+07:00 0HMT15V3I964I:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T10:56:22.7442525+07:00 0HMT15V3I964I:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:56:22.7447124+07:00 0HMT15V3I964I:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:56:22.7459869+07:00 0HMT15V3I964I:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:56:22.7475058+07:00 0HMT15V3I964I:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T10:56:22.7491023+07:00 0HMT15V3I964I:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T10:56:22.7650588+07:00 0HMT15V3I964I:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:56:22.7655324+07:00 0HMT15V3I964I:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:56:22.7668736+07:00 0HMT15V3I964I:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:56:22.7687791+07:00 0HMT15V3I964I:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T10:56:22.7712138+07:00 0HMT15V3I964I:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T10:56:25.0389714+07:00 0HMT15V3I964I:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:56:25.0394762+07:00 0HMT15V3I964I:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:56:25.0408477+07:00 0HMT15V3I964I:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:56:25.0463432+07:00 0HMT15V3I964I:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime]
FROM [UserRelationships] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T10:56:25.0567974+07:00 0HMT15V3I964I:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [UserRelationships]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T10:56:28.9215543+07:00 0HMT15V3I964I:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:56:28.9222590+07:00 0HMT15V3I964I:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:56:28.9248405+07:00 0HMT15V3I964I:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:56:28.9399018+07:00 0HMT15V3I964I:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=["@__8__locals1_lastMessageId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[CreatedTime]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__8__locals1_lastMessageId_0" (0723d8ff)
2023-08-20T10:56:28.9520853+07:00 0HMT15V3I964I:00000011 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_3='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100), @__lastMessageTime_1='?' (DbType = DateTime2), @__8__locals1_lastMessageId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_3) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE ([m].[ChatRoomId] = @__chatRoomId_0) AND (([m].[CreatedTime] <= @__lastMessageTime_1) AND ([m].[Id] <> @__8__locals1_lastMessageId_2))
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T10:56:28.9678076+07:00 0HMT15V3I964I:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:56:28.9682928+07:00 0HMT15V3I964I:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:56:28.9699799+07:00 0HMT15V3I964I:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:56:28.9717500+07:00 0HMT15V3I964I:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T10:56:32.5113951+07:00 0HMT15V3I964I:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:56:32.5119597+07:00 0HMT15V3I964I:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:56:32.5132905+07:00 0HMT15V3I964I:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:56:32.5172097+07:00 0HMT15V3I964I:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T10:56:32.5202869+07:00 0HMT15V3I964I:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (DbType = Boolean)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [IsMuted] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T10:56:33.1724874+07:00 0HMT15V3I964I:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:56:33.1730152+07:00 0HMT15V3I964I:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:56:33.1742958+07:00 0HMT15V3I964I:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:56:33.1759655+07:00 0HMT15V3I964I:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T10:56:33.1779747+07:00 0HMT15V3I964I:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (DbType = Boolean)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [IsMuted] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T10:56:47.0788111+07:00 0HMT15V3I964I:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:56:47.0792777+07:00 0HMT15V3I964I:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:56:47.0805825+07:00 0HMT15V3I964I:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:56:47.0816667+07:00 0HMT15V3I964I:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=["@__8__locals1_lastMessageId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[CreatedTime]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__8__locals1_lastMessageId_0" (0723d8ff)
2023-08-20T10:56:47.0838989+07:00 0HMT15V3I964I:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_3='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100), @__lastMessageTime_1='?' (DbType = DateTime2), @__8__locals1_lastMessageId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_3) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE ([m].[ChatRoomId] = @__chatRoomId_0) AND (([m].[CreatedTime] <= @__lastMessageTime_1) AND ([m].[Id] <> @__8__locals1_lastMessageId_2))
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T10:56:47.0983051+07:00 0HMT15V3I964I:0000001A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:56:47.0987900+07:00 0HMT15V3I964I:0000001A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:56:47.1000287+07:00 0HMT15V3I964I:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:56:47.1019593+07:00 0HMT15V3I964I:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T10:58:03.3604894+07:00 0HMT15V3I964I:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:58:03.3610167+07:00 0HMT15V3I964I:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:58:03.3703125+07:00 0HMT15V3I964I:0000001C [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:58:03.3737559+07:00 0HMT15V3I964I:0000001C [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 100), @p6='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserRelationships] ([Id], [CreatedTime], [InitiatorUserId], [RelationshipType], [Status], [TargetUserId], [UpdatedTime])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-20T10:58:03.3814540+07:00 0HMT15V3I964I:0000001C [INF] Executed DbCommand ("3"ms) [Parameters=["@__userRelationship_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE [u].[Id] = @__userRelationship_Id_0" (0723d8ff)
2023-08-20T10:58:03.9648628+07:00 0HMT15V3I964I:0000001E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:58:03.9654671+07:00 0HMT15V3I964I:0000001E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:58:03.9668576+07:00 0HMT15V3I964I:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:58:03.9684670+07:00 0HMT15V3I964I:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime]
FROM [UserRelationships] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T10:58:03.9710054+07:00 0HMT15V3I964I:0000001E [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [UserRelationships]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T10:58:05.6485371+07:00 0HMT15V3I964I:0000001F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:58:05.6491371+07:00 0HMT15V3I964I:0000001F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:58:05.6504291+07:00 0HMT15V3I964I:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:58:05.6521392+07:00 0HMT15V3I964I:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 100), @p6='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserRelationships] ([Id], [CreatedTime], [InitiatorUserId], [RelationshipType], [Status], [TargetUserId], [UpdatedTime])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-20T10:58:05.6537720+07:00 0HMT15V3I964I:0000001F [INF] Executed DbCommand ("0"ms) [Parameters=["@__userRelationship_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE [u].[Id] = @__userRelationship_Id_0" (0723d8ff)
2023-08-20T10:58:06.0459701+07:00 0HMT15V3I964I:00000021 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T10:58:06.0466068+07:00 0HMT15V3I964I:00000021 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T10:58:06.0480544+07:00 0HMT15V3I964I:00000021 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T10:58:06.0493523+07:00 0HMT15V3I964I:00000021 [INF] Executed DbCommand ("0"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime]
FROM [UserRelationships] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T10:58:06.0506863+07:00 0HMT15V3I964I:00000021 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [UserRelationships]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T15:06:44.5889357+07:00 0HMT15V3I964L:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:06:44.5889355+07:00 0HMT15V3I964K:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:06:44.6009607+07:00 0HMT15V3I964M:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:06:44.6011596+07:00 0HMT15V3I964K:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:06:44.6014863+07:00 0HMT15V3I964M:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:06:44.6035613+07:00 0HMT15V3I964L:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:06:44.6135418+07:00 0HMT15V3I964M:00000002 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:06:44.6135563+07:00 0HMT15V3I964L:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:06:44.6136277+07:00 0HMT15V3I964K:00000003 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:06:44.6145500+07:00 0HMT15V3I964M:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:06:44.6151065+07:00 0HMT15V3I964M:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:06:44.6164172+07:00 0HMT15V3I964M:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:06:44.6207096+07:00 0HMT15V3I964L:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T15:06:44.6207097+07:00 0HMT15V3I964K:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T15:06:44.6221331+07:00 0HMT15V3I964M:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T15:06:44.6296083+07:00 0HMT15V3I964K:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'9f4a81f3-159c-4f90-90e8-0a9fe0f3a95b', N'c2f29374-f52f-4212-bb88-1c3a4bf1b10e')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'9f4a81f3-159c-4f90-90e8-0a9fe0f3a95b', N'c2f29374-f52f-4212-bb88-1c3a4bf1b10e')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T15:06:44.6550359+07:00 0HMT15V3I964K:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T15:06:44.6667689+07:00 0HMT15V3I964K:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T15:06:44.6707838+07:00 0HMT15V3I964K:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T15:06:44.6720366+07:00 0HMT15V3I964K:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T15:06:45.6744143+07:00 0HMT15V3I964K:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:06:45.6748852+07:00 0HMT15V3I964K:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:06:45.6761908+07:00 0HMT15V3I964K:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:06:45.6793908+07:00 0HMT15V3I964K:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:06:45.8047804+07:00 0HMT15V3I964K:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:06:45.8054055+07:00 0HMT15V3I964K:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:06:45.8074276+07:00 0HMT15V3I964K:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:06:45.8108721+07:00 0HMT15V3I964K:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:06:45.8175175+07:00 0HMT15V3I964K:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:06:45.8180392+07:00 0HMT15V3I964K:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:06:45.8192706+07:00 0HMT15V3I964L:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:06:45.8194967+07:00 0HMT15V3I964K:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:06:45.8197055+07:00 0HMT15V3I964L:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:06:45.8213593+07:00 0HMT15V3I964L:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:06:45.8224041+07:00 0HMT15V3I964K:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:06:45.8247737+07:00 0HMT15V3I964L:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:06:46.0664419+07:00 0HMT15V3I964K:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:06:46.0669282+07:00 0HMT15V3I964K:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:06:46.0682210+07:00 0HMT15V3I964K:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:06:46.0698714+07:00 0HMT15V3I964K:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:06:46.0967781+07:00 0HMT15V3I964K:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:06:46.0977642+07:00 0HMT15V3I964K:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:06:46.0993436+07:00 0HMT15V3I964K:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:06:46.1018841+07:00 0HMT15V3I964K:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:06:46.1041830+07:00 0HMT15V3I964K:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:06:46.1046905+07:00 0HMT15V3I964K:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:06:46.1063451+07:00 0HMT15V3I964K:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:06:46.1081212+07:00 0HMT15V3I964K:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:06:46.6248425+07:00 0HMT15V3I964K:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:06:46.6253208+07:00 0HMT15V3I964K:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:06:46.6266277+07:00 0HMT15V3I964K:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:06:46.6284784+07:00 0HMT15V3I964K:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:06:46.6620238+07:00 0HMT15V3I964K:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:06:46.6625688+07:00 0HMT15V3I964K:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:06:46.6635247+07:00 0HMT15V3I964L:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:06:46.6639885+07:00 0HMT15V3I964K:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:06:46.6639863+07:00 0HMT15V3I964L:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:06:46.6646029+07:00 0HMT15V3I964N:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:06:46.6648971+07:00 0HMT15V3I964N:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:06:46.6654483+07:00 0HMT15V3I964L:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:06:46.6657318+07:00 0HMT15V3I964K:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:06:46.6667266+07:00 0HMT15V3I964N:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:06:46.6689500+07:00 0HMT15V3I964L:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:06:46.6689441+07:00 0HMT15V3I964N:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:06:48.7987523+07:00 0HMT15V3I964K:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:06:48.7992450+07:00 0HMT15V3I964K:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:06:48.8005112+07:00 0HMT15V3I964K:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:06:48.8019839+07:00 0HMT15V3I964K:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:06:48.8250748+07:00 0HMT15V3I964K:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:06:48.8256062+07:00 0HMT15V3I964K:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:06:48.8256971+07:00 0HMT15V3I964L:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:06:48.8259905+07:00 0HMT15V3I964L:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:06:48.8268942+07:00 0HMT15V3I964K:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:06:48.8270359+07:00 0HMT15V3I964L:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:06:48.8285689+07:00 0HMT15V3I964L:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:06:48.8285666+07:00 0HMT15V3I964K:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:06:49.0821714+07:00 0HMT15V3I964K:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:06:49.0826119+07:00 0HMT15V3I964K:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:06:49.0838879+07:00 0HMT15V3I964K:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:06:49.0857528+07:00 0HMT15V3I964K:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:06:49.1161507+07:00 0HMT15V3I964K:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:06:49.1167256+07:00 0HMT15V3I964L:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:06:49.1167400+07:00 0HMT15V3I964K:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:06:49.1170724+07:00 0HMT15V3I964L:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:06:49.1181053+07:00 0HMT15V3I964K:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:06:49.1181038+07:00 0HMT15V3I964L:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:06:49.1202574+07:00 0HMT15V3I964L:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:06:49.1201802+07:00 0HMT15V3I964K:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:06:49.1236369+07:00 0HMT15V3I964N:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:06:49.1281610+07:00 0HMT15V3I964N:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:06:49.1297516+07:00 0HMT15V3I964N:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:06:49.1319155+07:00 0HMT15V3I964N:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:07:26.6314743+07:00 0HMT15V3I964K:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:07:26.6320944+07:00 0HMT15V3I964K:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:07:26.6337119+07:00 0HMT15V3I964K:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:07:26.6357521+07:00 0HMT15V3I964K:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:07:26.6694700+07:00 0HMT15V3I964L:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:07:26.6694739+07:00 0HMT15V3I964K:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:07:26.6700813+07:00 0HMT15V3I964L:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:07:26.6703076+07:00 0HMT15V3I964K:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:07:26.6717226+07:00 0HMT15V3I964L:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:07:26.6717226+07:00 0HMT15V3I964K:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:07:26.6752957+07:00 0HMT15V3I964L:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:07:26.6777110+07:00 0HMT15V3I964K:00000017 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:07:26.9699213+07:00 0HMT15V3I964K:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:07:26.9704198+07:00 0HMT15V3I964K:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:07:26.9717790+07:00 0HMT15V3I964K:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:07:26.9751518+07:00 0HMT15V3I964K:00000019 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:07:27.0253822+07:00 0HMT15V3I964K:0000001B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:07:27.0259130+07:00 0HMT15V3I964K:0000001B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:07:27.0274090+07:00 0HMT15V3I964K:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:07:27.0297026+07:00 0HMT15V3I964K:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:07:27.0421191+07:00 0HMT15V3I964K:0000001E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:07:27.0427143+07:00 0HMT15V3I964K:0000001E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:07:27.0444660+07:00 0HMT15V3I964K:0000001E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:07:27.0468505+07:00 0HMT15V3I964K:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:07:27.0552516+07:00 0HMT15V3I964K:0000001F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:07:27.0558869+07:00 0HMT15V3I964K:0000001F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:07:27.0573418+07:00 0HMT15V3I964K:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:07:27.0601749+07:00 0HMT15V3I964K:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:09:11.8501552+07:00 0HMT15V3I964K:00000021 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:11.8507002+07:00 0HMT15V3I964K:00000021 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:11.8598622+07:00 0HMT15V3I964K:00000021 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:11.8634057+07:00 0HMT15V3I964K:00000021 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:09:11.8989434+07:00 0HMT15V3I964K:00000023 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:11.8997784+07:00 0HMT15V3I964K:00000023 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:11.9007207+07:00 0HMT15V3I964L:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:11.9011913+07:00 0HMT15V3I964L:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:11.9014078+07:00 0HMT15V3I964K:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:11.9026999+07:00 0HMT15V3I964L:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:11.9059360+07:00 0HMT15V3I964L:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:09:11.9068883+07:00 0HMT15V3I964K:00000023 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:09:12.8375912+07:00 0HMT15V3I964K:00000025 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:12.8381189+07:00 0HMT15V3I964K:00000025 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:12.8394276+07:00 0HMT15V3I964K:00000025 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:12.8430243+07:00 0HMT15V3I964K:00000025 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 100), @p6='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserRelationships] ([Id], [CreatedTime], [InitiatorUserId], [RelationshipType], [Status], [TargetUserId], [UpdatedTime])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-20T15:09:12.8461211+07:00 0HMT15V3I964K:00000025 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userRelationship_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE [u].[Id] = @__userRelationship_Id_0" (0723d8ff)
2023-08-20T15:09:14.1577793+07:00 0HMT15V3I964K:00000027 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:14.1582782+07:00 0HMT15V3I964K:00000027 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:14.1596151+07:00 0HMT15V3I964K:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:14.1612823+07:00 0HMT15V3I964K:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime]
FROM [UserRelationships] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:09:14.1628054+07:00 0HMT15V3I964K:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [UserRelationships]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T15:09:23.6869851+07:00 0HMT15V3I964K:00000029 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:23.6874361+07:00 0HMT15V3I964K:00000029 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:23.6889565+07:00 0HMT15V3I964K:00000029 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:23.6916920+07:00 0HMT15V3I964K:00000029 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:09:23.7279837+07:00 0HMT15V3I964K:0000002B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:23.7285228+07:00 0HMT15V3I964K:0000002B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:23.7302888+07:00 0HMT15V3I964K:0000002B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:23.7312865+07:00 0HMT15V3I964L:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:23.7322123+07:00 0HMT15V3I964K:0000002B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:09:23.7322124+07:00 0HMT15V3I964L:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:23.7342587+07:00 0HMT15V3I964L:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:23.7362547+07:00 0HMT15V3I964L:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:09:23.7510848+07:00 0HMT15V3I964K:0000002D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:23.7515957+07:00 0HMT15V3I964K:0000002D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:23.7530078+07:00 0HMT15V3I964K:0000002D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:23.7559572+07:00 0HMT15V3I964K:0000002D [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:09:24.4672238+07:00 0HMT15V3I964K:0000002F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:24.4676983+07:00 0HMT15V3I964K:0000002F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:24.4689702+07:00 0HMT15V3I964K:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:24.4705117+07:00 0HMT15V3I964K:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:09:24.4908357+07:00 0HMT15V3I964K:00000031 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:24.4913961+07:00 0HMT15V3I964K:00000031 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:24.4917256+07:00 0HMT15V3I964L:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:24.4920435+07:00 0HMT15V3I964L:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:24.4927347+07:00 0HMT15V3I964K:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:24.4929901+07:00 0HMT15V3I964L:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:24.4945214+07:00 0HMT15V3I964L:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:09:24.4952898+07:00 0HMT15V3I964K:00000031 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:09:24.8407568+07:00 0HMT15V3I964K:00000032 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:24.8412752+07:00 0HMT15V3I964K:00000032 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:24.8426609+07:00 0HMT15V3I964K:00000032 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:24.8449043+07:00 0HMT15V3I964K:00000032 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:09:24.8770580+07:00 0HMT15V3I964K:00000033 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:24.8776664+07:00 0HMT15V3I964K:00000033 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:24.8782265+07:00 0HMT15V3I964L:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:24.8786075+07:00 0HMT15V3I964L:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:24.8792287+07:00 0HMT15V3I964K:00000033 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:24.8798537+07:00 0HMT15V3I964L:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:24.8814976+07:00 0HMT15V3I964K:00000033 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:09:24.8829002+07:00 0HMT15V3I964L:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:09:24.8849589+07:00 0HMT15V3I964O:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:24.8854345+07:00 0HMT15V3I964O:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:24.8868453+07:00 0HMT15V3I964O:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:24.8889400+07:00 0HMT15V3I964O:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:09:27.2343897+07:00 0HMT15V3I964K:00000034 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:27.2348353+07:00 0HMT15V3I964K:00000034 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:27.2361545+07:00 0HMT15V3I964K:00000034 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:27.2378446+07:00 0HMT15V3I964K:00000034 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:09:27.2584714+07:00 0HMT15V3I964K:00000035 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:27.2589777+07:00 0HMT15V3I964K:00000035 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:27.2593450+07:00 0HMT15V3I964L:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:27.2597710+07:00 0HMT15V3I964L:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:27.2605228+07:00 0HMT15V3I964K:00000035 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:27.2613209+07:00 0HMT15V3I964L:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:27.2625158+07:00 0HMT15V3I964K:00000035 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:09:27.2654077+07:00 0HMT15V3I964L:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:09:27.5416647+07:00 0HMT15V3I964K:00000036 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:27.5421400+07:00 0HMT15V3I964K:00000036 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:27.5434035+07:00 0HMT15V3I964K:00000036 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:27.5457386+07:00 0HMT15V3I964K:00000036 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:09:27.5751772+07:00 0HMT15V3I964K:00000037 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:27.5757026+07:00 0HMT15V3I964K:00000037 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:27.5769972+07:00 0HMT15V3I964K:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:27.5789331+07:00 0HMT15V3I964K:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:09:27.5923247+07:00 0HMT15V3I964K:00000038 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:27.5928709+07:00 0HMT15V3I964K:00000038 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:27.5936189+07:00 0HMT15V3I964L:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:27.5939630+07:00 0HMT15V3I964L:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:27.5942238+07:00 0HMT15V3I964K:00000038 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:27.5952326+07:00 0HMT15V3I964L:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:27.5957672+07:00 0HMT15V3I964K:00000038 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:09:27.5992597+07:00 0HMT15V3I964L:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:09:29.0701908+07:00 0HMT15V3I964K:0000003A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:29.0707814+07:00 0HMT15V3I964K:0000003A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:29.0721098+07:00 0HMT15V3I964K:0000003A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:29.0758514+07:00 0HMT15V3I964K:0000003A [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T15:09:29.0779186+07:00 0HMT15V3I964K:0000003A [INF] Executed DbCommand ("1"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T15:09:29.1040618+07:00 0HMT15V3I964K:0000003C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:29.1046570+07:00 0HMT15V3I964K:0000003C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:29.1061370+07:00 0HMT15V3I964K:0000003C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:29.1086763+07:00 0HMT15V3I964K:0000003C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:09:29.1116603+07:00 0HMT15V3I964K:0000003C [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T15:09:34.1843279+07:00 0HMT15V3I964K:0000003E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:34.1848479+07:00 0HMT15V3I964K:0000003E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:34.1863870+07:00 0HMT15V3I964K:0000003E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:34.1884026+07:00 0HMT15V3I964K:0000003E [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T15:09:34.1902484+07:00 0HMT15V3I964K:0000003E [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T15:09:34.2243430+07:00 0HMT15V3I964K:00000040 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:34.2248177+07:00 0HMT15V3I964K:00000040 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:34.2261828+07:00 0HMT15V3I964K:00000040 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:34.2286156+07:00 0HMT15V3I964K:00000040 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:09:34.2306456+07:00 0HMT15V3I964K:00000040 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T15:09:38.0759514+07:00 0HMT15V3I964K:00000041 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:38.0764740+07:00 0HMT15V3I964K:00000041 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:38.0778928+07:00 0HMT15V3I964K:00000041 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:38.0799141+07:00 0HMT15V3I964K:00000041 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T15:09:38.0818489+07:00 0HMT15V3I964K:00000041 [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T15:09:38.1143098+07:00 0HMT15V3I964K:00000042 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:09:38.1148154+07:00 0HMT15V3I964K:00000042 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:09:38.1160259+07:00 0HMT15V3I964K:00000042 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:09:38.1180572+07:00 0HMT15V3I964K:00000042 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:09:38.1198068+07:00 0HMT15V3I964K:00000042 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T15:11:20.5851637+07:00 0HMT15V3I964K:00000044 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:11:20.5856602+07:00 0HMT15V3I964K:00000044 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:11:20.6002263+07:00 0HMT15V3I964K:00000044 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:11:20.6035332+07:00 0HMT15V3I964K:00000044 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:11:22.3997050+07:00 0HMT15V3I964K:00000046 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:11:22.4002757+07:00 0HMT15V3I964K:00000046 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:11:22.4015782+07:00 0HMT15V3I964K:00000046 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:11:22.4050947+07:00 0HMT15V3I964K:00000046 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:11:22.4283598+07:00 0HMT15V3I964K:00000047 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:11:22.4289088+07:00 0HMT15V3I964L:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:11:22.4291690+07:00 0HMT15V3I964K:00000047 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:11:22.4292615+07:00 0HMT15V3I964L:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:11:22.4305867+07:00 0HMT15V3I964K:00000047 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:11:22.4305867+07:00 0HMT15V3I964L:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:11:22.4324815+07:00 0HMT15V3I964L:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:11:22.4333165+07:00 0HMT15V3I964K:00000047 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:11:22.8543047+07:00 0HMT15V3I964K:00000049 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:11:22.8548076+07:00 0HMT15V3I964K:00000049 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:11:22.8560811+07:00 0HMT15V3I964K:00000049 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:11:22.8582650+07:00 0HMT15V3I964K:00000049 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:11:22.9042774+07:00 0HMT15V3I964K:0000004C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:11:22.9047971+07:00 0HMT15V3I964K:0000004C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:11:22.9048680+07:00 0HMT15V3I964L:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:11:22.9052296+07:00 0HMT15V3I964L:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:11:22.9062596+07:00 0HMT15V3I964L:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:11:22.9062588+07:00 0HMT15V3I964K:0000004C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:11:22.9081505+07:00 0HMT15V3I964K:0000004C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:11:22.9112389+07:00 0HMT15V3I964L:00000016 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:11:22.9243690+07:00 0HMT15V3I964K:0000004D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:11:22.9251427+07:00 0HMT15V3I964K:0000004D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:11:22.9267289+07:00 0HMT15V3I964K:0000004D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:11:22.9297983+07:00 0HMT15V3I964K:0000004D [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:11:36.3029512+07:00 0HMT15V3I964K:0000004F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:11:36.3034911+07:00 0HMT15V3I964K:0000004F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:11:36.3047761+07:00 0HMT15V3I964K:0000004F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:11:36.3085594+07:00 0HMT15V3I964K:0000004F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:11:36.3345546+07:00 0HMT15V3I964K:0000004F [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Users] SET [PhotoUrl] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T15:11:41.2554117+07:00 0HMT15V3I964K:00000051 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:11:41.2558747+07:00 0HMT15V3I964K:00000051 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:11:41.2571219+07:00 0HMT15V3I964K:00000051 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:11:41.2589278+07:00 0HMT15V3I964K:00000051 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:11:41.2794107+07:00 0HMT15V3I964L:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:11:41.2797164+07:00 0HMT15V3I964K:00000054 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:11:41.2799234+07:00 0HMT15V3I964L:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:11:41.2801030+07:00 0HMT15V3I964K:00000054 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:11:41.2812140+07:00 0HMT15V3I964K:00000054 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:11:41.2812141+07:00 0HMT15V3I964L:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:11:41.2828858+07:00 0HMT15V3I964L:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:11:41.2828709+07:00 0HMT15V3I964K:00000054 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:11:41.5356937+07:00 0HMT15V3I964K:00000056 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:11:41.5361487+07:00 0HMT15V3I964K:00000056 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:11:41.5373903+07:00 0HMT15V3I964K:00000056 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:11:41.5391511+07:00 0HMT15V3I964K:00000056 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:11:41.5791561+07:00 0HMT15V3I964K:00000058 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:11:41.5796854+07:00 0HMT15V3I964K:00000058 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:11:41.5797144+07:00 0HMT15V3I964L:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:11:41.5802107+07:00 0HMT15V3I964L:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:11:41.5815434+07:00 0HMT15V3I964K:00000058 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:11:41.5815434+07:00 0HMT15V3I964L:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:11:41.5837660+07:00 0HMT15V3I964K:00000058 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:11:41.5837634+07:00 0HMT15V3I964L:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:11:41.6185042+07:00 0HMT15V3I964K:0000005A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:11:41.6190708+07:00 0HMT15V3I964K:0000005A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:11:41.6205855+07:00 0HMT15V3I964K:0000005A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:11:41.6232732+07:00 0HMT15V3I964K:0000005A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:11:51.5168661+07:00 0HMT15V3I964K:0000005C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:11:51.5173413+07:00 0HMT15V3I964K:0000005C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:11:51.5188371+07:00 0HMT15V3I964K:0000005C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:11:51.5211688+07:00 0HMT15V3I964K:0000005C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:11:51.5604477+07:00 0HMT15V3I964K:0000005E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:11:51.5606359+07:00 0HMT15V3I964L:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:11:51.5609428+07:00 0HMT15V3I964L:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:11:51.5609414+07:00 0HMT15V3I964K:0000005E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:11:51.5621928+07:00 0HMT15V3I964K:0000005E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:11:51.5621927+07:00 0HMT15V3I964L:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:11:51.5639947+07:00 0HMT15V3I964K:0000005E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:11:51.5639312+07:00 0HMT15V3I964L:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:29:05.8172336+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T15:29:05.8254667+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T15:29:05.8257244+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T15:29:05.8257446+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T15:29:12.8123561+07:00 0HMT1AU477QC6:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T15:29:13.9076822+07:00 0HMT1AU477QC4:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:13.9076816+07:00 0HMT1AU477QC5:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:13.9077518+07:00 0HMT1AU477QC6:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:15.0110833+07:00 0HMT1AU477QC6:00000002 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:15.0110780+07:00 0HMT1AU477QC4:00000003 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:15.0110780+07:00 0HMT1AU477QC5:00000003 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:15.0520912+07:00 0HMT1AU477QC5:00000003 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:15.0520911+07:00 0HMT1AU477QC6:00000002 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:15.0520912+07:00 0HMT1AU477QC4:00000003 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:15.1146453+07:00 0HMT1AU477QC6:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:15.1203752+07:00 0HMT1AU477QC6:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:15.1222518+07:00 0HMT1AU477QC6:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:15.5480039+07:00 0HMT1AU477QC5:00000003 [INF] Executed DbCommand ("63"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T15:29:15.5480037+07:00 0HMT1AU477QC6:00000002 [INF] Executed DbCommand ("64"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T15:29:15.5480043+07:00 0HMT1AU477QC4:00000003 [INF] Executed DbCommand ("63"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T15:29:15.7361383+07:00 0HMT1AU477QC4:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'9f4a81f3-159c-4f90-90e8-0a9fe0f3a95b', N'c2f29374-f52f-4212-bb88-1c3a4bf1b10e')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'9f4a81f3-159c-4f90-90e8-0a9fe0f3a95b', N'c2f29374-f52f-4212-bb88-1c3a4bf1b10e')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T15:29:15.7803726+07:00 0HMT1AU477QC4:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T15:29:15.7891476+07:00 0HMT1AU477QC4:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T15:29:15.8067933+07:00 0HMT1AU477QC4:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T15:29:15.8101233+07:00 0HMT1AU477QC4:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T15:29:16.4985470+07:00 0HMT1AU477QC4:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:16.4991270+07:00 0HMT1AU477QC4:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:16.5004085+07:00 0HMT1AU477QC4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:16.5200545+07:00 0HMT1AU477QC4:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:29:16.6095129+07:00 0HMT1AU477QC4:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:16.6100210+07:00 0HMT1AU477QC4:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:16.6112992+07:00 0HMT1AU477QC4:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:16.6204464+07:00 0HMT1AU477QC5:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:16.6209843+07:00 0HMT1AU477QC5:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:16.6223488+07:00 0HMT1AU477QC5:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:16.6235788+07:00 0HMT1AU477QC4:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:29:16.6244591+07:00 0HMT1AU477QC5:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:29:16.7280669+07:00 0HMT1AU477QC4:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:16.7285651+07:00 0HMT1AU477QC4:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:16.7299494+07:00 0HMT1AU477QC4:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:16.7481236+07:00 0HMT1AU477QC4:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:29:45.3515357+07:00 0HMT1AU477QC4:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:45.3520354+07:00 0HMT1AU477QC4:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:45.3535026+07:00 0HMT1AU477QC4:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:45.3564296+07:00 0HMT1AU477QC4:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:29:45.4284397+07:00 0HMT1AU477QC4:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [MembershipStatus] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T15:29:47.8044269+07:00 0HMT1AU477QC4:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:47.8049580+07:00 0HMT1AU477QC4:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:47.8147703+07:00 0HMT1AU477QC4:0000000E [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:47.8192507+07:00 0HMT1AU477QC4:0000000E [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:29:47.8342804+07:00 0HMT1AU477QC4:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:47.8348407+07:00 0HMT1AU477QC4:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:47.8361770+07:00 0HMT1AU477QC4:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:47.8390471+07:00 0HMT1AU477QC4:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:29:47.8587025+07:00 0HMT1AU477QC4:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:47.8593453+07:00 0HMT1AU477QC4:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:47.8615481+07:00 0HMT1AU477QC4:00000012 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:47.8638009+07:00 0HMT1AU477QC4:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:29:47.8689781+07:00 0HMT1AU477QC4:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:47.8694566+07:00 0HMT1AU477QC4:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:47.8707696+07:00 0HMT1AU477QC4:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:47.8726686+07:00 0HMT1AU477QC4:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:29:56.5456828+07:00 0HMT1AU477QC4:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:56.5463371+07:00 0HMT1AU477QC4:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:56.5551700+07:00 0HMT1AU477QC4:00000015 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:56.5652000+07:00 0HMT1AU477QC4:00000015 [INF] Executed DbCommand ("3"ms) [Parameters=["@__ToLower_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE ((@__ToLower_0 LIKE N'') OR (CHARINDEX(@__ToLower_0, LOWER([u].[Email])) > 0)) OR ((LOWER([u].[Email]) LIKE N'') OR (CHARINDEX(LOWER([u].[Email]), @__ToLower_0) > 0))" (0723d8ff)
2023-08-20T15:29:57.1638702+07:00 0HMT1AU477QC4:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:57.1644114+07:00 0HMT1AU477QC4:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:57.1658038+07:00 0HMT1AU477QC4:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:57.1685679+07:00 0HMT1AU477QC4:00000018 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:29:57.1694881+07:00 0HMT1AU477QC5:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:57.1699215+07:00 0HMT1AU477QC5:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:57.1714044+07:00 0HMT1AU477QC5:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:57.1732738+07:00 0HMT1AU477QC5:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:29:57.1932024+07:00 0HMT1AU477QC4:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:57.1937724+07:00 0HMT1AU477QC4:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:57.1950849+07:00 0HMT1AU477QC4:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:57.1969752+07:00 0HMT1AU477QC4:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__ToLower_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE ((@__ToLower_0 LIKE N'') OR (CHARINDEX(@__ToLower_0, LOWER([u].[Email])) > 0)) OR ((LOWER([u].[Email]) LIKE N'') OR (CHARINDEX(LOWER([u].[Email]), @__ToLower_0) > 0))" (0723d8ff)
2023-08-20T15:29:57.2092762+07:00 0HMT1AU477QC4:0000001A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:57.2098834+07:00 0HMT1AU477QC4:0000001A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:57.2112827+07:00 0HMT1AU477QC4:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:57.2132650+07:00 0HMT1AU477QC4:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=["@__ToLower_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE ((@__ToLower_0 LIKE N'') OR (CHARINDEX(@__ToLower_0, LOWER([u].[Email])) > 0)) OR ((LOWER([u].[Email]) LIKE N'') OR (CHARINDEX(LOWER([u].[Email]), @__ToLower_0) > 0))" (0723d8ff)
2023-08-20T15:29:57.7966236+07:00 0HMT1AU477QC4:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:57.7970778+07:00 0HMT1AU477QC4:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:57.7983107+07:00 0HMT1AU477QC4:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:57.8084821+07:00 0HMT1AU477QC4:0000001C [INF] Executed DbCommand ("3"ms) [Parameters=["@__user1Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__user1Id_0) AND ([c].[ChatRoomType] = N'ONE')" (0723d8ff)
2023-08-20T15:29:57.8140211+07:00 0HMT1AU477QC4:0000001C [INF] Executed DbCommand ("2"ms) [Parameters=["@__user2Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[UserId] = @__user2Id_0) AND ([u].[ChatRoomId] = N'c2f29374-f52f-4212-bb88-1c3a4bf1b10e')" (0723d8ff)
2023-08-20T15:29:57.8526086+07:00 0HMT1AU477QC4:0000001C [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [ChatRooms] ([Id], [ChatRoomType], [CreatedTime], [CreatorId], [IsDeleted], [Name], [PhotoUrl], [UpdatedTime])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);" (0723d8ff)
2023-08-20T15:29:57.8645675+07:00 0HMT1AU477QC4:0000001C [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (Size = 50), @p6='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserChatRooms] ([Id], [ChatRoomId], [CreatedTime], [IsMuted], [LastMessageReadId], [MembershipStatus], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-20T15:29:57.8650163+07:00 0HMT1AU477QC4:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (Size = 50), @p6='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserChatRooms] ([Id], [ChatRoomId], [CreatedTime], [IsMuted], [LastMessageReadId], [MembershipStatus], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-20T15:29:57.8691116+07:00 0HMT1AU477QC4:0000001C [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] IN (N'6exXBlvTr7TcE0bKt7Up7zw7Pqj1', N'tW41X0lUHnNn9z8nz9TYFvKXD8Q2')" (0723d8ff)
2023-08-20T15:29:57.8813667+07:00 0HMT1AU477QC4:0000001C [INF] Executed DbCommand ("3"ms) [Parameters=["@__8__locals1_chatRoomSummary_ChatRoom_Id_0='?' (Size = 100), @__user_Id_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__8__locals1_chatRoomSummary_ChatRoom_Id_0) AND ([u].[UserId] = @__user_Id_1)" (0723d8ff)
2023-08-20T15:29:57.8860674+07:00 0HMT1AU477QC4:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=["@__8__locals1_chatRoomSummary_ChatRoom_Id_0='?' (Size = 100), @__user_Id_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__8__locals1_chatRoomSummary_ChatRoom_Id_0) AND ([u].[UserId] = @__user_Id_1)" (0723d8ff)
2023-08-20T15:29:57.8905489+07:00 0HMT1AU477QC4:0000001C [INF] Executed DbCommand ("2"ms) [Parameters=["@__chatRoom_Id_0='?' (Size = 100), @__chatRoom_CreatorId_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__chatRoom_Id_0) AND ([u].[UserId] = @__chatRoom_CreatorId_1)" (0723d8ff)
2023-08-20T15:29:57.9162607+07:00 0HMT1AU477QC4:0000001D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:57.9168237+07:00 0HMT1AU477QC4:0000001D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:57.9183125+07:00 0HMT1AU477QC4:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:57.9205309+07:00 0HMT1AU477QC4:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__ToLower_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE ((@__ToLower_0 LIKE N'') OR (CHARINDEX(@__ToLower_0, LOWER([u].[Email])) > 0)) OR ((LOWER([u].[Email]) LIKE N'') OR (CHARINDEX(LOWER([u].[Email]), @__ToLower_0) > 0))" (0723d8ff)
2023-08-20T15:29:57.9398656+07:00 0HMT1AU477QC4:0000001F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:57.9404090+07:00 0HMT1AU477QC4:0000001F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:57.9418932+07:00 0HMT1AU477QC4:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:57.9458089+07:00 0HMT1AU477QC4:0000001F [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:29:57.9613600+07:00 0HMT1AU477QC4:00000020 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:57.9619104+07:00 0HMT1AU477QC4:00000020 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:57.9632762+07:00 0HMT1AU477QC4:00000020 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:57.9826316+07:00 0HMT1AU477QC4:00000020 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 100), @p6='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserRelationships] ([Id], [CreatedTime], [InitiatorUserId], [RelationshipType], [Status], [TargetUserId], [UpdatedTime])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-20T15:29:57.9925389+07:00 0HMT1AU477QC4:00000020 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userRelationship_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE [u].[Id] = @__userRelationship_Id_0" (0723d8ff)
2023-08-20T15:29:58.0332738+07:00 0HMT1AU477QC4:00000021 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:29:58.0337456+07:00 0HMT1AU477QC4:00000021 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:29:58.0350055+07:00 0HMT1AU477QC4:00000021 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:29:58.0368190+07:00 0HMT1AU477QC4:00000021 [INF] Executed DbCommand ("1"ms) [Parameters=["@__ToLower_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE ((@__ToLower_0 LIKE N'') OR (CHARINDEX(@__ToLower_0, LOWER([u].[Email])) > 0)) OR ((LOWER([u].[Email]) LIKE N'') OR (CHARINDEX(LOWER([u].[Email]), @__ToLower_0) > 0))" (0723d8ff)
2023-08-20T15:30:02.0011923+07:00 0HMT1AU477QC4:00000023 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:30:02.0019003+07:00 0HMT1AU477QC4:00000023 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:30:02.0040044+07:00 0HMT1AU477QC4:00000023 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:30:02.0110925+07:00 0HMT1AU477QC4:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [ChatRooms] ([Id], [ChatRoomType], [CreatedTime], [CreatorId], [IsDeleted], [Name], [PhotoUrl], [UpdatedTime])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);" (0723d8ff)
2023-08-20T15:30:02.0148471+07:00 0HMT1AU477QC4:00000023 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (Size = 50), @p6='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserChatRooms] ([Id], [ChatRoomId], [CreatedTime], [IsMuted], [LastMessageReadId], [MembershipStatus], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-20T15:30:02.0153810+07:00 0HMT1AU477QC4:00000023 [INF] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (Size = 50), @p6='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserChatRooms] ([Id], [ChatRoomId], [CreatedTime], [IsMuted], [LastMessageReadId], [MembershipStatus], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-20T15:30:02.0158647+07:00 0HMT1AU477QC4:00000023 [INF] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (Size = 50), @p6='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserChatRooms] ([Id], [ChatRoomId], [CreatedTime], [IsMuted], [LastMessageReadId], [MembershipStatus], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-20T15:30:02.0214129+07:00 0HMT1AU477QC4:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] IN (N'WKcNU5wY2pTqEyR8YfgTqYTUP8Z2', N'tW41X0lUHnNn9z8nz9TYFvKXD8Q2', N'6exXBlvTr7TcE0bKt7Up7zw7Pqj1')" (0723d8ff)
2023-08-20T15:30:02.0223864+07:00 0HMT1AU477QC4:00000023 [INF] Executed DbCommand ("0"ms) [Parameters=["@__8__locals1_chatRoomSummary_ChatRoom_Id_0='?' (Size = 100), @__user_Id_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__8__locals1_chatRoomSummary_ChatRoom_Id_0) AND ([u].[UserId] = @__user_Id_1)" (0723d8ff)
2023-08-20T15:30:02.0231371+07:00 0HMT1AU477QC4:00000023 [INF] Executed DbCommand ("0"ms) [Parameters=["@__8__locals1_chatRoomSummary_ChatRoom_Id_0='?' (Size = 100), @__user_Id_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__8__locals1_chatRoomSummary_ChatRoom_Id_0) AND ([u].[UserId] = @__user_Id_1)" (0723d8ff)
2023-08-20T15:30:02.0236635+07:00 0HMT1AU477QC4:00000023 [INF] Executed DbCommand ("0"ms) [Parameters=["@__8__locals1_chatRoomSummary_ChatRoom_Id_0='?' (Size = 100), @__user_Id_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__8__locals1_chatRoomSummary_ChatRoom_Id_0) AND ([u].[UserId] = @__user_Id_1)" (0723d8ff)
2023-08-20T15:30:02.0245753+07:00 0HMT1AU477QC4:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=["@__chatRoom_Id_0='?' (Size = 100), @__chatRoom_CreatorId_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__chatRoom_Id_0) AND ([u].[UserId] = @__chatRoom_CreatorId_1)" (0723d8ff)
2023-08-20T15:31:42.6652510+07:00 0HMT1AU477QC4:00000025 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:31:42.6662613+07:00 0HMT1AU477QC4:00000025 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:31:42.6845637+07:00 0HMT1AU477QC4:00000025 [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:31:42.6890359+07:00 0HMT1AU477QC4:00000025 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:31:47.2837816+07:00 0HMT1AU477QC4:00000026 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:31:47.2837816+07:00 0HMT1AU477QC5:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:31:47.2845049+07:00 0HMT1AU477QC4:00000026 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:31:47.2845049+07:00 0HMT1AU477QC5:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:31:47.2864936+07:00 0HMT1AU477QC4:00000026 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:31:47.2864830+07:00 0HMT1AU477QC5:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:31:47.3010420+07:00 0HMT1AU477QC4:00000026 [INF] Executed DbCommand ("13"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:31:47.3010420+07:00 0HMT1AU477QC5:00000008 [INF] Executed DbCommand ("13"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:32:01.6524109+07:00 0HMT1AU477QC4:00000028 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:32:01.6529286+07:00 0HMT1AU477QC4:00000028 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:32:01.6617765+07:00 0HMT1AU477QC4:00000028 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:32:01.6653486+07:00 0HMT1AU477QC4:00000028 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:32:01.6671214+07:00 0HMT1AU477QC4:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [MembershipStatus] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T15:32:04.3518343+07:00 0HMT1AU477QC4:0000002A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:32:04.3523827+07:00 0HMT1AU477QC4:0000002A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:32:04.3621096+07:00 0HMT1AU477QC4:0000002A [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:32:04.3647016+07:00 0HMT1AU477QC4:0000002A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:32:08.2797182+07:00 0HMT1AU477QC4:0000002C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:32:08.2801821+07:00 0HMT1AU477QC4:0000002C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:32:08.2814467+07:00 0HMT1AU477QC4:0000002C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:32:08.2844811+07:00 0HMT1AU477QC4:0000002C [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [ChatRooms] ([Id], [ChatRoomType], [CreatedTime], [CreatorId], [IsDeleted], [Name], [PhotoUrl], [UpdatedTime])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);" (0723d8ff)
2023-08-20T15:32:08.2870013+07:00 0HMT1AU477QC4:0000002C [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (Size = 50), @p6='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserChatRooms] ([Id], [ChatRoomId], [CreatedTime], [IsMuted], [LastMessageReadId], [MembershipStatus], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-20T15:32:08.2874359+07:00 0HMT1AU477QC4:0000002C [INF] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (Size = 50), @p6='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserChatRooms] ([Id], [ChatRoomId], [CreatedTime], [IsMuted], [LastMessageReadId], [MembershipStatus], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-20T15:32:08.2878016+07:00 0HMT1AU477QC4:0000002C [INF] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (Size = 50), @p6='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserChatRooms] ([Id], [ChatRoomId], [CreatedTime], [IsMuted], [LastMessageReadId], [MembershipStatus], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-20T15:32:08.2891837+07:00 0HMT1AU477QC4:0000002C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] IN (N'WKcNU5wY2pTqEyR8YfgTqYTUP8Z2', N'tW41X0lUHnNn9z8nz9TYFvKXD8Q2', N'6exXBlvTr7TcE0bKt7Up7zw7Pqj1')" (0723d8ff)
2023-08-20T15:32:08.2909400+07:00 0HMT1AU477QC4:0000002C [INF] Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_chatRoomSummary_ChatRoom_Id_0='?' (Size = 100), @__user_Id_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__8__locals1_chatRoomSummary_ChatRoom_Id_0) AND ([u].[UserId] = @__user_Id_1)" (0723d8ff)
2023-08-20T15:32:08.2917889+07:00 0HMT1AU477QC4:0000002C [INF] Executed DbCommand ("0"ms) [Parameters=["@__8__locals1_chatRoomSummary_ChatRoom_Id_0='?' (Size = 100), @__user_Id_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__8__locals1_chatRoomSummary_ChatRoom_Id_0) AND ([u].[UserId] = @__user_Id_1)" (0723d8ff)
2023-08-20T15:32:08.2922503+07:00 0HMT1AU477QC4:0000002C [INF] Executed DbCommand ("0"ms) [Parameters=["@__8__locals1_chatRoomSummary_ChatRoom_Id_0='?' (Size = 100), @__user_Id_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__8__locals1_chatRoomSummary_ChatRoom_Id_0) AND ([u].[UserId] = @__user_Id_1)" (0723d8ff)
2023-08-20T15:32:08.2942376+07:00 0HMT1AU477QC4:0000002C [INF] Executed DbCommand ("2"ms) [Parameters=["@__chatRoom_Id_0='?' (Size = 100), @__chatRoom_CreatorId_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__chatRoom_Id_0) AND ([u].[UserId] = @__chatRoom_CreatorId_1)" (0723d8ff)
2023-08-20T15:32:08.3360173+07:00 0HMT1AU477QC4:0000002D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:32:08.3365033+07:00 0HMT1AU477QC4:0000002D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:32:08.3377831+07:00 0HMT1AU477QC4:0000002D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:32:08.3398474+07:00 0HMT1AU477QC4:0000002D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:32:10.1512436+07:00 0HMT1AU477QC4:0000002F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:32:10.1518332+07:00 0HMT1AU477QC4:0000002F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:32:10.1531954+07:00 0HMT1AU477QC4:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:32:10.1554578+07:00 0HMT1AU477QC4:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:32:10.1571726+07:00 0HMT1AU477QC4:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [MembershipStatus] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T15:32:49.8979397+07:00 0HMT1AU477QC6:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:32:49.8985960+07:00 0HMT1AU477QC6:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:32:49.9008503+07:00 0HMT1AU477QC6:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:32:53.1522143+07:00 0HMT1AU477QC4:00000031 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:32:53.1528243+07:00 0HMT1AU477QC4:00000031 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:32:53.1541621+07:00 0HMT1AU477QC4:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:32:53.1637418+07:00 0HMT1AU477QC5:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:32:53.1647434+07:00 0HMT1AU477QC4:00000031 [INF] Executed DbCommand ("9"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T15:32:53.1680538+07:00 0HMT1AU477QC5:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:32:53.1710678+07:00 0HMT1AU477QC5:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:32:53.1772901+07:00 0HMT1AU477QC4:00000031 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'07e5241b-6739-46e5-b102-2c635727de6b', N'c2f29374-f52f-4212-bb88-1c3a4bf1b10e')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'07e5241b-6739-46e5-b102-2c635727de6b', N'c2f29374-f52f-4212-bb88-1c3a4bf1b10e')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T15:32:53.1802947+07:00 0HMT1AU477QC5:0000000A [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T15:32:53.1803812+07:00 0HMT1AU477QC4:00000031 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T15:32:53.1822709+07:00 0HMT1AU477QC7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:32:53.1826797+07:00 0HMT1AU477QC7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:32:53.1829083+07:00 0HMT1AU477QC4:00000031 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T15:32:53.1839404+07:00 0HMT1AU477QC4:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T15:32:53.1840482+07:00 0HMT1AU477QC7:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:32:53.1848753+07:00 0HMT1AU477QC4:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T15:32:53.2628723+07:00 0HMT1AU477QC7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:32:53.2633390+07:00 0HMT1AU477QC7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:32:53.2645822+07:00 0HMT1AU477QC7:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:32:53.2662289+07:00 0HMT1AU477QC7:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T15:32:54.0223295+07:00 0HMT1AU477QC4:00000033 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:32:54.0228723+07:00 0HMT1AU477QC4:00000033 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:32:54.0241786+07:00 0HMT1AU477QC4:00000033 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:32:54.0281088+07:00 0HMT1AU477QC4:00000033 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:32:54.0853569+07:00 0HMT1AU477QC4:00000036 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:32:54.0858811+07:00 0HMT1AU477QC4:00000036 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:32:54.0871966+07:00 0HMT1AU477QC4:00000036 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:32:54.0891246+07:00 0HMT1AU477QC4:00000036 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:32:54.0982694+07:00 0HMT1AU477QC4:00000037 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:32:54.0988121+07:00 0HMT1AU477QC4:00000037 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:32:54.1002327+07:00 0HMT1AU477QC4:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:32:54.1022223+07:00 0HMT1AU477QC4:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:32:56.8551451+07:00 0HMT1AU477QC4:00000039 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:32:56.8558181+07:00 0HMT1AU477QC4:00000039 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:32:56.8576821+07:00 0HMT1AU477QC4:00000039 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:32:56.8597208+07:00 0HMT1AU477QC4:00000039 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [ChatRooms] ([Id], [ChatRoomType], [CreatedTime], [CreatorId], [IsDeleted], [Name], [PhotoUrl], [UpdatedTime])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);" (0723d8ff)
2023-08-20T15:32:56.8617273+07:00 0HMT1AU477QC4:00000039 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (Size = 50), @p6='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserChatRooms] ([Id], [ChatRoomId], [CreatedTime], [IsMuted], [LastMessageReadId], [MembershipStatus], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-20T15:32:56.8620851+07:00 0HMT1AU477QC4:00000039 [INF] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (Size = 50), @p6='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserChatRooms] ([Id], [ChatRoomId], [CreatedTime], [IsMuted], [LastMessageReadId], [MembershipStatus], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-20T15:32:56.8624332+07:00 0HMT1AU477QC4:00000039 [INF] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (Size = 50), @p6='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserChatRooms] ([Id], [ChatRoomId], [CreatedTime], [IsMuted], [LastMessageReadId], [MembershipStatus], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-20T15:32:56.8636105+07:00 0HMT1AU477QC4:00000039 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] IN (N'WKcNU5wY2pTqEyR8YfgTqYTUP8Z2', N'tW41X0lUHnNn9z8nz9TYFvKXD8Q2', N'6exXBlvTr7TcE0bKt7Up7zw7Pqj1')" (0723d8ff)
2023-08-20T15:32:56.8640707+07:00 0HMT1AU477QC4:00000039 [INF] Executed DbCommand ("0"ms) [Parameters=["@__8__locals1_chatRoomSummary_ChatRoom_Id_0='?' (Size = 100), @__user_Id_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__8__locals1_chatRoomSummary_ChatRoom_Id_0) AND ([u].[UserId] = @__user_Id_1)" (0723d8ff)
2023-08-20T15:32:56.8644436+07:00 0HMT1AU477QC4:00000039 [INF] Executed DbCommand ("0"ms) [Parameters=["@__8__locals1_chatRoomSummary_ChatRoom_Id_0='?' (Size = 100), @__user_Id_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__8__locals1_chatRoomSummary_ChatRoom_Id_0) AND ([u].[UserId] = @__user_Id_1)" (0723d8ff)
2023-08-20T15:32:56.8647049+07:00 0HMT1AU477QC4:00000039 [INF] Executed DbCommand ("0"ms) [Parameters=["@__8__locals1_chatRoomSummary_ChatRoom_Id_0='?' (Size = 100), @__user_Id_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__8__locals1_chatRoomSummary_ChatRoom_Id_0) AND ([u].[UserId] = @__user_Id_1)" (0723d8ff)
2023-08-20T15:32:56.8653640+07:00 0HMT1AU477QC4:00000039 [INF] Executed DbCommand ("1"ms) [Parameters=["@__chatRoom_Id_0='?' (Size = 100), @__chatRoom_CreatorId_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__chatRoom_Id_0) AND ([u].[UserId] = @__chatRoom_CreatorId_1)" (0723d8ff)
2023-08-20T15:32:56.9589900+07:00 0HMT1AU477QC4:0000003B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:32:56.9595440+07:00 0HMT1AU477QC4:0000003B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:32:56.9611167+07:00 0HMT1AU477QC4:0000003B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:32:56.9634208+07:00 0HMT1AU477QC4:0000003B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:32:56.9798131+07:00 0HMT1AU477QC4:0000003C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:32:56.9803768+07:00 0HMT1AU477QC4:0000003C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:32:56.9823391+07:00 0HMT1AU477QC4:0000003C [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:32:56.9840957+07:00 0HMT1AU477QC4:0000003C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:33:02.6989670+07:00 0HMT1AU477QC4:0000003E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:33:02.6996983+07:00 0HMT1AU477QC4:0000003E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:33:02.7016025+07:00 0HMT1AU477QC4:0000003E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:33:02.7032705+07:00 0HMT1AU477QC4:0000003E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:33:02.7054411+07:00 0HMT1AU477QC4:0000003E [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [MembershipStatus] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T15:33:48.6961184+07:00 0HMT1AU477QC4:00000040 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:33:48.6966843+07:00 0HMT1AU477QC4:00000040 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:33:48.7056444+07:00 0HMT1AU477QC4:00000040 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:33:48.7102755+07:00 0HMT1AU477QC4:00000040 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:33:48.7184356+07:00 0HMT1AU477QC4:00000042 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:33:48.7190274+07:00 0HMT1AU477QC4:00000042 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:33:48.7204038+07:00 0HMT1AU477QC4:00000042 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:33:48.7228129+07:00 0HMT1AU477QC4:00000042 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:33:49.0971717+07:00 0HMT1AU477QC4:00000044 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:33:49.0976491+07:00 0HMT1AU477QC4:00000044 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:33:49.0990325+07:00 0HMT1AU477QC4:00000044 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:33:49.1004857+07:00 0HMT1AU477QC4:00000044 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:33:49.1349229+07:00 0HMT1AU477QC4:00000046 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:33:49.1354547+07:00 0HMT1AU477QC4:00000046 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:33:49.1368808+07:00 0HMT1AU477QC4:00000046 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:33:49.1407815+07:00 0HMT1AU477QC5:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:33:49.1417510+07:00 0HMT1AU477QC5:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:33:49.1418625+07:00 0HMT1AU477QC4:00000046 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:33:49.1437070+07:00 0HMT1AU477QC5:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:33:49.1458883+07:00 0HMT1AU477QC5:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:33:49.3882108+07:00 0HMT1AU477QC4:00000047 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:33:49.3886734+07:00 0HMT1AU477QC4:00000047 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:33:49.3899314+07:00 0HMT1AU477QC4:00000047 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:33:49.3913777+07:00 0HMT1AU477QC4:00000047 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:33:49.4228367+07:00 0HMT1AU477QC4:00000048 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:33:49.4233504+07:00 0HMT1AU477QC4:00000048 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:33:49.4246291+07:00 0HMT1AU477QC4:00000048 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:33:49.4263053+07:00 0HMT1AU477QC5:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:33:49.4265419+07:00 0HMT1AU477QC4:00000048 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:33:49.4271589+07:00 0HMT1AU477QC5:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:33:49.4293808+07:00 0HMT1AU477QC5:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:33:49.4313407+07:00 0HMT1AU477QC5:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:33:50.2031884+07:00 0HMT1AU477QC4:0000004A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:33:50.2036685+07:00 0HMT1AU477QC4:0000004A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:33:50.2049342+07:00 0HMT1AU477QC4:0000004A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:33:50.2112793+07:00 0HMT1AU477QC4:0000004A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime]
FROM [UserRelationships] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:33:50.2235867+07:00 0HMT1AU477QC4:0000004A [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [UserRelationships]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T15:33:50.5833870+07:00 0HMT1AU477QC4:0000004B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:33:50.5838794+07:00 0HMT1AU477QC4:0000004B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:33:50.5851751+07:00 0HMT1AU477QC4:0000004B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:33:50.5866901+07:00 0HMT1AU477QC4:0000004B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:33:50.6174567+07:00 0HMT1AU477QC4:0000004C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:33:50.6179676+07:00 0HMT1AU477QC4:0000004C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:33:50.6192596+07:00 0HMT1AU477QC4:0000004C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:33:50.6209294+07:00 0HMT1AU477QC4:0000004C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:33:50.6236012+07:00 0HMT1AU477QC4:0000004D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:33:50.6241006+07:00 0HMT1AU477QC4:0000004D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:33:50.6254362+07:00 0HMT1AU477QC4:0000004D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:33:50.6273657+07:00 0HMT1AU477QC4:0000004D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:33:52.2422719+07:00 0HMT1AU477QC4:0000004E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:33:52.2427369+07:00 0HMT1AU477QC4:0000004E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:33:52.2439761+07:00 0HMT1AU477QC4:0000004E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:33:52.2454363+07:00 0HMT1AU477QC4:0000004E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T15:33:52.2733442+07:00 0HMT1AU477QC4:0000004F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:33:52.2738914+07:00 0HMT1AU477QC4:0000004F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:33:52.2752044+07:00 0HMT1AU477QC4:0000004F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:33:52.2779564+07:00 0HMT1AU477QC4:0000004F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:33:52.2791925+07:00 0HMT1AU477QC5:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:33:52.2796040+07:00 0HMT1AU477QC5:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:33:52.2808807+07:00 0HMT1AU477QC5:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:33:52.2826842+07:00 0HMT1AU477QC5:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T15:35:40.2278240+07:00 0HMT1AU477QC7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:35:40.2296468+07:00 0HMT1AU477QC7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:35:40.2457184+07:00 0HMT1AU477QC7:00000002 [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:35:42.0943735+07:00 0HMT1AU477QC4:00000051 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:35:42.0943806+07:00 0HMT1AU477QC5:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:35:42.0949089+07:00 0HMT1AU477QC4:00000051 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:35:42.0949088+07:00 0HMT1AU477QC5:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:35:42.0963233+07:00 0HMT1AU477QC4:00000051 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:35:42.0963233+07:00 0HMT1AU477QC5:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:35:42.1006658+07:00 0HMT1AU477QC4:00000051 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T15:35:42.1011980+07:00 0HMT1AU477QC5:00000011 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T15:35:42.1079543+07:00 0HMT1AU477QC4:00000051 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'07e5241b-6739-46e5-b102-2c635727de6b', N'c2f29374-f52f-4212-bb88-1c3a4bf1b10e')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'07e5241b-6739-46e5-b102-2c635727de6b', N'c2f29374-f52f-4212-bb88-1c3a4bf1b10e')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T15:35:42.1102684+07:00 0HMT1AU477QC4:00000051 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T15:35:42.1127025+07:00 0HMT1AU477QC4:00000051 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T15:35:42.1140144+07:00 0HMT1AU477QC4:00000051 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T15:35:42.1150957+07:00 0HMT1AU477QC4:00000051 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T15:35:42.1397812+07:00 0HMT1AU477QC8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:35:42.1402690+07:00 0HMT1AU477QC8:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:35:42.1417178+07:00 0HMT1AU477QC8:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:35:42.1714088+07:00 0HMT1AU477QC8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T15:35:42.1719340+07:00 0HMT1AU477QC8:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T15:35:42.1735125+07:00 0HMT1AU477QC8:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T15:35:42.1761484+07:00 0HMT1AU477QC8:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T15:35:51.9390195+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T15:35:51.9564907+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T15:35:51.9569999+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T15:35:51.9570559+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T15:59:48.3285257+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T15:59:48.3380776+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T15:59:48.3383831+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T15:59:48.3384062+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T16:35:14.2824208+07:00 0HMT1C30PQC46:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T16:35:15.3973276+07:00 0HMT1C30PQC46:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:35:16.0629833+07:00 0HMT1C30PQC46:00000002 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:35:16.1087191+07:00 0HMT1C30PQC46:00000002 [INF] Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:35:16.5759263+07:00 0HMT1C30PQC46:00000002 [INF] Executed DbCommand ("50"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:35:24.9517877+07:00 0HMT1C30PQC46:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:35:24.9737524+07:00 0HMT1C30PQC46:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:35:24.9750816+07:00 0HMT1C30PQC46:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:35:24.9808824+07:00 0HMT1C30PQC46:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:35:26.4068644+07:00 0HMT1C30PQC45:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:35:26.4068643+07:00 0HMT1C30PQC46:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:35:26.4164994+07:00 0HMT1C30PQC45:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:35:26.4189300+07:00 0HMT1C30PQC45:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:35:26.4199475+07:00 0HMT1C30PQC46:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:35:26.4223546+07:00 0HMT1C30PQC46:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:35:26.4598519+07:00 0HMT1C30PQC47:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:35:26.4608269+07:00 0HMT1C30PQC47:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:35:26.4633432+07:00 0HMT1C30PQC47:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:35:26.4811837+07:00 0HMT1C30PQC47:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:35:26.4818080+07:00 0HMT1C30PQC47:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:35:26.4836639+07:00 0HMT1C30PQC47:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:35:26.5196858+07:00 0HMT1C30PQC47:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T16:35:26.6410789+07:00 0HMT1C30PQC45:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:35:26.6475199+07:00 0HMT1C30PQC46:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:35:26.8234253+07:00 0HMT1C30PQC46:00000006 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:35:26.8713243+07:00 0HMT1C30PQC46:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:35:26.8832183+07:00 0HMT1C30PQC46:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:35:37.2121632+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T16:35:37.2208980+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T16:35:37.2212282+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T16:35:37.2212529+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T16:35:38.4458658+07:00 0HMT1C381KMUQ:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T16:35:39.3317463+07:00 0HMT1C381KMUQ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:35:39.6656100+07:00 0HMT1C381KMUQ:00000002 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:35:39.6989433+07:00 0HMT1C381KMUQ:00000002 [INF] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:35:43.5156806+07:00 0HMT1C381KMUS:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:35:43.5267062+07:00 0HMT1C381KMUS:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:35:43.5282310+07:00 0HMT1C381KMUS:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:35:43.6336388+07:00 0HMT1C381KMUR:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:35:43.6336388+07:00 0HMT1C381KMUT:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:35:43.6386640+07:00 0HMT1C381KMUT:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:35:43.6411871+07:00 0HMT1C381KMUT:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:35:43.6415665+07:00 0HMT1C381KMUR:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:35:43.6434665+07:00 0HMT1C381KMUR:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:35:44.0899755+07:00 0HMT1C381KMUR:00000004 [INF] Executed DbCommand ("60"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:35:44.0899755+07:00 0HMT1C381KMUT:00000003 [INF] Executed DbCommand ("46"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:35:44.0900007+07:00 0HMT1C381KMUS:00000002 [INF] Executed DbCommand ("60"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T16:35:44.2276663+07:00 0HMT1C381KMUT:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:35:44.2284256+07:00 0HMT1C381KMUT:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:35:44.2297334+07:00 0HMT1C381KMUT:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:35:44.2507760+07:00 0HMT1C381KMUT:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:35:45.4222834+07:00 0HMT1C381KMUS:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:35:45.4229015+07:00 0HMT1C381KMUS:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:35:45.4241638+07:00 0HMT1C381KMUS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:35:45.5493213+07:00 0HMT1C381KMUS:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T16:35:45.5924953+07:00 0HMT1C381KMUS:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T16:35:48.6118668+07:00 0HMT1C381KMUR:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:35:48.6124243+07:00 0HMT1C381KMUR:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:35:48.6137746+07:00 0HMT1C381KMUR:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:35:48.6314295+07:00 0HMT1C381KMUR:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__8__locals1_lastMessageId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[CreatedTime]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__8__locals1_lastMessageId_0" (0723d8ff)
2023-08-20T16:35:48.6463103+07:00 0HMT1C381KMUR:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_3='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100), @__lastMessageTime_1='?' (DbType = DateTime2), @__8__locals1_lastMessageId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_3) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE ([m].[ChatRoomId] = @__chatRoomId_0) AND (([m].[CreatedTime] <= @__lastMessageTime_1) AND ([m].[Id] <> @__8__locals1_lastMessageId_2))
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T16:35:48.6834360+07:00 0HMT1C381KMUT:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:35:48.6841944+07:00 0HMT1C381KMUT:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:35:48.6862540+07:00 0HMT1C381KMUT:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:35:48.6886852+07:00 0HMT1C381KMUT:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:35:54.1182552+07:00 0HMT1C381KMUT:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:35:54.1187940+07:00 0HMT1C381KMUT:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:35:54.1201126+07:00 0HMT1C381KMUT:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:35:54.1212670+07:00 0HMT1C381KMUT:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_lastMessageId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[CreatedTime]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__8__locals1_lastMessageId_0" (0723d8ff)
2023-08-20T16:35:54.1230935+07:00 0HMT1C381KMUT:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_3='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100), @__lastMessageTime_1='?' (DbType = DateTime2), @__8__locals1_lastMessageId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_3) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE ([m].[ChatRoomId] = @__chatRoomId_0) AND (([m].[CreatedTime] <= @__lastMessageTime_1) AND ([m].[Id] <> @__8__locals1_lastMessageId_2))
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T16:35:54.1495257+07:00 0HMT1C381KMUT:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:35:54.1501408+07:00 0HMT1C381KMUT:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:35:54.1515898+07:00 0HMT1C381KMUT:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:35:54.1541289+07:00 0HMT1C381KMUT:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:35:58.9296312+07:00 0HMT1C381KMUS:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:35:58.9301615+07:00 0HMT1C381KMUS:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:35:58.9314047+07:00 0HMT1C381KMUS:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:35:58.9332604+07:00 0HMT1C381KMUS:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T16:35:58.9349396+07:00 0HMT1C381KMUS:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T16:36:43.0670287+07:00 0HMT1C381KMUR:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:36:43.0671458+07:00 0HMT1C381KMUT:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:36:43.0675511+07:00 0HMT1C381KMUR:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:36:43.0675703+07:00 0HMT1C381KMUT:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:36:43.0765049+07:00 0HMT1C381KMUR:0000000C [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:36:43.0765050+07:00 0HMT1C381KMUT:0000000A [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:36:43.0965330+07:00 0HMT1C381KMUR:0000000C [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:36:43.1024669+07:00 0HMT1C381KMUT:0000000A [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:36:43.2052629+07:00 0HMT1C381KMUT:0000000A [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:36:43.2126789+07:00 0HMT1C381KMUT:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:36:43.2353919+07:00 0HMT1C381KMUT:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:36:43.2453469+07:00 0HMT1C381KMUT:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:37:31.7304480+07:00 0HMT1C381KMUR:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:37:31.7304480+07:00 0HMT1C381KMUT:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:37:31.7311468+07:00 0HMT1C381KMUT:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:37:31.7314718+07:00 0HMT1C381KMUR:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:37:31.7402637+07:00 0HMT1C381KMUR:0000000E [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:37:31.7402637+07:00 0HMT1C381KMUT:0000000C [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:37:31.7447664+07:00 0HMT1C381KMUR:0000000E [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:37:31.7496041+07:00 0HMT1C381KMUT:0000000C [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:37:31.7585885+07:00 0HMT1C381KMUT:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:37:31.7608359+07:00 0HMT1C381KMUT:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:37:31.7636815+07:00 0HMT1C381KMUT:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:37:31.7661013+07:00 0HMT1C381KMUT:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:37:33.0601862+07:00 0HMT1C381KMUT:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:37:33.0607657+07:00 0HMT1C381KMUT:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:37:33.0624009+07:00 0HMT1C381KMUT:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:37:33.0644170+07:00 0HMT1C381KMUT:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:37:33.0657581+07:00 0HMT1C381KMUR:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:37:33.0664645+07:00 0HMT1C381KMUT:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:37:33.0665045+07:00 0HMT1C381KMUR:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:37:33.0680127+07:00 0HMT1C381KMUT:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:37:33.0680360+07:00 0HMT1C381KMUR:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:37:33.0724850+07:00 0HMT1C381KMUT:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:37:33.0732637+07:00 0HMT1C381KMUR:0000000F [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:37:33.0775596+07:00 0HMT1C381KMUT:0000000D [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:37:33.0790335+07:00 0HMT1C381KMUQ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:37:33.0801269+07:00 0HMT1C381KMUQ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:37:33.0814864+07:00 0HMT1C381KMUQ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:37:33.1833966+07:00 0HMT1C381KMUU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:37:33.1843597+07:00 0HMT1C381KMUU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:37:33.1857850+07:00 0HMT1C381KMUU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:37:33.2127729+07:00 0HMT1C381KMUU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:37:33.2133663+07:00 0HMT1C381KMUU:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:37:33.2147790+07:00 0HMT1C381KMUU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:37:33.2228672+07:00 0HMT1C381KMUU:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T16:37:36.2255996+07:00 0HMT1C381KMUU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:37:36.2261084+07:00 0HMT1C381KMUU:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:37:36.2274569+07:00 0HMT1C381KMUU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:37:36.3060272+07:00 0HMT1C381KMUV:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:37:36.3071439+07:00 0HMT1C381KMUV:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:37:36.3090430+07:00 0HMT1C381KMUV:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:37:36.3106199+07:00 0HMT1C381KMUV:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:37:36.3112692+07:00 0HMT1C381KMUV:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:37:36.3135831+07:00 0HMT1C381KMUV:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:37:38.6378679+07:00 0HMT1C381KMUT:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:37:38.6384319+07:00 0HMT1C381KMUT:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:37:38.6397817+07:00 0HMT1C381KMUT:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:37:38.6418629+07:00 0HMT1C381KMUT:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:37:38.6458867+07:00 0HMT1C381KMUT:0000000F [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:37:38.6503139+07:00 0HMT1C381KMUT:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:37:38.6522891+07:00 0HMT1C381KMUT:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:37:38.6533765+07:00 0HMT1C381KMUT:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:37:38.6599641+07:00 0HMT1C381KMUT:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:37:38.6606598+07:00 0HMT1C381KMUT:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:37:38.6623905+07:00 0HMT1C381KMUT:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:37:38.6641188+07:00 0HMT1C381KMUT:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:37:38.7626584+07:00 0HMT1C381KMV0:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:37:38.7631373+07:00 0HMT1C381KMV0:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:37:38.7652296+07:00 0HMT1C381KMV0:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:37:38.7717594+07:00 0HMT1C381KMV0:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:37:38.7723227+07:00 0HMT1C381KMV0:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:37:38.7738161+07:00 0HMT1C381KMV0:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:37:38.7751853+07:00 0HMT1C381KMV0:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T16:37:46.3112874+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T16:37:46.3299443+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T16:37:46.3305870+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T16:37:46.3306342+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T16:37:46.4733972+07:00 0HMT1C4E6I5JQ:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T16:37:47.5089476+07:00 0HMT1C4E6I5JQ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:37:47.8370281+07:00 0HMT1C4E6I5JQ:00000002 [INF] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:37:47.8719378+07:00 0HMT1C4E6I5JQ:00000002 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:37:50.1388823+07:00 0HMT1C4E6I5JR:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:37:50.1532863+07:00 0HMT1C4E6I5JR:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:37:50.1580519+07:00 0HMT1C4E6I5JR:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:37:50.2810938+07:00 0HMT1C4E6I5JT:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:37:50.2810937+07:00 0HMT1C4E6I5JS:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:37:50.2864775+07:00 0HMT1C4E6I5JT:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:37:50.2880760+07:00 0HMT1C4E6I5JT:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:37:50.2895333+07:00 0HMT1C4E6I5JS:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:37:50.2910594+07:00 0HMT1C4E6I5JS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:37:50.7005330+07:00 0HMT1C4E6I5JT:00000003 [INF] Executed DbCommand ("56"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:37:50.7005330+07:00 0HMT1C4E6I5JS:00000003 [INF] Executed DbCommand ("42"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:37:50.7005750+07:00 0HMT1C4E6I5JR:00000003 [INF] Executed DbCommand ("56"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T16:37:50.8590197+07:00 0HMT1C4E6I5JR:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:37:50.8597746+07:00 0HMT1C4E6I5JR:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:37:50.8612326+07:00 0HMT1C4E6I5JR:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:37:50.8825851+07:00 0HMT1C4E6I5JR:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:37:51.0040650+07:00 0HMT1C4E6I5JR:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T16:37:52.7173302+07:00 0HMT1C4E6I5JR:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:37:52.7178359+07:00 0HMT1C4E6I5JR:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:37:52.7194490+07:00 0HMT1C4E6I5JR:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:37:52.7641954+07:00 0HMT1C4E6I5JR:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T16:37:52.7768269+07:00 0HMT1C4E6I5JR:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T16:37:57.1957841+07:00 0HMT1C4E6I5JR:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:37:57.1963597+07:00 0HMT1C4E6I5JR:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:37:57.1977126+07:00 0HMT1C4E6I5JR:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:37:57.2007202+07:00 0HMT1C4E6I5JR:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T16:37:57.2022659+07:00 0HMT1C4E6I5JR:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T16:38:23.7884493+07:00 0HMT1C4E6I5JR:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:38:23.7889515+07:00 0HMT1C4E6I5JR:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:38:23.7913170+07:00 0HMT1C4E6I5JT:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:38:23.7918075+07:00 0HMT1C4E6I5JT:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:38:23.7986256+07:00 0HMT1C4E6I5JT:00000004 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:38:23.8000621+07:00 0HMT1C4E6I5JR:0000000A [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:38:23.8168780+07:00 0HMT1C4E6I5JR:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:38:23.8220221+07:00 0HMT1C4E6I5JT:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:38:23.9455682+07:00 0HMT1C4E6I5JT:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:38:23.9511054+07:00 0HMT1C4E6I5JT:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:38:23.9729080+07:00 0HMT1C4E6I5JT:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:38:23.9809811+07:00 0HMT1C4E6I5JT:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:38:24.9881525+07:00 0HMT1C4E6I5JR:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:38:24.9887096+07:00 0HMT1C4E6I5JR:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:38:24.9901729+07:00 0HMT1C4E6I5JR:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:38:24.9936561+07:00 0HMT1C4E6I5JR:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T16:38:25.0646965+07:00 0HMT1C4E6I5JR:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:38:25.0654344+07:00 0HMT1C4E6I5JR:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:38:25.0669390+07:00 0HMT1C4E6I5JR:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:38:25.0674419+07:00 0HMT1C4E6I5JT:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:38:25.0678903+07:00 0HMT1C4E6I5JT:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:38:25.0697098+07:00 0HMT1C4E6I5JT:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:38:25.0696430+07:00 0HMT1C4E6I5JR:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:38:25.0716076+07:00 0HMT1C4E6I5JT:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:38:25.0753060+07:00 0HMT1C4E6I5JR:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:38:25.0760712+07:00 0HMT1C4E6I5JR:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:38:25.0777056+07:00 0HMT1C4E6I5JR:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:38:25.0808999+07:00 0HMT1C4E6I5JR:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:38:25.0838696+07:00 0HMT1C4E6I5JR:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T16:38:29.7065761+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T16:38:29.7138221+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T16:38:29.7140576+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T16:38:29.7140821+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T16:38:29.9632790+07:00 0HMT1C4R51IJG:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T16:38:31.0485934+07:00 0HMT1C4R51IJG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:38:31.3806449+07:00 0HMT1C4R51IJG:00000002 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:38:31.4123387+07:00 0HMT1C4R51IJG:00000002 [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:39:00.9734634+07:00 0HMT1C4R51IJJ:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:39:00.9734634+07:00 0HMT1C4R51IJI:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:39:00.9819339+07:00 0HMT1C4R51IJI:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:39:00.9833234+07:00 0HMT1C4R51IJJ:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:39:00.9836209+07:00 0HMT1C4R51IJI:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:39:00.9848551+07:00 0HMT1C4R51IJJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:39:01.6532003+07:00 0HMT1C4R51IJJ:00000003 [INF] Executed DbCommand ("57"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:39:01.6532004+07:00 0HMT1C4R51IJI:00000003 [INF] Executed DbCommand ("57"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:39:01.8642177+07:00 0HMT1C4R51IJI:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:39:01.9076466+07:00 0HMT1C4R51IJI:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:39:01.9150550+07:00 0HMT1C4R51IJI:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:47:23.9495065+07:00 0HMT1C4R51IJL:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:47:23.9495066+07:00 0HMT1C4R51IJK:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:47:23.9598613+07:00 0HMT1C4R51IJL:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:47:23.9628963+07:00 0HMT1C4R51IJK:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:47:23.9748349+07:00 0HMT1C4R51IJL:00000003 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:47:23.9748349+07:00 0HMT1C4R51IJK:00000003 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:47:23.9847649+07:00 0HMT1C4R51IJK:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:47:23.9854997+07:00 0HMT1C4R51IJL:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:47:23.9912213+07:00 0HMT1C4R51IJK:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:47:23.9949383+07:00 0HMT1C4R51IJK:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:47:23.9995352+07:00 0HMT1C4R51IJK:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:47:25.0946345+07:00 0HMT1C4R51IJK:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:47:25.0951426+07:00 0HMT1C4R51IJK:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:47:25.0964776+07:00 0HMT1C4R51IJK:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:47:25.1168461+07:00 0HMT1C4R51IJK:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T16:47:25.1602933+07:00 0HMT1C4R51IJK:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:47:25.1609775+07:00 0HMT1C4R51IJK:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:47:25.1623672+07:00 0HMT1C4R51IJK:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:47:25.1763613+07:00 0HMT1C4R51IJK:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:47:25.1905282+07:00 0HMT1C4R51IJK:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:47:25.1911626+07:00 0HMT1C4R51IJK:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:47:25.1928507+07:00 0HMT1C4R51IJK:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:47:25.1947279+07:00 0HMT1C4R51IJK:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:47:25.2235189+07:00 0HMT1C4R51IJK:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:47:25.2240788+07:00 0HMT1C4R51IJK:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:47:25.2253800+07:00 0HMT1C4R51IJK:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:47:25.2427862+07:00 0HMT1C4R51IJK:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:47:26.4462250+07:00 0HMT1C4R51IJK:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:47:26.4467440+07:00 0HMT1C4R51IJK:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:47:26.4479970+07:00 0HMT1C4R51IJK:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:47:26.5467419+07:00 0HMT1C4R51IJK:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T16:47:26.5863893+07:00 0HMT1C4R51IJK:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T16:47:28.4745448+07:00 0HMT1C4R51IJG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:47:28.4755004+07:00 0HMT1C4R51IJG:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:47:28.4780456+07:00 0HMT1C4R51IJG:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:47:30.5709402+07:00 0HMT1C4R51IJK:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:47:30.5716621+07:00 0HMT1C4R51IJK:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:47:30.5731216+07:00 0HMT1C4R51IJL:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:47:30.5735571+07:00 0HMT1C4R51IJK:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:47:30.5742353+07:00 0HMT1C4R51IJL:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:47:30.5767370+07:00 0HMT1C4R51IJL:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:47:30.5769382+07:00 0HMT1C4R51IJK:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:47:30.5807364+07:00 0HMT1C4R51IJK:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:47:30.5819130+07:00 0HMT1C4R51IJL:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:47:30.5950130+07:00 0HMT1C4R51IJK:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:47:30.5965338+07:00 0HMT1C4R51IJK:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:47:30.5976799+07:00 0HMT1C4R51IJK:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:47:30.6916579+07:00 0HMT1C4R51IJM:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:47:30.6923120+07:00 0HMT1C4R51IJM:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:47:30.6938732+07:00 0HMT1C4R51IJM:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:47:30.7323219+07:00 0HMT1C4R51IJM:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:47:30.7331203+07:00 0HMT1C4R51IJM:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:47:30.7351085+07:00 0HMT1C4R51IJM:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:47:30.7439445+07:00 0HMT1C4R51IJM:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T16:47:31.1292081+07:00 0HMT1C4R51IJK:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:47:31.1297715+07:00 0HMT1C4R51IJK:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:47:31.1311928+07:00 0HMT1C4R51IJK:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:47:31.1339947+07:00 0HMT1C4R51IJK:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T16:47:31.2342662+07:00 0HMT1C4R51IJK:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:47:31.2348077+07:00 0HMT1C4R51IJK:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:47:31.2362751+07:00 0HMT1C4R51IJK:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:47:31.2384504+07:00 0HMT1C4R51IJK:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:47:31.2592957+07:00 0HMT1C4R51IJK:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:47:31.2598910+07:00 0HMT1C4R51IJK:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:47:31.2614127+07:00 0HMT1C4R51IJK:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:47:31.2641133+07:00 0HMT1C4R51IJK:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:47:31.3084188+07:00 0HMT1C4R51IJK:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:47:31.3089771+07:00 0HMT1C4R51IJK:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:47:31.3102988+07:00 0HMT1C4R51IJK:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:47:31.3120337+07:00 0HMT1C4R51IJK:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:47:31.3331475+07:00 0HMT1C4R51IJK:00000015 [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T16:47:32.1397014+07:00 0HMT1C4R51IJK:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:47:32.1401676+07:00 0HMT1C4R51IJK:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:47:32.1414435+07:00 0HMT1C4R51IJK:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:47:32.1436665+07:00 0HMT1C4R51IJK:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T16:47:32.1450510+07:00 0HMT1C4R51IJK:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T16:47:32.1785079+07:00 0HMT1C4R51IJK:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:47:32.1793138+07:00 0HMT1C4R51IJK:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:47:32.1807700+07:00 0HMT1C4R51IJK:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:47:32.1828295+07:00 0HMT1C4R51IJK:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:47:32.1853497+07:00 0HMT1C4R51IJK:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T16:47:38.6469007+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T16:47:38.6552767+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T16:47:38.6555801+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T16:47:38.6556024+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T16:47:41.7195853+07:00 0HMT1C9VJBIEA:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T16:47:42.6220892+07:00 0HMT1C9VJBIEA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:47:42.9531761+07:00 0HMT1C9VJBIEA:00000002 [INF] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:47:42.9865924+07:00 0HMT1C9VJBIEA:00000002 [INF] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:47:46.1249154+07:00 0HMT1C9VJBIEC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:47:46.1316417+07:00 0HMT1C9VJBIEC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:47:46.1331257+07:00 0HMT1C9VJBIEC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:47:46.5455733+07:00 0HMT1C9VJBIEC:00000002 [INF] Executed DbCommand ("48"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T16:47:46.9472479+07:00 0HMT1C9VJBIEC:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T16:47:47.2757870+07:00 0HMT1C9VJBIEC:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:47:47.2805911+07:00 0HMT1C9VJBIEC:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:47:47.2820210+07:00 0HMT1C9VJBIEC:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:47:47.2873897+07:00 0HMT1C9VJBIEC:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T16:47:47.2912258+07:00 0HMT1C9VJBIEC:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T16:47:49.4769807+07:00 0HMT1C9VJBIEC:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:47:49.4775194+07:00 0HMT1C9VJBIEC:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:47:49.4791228+07:00 0HMT1C9VJBIEC:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:47:49.4821343+07:00 0HMT1C9VJBIEC:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T16:47:49.4835560+07:00 0HMT1C9VJBIEC:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T16:50:30.5797903+07:00 0HMT1C9VJBIED:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:30.5797904+07:00 0HMT1C9VJBIEE:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:30.5846877+07:00 0HMT1C9VJBIEE:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:30.5908676+07:00 0HMT1C9VJBIED:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:30.5979902+07:00 0HMT1C9VJBIEE:00000003 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:30.5979901+07:00 0HMT1C9VJBIED:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:30.6318415+07:00 0HMT1C9VJBIEE:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:50:30.6400258+07:00 0HMT1C9VJBIED:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:50:30.8070168+07:00 0HMT1C9VJBIED:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:50:30.8266687+07:00 0HMT1C9VJBIED:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:50:30.8566827+07:00 0HMT1C9VJBIED:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:50:30.8664884+07:00 0HMT1C9VJBIED:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:50:31.9397331+07:00 0HMT1C9VJBIED:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:31.9402363+07:00 0HMT1C9VJBIED:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:31.9415099+07:00 0HMT1C9VJBIED:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:31.9585004+07:00 0HMT1C9VJBIED:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T16:50:32.0030018+07:00 0HMT1C9VJBIED:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:32.0029989+07:00 0HMT1C9VJBIEE:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:32.0036646+07:00 0HMT1C9VJBIED:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:32.0036646+07:00 0HMT1C9VJBIEE:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:32.0053020+07:00 0HMT1C9VJBIED:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:32.0053021+07:00 0HMT1C9VJBIEE:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:32.0118423+07:00 0HMT1C9VJBIED:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:50:32.0119344+07:00 0HMT1C9VJBIEE:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:50:32.0622567+07:00 0HMT1C9VJBIED:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:32.0628770+07:00 0HMT1C9VJBIED:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:32.0642294+07:00 0HMT1C9VJBIED:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:32.0747853+07:00 0HMT1C9VJBIED:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:50:32.0965419+07:00 0HMT1C9VJBIED:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T16:50:33.1648005+07:00 0HMT1C9VJBIEA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:33.1654342+07:00 0HMT1C9VJBIEA:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:33.1667996+07:00 0HMT1C9VJBIEA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:35.0801805+07:00 0HMT1C9VJBIED:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:35.0809026+07:00 0HMT1C9VJBIED:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:35.0824723+07:00 0HMT1C9VJBIED:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:35.0843099+07:00 0HMT1C9VJBIED:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:50:35.0869261+07:00 0HMT1C9VJBIED:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:50:35.0872009+07:00 0HMT1C9VJBIEE:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:35.0877394+07:00 0HMT1C9VJBIEE:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:35.0880859+07:00 0HMT1C9VJBIED:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:50:35.0889225+07:00 0HMT1C9VJBIED:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:50:35.0894326+07:00 0HMT1C9VJBIEE:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:35.0910767+07:00 0HMT1C9VJBIEE:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:50:35.1377710+07:00 0HMT1C9VJBIEF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:35.1383180+07:00 0HMT1C9VJBIEF:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:35.1396305+07:00 0HMT1C9VJBIEF:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:35.1446500+07:00 0HMT1C9VJBIEF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:35.1451399+07:00 0HMT1C9VJBIEF:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:35.1465628+07:00 0HMT1C9VJBIEF:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:35.1556676+07:00 0HMT1C9VJBIEF:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T16:50:35.2369503+07:00 0HMT1C9VJBIED:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:35.2374622+07:00 0HMT1C9VJBIED:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:35.2387553+07:00 0HMT1C9VJBIED:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:35.2421955+07:00 0HMT1C9VJBIED:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T16:50:35.3400580+07:00 0HMT1C9VJBIED:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:35.3405594+07:00 0HMT1C9VJBIED:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:35.3418877+07:00 0HMT1C9VJBIED:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:35.3421382+07:00 0HMT1C9VJBIEE:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:35.3425131+07:00 0HMT1C9VJBIEE:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:35.3435730+07:00 0HMT1C9VJBIED:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:50:35.3442029+07:00 0HMT1C9VJBIEE:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:35.3464087+07:00 0HMT1C9VJBIEE:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:50:35.3483895+07:00 0HMT1C9VJBIED:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:35.3491390+07:00 0HMT1C9VJBIED:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:35.3506554+07:00 0HMT1C9VJBIED:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:35.3541088+07:00 0HMT1C9VJBIED:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:50:36.8770672+07:00 0HMT1C9VJBIED:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:36.8776148+07:00 0HMT1C9VJBIED:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:36.8790445+07:00 0HMT1C9VJBIED:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:36.8819873+07:00 0HMT1C9VJBIED:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T16:50:36.8843393+07:00 0HMT1C9VJBIED:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T16:50:36.9196071+07:00 0HMT1C9VJBIED:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:36.9201586+07:00 0HMT1C9VJBIED:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:36.9228432+07:00 0HMT1C9VJBIED:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:36.9251366+07:00 0HMT1C9VJBIED:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:50:36.9274247+07:00 0HMT1C9VJBIED:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T16:50:42.1177131+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T16:50:42.1250617+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T16:50:42.1252975+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T16:50:42.1253215+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T16:50:42.4505938+07:00 0HMT1CBLEDNP7:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T16:50:43.5661442+07:00 0HMT1CBLEDNP7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:43.8998252+07:00 0HMT1CBLEDNP7:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:43.9344485+07:00 0HMT1CBLEDNP7:00000002 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:43.9554946+07:00 0HMT1CBLEDNP7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:43.9626891+07:00 0HMT1CBLEDNP7:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:43.9655259+07:00 0HMT1CBLEDNP7:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:44.3618458+07:00 0HMT1CBLEDNP7:00000002 [INF] Executed DbCommand ("47"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T16:50:48.2239926+07:00 0HMT1CBLEDNPA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:48.2286711+07:00 0HMT1CBLEDNPA:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:48.2301007+07:00 0HMT1CBLEDNPA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:48.5138369+07:00 0HMT1CBLEDNPA:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T16:50:48.6206559+07:00 0HMT1CBLEDNPA:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T16:50:48.7016769+07:00 0HMT1CBLEDNP9:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:48.7022530+07:00 0HMT1CBLEDNP9:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:48.7036114+07:00 0HMT1CBLEDNP9:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:48.7204920+07:00 0HMT1CBLEDNP9:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:50:48.7505493+07:00 0HMT1CBLEDNP9:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T16:50:49.5066765+07:00 0HMT1CBLEDNPA:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:49.5072278+07:00 0HMT1CBLEDNPA:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:49.5086236+07:00 0HMT1CBLEDNPA:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:49.5108048+07:00 0HMT1CBLEDNPA:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T16:50:49.5151608+07:00 0HMT1CBLEDNPA:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T16:50:49.5523480+07:00 0HMT1CBLEDNP9:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:50:49.5529439+07:00 0HMT1CBLEDNP9:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:50:49.5543166+07:00 0HMT1CBLEDNP9:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:50:49.5566190+07:00 0HMT1CBLEDNP9:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:50:49.5586474+07:00 0HMT1CBLEDNP9:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T16:51:15.6273789+07:00 0HMT1CBLEDNPA:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:15.6284715+07:00 0HMT1CBLEDNP9:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:15.6285500+07:00 0HMT1CBLEDNPA:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:15.6289381+07:00 0HMT1CBLEDNP9:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:15.6307820+07:00 0HMT1CBLEDNP9:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:15.6341700+07:00 0HMT1CBLEDNPA:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:15.6512848+07:00 0HMT1CBLEDNPA:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:51:15.6574415+07:00 0HMT1CBLEDNP9:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:51:15.7851240+07:00 0HMT1CBLEDNP9:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:51:15.8104142+07:00 0HMT1CBLEDNP9:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:51:15.8219421+07:00 0HMT1CBLEDNP9:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:51:16.4991516+07:00 0HMT1CBLEDNP9:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:16.5005384+07:00 0HMT1CBLEDNP9:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:16.5020618+07:00 0HMT1CBLEDNP9:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:16.5190626+07:00 0HMT1CBLEDNP9:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T16:51:16.5669896+07:00 0HMT1CBLEDNP9:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:16.5676237+07:00 0HMT1CBLEDNP9:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:16.5680943+07:00 0HMT1CBLEDNPA:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:16.5684300+07:00 0HMT1CBLEDNPA:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:16.5689740+07:00 0HMT1CBLEDNP9:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:16.5695068+07:00 0HMT1CBLEDNPA:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:16.5754477+07:00 0HMT1CBLEDNPA:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:51:16.5804167+07:00 0HMT1CBLEDNP9:0000000B [INF] Executed DbCommand ("6"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:51:16.6288252+07:00 0HMT1CBLEDNP9:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:16.6298668+07:00 0HMT1CBLEDNP9:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:16.6313924+07:00 0HMT1CBLEDNP9:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:16.6337035+07:00 0HMT1CBLEDNP9:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:51:18.3628278+07:00 0HMT1CBLEDNP9:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:18.3633624+07:00 0HMT1CBLEDNP9:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:18.3646863+07:00 0HMT1CBLEDNP9:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:18.3663381+07:00 0HMT1CBLEDNP9:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T16:51:18.3678622+07:00 0HMT1CBLEDNP9:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T16:51:21.6621600+07:00 0HMT1CBLEDNP7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:21.6627598+07:00 0HMT1CBLEDNP7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:21.6643967+07:00 0HMT1CBLEDNP7:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:23.7222189+07:00 0HMT1CBLEDNP9:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:23.7230425+07:00 0HMT1CBLEDNP9:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:23.7258098+07:00 0HMT1CBLEDNP9:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:23.7265473+07:00 0HMT1CBLEDNPA:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:23.7273943+07:00 0HMT1CBLEDNPA:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:23.7281240+07:00 0HMT1CBLEDNP9:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:51:23.7298019+07:00 0HMT1CBLEDNPA:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:23.7308152+07:00 0HMT1CBLEDNP9:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:51:23.7321467+07:00 0HMT1CBLEDNPA:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:51:23.7401734+07:00 0HMT1CBLEDNP9:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:51:23.7424190+07:00 0HMT1CBLEDNP9:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:51:23.7436333+07:00 0HMT1CBLEDNP9:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:51:23.8639208+07:00 0HMT1CBLEDNPC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:23.8644464+07:00 0HMT1CBLEDNPC:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:23.8656832+07:00 0HMT1CBLEDNPC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:23.8838617+07:00 0HMT1CBLEDNPC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:23.8844594+07:00 0HMT1CBLEDNPC:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:23.8863633+07:00 0HMT1CBLEDNPC:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:23.8878816+07:00 0HMT1CBLEDNPC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T16:51:24.3460121+07:00 0HMT1CBLEDNP9:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:24.3468100+07:00 0HMT1CBLEDNP9:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:24.3483609+07:00 0HMT1CBLEDNP9:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:24.3505392+07:00 0HMT1CBLEDNP9:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T16:51:24.4103168+07:00 0HMT1CBLEDNP9:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:24.4108294+07:00 0HMT1CBLEDNP9:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:24.4121925+07:00 0HMT1CBLEDNP9:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:24.4140139+07:00 0HMT1CBLEDNP9:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:51:24.4296223+07:00 0HMT1CBLEDNP9:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:24.4301182+07:00 0HMT1CBLEDNP9:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:24.4315730+07:00 0HMT1CBLEDNP9:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:24.4334281+07:00 0HMT1CBLEDNP9:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:51:24.4620624+07:00 0HMT1CBLEDNP9:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:24.4625182+07:00 0HMT1CBLEDNP9:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:24.4639269+07:00 0HMT1CBLEDNP9:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:24.4657286+07:00 0HMT1CBLEDNP9:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:51:24.4679106+07:00 0HMT1CBLEDNP9:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T16:51:26.1306272+07:00 0HMT1CBLEDNP9:0000001A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:26.1310712+07:00 0HMT1CBLEDNP9:0000001A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:26.1323199+07:00 0HMT1CBLEDNP9:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:26.1337069+07:00 0HMT1CBLEDNP9:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T16:51:26.1354335+07:00 0HMT1CBLEDNP9:0000001A [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T16:51:26.1699868+07:00 0HMT1CBLEDNP9:0000001B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:26.1704440+07:00 0HMT1CBLEDNP9:0000001B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:26.1717431+07:00 0HMT1CBLEDNP9:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:26.1736732+07:00 0HMT1CBLEDNP9:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:51:26.1756825+07:00 0HMT1CBLEDNP9:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T16:51:27.5547981+07:00 0HMT1CBLEDNP9:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:27.5552382+07:00 0HMT1CBLEDNP9:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:27.5564740+07:00 0HMT1CBLEDNP9:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:27.5580316+07:00 0HMT1CBLEDNP9:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T16:51:27.5596176+07:00 0HMT1CBLEDNP9:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T16:51:27.5920737+07:00 0HMT1CBLEDNP9:0000001D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:27.5927182+07:00 0HMT1CBLEDNP9:0000001D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:27.5945125+07:00 0HMT1CBLEDNP9:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:27.5968073+07:00 0HMT1CBLEDNP9:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:51:27.5991830+07:00 0HMT1CBLEDNP9:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T16:51:36.0380705+07:00 0HMT1CBLEDNP9:0000001F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:36.0385808+07:00 0HMT1CBLEDNP9:0000001F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:36.0471005+07:00 0HMT1CBLEDNP9:0000001F [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:36.0502589+07:00 0HMT1CBLEDNP9:0000001F [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T16:51:36.0524775+07:00 0HMT1CBLEDNP9:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T16:51:36.1054416+07:00 0HMT1CBLEDNP9:00000021 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:36.1062646+07:00 0HMT1CBLEDNP9:00000021 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:36.1077070+07:00 0HMT1CBLEDNP9:00000021 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:36.1106919+07:00 0HMT1CBLEDNP9:00000021 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:51:36.1128854+07:00 0HMT1CBLEDNP9:00000021 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T16:51:41.5202944+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T16:51:41.5278131+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T16:51:41.5280945+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T16:51:41.5281211+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T16:51:41.8074256+07:00 0HMT1CC74LCHP:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T16:51:42.8428992+07:00 0HMT1CC74LCHP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:43.1994392+07:00 0HMT1CC74LCHP:00000002 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:43.2335917+07:00 0HMT1CC74LCHP:00000002 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:43.2567346+07:00 0HMT1CC74LCHP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:43.2663312+07:00 0HMT1CC74LCHP:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:43.2684254+07:00 0HMT1CC74LCHP:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:43.6780242+07:00 0HMT1CC74LCHP:00000002 [INF] Executed DbCommand ("46"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T16:51:48.1201782+07:00 0HMT1CC74LCHS:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:48.1252397+07:00 0HMT1CC74LCHS:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:48.1267564+07:00 0HMT1CC74LCHS:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:48.4141871+07:00 0HMT1CC74LCHS:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T16:51:48.5214214+07:00 0HMT1CC74LCHS:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T16:51:48.5933974+07:00 0HMT1CC74LCHR:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:48.5941364+07:00 0HMT1CC74LCHR:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:48.5955154+07:00 0HMT1CC74LCHR:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:48.6122499+07:00 0HMT1CC74LCHR:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:51:48.6453026+07:00 0HMT1CC74LCHR:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T16:51:50.3018628+07:00 0HMT1CC74LCHS:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:50.3023387+07:00 0HMT1CC74LCHS:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:50.3035941+07:00 0HMT1CC74LCHS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:50.3054991+07:00 0HMT1CC74LCHS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T16:51:50.3096013+07:00 0HMT1CC74LCHS:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T16:51:50.3419519+07:00 0HMT1CC74LCHR:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:50.3425573+07:00 0HMT1CC74LCHR:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:50.3440191+07:00 0HMT1CC74LCHR:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:50.3458368+07:00 0HMT1CC74LCHR:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:51:50.3483538+07:00 0HMT1CC74LCHR:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T16:51:53.3336546+07:00 0HMT1CC74LCHS:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:53.3342157+07:00 0HMT1CC74LCHS:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:53.3358307+07:00 0HMT1CC74LCHS:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:53.3384977+07:00 0HMT1CC74LCHS:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T16:51:53.3403222+07:00 0HMT1CC74LCHS:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T16:51:53.3853859+07:00 0HMT1CC74LCHR:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:53.3859012+07:00 0HMT1CC74LCHR:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:53.3871929+07:00 0HMT1CC74LCHR:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:53.3886206+07:00 0HMT1CC74LCHR:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:51:53.3913453+07:00 0HMT1CC74LCHR:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T16:51:59.8190655+07:00 0HMT1CC74LCHS:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:59.8197034+07:00 0HMT1CC74LCHS:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:59.8210065+07:00 0HMT1CC74LCHS:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:59.8229122+07:00 0HMT1CC74LCHS:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T16:51:59.8242494+07:00 0HMT1CC74LCHS:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T16:51:59.8644471+07:00 0HMT1CC74LCHR:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:51:59.8650115+07:00 0HMT1CC74LCHR:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:51:59.8664781+07:00 0HMT1CC74LCHR:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:51:59.8682169+07:00 0HMT1CC74LCHR:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:51:59.8702902+07:00 0HMT1CC74LCHR:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T16:52:50.1685693+07:00 0HMT1CC74LCHR:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:52:50.1685692+07:00 0HMT1CC74LCHS:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:52:50.1692677+07:00 0HMT1CC74LCHS:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:52:50.1726893+07:00 0HMT1CC74LCHR:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:52:50.1792808+07:00 0HMT1CC74LCHS:00000007 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:52:50.1792808+07:00 0HMT1CC74LCHR:0000000C [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:52:50.1961190+07:00 0HMT1CC74LCHR:0000000C [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:52:50.2054760+07:00 0HMT1CC74LCHS:00000007 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:52:50.3212288+07:00 0HMT1CC74LCHS:00000007 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:52:50.3450912+07:00 0HMT1CC74LCHS:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:52:50.3537753+07:00 0HMT1CC74LCHS:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:53:31.4205860+07:00 0HMT1CC74LCHS:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:53:31.4207635+07:00 0HMT1CC74LCHR:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:53:31.4211022+07:00 0HMT1CC74LCHS:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:53:31.4211023+07:00 0HMT1CC74LCHR:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:53:31.4223557+07:00 0HMT1CC74LCHS:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:53:31.4223703+07:00 0HMT1CC74LCHR:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:53:31.4247398+07:00 0HMT1CC74LCHR:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:53:31.4254824+07:00 0HMT1CC74LCHS:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:53:31.4382113+07:00 0HMT1CC74LCHS:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:53:31.4396929+07:00 0HMT1CC74LCHS:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:53:31.4405996+07:00 0HMT1CC74LCHS:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:53:48.1878020+07:00 0HMT1CC74LCHR:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:53:48.1892282+07:00 0HMT1CC74LCHR:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:53:48.1910435+07:00 0HMT1CC74LCHS:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:53:48.1928508+07:00 0HMT1CC74LCHS:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:53:48.2028205+07:00 0HMT1CC74LCHR:00000010 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:53:48.2028205+07:00 0HMT1CC74LCHS:0000000B [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:53:48.2080116+07:00 0HMT1CC74LCHR:00000010 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:53:48.2080043+07:00 0HMT1CC74LCHS:0000000B [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:53:48.2130150+07:00 0HMT1CC74LCHR:00000010 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:53:48.2171545+07:00 0HMT1CC74LCHR:00000010 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:53:48.2199474+07:00 0HMT1CC74LCHR:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:53:48.2386508+07:00 0HMT1CC74LCHP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:53:48.2392993+07:00 0HMT1CC74LCHP:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:53:48.2407391+07:00 0HMT1CC74LCHP:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:53:50.1602367+07:00 0HMT1CC74LCHR:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:53:50.1607664+07:00 0HMT1CC74LCHR:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:53:50.1620874+07:00 0HMT1CC74LCHR:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:53:50.1636862+07:00 0HMT1CC74LCHR:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:53:50.1661999+07:00 0HMT1CC74LCHR:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:53:50.1674763+07:00 0HMT1CC74LCHR:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:53:50.1683902+07:00 0HMT1CC74LCHR:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:53:50.1719694+07:00 0HMT1CC74LCHR:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:53:50.1723978+07:00 0HMT1CC74LCHR:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:53:50.1739801+07:00 0HMT1CC74LCHR:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:53:50.1771373+07:00 0HMT1CC74LCHR:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:53:50.2718614+07:00 0HMT1CC74LCHT:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:53:50.2727811+07:00 0HMT1CC74LCHT:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:53:50.2748528+07:00 0HMT1CC74LCHT:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:53:50.2945996+07:00 0HMT1CC74LCHT:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:53:50.2950995+07:00 0HMT1CC74LCHT:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:53:50.2965813+07:00 0HMT1CC74LCHT:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:53:50.2993572+07:00 0HMT1CC74LCHT:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T16:53:50.4707149+07:00 0HMT1CC74LCHR:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:53:50.4712727+07:00 0HMT1CC74LCHR:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:53:50.4712899+07:00 0HMT1CC74LCHS:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:53:50.4717095+07:00 0HMT1CC74LCHS:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:53:50.4732855+07:00 0HMT1CC74LCHS:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:53:50.4732846+07:00 0HMT1CC74LCHR:00000016 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:53:50.4754383+07:00 0HMT1CC74LCHS:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:53:50.4754311+07:00 0HMT1CC74LCHR:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:53:50.4797687+07:00 0HMT1CC74LCHR:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:53:50.4821225+07:00 0HMT1CC74LCHR:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:53:50.4836836+07:00 0HMT1CC74LCHR:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:53:50.5743229+07:00 0HMT1CC74LCHU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:53:50.5748392+07:00 0HMT1CC74LCHU:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:53:50.5762285+07:00 0HMT1CC74LCHU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:53:50.5972633+07:00 0HMT1CC74LCHU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:53:50.5977847+07:00 0HMT1CC74LCHU:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:53:50.5990338+07:00 0HMT1CC74LCHU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:53:50.6000957+07:00 0HMT1CC74LCHU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T16:53:50.7624473+07:00 0HMT1CC74LCHR:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:53:50.7625658+07:00 0HMT1CC74LCHS:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:53:50.7629951+07:00 0HMT1CC74LCHR:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:53:50.7630003+07:00 0HMT1CC74LCHS:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:53:50.7643261+07:00 0HMT1CC74LCHR:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:53:50.7643223+07:00 0HMT1CC74LCHS:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:53:50.7654964+07:00 0HMT1CC74LCHR:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:53:50.7667254+07:00 0HMT1CC74LCHS:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:53:50.7700797+07:00 0HMT1CC74LCHR:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:53:50.7713327+07:00 0HMT1CC74LCHR:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:53:50.7723786+07:00 0HMT1CC74LCHR:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:53:57.6700069+07:00 0HMT1CC74LCHT:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:53:57.6700069+07:00 0HMT1CC74LCHU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:53:57.6705318+07:00 0HMT1CC74LCHU:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:53:57.6705319+07:00 0HMT1CC74LCHT:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:53:57.6718267+07:00 0HMT1CC74LCHT:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:53:57.7184203+07:00 0HMT1CC74LCHU:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:54:00.4215454+07:00 0HMT1CC74LCHR:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:54:00.4220740+07:00 0HMT1CC74LCHR:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:54:00.4246638+07:00 0HMT1CC74LCHR:00000019 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:54:00.4268178+07:00 0HMT1CC74LCHR:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:54:00.4293830+07:00 0HMT1CC74LCHR:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:54:00.4304743+07:00 0HMT1CC74LCHR:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:54:00.4313312+07:00 0HMT1CC74LCHR:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:54:00.4441671+07:00 0HMT1CC74LCHR:0000001A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:54:00.4446934+07:00 0HMT1CC74LCHR:0000001A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:54:00.4462097+07:00 0HMT1CC74LCHR:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:54:00.4479697+07:00 0HMT1CC74LCHR:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:54:00.5229136+07:00 0HMT1CC74LCI1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:54:00.5233871+07:00 0HMT1CC74LCI1:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:54:00.5249484+07:00 0HMT1CC74LCI1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:54:00.5254389+07:00 0HMT1CC74LCI1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:54:00.5257750+07:00 0HMT1CC74LCI1:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:54:00.5269686+07:00 0HMT1CC74LCI1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:54:00.5280772+07:00 0HMT1CC74LCI1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T16:54:04.4033400+07:00 0HMT1CC74LCHR:0000001B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:54:04.4042443+07:00 0HMT1CC74LCHR:0000001B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:54:04.4060028+07:00 0HMT1CC74LCHR:0000001B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:54:04.4064433+07:00 0HMT1CC74LCHS:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:54:04.4070420+07:00 0HMT1CC74LCHS:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:54:04.4074811+07:00 0HMT1CC74LCHR:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:54:04.4092390+07:00 0HMT1CC74LCHS:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:54:04.4100937+07:00 0HMT1CC74LCHR:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:54:04.4119563+07:00 0HMT1CC74LCHS:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:54:04.4136466+07:00 0HMT1CC74LCHR:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:54:04.4146808+07:00 0HMT1CC74LCHR:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:54:07.0727539+07:00 0HMT1CC74LCHR:0000001D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:54:07.0734998+07:00 0HMT1CC74LCHR:0000001D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:54:07.0750577+07:00 0HMT1CC74LCHR:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:54:07.0767736+07:00 0HMT1CC74LCHR:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:54:07.0799949+07:00 0HMT1CC74LCHR:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:54:07.0816568+07:00 0HMT1CC74LCHR:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:54:07.0826779+07:00 0HMT1CC74LCHR:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:54:07.2108754+07:00 0HMT1CC74LCI2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:54:07.2118643+07:00 0HMT1CC74LCI2:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:54:07.2156088+07:00 0HMT1CC74LCI2:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:54:07.2300385+07:00 0HMT1CC74LCI2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:54:07.2452164+07:00 0HMT1CC74LCI2:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:54:07.2601882+07:00 0HMT1CC74LCI2:00000002 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:54:07.2750177+07:00 0HMT1CC74LCI2:00000002 [INF] Executed DbCommand ("13"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T16:54:56.2890103+07:00 0HMT1CC74LCHS:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:54:56.2896634+07:00 0HMT1CC74LCHS:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:54:56.2965512+07:00 0HMT1CC74LCI3:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:54:56.2984926+07:00 0HMT1CC74LCI3:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:54:56.3021706+07:00 0HMT1CC74LCHS:00000013 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:54:56.3070072+07:00 0HMT1CC74LCI3:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:54:56.3153776+07:00 0HMT1CC74LCHS:00000013 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:54:56.3181326+07:00 0HMT1CC74LCI3:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:54:56.3231368+07:00 0HMT1CC74LCHS:00000013 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:54:56.3265537+07:00 0HMT1CC74LCHS:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:54:56.3296653+07:00 0HMT1CC74LCHS:00000013 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:54:56.4672591+07:00 0HMT1CC74LCI4:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:54:56.4678242+07:00 0HMT1CC74LCI4:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:54:56.4691870+07:00 0HMT1CC74LCI4:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:54:56.5053733+07:00 0HMT1CC74LCI4:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:54:56.5058398+07:00 0HMT1CC74LCI4:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:54:56.5070820+07:00 0HMT1CC74LCI4:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:54:56.5091037+07:00 0HMT1CC74LCI4:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T16:55:44.8726291+07:00 0HMT1CC74LCI3:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:55:44.8731229+07:00 0HMT1CC74LCI3:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:55:44.8747675+07:00 0HMT1CC74LCHS:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:55:44.8747690+07:00 0HMT1CC74LCI3:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:55:44.8753446+07:00 0HMT1CC74LCHS:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:55:44.8765738+07:00 0HMT1CC74LCI3:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:55:44.8772245+07:00 0HMT1CC74LCHS:00000014 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:55:44.8788735+07:00 0HMT1CC74LCHS:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:55:44.8809595+07:00 0HMT1CC74LCI3:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:55:44.8865220+07:00 0HMT1CC74LCI3:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:55:44.8874615+07:00 0HMT1CC74LCI3:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:58:20.5775730+07:00 0HMT1CC74LCI4:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:58:20.5802860+07:00 0HMT1CC74LCI4:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:58:20.5804663+07:00 0HMT1CC74LCI5:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:58:20.5808922+07:00 0HMT1CC74LCI5:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:58:20.5825788+07:00 0HMT1CC74LCI6:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:58:20.5918754+07:00 0HMT1CC74LCI5:00000003 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:58:20.5934264+07:00 0HMT1CC74LCI4:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:58:20.5934339+07:00 0HMT1CC74LCI6:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:58:20.5946762+07:00 0HMT1CC74LCI6:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:58:20.5993243+07:00 0HMT1CC74LCI5:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:58:20.6115009+07:00 0HMT1CC74LCI6:00000003 [INF] Executed DbCommand ("12"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:58:20.6181373+07:00 0HMT1CC74LCI5:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:58:20.6206228+07:00 0HMT1CC74LCI5:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:58:20.6231210+07:00 0HMT1CC74LCI5:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:58:20.7260659+07:00 0HMT1CC74LCI7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:58:20.7267139+07:00 0HMT1CC74LCI7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:58:20.7282985+07:00 0HMT1CC74LCI7:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:58:20.7600470+07:00 0HMT1CC74LCI7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:58:20.7609925+07:00 0HMT1CC74LCI7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:58:20.7635865+07:00 0HMT1CC74LCI7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:58:20.7659181+07:00 0HMT1CC74LCI7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T16:58:29.6151993+07:00 0HMT1CC74LCI7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:58:29.6152604+07:00 0HMT1CC74LCI1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:58:29.6151994+07:00 0HMT1CC74LCI2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:58:29.6182278+07:00 0HMT1CC74LCI7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:58:29.6210358+07:00 0HMT1CC74LCI1:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:58:29.6210358+07:00 0HMT1CC74LCI2:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:58:29.6210358+07:00 0HMT1CC74LCI7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:58:29.6240748+07:00 0HMT1CC74LCI1:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:58:29.6240743+07:00 0HMT1CC74LCI2:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:58:31.5288730+07:00 0HMT1CC74LCI5:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:58:31.5294116+07:00 0HMT1CC74LCI5:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:58:31.5307871+07:00 0HMT1CC74LCI5:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:58:31.5327951+07:00 0HMT1CC74LCI5:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:58:31.5352696+07:00 0HMT1CC74LCI5:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:58:31.5364489+07:00 0HMT1CC74LCI5:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:58:31.5369028+07:00 0HMT1CC74LCI6:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:58:31.5376088+07:00 0HMT1CC74LCI5:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:58:31.5378568+07:00 0HMT1CC74LCI6:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:58:31.5395745+07:00 0HMT1CC74LCI6:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:58:31.5421398+07:00 0HMT1CC74LCI6:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:58:31.5895791+07:00 0HMT1CC74LCI9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:58:31.5900748+07:00 0HMT1CC74LCI9:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:58:31.5918362+07:00 0HMT1CC74LCI9:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:58:31.6004410+07:00 0HMT1CC74LCI9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:58:31.6008923+07:00 0HMT1CC74LCI9:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:58:31.6022019+07:00 0HMT1CC74LCI9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:58:31.6034069+07:00 0HMT1CC74LCI9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T16:58:38.1916916+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T16:58:38.2003247+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T16:58:38.2007428+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T16:58:38.2007975+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T16:58:40.6456029+07:00 0HMT1CG3V6S6N:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T16:58:41.5390071+07:00 0HMT1CG3V6S6N:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:58:41.8710727+07:00 0HMT1CG3V6S6N:00000002 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:58:41.9038961+07:00 0HMT1CG3V6S6N:00000002 [INF] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:58:41.9216049+07:00 0HMT1CG3V6S6N:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:58:41.9352842+07:00 0HMT1CG3V6S6N:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:58:41.9366529+07:00 0HMT1CG3V6S6N:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:58:42.3371403+07:00 0HMT1CG3V6S6N:00000002 [INF] Executed DbCommand ("48"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T16:58:52.4722898+07:00 0HMT1CG3V6S6P:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:58:52.4722899+07:00 0HMT1CG3V6S6O:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:58:52.4798497+07:00 0HMT1CG3V6S6O:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:58:52.4814852+07:00 0HMT1CG3V6S6O:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:58:52.4826432+07:00 0HMT1CG3V6S6P:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:58:52.4844911+07:00 0HMT1CG3V6S6P:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:58:52.7072222+07:00 0HMT1CG3V6S6P:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:58:52.7114678+07:00 0HMT1CG3V6S6O:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:58:52.9236620+07:00 0HMT1CG3V6S6O:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:58:52.9681867+07:00 0HMT1CG3V6S6O:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:58:52.9787949+07:00 0HMT1CG3V6S6O:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:58:54.0918233+07:00 0HMT1CG3V6S6N:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:58:54.0928233+07:00 0HMT1CG3V6S6N:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:58:54.0945114+07:00 0HMT1CG3V6S6N:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:58:55.8358299+07:00 0HMT1CG3V6S6O:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:58:55.8363055+07:00 0HMT1CG3V6S6O:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:58:55.8375775+07:00 0HMT1CG3V6S6O:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:58:55.8398120+07:00 0HMT1CG3V6S6P:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:58:55.8403398+07:00 0HMT1CG3V6S6P:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:58:55.8419367+07:00 0HMT1CG3V6S6P:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:58:55.8431061+07:00 0HMT1CG3V6S6O:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:58:55.8453374+07:00 0HMT1CG3V6S6P:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:58:55.8474536+07:00 0HMT1CG3V6S6O:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'630cd79e-9b26-4515-8e88-1dacc29d2836'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:58:55.8485216+07:00 0HMT1CG3V6S6O:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:58:55.8493860+07:00 0HMT1CG3V6S6O:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:58:55.9324435+07:00 0HMT1CG3V6S6R:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:58:55.9330651+07:00 0HMT1CG3V6S6R:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:58:55.9347908+07:00 0HMT1CG3V6S6R:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:58:55.9601712+07:00 0HMT1CG3V6S6R:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:58:55.9608199+07:00 0HMT1CG3V6S6R:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:58:55.9624768+07:00 0HMT1CG3V6S6R:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:58:55.9637614+07:00 0HMT1CG3V6S6R:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T16:58:59.9115454+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T16:58:59.9200800+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T16:58:59.9203681+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T16:58:59.9204001+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T16:59:00.1917872+07:00 0HMT1CG9PAOQ1:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T16:59:01.3250588+07:00 0HMT1CG9PAOQ1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:01.6619983+07:00 0HMT1CG9PAOQ1:00000002 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:01.6993275+07:00 0HMT1CG9PAOQ1:00000002 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:01.7175067+07:00 0HMT1CG9PAOQ1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:01.7377248+07:00 0HMT1CG9PAOQ1:00000002 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:01.7392993+07:00 0HMT1CG9PAOQ1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:02.1328078+07:00 0HMT1CG9PAOQ1:00000002 [INF] Executed DbCommand ("48"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T16:59:03.5237591+07:00 0HMT1CG9PAOQ3:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:03.5303586+07:00 0HMT1CG9PAOQ3:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:03.5318608+07:00 0HMT1CG9PAOQ3:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:03.5723868+07:00 0HMT1CG9PAOQ4:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:03.5723851+07:00 0HMT1CG9PAOQ5:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:03.5729615+07:00 0HMT1CG9PAOQ5:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:03.5746635+07:00 0HMT1CG9PAOQ5:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:03.5759201+07:00 0HMT1CG9PAOQ4:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:03.5774949+07:00 0HMT1CG9PAOQ4:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:03.6474694+07:00 0HMT1CG9PAOQ4:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:59:03.6527962+07:00 0HMT1CG9PAOQ5:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:59:03.7187100+07:00 0HMT1CG9PAOQ3:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T16:59:03.8497983+07:00 0HMT1CG9PAOQ3:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:03.8505593+07:00 0HMT1CG9PAOQ3:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:03.8521235+07:00 0HMT1CG9PAOQ3:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:03.8721727+07:00 0HMT1CG9PAOQ3:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:59:09.8832333+07:00 0HMT1CG9PAOQ8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:09.8833485+07:00 0HMT1CG9PAOQ6:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:09.8836943+07:00 0HMT1CG9PAOQ8:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:09.8836942+07:00 0HMT1CG9PAOQ6:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:09.8852316+07:00 0HMT1CG9PAOQ8:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:09.8852315+07:00 0HMT1CG9PAOQ6:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:09.8857355+07:00 0HMT1CG9PAOQ8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:09.8860216+07:00 0HMT1CG9PAOQ7:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:09.8861052+07:00 0HMT1CG9PAOQ8:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:09.8862754+07:00 0HMT1CG9PAOQ7:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:09.8871798+07:00 0HMT1CG9PAOQ8:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:09.8871835+07:00 0HMT1CG9PAOQ7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:09.8885770+07:00 0HMT1CG9PAOQ8:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T16:59:09.9027217+07:00 0HMT1CG9PAOQ6:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T16:59:09.9092151+07:00 0HMT1CG9PAOQ7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:59:10.0085652+07:00 0HMT1CG9PAOQ7:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'c2f29374-f52f-4212-bb88-1c3a4bf1b10e', N'58c799f7-c8a1-46ff-821c-09558aeef8f3', N'86418595-cb58-4cd7-90bc-426ddddfc7db', N'5a507a2f-e7c2-4ad9-b5bd-db16ca04bb8b', N'9f4a81f3-159c-4f90-90e8-0a9fe0f3a95b', N'06ccd7f5-b14d-4644-9cea-317de38005de')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'c2f29374-f52f-4212-bb88-1c3a4bf1b10e', N'58c799f7-c8a1-46ff-821c-09558aeef8f3', N'86418595-cb58-4cd7-90bc-426ddddfc7db', N'5a507a2f-e7c2-4ad9-b5bd-db16ca04bb8b', N'9f4a81f3-159c-4f90-90e8-0a9fe0f3a95b', N'06ccd7f5-b14d-4644-9cea-317de38005de')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T16:59:10.0355034+07:00 0HMT1CG9PAOQ7:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T16:59:10.0441107+07:00 0HMT1CG9PAOQ7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:59:10.0473302+07:00 0HMT1CG9PAOQ7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T16:59:10.0484969+07:00 0HMT1CG9PAOQ7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:59:10.0496526+07:00 0HMT1CG9PAOQ7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T16:59:10.0505503+07:00 0HMT1CG9PAOQ7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:59:10.0545667+07:00 0HMT1CG9PAOQ7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:59:10.0556185+07:00 0HMT1CG9PAOQ7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:59:10.0626015+07:00 0HMT1CG9PAOQ7:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:59:10.0639158+07:00 0HMT1CG9PAOQ7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T16:59:10.0648633+07:00 0HMT1CG9PAOQ7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:59:10.0658575+07:00 0HMT1CG9PAOQ7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T16:59:10.0667254+07:00 0HMT1CG9PAOQ7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T16:59:13.6514444+07:00 0HMT1CG9PAOQ7:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:13.6519495+07:00 0HMT1CG9PAOQ7:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:13.6627951+07:00 0HMT1CG9PAOQ7:00000005 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:13.6675506+07:00 0HMT1CG9PAOQ7:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T16:59:13.7302006+07:00 0HMT1CG9PAOQ6:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:13.7308051+07:00 0HMT1CG9PAOQ6:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:13.7405382+07:00 0HMT1CG9PAOQ6:00000005 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:13.7443969+07:00 0HMT1CG9PAOQ6:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:59:13.7466142+07:00 0HMT1CG9PAOQ6:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:13.7470553+07:00 0HMT1CG9PAOQ6:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:13.7484311+07:00 0HMT1CG9PAOQ6:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:13.7505174+07:00 0HMT1CG9PAOQ6:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:59:13.7759292+07:00 0HMT1CG9PAOQ6:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:13.7764771+07:00 0HMT1CG9PAOQ6:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:13.7777472+07:00 0HMT1CG9PAOQ6:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:13.7813456+07:00 0HMT1CG9PAOQ6:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:59:13.8844210+07:00 0HMT1CG9PAOQ6:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T16:59:21.8240649+07:00 0HMT1CG9PAOQ6:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:21.8246338+07:00 0HMT1CG9PAOQ6:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:21.8328800+07:00 0HMT1CG9PAOQ6:0000000A [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:21.8441600+07:00 0HMT1CG9PAOQ6:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__ToLower_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE ((@__ToLower_0 LIKE N'') OR (CHARINDEX(@__ToLower_0, LOWER([u].[Email])) > 0)) OR ((LOWER([u].[Email]) LIKE N'') OR (CHARINDEX(LOWER([u].[Email]), @__ToLower_0) > 0))" (0723d8ff)
2023-08-20T16:59:22.4512344+07:00 0HMT1CG9PAOQ7:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:22.4520258+07:00 0HMT1CG9PAOQ7:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:22.4571901+07:00 0HMT1CG9PAOQ7:00000008 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:22.4603686+07:00 0HMT1CG9PAOQ7:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:59:22.4623920+07:00 0HMT1CG9PAOQ7:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:22.4629826+07:00 0HMT1CG9PAOQ7:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:22.4682081+07:00 0HMT1CG9PAOQ7:00000009 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:22.4702058+07:00 0HMT1CG9PAOQ7:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:59:22.4733926+07:00 0HMT1CG9PAOQ7:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:22.4739376+07:00 0HMT1CG9PAOQ7:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:22.4792362+07:00 0HMT1CG9PAOQ7:0000000A [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:22.4817335+07:00 0HMT1CG9PAOQ7:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__ToLower_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE ((@__ToLower_0 LIKE N'') OR (CHARINDEX(@__ToLower_0, LOWER([u].[Email])) > 0)) OR ((LOWER([u].[Email]) LIKE N'') OR (CHARINDEX(LOWER([u].[Email]), @__ToLower_0) > 0))" (0723d8ff)
2023-08-20T16:59:22.4850969+07:00 0HMT1CG9PAOQ7:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:22.4855704+07:00 0HMT1CG9PAOQ7:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:22.4908324+07:00 0HMT1CG9PAOQ7:0000000B [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:22.4927796+07:00 0HMT1CG9PAOQ7:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__ToLower_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE ((@__ToLower_0 LIKE N'') OR (CHARINDEX(@__ToLower_0, LOWER([u].[Email])) > 0)) OR ((LOWER([u].[Email]) LIKE N'') OR (CHARINDEX(LOWER([u].[Email]), @__ToLower_0) > 0))" (0723d8ff)
2023-08-20T16:59:24.4501751+07:00 0HMT1CG9PAOQ7:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:24.4508904+07:00 0HMT1CG9PAOQ7:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:24.4558251+07:00 0HMT1CG9PAOQ7:0000000D [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:24.4667271+07:00 0HMT1CG9PAOQ7:0000000D [INF] Executed DbCommand ("3"ms) [Parameters=["@__user1Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__user1Id_0) AND ([c].[ChatRoomType] = N'ONE')" (0723d8ff)
2023-08-20T16:59:24.4718245+07:00 0HMT1CG9PAOQ7:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@__user2Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[UserId] = @__user2Id_0) AND [u].[ChatRoomId] IN (N'c2f29374-f52f-4212-bb88-1c3a4bf1b10e', N'5a507a2f-e7c2-4ad9-b5bd-db16ca04bb8b')" (0723d8ff)
2023-08-20T16:59:24.5060459+07:00 0HMT1CG9PAOQ7:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [ChatRooms] ([Id], [ChatRoomType], [CreatedTime], [CreatorId], [IsDeleted], [Name], [PhotoUrl], [UpdatedTime])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);" (0723d8ff)
2023-08-20T16:59:24.5176980+07:00 0HMT1CG9PAOQ7:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (Size = 50), @p6='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserChatRooms] ([Id], [ChatRoomId], [CreatedTime], [IsMuted], [LastMessageReadId], [MembershipStatus], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-20T16:59:24.5181350+07:00 0HMT1CG9PAOQ7:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (Size = 50), @p6='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserChatRooms] ([Id], [ChatRoomId], [CreatedTime], [IsMuted], [LastMessageReadId], [MembershipStatus], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-20T16:59:24.5219006+07:00 0HMT1CG9PAOQ7:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] IN (N'WKcNU5wY2pTqEyR8YfgTqYTUP8Z2', N'lbFAUpmyDQVVSxHTHtCYlsydvPg2')" (0723d8ff)
2023-08-20T16:59:24.5339027+07:00 0HMT1CG9PAOQ7:0000000D [INF] Executed DbCommand ("3"ms) [Parameters=["@__8__locals1_chatRoomSummary_ChatRoom_Id_0='?' (Size = 100), @__user_Id_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__8__locals1_chatRoomSummary_ChatRoom_Id_0) AND ([u].[UserId] = @__user_Id_1)" (0723d8ff)
2023-08-20T16:59:24.5390730+07:00 0HMT1CG9PAOQ7:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=["@__8__locals1_chatRoomSummary_ChatRoom_Id_0='?' (Size = 100), @__user_Id_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__8__locals1_chatRoomSummary_ChatRoom_Id_0) AND ([u].[UserId] = @__user_Id_1)" (0723d8ff)
2023-08-20T16:59:24.5452329+07:00 0HMT1CG9PAOQ7:0000000D [INF] Executed DbCommand ("3"ms) [Parameters=["@__chatRoom_Id_0='?' (Size = 100), @__chatRoom_CreatorId_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__chatRoom_Id_0) AND ([u].[UserId] = @__chatRoom_CreatorId_1)" (0723d8ff)
2023-08-20T16:59:24.5543454+07:00 0HMT1CG9PAOQ6:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:24.5548733+07:00 0HMT1CG9PAOQ6:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:24.5583599+07:00 0HMT1CG9PAOQ7:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:24.5589813+07:00 0HMT1CG9PAOQ7:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:24.5623689+07:00 0HMT1CG9PAOQ6:0000000C [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:24.5650337+07:00 0HMT1CG9PAOQ6:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__ToLower_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE ((@__ToLower_0 LIKE N'') OR (CHARINDEX(@__ToLower_0, LOWER([u].[Email])) > 0)) OR ((LOWER([u].[Email]) LIKE N'') OR (CHARINDEX(LOWER([u].[Email]), @__ToLower_0) > 0))" (0723d8ff)
2023-08-20T16:59:24.5652669+07:00 0HMT1CG9PAOQ7:0000000F [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:24.5773724+07:00 0HMT1CG9PAOQ7:0000000F [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T16:59:24.5851358+07:00 0HMT1CG9PAOQ7:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T16:59:24.6090548+07:00 0HMT1CG9PAOQ7:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:24.6099360+07:00 0HMT1CG9PAOQ7:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:24.6114439+07:00 0HMT1CG9PAOQ6:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:24.6121640+07:00 0HMT1CG9PAOQ6:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:24.6176393+07:00 0HMT1CG9PAOQ7:00000010 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:24.6182229+07:00 0HMT1CG9PAOQ6:0000000E [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:24.6210624+07:00 0HMT1CG9PAOQ7:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__ToLower_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE ((@__ToLower_0 LIKE N'') OR (CHARINDEX(@__ToLower_0, LOWER([u].[Email])) > 0)) OR ((LOWER([u].[Email]) LIKE N'') OR (CHARINDEX(LOWER([u].[Email]), @__ToLower_0) > 0))" (0723d8ff)
2023-08-20T16:59:24.6232217+07:00 0HMT1CG9PAOQ6:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:59:24.6276603+07:00 0HMT1CG9PAOQ6:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T16:59:25.6929442+07:00 0HMT1CG9PAOQ3:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:25.6935814+07:00 0HMT1CG9PAOQ3:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:25.6988507+07:00 0HMT1CG9PAOQ3:00000007 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:25.7028363+07:00 0HMT1CG9PAOQ3:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T16:59:25.7593886+07:00 0HMT1CG9PAOQ3:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:25.7600455+07:00 0HMT1CG9PAOQ3:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:25.7627580+07:00 0HMT1CG9PAOQ4:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:25.7632859+07:00 0HMT1CG9PAOQ4:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:25.7658954+07:00 0HMT1CG9PAOQ3:0000000A [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:25.7684473+07:00 0HMT1CG9PAOQ3:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:59:25.7713331+07:00 0HMT1CG9PAOQ4:00000004 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:25.7744839+07:00 0HMT1CG9PAOQ4:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:59:25.7759639+07:00 0HMT1CG9PAOQ3:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:25.7767624+07:00 0HMT1CG9PAOQ3:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:25.7836176+07:00 0HMT1CG9PAOQ3:0000000B [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:25.7862343+07:00 0HMT1CG9PAOQ3:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:59:25.7886535+07:00 0HMT1CG9PAOQ3:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T16:59:27.4802026+07:00 0HMT1CG9PAOQ3:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:27.4806737+07:00 0HMT1CG9PAOQ3:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:27.4857198+07:00 0HMT1CG9PAOQ3:0000000D [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:27.4874590+07:00 0HMT1CG9PAOQ3:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T16:59:27.4889291+07:00 0HMT1CG9PAOQ3:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T16:59:27.5050537+07:00 0HMT1CG9PAOQ6:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:27.5056476+07:00 0HMT1CG9PAOQ6:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:27.5114713+07:00 0HMT1CG9PAOQ6:0000000F [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:27.5139401+07:00 0HMT1CG9PAOQ6:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:59:27.5161490+07:00 0HMT1CG9PAOQ6:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T16:59:27.5170245+07:00 0HMT1CG9PAOQ3:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T16:59:27.5174604+07:00 0HMT1CG9PAOQ3:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T16:59:27.5262685+07:00 0HMT1CG9PAOQ3:0000000E [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T16:59:27.5284677+07:00 0HMT1CG9PAOQ3:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T16:59:27.5303486+07:00 0HMT1CG9PAOQ3:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T17:03:07.3925923+07:00 0HMT1CG9PAOQ8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T17:03:07.3933836+07:00 0HMT1CG9PAOQ8:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T17:03:07.4063701+07:00 0HMT1CG9PAOQ8:00000002 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T17:03:08.4061228+07:00 0HMT1CG9PAOQ1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T17:03:08.4065972+07:00 0HMT1CG9PAOQ1:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T17:03:08.4078494+07:00 0HMT1CG9PAOQ1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:19:20.7824627+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T20:19:20.7901435+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T20:19:20.7904296+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T20:19:20.7904533+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T20:22:39.0493719+07:00 0HMT1G239242P:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T20:22:39.9926250+07:00 0HMT1G239242O:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:22:39.9926233+07:00 0HMT1G239242N:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:22:39.9926238+07:00 0HMT1G239242P:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:22:40.5578481+07:00 0HMT1G239242N:00000003 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:22:40.5578519+07:00 0HMT1G239242O:00000003 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:22:40.5578525+07:00 0HMT1G239242P:00000002 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:22:40.6017232+07:00 0HMT1G239242N:00000003 [INF] Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:22:40.6018488+07:00 0HMT1G239242O:00000003 [INF] Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:22:40.6018596+07:00 0HMT1G239242P:00000002 [INF] Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:22:40.6680655+07:00 0HMT1G239242P:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:22:40.6740312+07:00 0HMT1G239242P:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:22:40.6756655+07:00 0HMT1G239242P:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:22:41.1115738+07:00 0HMT1G239242P:00000002 [INF] Executed DbCommand ("57"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T20:22:41.1115737+07:00 0HMT1G239242O:00000003 [INF] Executed DbCommand ("57"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T20:22:41.1115737+07:00 0HMT1G239242N:00000003 [INF] Executed DbCommand ("57"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:22:41.3146214+07:00 0HMT1G239242N:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T20:22:41.3552878+07:00 0HMT1G239242N:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T20:22:41.3641506+07:00 0HMT1G239242N:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:22:41.3826040+07:00 0HMT1G239242N:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T20:22:41.3835052+07:00 0HMT1G239242N:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:22:54.6423255+07:00 0HMT1G239242N:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:22:54.6432187+07:00 0HMT1G239242N:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:22:54.6448388+07:00 0HMT1G239242N:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:22:54.6470022+07:00 0HMT1G239242N:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:22:54.6509810+07:00 0HMT1G239242N:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T20:22:54.6524302+07:00 0HMT1G239242N:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T20:22:54.6537626+07:00 0HMT1G239242N:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:22:54.6550419+07:00 0HMT1G239242N:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T20:22:54.6561920+07:00 0HMT1G239242N:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:22:54.6581148+07:00 0HMT1G239242O:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:22:54.6587069+07:00 0HMT1G239242O:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:22:54.6603357+07:00 0HMT1G239242O:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:22:54.6621479+07:00 0HMT1G239242O:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T20:23:11.3120494+07:00 0HMT1G239242N:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:23:11.3121940+07:00 0HMT1G239242O:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:23:11.3125754+07:00 0HMT1G239242N:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:23:11.3126028+07:00 0HMT1G239242O:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:23:11.3139185+07:00 0HMT1G239242N:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:23:11.3141608+07:00 0HMT1G239242O:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:23:11.3180663+07:00 0HMT1G239242N:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:23:11.3181634+07:00 0HMT1G239242O:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T20:23:11.3303173+07:00 0HMT1G239242N:00000008 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T20:23:11.3330449+07:00 0HMT1G239242N:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T20:23:11.3342410+07:00 0HMT1G239242N:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:23:11.3353533+07:00 0HMT1G239242N:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T20:23:11.3363161+07:00 0HMT1G239242N:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:27:17.6630773+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T20:27:17.6730451+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T20:27:17.6843652+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T20:27:17.6845532+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T20:27:52.3358237+07:00 0HMT1G50L6KJI:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T20:27:53.1953152+07:00 0HMT1G50L6KJI:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:27:53.5398947+07:00 0HMT1G50L6KJI:00000002 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:27:53.5807245+07:00 0HMT1G50L6KJI:00000002 [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:27:54.0609133+07:00 0HMT1G50L6KJI:00000002 [INF] Executed DbCommand ("52"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T20:27:54.8449648+07:00 0HMT1G50L6KJH:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:27:54.8449649+07:00 0HMT1G50L6KJI:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:27:54.8553349+07:00 0HMT1G50L6KJI:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:27:54.8626838+07:00 0HMT1G50L6KJH:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:27:54.8704418+07:00 0HMT1G50L6KJI:00000004 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:27:54.8829942+07:00 0HMT1G50L6KJH:00000004 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:27:54.9764782+07:00 0HMT1G50L6KJJ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:27:54.9822451+07:00 0HMT1G50L6KJJ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:27:54.9838696+07:00 0HMT1G50L6KJJ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:27:54.9884084+07:00 0HMT1G50L6KJJ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:27:54.9889586+07:00 0HMT1G50L6KJJ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:27:54.9904854+07:00 0HMT1G50L6KJJ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:27:55.0176135+07:00 0HMT1G50L6KJJ:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T20:27:55.0555285+07:00 0HMT1G50L6KJH:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T20:27:55.0597088+07:00 0HMT1G50L6KJI:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:27:55.2131996+07:00 0HMT1G50L6KJI:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T20:27:55.2495641+07:00 0HMT1G50L6KJI:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T20:27:55.2589120+07:00 0HMT1G50L6KJI:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:27:55.2652077+07:00 0HMT1G50L6KJI:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T20:27:55.2665056+07:00 0HMT1G50L6KJI:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:27:56.1079008+07:00 0HMT1G50L6KJI:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:27:56.1084166+07:00 0HMT1G50L6KJI:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:27:56.1096727+07:00 0HMT1G50L6KJI:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:27:56.1269892+07:00 0HMT1G50L6KJI:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T20:27:56.1905415+07:00 0HMT1G50L6KJI:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:27:56.1911651+07:00 0HMT1G50L6KJI:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:27:56.1924542+07:00 0HMT1G50L6KJI:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:27:56.1959139+07:00 0HMT1G50L6KJI:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T20:27:56.1977661+07:00 0HMT1G50L6KJH:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:27:56.1983024+07:00 0HMT1G50L6KJH:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:27:56.1997888+07:00 0HMT1G50L6KJH:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:27:56.2020735+07:00 0HMT1G50L6KJH:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T20:27:56.2337666+07:00 0HMT1G50L6KJI:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:27:56.2347032+07:00 0HMT1G50L6KJI:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:27:56.2362858+07:00 0HMT1G50L6KJI:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:27:56.2549729+07:00 0HMT1G50L6KJI:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T20:28:15.7651407+07:00 0HMT1G50L6KJJ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:28:15.7656298+07:00 0HMT1G50L6KJJ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:28:15.7669212+07:00 0HMT1G50L6KJJ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:28:17.5777455+07:00 0HMT1G50L6KJI:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:28:17.5783414+07:00 0HMT1G50L6KJI:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:28:17.5797636+07:00 0HMT1G50L6KJI:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:28:17.5816545+07:00 0HMT1G50L6KJI:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:28:17.5849030+07:00 0HMT1G50L6KJH:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:28:17.5853262+07:00 0HMT1G50L6KJH:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:28:17.5866495+07:00 0HMT1G50L6KJH:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:28:17.5869383+07:00 0HMT1G50L6KJI:0000000D [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T20:28:17.5879069+07:00 0HMT1G50L6KJH:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T20:28:17.5927445+07:00 0HMT1G50L6KJI:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T20:28:17.5937518+07:00 0HMT1G50L6KJI:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:28:17.5946590+07:00 0HMT1G50L6KJI:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T20:28:17.5955196+07:00 0HMT1G50L6KJI:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:28:17.6314571+07:00 0HMT1G50L6KJK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:28:17.6322632+07:00 0HMT1G50L6KJK:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:28:17.6342321+07:00 0HMT1G50L6KJK:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:28:17.6394876+07:00 0HMT1G50L6KJK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:28:17.6399244+07:00 0HMT1G50L6KJK:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:28:17.6411483+07:00 0HMT1G50L6KJK:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:28:17.6423769+07:00 0HMT1G50L6KJK:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T20:28:18.6517724+07:00 0HMT1G50L6KJI:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:28:18.6522745+07:00 0HMT1G50L6KJI:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:28:18.6535494+07:00 0HMT1G50L6KJI:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:28:18.6565912+07:00 0HMT1G50L6KJI:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T20:28:18.7249890+07:00 0HMT1G50L6KJI:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:28:18.7257968+07:00 0HMT1G50L6KJH:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:28:18.7258715+07:00 0HMT1G50L6KJI:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:28:18.7262103+07:00 0HMT1G50L6KJH:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:28:18.7277832+07:00 0HMT1G50L6KJH:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:28:18.7277833+07:00 0HMT1G50L6KJI:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:28:18.7326958+07:00 0HMT1G50L6KJI:00000011 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T20:28:18.7326959+07:00 0HMT1G50L6KJH:00000008 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T20:28:21.6935939+07:00 0HMT1G50L6KJI:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:28:21.6941661+07:00 0HMT1G50L6KJI:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:28:21.6955127+07:00 0HMT1G50L6KJI:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:28:21.7953807+07:00 0HMT1G50L6KJI:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T20:28:21.8363091+07:00 0HMT1G50L6KJI:00000013 [INF] Executed DbCommand ("6"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T20:28:21.8790312+07:00 0HMT1G50L6KJI:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:28:21.8795438+07:00 0HMT1G50L6KJI:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:28:21.8808180+07:00 0HMT1G50L6KJI:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:28:21.8825326+07:00 0HMT1G50L6KJI:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T20:28:21.9009291+07:00 0HMT1G50L6KJI:00000015 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T20:31:15.1752840+07:00 0HMT1G50L6KJK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:31:15.1803583+07:00 0HMT1G50L6KJK:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:31:15.1932854+07:00 0HMT1G50L6KJK:00000002 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:31:16.5793555+07:00 0HMT1G50L6KJL:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:31:16.5800417+07:00 0HMT1G50L6KJL:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:31:16.5819232+07:00 0HMT1G50L6KJL:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:31:16.5871414+07:00 0HMT1G50L6KJL:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:31:16.5965483+07:00 0HMT1G50L6KJL:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T20:31:16.6014223+07:00 0HMT1G50L6KJL:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-20T20:31:16.6054260+07:00 0HMT1G50L6KJL:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T20:31:16.6090906+07:00 0HMT1G50L6KJL:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:31:16.6114887+07:00 0HMT1G50L6KJL:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T20:31:16.6125073+07:00 0HMT1G50L6KJL:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:31:16.6128947+07:00 0HMT1G50L6KJM:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:31:16.6132298+07:00 0HMT1G50L6KJM:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:31:16.6143990+07:00 0HMT1G50L6KJM:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:31:16.6175965+07:00 0HMT1G50L6KJM:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T20:31:16.6432798+07:00 0HMT1G50L6KJN:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:31:16.6438552+07:00 0HMT1G50L6KJN:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:31:16.6455392+07:00 0HMT1G50L6KJN:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:31:16.6459933+07:00 0HMT1G50L6KJN:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:31:16.6466098+07:00 0HMT1G50L6KJN:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:31:16.6486701+07:00 0HMT1G50L6KJN:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:31:16.6513690+07:00 0HMT1G50L6KJN:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T20:31:17.6872238+07:00 0HMT1G50L6KJL:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:31:17.6877247+07:00 0HMT1G50L6KJL:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:31:17.6890015+07:00 0HMT1G50L6KJL:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:31:17.6918148+07:00 0HMT1G50L6KJL:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T20:31:17.7707982+07:00 0HMT1G50L6KJL:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:31:17.7713361+07:00 0HMT1G50L6KJL:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:31:17.7717504+07:00 0HMT1G50L6KJM:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:31:17.7721040+07:00 0HMT1G50L6KJM:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:31:17.7727483+07:00 0HMT1G50L6KJL:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:31:17.7732075+07:00 0HMT1G50L6KJM:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:31:17.7757131+07:00 0HMT1G50L6KJM:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T20:31:17.7757119+07:00 0HMT1G50L6KJL:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T20:31:17.8097797+07:00 0HMT1G50L6KJL:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:31:17.8103116+07:00 0HMT1G50L6KJL:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:31:17.8116654+07:00 0HMT1G50L6KJL:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:31:17.8143814+07:00 0HMT1G50L6KJL:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T20:31:17.8172978+07:00 0HMT1G50L6KJL:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T20:31:29.2215297+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T20:31:29.2289608+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T20:31:29.2291990+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T20:31:29.2292222+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T20:31:29.6132410+07:00 0HMT1G71CNJ9V:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T20:31:30.6613691+07:00 0HMT1G71CNJ9V:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:31:30.9849790+07:00 0HMT1G71CNJ9V:00000002 [INF] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:31:31.0180420+07:00 0HMT1G71CNJ9V:00000002 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:31:31.0406299+07:00 0HMT1G71CNJ9V:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:31:31.0525913+07:00 0HMT1G71CNJ9V:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:31:31.0554506+07:00 0HMT1G71CNJ9V:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:31:31.4373764+07:00 0HMT1G71CNJ9V:00000002 [INF] Executed DbCommand ("46"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T20:32:33.6599616+07:00 0HMT1G71CNJA1:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:32:33.6599616+07:00 0HMT1G71CNJA0:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:32:33.6651939+07:00 0HMT1G71CNJA0:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:32:33.6686398+07:00 0HMT1G71CNJA1:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:32:33.6744499+07:00 0HMT1G71CNJA1:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:32:33.6744500+07:00 0HMT1G71CNJA0:00000003 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:32:33.8596461+07:00 0HMT1G71CNJA1:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T20:32:33.8638396+07:00 0HMT1G71CNJA0:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:32:34.1014203+07:00 0HMT1G71CNJA0:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T20:32:34.1436905+07:00 0HMT1G71CNJA0:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T20:32:34.1517984+07:00 0HMT1G71CNJA0:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:32:34.1675565+07:00 0HMT1G71CNJA0:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T20:32:34.1708469+07:00 0HMT1G71CNJA0:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:47:00.9441418+07:00 0HMT1G71CNJ9V:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:47:00.9483802+07:00 0HMT1G71CNJ9V:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:47:00.9595839+07:00 0HMT1G71CNJ9V:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:47:02.3101390+07:00 0HMT1G71CNJA3:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:47:02.3101390+07:00 0HMT1G71CNJA4:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:47:02.3106383+07:00 0HMT1G71CNJA3:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:47:02.3124278+07:00 0HMT1G71CNJA3:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:47:02.3128072+07:00 0HMT1G71CNJA4:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:47:02.3141291+07:00 0HMT1G71CNJA4:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:47:02.3188714+07:00 0HMT1G71CNJA3:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:47:02.3206131+07:00 0HMT1G71CNJA4:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T20:47:02.3249884+07:00 0HMT1G71CNJA3:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T20:47:02.3312271+07:00 0HMT1G71CNJA3:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T20:47:02.3330960+07:00 0HMT1G71CNJA5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:47:02.3337210+07:00 0HMT1G71CNJA5:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:47:02.3353985+07:00 0HMT1G71CNJA3:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:47:02.3354709+07:00 0HMT1G71CNJA5:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:47:02.3381210+07:00 0HMT1G71CNJA3:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T20:47:02.3391430+07:00 0HMT1G71CNJA3:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T20:47:02.3776392+07:00 0HMT1G71CNJA5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:47:02.3781984+07:00 0HMT1G71CNJA5:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:47:02.3794991+07:00 0HMT1G71CNJA5:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:47:02.3821308+07:00 0HMT1G71CNJA5:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T20:47:22.1692083+07:00 0HMT1G71CNJA3:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:47:22.1697631+07:00 0HMT1G71CNJA3:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:47:22.1710895+07:00 0HMT1G71CNJA3:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:47:22.1881105+07:00 0HMT1G71CNJA3:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T20:47:22.3023065+07:00 0HMT1G71CNJA3:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:47:22.3023011+07:00 0HMT1G71CNJA4:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:47:22.3029131+07:00 0HMT1G71CNJA3:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:47:22.3029340+07:00 0HMT1G71CNJA4:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:47:22.3043481+07:00 0HMT1G71CNJA3:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:47:22.3043730+07:00 0HMT1G71CNJA4:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:47:22.3169267+07:00 0HMT1G71CNJA7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T20:47:22.3174511+07:00 0HMT1G71CNJA7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T20:47:22.3187702+07:00 0HMT1G71CNJA7:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T20:47:22.3214073+07:00 0HMT1G71CNJA3:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T20:47:22.3214073+07:00 0HMT1G71CNJA4:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T20:47:22.3499094+07:00 0HMT1G71CNJA7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T20:47:22.4728953+07:00 0HMT1G71CNJA7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T21:52:51.2862546+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T21:52:51.2944652+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T21:52:51.2947852+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T21:52:51.2948120+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T21:53:18.7123213+07:00 0HMT1HKODRU94:00000003 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T21:53:19.7078192+07:00 0HMT1HKODRU94:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:53:20.1116404+07:00 0HMT1HKODRU94:00000003 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:53:20.1571299+07:00 0HMT1HKODRU94:00000003 [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:53:20.6474472+07:00 0HMT1HKODRU94:00000003 [INF] Executed DbCommand ("51"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T21:53:21.4696975+07:00 0HMT1HKODRU95:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:53:21.4783517+07:00 0HMT1HKODRU95:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:53:21.4820464+07:00 0HMT1HKODRU95:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:53:21.5600927+07:00 0HMT1HKODRU95:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:53:21.5665654+07:00 0HMT1HKODRU95:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:53:21.5680179+07:00 0HMT1HKODRU95:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:53:21.5983505+07:00 0HMT1HKODRU95:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T21:57:11.4423954+07:00 0HMT1HKODRU95:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:57:11.4431696+07:00 0HMT1HKODRU95:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:57:11.4610239+07:00 0HMT1HKODRU95:00000002 [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:57:11.4965892+07:00 0HMT1HKODRU96:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:57:11.5028462+07:00 0HMT1HKODRU96:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:57:11.5050079+07:00 0HMT1HKODRU96:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:57:11.5379309+07:00 0HMT1HKODRU96:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:57:11.5386569+07:00 0HMT1HKODRU96:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:57:11.5402784+07:00 0HMT1HKODRU96:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:57:11.5462718+07:00 0HMT1HKODRU96:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T21:57:11.6800230+07:00 0HMT1HKODRU96:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:57:11.6807703+07:00 0HMT1HKODRU96:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:57:11.6832433+07:00 0HMT1HKODRU96:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:57:13.5151071+07:00 0HMT1HKODRU97:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:57:13.5151615+07:00 0HMT1HKODRU98:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:57:13.5161852+07:00 0HMT1HKODRU97:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:57:13.5181244+07:00 0HMT1HKODRU97:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:57:13.5199621+07:00 0HMT1HKODRU98:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:57:13.5214622+07:00 0HMT1HKODRU98:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:57:13.5908501+07:00 0HMT1HKODRU99:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:57:13.5919566+07:00 0HMT1HKODRU99:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:57:13.5934719+07:00 0HMT1HKODRU99:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:57:13.6176951+07:00 0HMT1HKODRU99:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:57:13.6185913+07:00 0HMT1HKODRU99:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:57:13.6200373+07:00 0HMT1HKODRU99:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:57:13.6214640+07:00 0HMT1HKODRU99:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T21:57:14.5033533+07:00 0HMT1HKODRU98:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T21:57:14.5094903+07:00 0HMT1HKODRU97:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T21:57:14.7764503+07:00 0HMT1HKODRU97:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T21:57:14.7979828+07:00 0HMT1HKODRU97:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-20T21:57:14.8226148+07:00 0HMT1HKODRU97:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T21:57:14.8306650+07:00 0HMT1HKODRU97:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T21:57:14.8372195+07:00 0HMT1HKODRU97:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T21:57:14.8383284+07:00 0HMT1HKODRU97:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T21:57:23.0500401+07:00 0HMT1HKODRU97:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:57:23.0506770+07:00 0HMT1HKODRU97:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:57:23.0640711+07:00 0HMT1HKODRU97:00000005 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:57:23.0890307+07:00 0HMT1HKODRU97:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T21:57:23.1727941+07:00 0HMT1HKODRU97:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:57:23.1733284+07:00 0HMT1HKODRU97:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:57:23.1759237+07:00 0HMT1HKODRU98:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:57:23.1764288+07:00 0HMT1HKODRU98:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:57:23.1837310+07:00 0HMT1HKODRU97:00000007 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:57:23.1871547+07:00 0HMT1HKODRU97:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T21:57:23.1873224+07:00 0HMT1HKODRU98:00000004 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:57:23.1895405+07:00 0HMT1HKODRU98:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T21:57:23.2372159+07:00 0HMT1HKODRU97:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:57:23.2381178+07:00 0HMT1HKODRU97:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:57:23.2527161+07:00 0HMT1HKODRU97:00000009 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:57:23.2820200+07:00 0HMT1HKODRU97:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T21:57:44.4519574+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T21:57:44.4650739+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T21:57:44.4656288+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T21:57:44.4656828+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T21:57:44.8183465+07:00 0HMT1HN7O0GCL:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T21:57:46.0243029+07:00 0HMT1HN7O0GCL:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:57:46.4064691+07:00 0HMT1HN7O0GCL:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:57:46.4528927+07:00 0HMT1HN7O0GCL:00000002 [INF] Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:57:46.4781145+07:00 0HMT1HN7O0GCL:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:57:46.4894199+07:00 0HMT1HN7O0GCL:00000002 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:57:46.4908181+07:00 0HMT1HN7O0GCL:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:57:46.9365968+07:00 0HMT1HN7O0GCL:00000002 [INF] Executed DbCommand ("51"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T21:58:16.0329038+07:00 0HMT1HN7O0GCN:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:58:16.0329038+07:00 0HMT1HN7O0GCM:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:58:16.0385457+07:00 0HMT1HN7O0GCN:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:58:16.0403646+07:00 0HMT1HN7O0GCN:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:58:16.0413673+07:00 0HMT1HN7O0GCM:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:58:16.0438024+07:00 0HMT1HN7O0GCM:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:58:16.2889888+07:00 0HMT1HN7O0GCN:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T21:58:16.2922583+07:00 0HMT1HN7O0GCM:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T21:58:16.5857641+07:00 0HMT1HN7O0GCM:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T21:58:16.6185234+07:00 0HMT1HN7O0GCM:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-20T21:58:16.6467120+07:00 0HMT1HN7O0GCM:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T21:58:16.6582616+07:00 0HMT1HN7O0GCM:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T21:58:16.6803052+07:00 0HMT1HN7O0GCM:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T21:58:16.6842069+07:00 0HMT1HN7O0GCM:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T21:58:23.7811973+07:00 0HMT1HN7O0GCO:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:58:23.7817532+07:00 0HMT1HN7O0GCO:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:58:23.7831632+07:00 0HMT1HN7O0GCO:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:58:23.7863792+07:00 0HMT1HN7O0GCO:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T21:58:23.7937770+07:00 0HMT1HN7O0GCO:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T21:58:23.7948379+07:00 0HMT1HN7O0GCQ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:58:23.7953529+07:00 0HMT1HN7O0GCQ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:58:23.7960534+07:00 0HMT1HN7O0GCO:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-20T21:58:23.7970608+07:00 0HMT1HN7O0GCQ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:58:23.7971002+07:00 0HMT1HN7O0GCO:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T21:58:23.7980847+07:00 0HMT1HN7O0GCO:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T21:58:23.7988263+07:00 0HMT1HN7O0GCQ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T21:58:23.8010111+07:00 0HMT1HN7O0GCO:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T21:58:23.8020742+07:00 0HMT1HN7O0GCO:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T21:58:23.9212223+07:00 0HMT1HN7O0GCP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:58:23.9217237+07:00 0HMT1HN7O0GCP:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:58:23.9242859+07:00 0HMT1HN7O0GCP:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:58:23.9344585+07:00 0HMT1HN7O0GCP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:58:23.9349958+07:00 0HMT1HN7O0GCP:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:58:23.9368267+07:00 0HMT1HN7O0GCP:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:58:23.9387142+07:00 0HMT1HN7O0GCP:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T21:59:35.5373867+07:00 0HMT1HN7O0GCL:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:59:35.5373883+07:00 0HMT1HN7O0GCP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:59:35.5381888+07:00 0HMT1HN7O0GCP:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:59:35.5381891+07:00 0HMT1HN7O0GCL:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:59:35.5498446+07:00 0HMT1HN7O0GCL:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:59:35.5553711+07:00 0HMT1HN7O0GCP:00000002 [INF] Executed DbCommand ("17"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:59:39.2237110+07:00 0HMT1HN7O0GCO:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:59:39.2240091+07:00 0HMT1HN7O0GCQ:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:59:39.2244788+07:00 0HMT1HN7O0GCO:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:59:39.2246104+07:00 0HMT1HN7O0GCQ:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:59:39.2319840+07:00 0HMT1HN7O0GCR:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:59:39.2378381+07:00 0HMT1HN7O0GCQ:00000004 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:59:39.2378151+07:00 0HMT1HN7O0GCO:00000006 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:59:39.2380436+07:00 0HMT1HN7O0GCR:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:59:39.2397994+07:00 0HMT1HN7O0GCR:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:59:39.2422143+07:00 0HMT1HN7O0GCR:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:59:39.2461645+07:00 0HMT1HN7O0GCR:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:59:39.2480228+07:00 0HMT1HN7O0GCO:00000006 [INF] Executed DbCommand ("7"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T21:59:39.2499348+07:00 0HMT1HN7O0GCQ:00000004 [INF] Executed DbCommand ("9"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T21:59:39.2499349+07:00 0HMT1HN7O0GCR:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:59:39.2663617+07:00 0HMT1HN7O0GCR:00000002 [INF] Executed DbCommand ("7"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T21:59:39.2739145+07:00 0HMT1HN7O0GCQ:00000004 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T21:59:39.2784812+07:00 0HMT1HN7O0GCQ:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-20T21:59:39.2827289+07:00 0HMT1HN7O0GCQ:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T21:59:39.2874789+07:00 0HMT1HN7O0GCQ:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T21:59:39.2914468+07:00 0HMT1HN7O0GCQ:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T21:59:39.2928522+07:00 0HMT1HN7O0GCQ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T21:59:39.9904130+07:00 0HMT1HN7O0GCQ:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:59:39.9909537+07:00 0HMT1HN7O0GCQ:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:59:39.9931840+07:00 0HMT1HN7O0GCQ:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:59:40.0132433+07:00 0HMT1HN7O0GCQ:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T21:59:40.0749832+07:00 0HMT1HN7O0GCO:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:59:40.0749830+07:00 0HMT1HN7O0GCQ:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:59:40.0757915+07:00 0HMT1HN7O0GCQ:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:59:40.0758902+07:00 0HMT1HN7O0GCO:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:59:40.0780224+07:00 0HMT1HN7O0GCQ:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:59:40.0782697+07:00 0HMT1HN7O0GCO:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:59:40.0861247+07:00 0HMT1HN7O0GCQ:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T21:59:40.0860535+07:00 0HMT1HN7O0GCO:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T21:59:40.1253627+07:00 0HMT1HN7O0GCO:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:59:40.1260446+07:00 0HMT1HN7O0GCO:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:59:40.1275366+07:00 0HMT1HN7O0GCO:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:59:40.1501106+07:00 0HMT1HN7O0GCO:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T21:59:40.2999210+07:00 0HMT1HN7O0GCO:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T21:59:45.6471625+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T21:59:45.6626139+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T21:59:45.6726523+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T21:59:45.6727310+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T21:59:48.6088269+07:00 0HMT1HOCKMEBQ:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T21:59:49.6779315+07:00 0HMT1HOCKMEBQ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:59:50.0469024+07:00 0HMT1HOCKMEBQ:00000002 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:59:50.0854736+07:00 0HMT1HOCKMEBQ:00000002 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:59:50.1034563+07:00 0HMT1HOCKMEBQ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:59:50.1250437+07:00 0HMT1HOCKMEBQ:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:59:50.1264283+07:00 0HMT1HOCKMEBQ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T21:59:50.5739981+07:00 0HMT1HOCKMEBQ:00000002 [INF] Executed DbCommand ("47"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T21:59:59.7774987+07:00 0HMT1HOCKMEBQ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T21:59:59.7825272+07:00 0HMT1HOCKMEBQ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T21:59:59.7840191+07:00 0HMT1HOCKMEBQ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:00:03.2869908+07:00 0HMT1HOCKMEBU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:00:03.2878908+07:00 0HMT1HOCKMEBU:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:00:03.2892820+07:00 0HMT1HOCKMEBU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:00:03.2898088+07:00 0HMT1HOCKMEBU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:00:03.2901704+07:00 0HMT1HOCKMEBU:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:00:03.2921802+07:00 0HMT1HOCKMEBU:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:00:03.2988680+07:00 0HMT1HOCKMEBU:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T22:00:03.3084414+07:00 0HMT1HOCKMEBS:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:00:03.3084415+07:00 0HMT1HOCKMEBT:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:00:03.3099082+07:00 0HMT1HOCKMEBS:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:00:03.3127209+07:00 0HMT1HOCKMEBS:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:00:03.3143576+07:00 0HMT1HOCKMEBT:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:00:03.3161111+07:00 0HMT1HOCKMEBT:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:00:03.5660406+07:00 0HMT1HOCKMEBT:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T22:00:03.5704250+07:00 0HMT1HOCKMEBS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:00:03.7844423+07:00 0HMT1HOCKMEBS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T22:00:03.8233618+07:00 0HMT1HOCKMEBS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:00:03.8525650+07:00 0HMT1HOCKMEBS:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T22:00:03.8657018+07:00 0HMT1HOCKMEBS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:00:03.8956389+07:00 0HMT1HOCKMEBS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T22:00:03.8977151+07:00 0HMT1HOCKMEBS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:00:06.4085358+07:00 0HMT1HOCKMEBS:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:00:06.4090731+07:00 0HMT1HOCKMEBS:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:00:06.4104641+07:00 0HMT1HOCKMEBS:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:00:06.4317429+07:00 0HMT1HOCKMEBS:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T22:00:06.4993402+07:00 0HMT1HOCKMEBS:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:00:06.4999767+07:00 0HMT1HOCKMEBS:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:00:06.5001208+07:00 0HMT1HOCKMEBT:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:00:06.5005468+07:00 0HMT1HOCKMEBT:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:00:06.5020901+07:00 0HMT1HOCKMEBT:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:00:06.5020901+07:00 0HMT1HOCKMEBS:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:00:06.5111911+07:00 0HMT1HOCKMEBS:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:00:06.5111911+07:00 0HMT1HOCKMEBT:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:00:06.5436215+07:00 0HMT1HOCKMEBS:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:00:06.5442343+07:00 0HMT1HOCKMEBS:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:00:06.5457701+07:00 0HMT1HOCKMEBS:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:00:06.5639777+07:00 0HMT1HOCKMEBS:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:04:11.4415311+07:00 0HMT1HOCKMEBV:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:04:11.4427700+07:00 0HMT1HOCKMEBV:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:04:11.4533021+07:00 0HMT1HOCKMEC0:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:04:11.4541394+07:00 0HMT1HOCKMEC0:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:04:11.4615539+07:00 0HMT1HOCKMEBV:00000004 [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:04:11.4631558+07:00 0HMT1HOCKMEC0:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:04:11.4764815+07:00 0HMT1HOCKMEC0:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T22:04:11.4810146+07:00 0HMT1HOCKMEBV:00000004 [INF] Executed DbCommand ("18"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:04:11.4984718+07:00 0HMT1HOCKMEBV:00000004 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T22:04:11.5024442+07:00 0HMT1HOCKMEBV:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:04:11.5069485+07:00 0HMT1HOCKMEBV:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T22:04:11.5129351+07:00 0HMT1HOCKMEBV:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:04:11.5158958+07:00 0HMT1HOCKMEBV:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T22:04:11.5171850+07:00 0HMT1HOCKMEBV:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:04:21.0019070+07:00 0HMT1HOCKMEBU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:04:21.0026775+07:00 0HMT1HOCKMEBU:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:04:21.0092545+07:00 0HMT1HOCKMEBU:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:04:21.0969006+07:00 0HMT1HOCKMEC1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:04:21.0977302+07:00 0HMT1HOCKMEC1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:04:21.0998412+07:00 0HMT1HOCKMEC1:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:04:21.1216320+07:00 0HMT1HOCKMEC1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:04:21.1307985+07:00 0HMT1HOCKMEC1:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:04:21.1342252+07:00 0HMT1HOCKMEC1:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:04:23.8067168+07:00 0HMT1HOCKMEC0:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:04:23.8081289+07:00 0HMT1HOCKMEC0:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:04:23.8112058+07:00 0HMT1HOCKMEC0:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:04:23.8176319+07:00 0HMT1HOCKMEC0:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:04:23.8198879+07:00 0HMT1HOCKMEC2:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:04:23.8208056+07:00 0HMT1HOCKMEC2:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:04:23.8210303+07:00 0HMT1HOCKMEC0:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T22:04:23.8231852+07:00 0HMT1HOCKMEC2:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:04:23.8232599+07:00 0HMT1HOCKMEC0:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:04:23.8245582+07:00 0HMT1HOCKMEC2:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T22:04:23.8245583+07:00 0HMT1HOCKMEC0:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T22:04:23.8270096+07:00 0HMT1HOCKMEC0:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:04:23.8280072+07:00 0HMT1HOCKMEC0:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T22:04:23.8289514+07:00 0HMT1HOCKMEC0:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:04:23.8331117+07:00 0HMT1HOCKMEC3:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:04:23.8345104+07:00 0HMT1HOCKMEC3:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:04:23.8377203+07:00 0HMT1HOCKMEC3:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:04:23.8600439+07:00 0HMT1HOCKMEC3:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:04:23.8607084+07:00 0HMT1HOCKMEC3:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:04:23.8621083+07:00 0HMT1HOCKMEC3:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:04:23.8641372+07:00 0HMT1HOCKMEC3:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T22:04:26.5678281+07:00 0HMT1HOCKMEC0:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:04:26.5686035+07:00 0HMT1HOCKMEC0:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:04:26.5711346+07:00 0HMT1HOCKMEC0:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:04:26.5753913+07:00 0HMT1HOCKMEC0:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T22:04:26.6703624+07:00 0HMT1HOCKMEC0:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:04:26.6714474+07:00 0HMT1HOCKMEC0:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:04:26.6721120+07:00 0HMT1HOCKMEC2:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:04:26.6727408+07:00 0HMT1HOCKMEC2:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:04:26.6739807+07:00 0HMT1HOCKMEC0:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:04:26.6749687+07:00 0HMT1HOCKMEC2:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:04:26.6772082+07:00 0HMT1HOCKMEC0:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:04:26.6779016+07:00 0HMT1HOCKMEC2:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:04:26.6833816+07:00 0HMT1HOCKMEC0:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:04:26.6841102+07:00 0HMT1HOCKMEC0:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:04:26.6863748+07:00 0HMT1HOCKMEC0:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:04:26.6913320+07:00 0HMT1HOCKMEC0:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:04:31.3613780+07:00 0HMT1HOCKMEC0:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:04:31.3618795+07:00 0HMT1HOCKMEC0:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:04:31.3632155+07:00 0HMT1HOCKMEC0:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:04:31.4973960+07:00 0HMT1HOCKMEC0:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T22:04:31.5419296+07:00 0HMT1HOCKMEC0:0000000B [INF] Executed DbCommand ("4"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T22:04:31.5947938+07:00 0HMT1HOCKMEC0:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:04:31.5955082+07:00 0HMT1HOCKMEC0:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:04:31.5972996+07:00 0HMT1HOCKMEC0:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:04:31.6002701+07:00 0HMT1HOCKMEC0:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:04:31.6260514+07:00 0HMT1HOCKMEC0:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T22:04:34.1258165+07:00 0HMT1HOCKMEC0:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:04:34.1264488+07:00 0HMT1HOCKMEC0:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:04:34.1283739+07:00 0HMT1HOCKMEC0:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:04:34.1303617+07:00 0HMT1HOCKMEC0:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T22:04:34.1320599+07:00 0HMT1HOCKMEC0:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T22:04:34.1813407+07:00 0HMT1HOCKMEC0:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:04:34.1820160+07:00 0HMT1HOCKMEC0:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:04:34.1836553+07:00 0HMT1HOCKMEC0:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:04:34.1860621+07:00 0HMT1HOCKMEC0:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:04:34.1882747+07:00 0HMT1HOCKMEC0:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T22:04:47.9462502+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T22:04:47.9553039+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T22:04:47.9555814+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T22:04:47.9556023+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T22:04:48.2506850+07:00 0HMT1HR5UD51J:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T22:04:49.4818130+07:00 0HMT1HR5UD51J:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:04:49.9298114+07:00 0HMT1HR5UD51J:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:04:49.9650555+07:00 0HMT1HR5UD51J:00000002 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:04:49.9860130+07:00 0HMT1HR5UD51J:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:04:49.9990953+07:00 0HMT1HR5UD51J:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:04:50.0014115+07:00 0HMT1HR5UD51J:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:04:50.4406734+07:00 0HMT1HR5UD51J:00000002 [INF] Executed DbCommand ("52"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T22:05:42.3424586+07:00 0HMT1HR5UD51L:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:05:42.3424587+07:00 0HMT1HR5UD51M:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:05:42.3497556+07:00 0HMT1HR5UD51L:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:05:42.3530312+07:00 0HMT1HR5UD51M:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:05:42.3608879+07:00 0HMT1HR5UD51M:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:05:42.3612623+07:00 0HMT1HR5UD51L:00000003 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:05:42.5980822+07:00 0HMT1HR5UD51M:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T22:05:42.6020164+07:00 0HMT1HR5UD51L:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:05:42.8511093+07:00 0HMT1HR5UD51L:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T22:05:42.9015606+07:00 0HMT1HR5UD51L:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T22:05:42.9142525+07:00 0HMT1HR5UD51L:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:05:42.9408566+07:00 0HMT1HR5UD51L:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T22:05:42.9456292+07:00 0HMT1HR5UD51L:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:05:48.3654253+07:00 0HMT1HR5UD51J:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:05:48.3664096+07:00 0HMT1HR5UD51J:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:05:48.3682845+07:00 0HMT1HR5UD51J:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:05:58.2684085+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T22:05:58.2774718+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T22:05:58.2779089+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T22:05:58.2779599+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T22:05:58.7577703+07:00 0HMT1HRQT6JTC:00000003 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T22:06:00.0488554+07:00 0HMT1HRQT6JTD:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:06:00.0488549+07:00 0HMT1HRQT6JTC:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:06:00.4712298+07:00 0HMT1HRQT6JTD:00000003 [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:06:00.4712382+07:00 0HMT1HRQT6JTC:00000003 [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:06:00.5124250+07:00 0HMT1HRQT6JTD:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:06:00.5124250+07:00 0HMT1HRQT6JTC:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:06:01.1982461+07:00 0HMT1HRQT6JTC:00000003 [INF] Executed DbCommand ("60"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:06:01.1982460+07:00 0HMT1HRQT6JTD:00000003 [INF] Executed DbCommand ("60"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T22:06:01.4016791+07:00 0HMT1HRQT6JTC:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T22:06:01.4512488+07:00 0HMT1HRQT6JTC:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T22:06:01.4604943+07:00 0HMT1HRQT6JTC:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:06:01.4825371+07:00 0HMT1HRQT6JTC:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T22:06:01.4875874+07:00 0HMT1HRQT6JTC:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:06:07.7018543+07:00 0HMT1HRQT6JTD:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:06:07.7018543+07:00 0HMT1HRQT6JTC:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:06:07.7033486+07:00 0HMT1HRQT6JTG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:06:07.7084761+07:00 0HMT1HRQT6JTD:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:06:07.7084762+07:00 0HMT1HRQT6JTG:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:06:07.7115633+07:00 0HMT1HRQT6JTC:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:06:07.7213608+07:00 0HMT1HRQT6JTG:00000002 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:06:07.7315549+07:00 0HMT1HRQT6JTG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:06:07.7319643+07:00 0HMT1HRQT6JTC:00000005 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:06:07.7323395+07:00 0HMT1HRQT6JTG:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:06:07.7345459+07:00 0HMT1HRQT6JTG:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:06:07.7382833+07:00 0HMT1HRQT6JTD:00000005 [INF] Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:06:07.7408846+07:00 0HMT1HRQT6JTC:00000005 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T22:06:07.7445676+07:00 0HMT1HRQT6JTD:00000005 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:06:07.7536464+07:00 0HMT1HRQT6JTD:00000005 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T22:06:07.7546570+07:00 0HMT1HRQT6JTG:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T22:06:07.7617805+07:00 0HMT1HRQT6JTD:00000005 [INF] Executed DbCommand ("7"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T22:06:07.7695196+07:00 0HMT1HRQT6JTD:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:06:07.7733894+07:00 0HMT1HRQT6JTD:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T22:06:07.7746335+07:00 0HMT1HRQT6JTD:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:06:09.8316653+07:00 0HMT1HRQT6JTD:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:06:09.8322895+07:00 0HMT1HRQT6JTD:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:06:09.8426607+07:00 0HMT1HRQT6JTD:00000006 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:06:09.8654753+07:00 0HMT1HRQT6JTD:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T22:06:09.9539457+07:00 0HMT1HRQT6JTC:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:06:09.9545881+07:00 0HMT1HRQT6JTD:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:06:09.9545903+07:00 0HMT1HRQT6JTC:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:06:09.9549716+07:00 0HMT1HRQT6JTD:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:06:09.9562790+07:00 0HMT1HRQT6JTC:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:06:09.9562790+07:00 0HMT1HRQT6JTD:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:06:09.9685995+07:00 0HMT1HRQT6JTC:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:06:09.9687249+07:00 0HMT1HRQT6JTD:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:06:10.0135732+07:00 0HMT1HRQT6JTC:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:06:10.0143987+07:00 0HMT1HRQT6JTC:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:06:10.0157729+07:00 0HMT1HRQT6JTC:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:06:10.0347599+07:00 0HMT1HRQT6JTC:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:06:37.4404516+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T22:06:37.4636815+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T22:06:37.4641033+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T22:06:37.4641445+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T22:06:37.7796235+07:00 0HMT1HS6IM3MG:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T22:06:39.0324978+07:00 0HMT1HS6IM3MG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:06:39.4347948+07:00 0HMT1HS6IM3MG:00000002 [INF] Executed DbCommand ("26"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:06:39.4777492+07:00 0HMT1HS6IM3MG:00000002 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:06:39.4961516+07:00 0HMT1HS6IM3MG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:06:39.5229283+07:00 0HMT1HS6IM3MG:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:06:39.5285609+07:00 0HMT1HS6IM3MG:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:06:39.9951142+07:00 0HMT1HS6IM3MG:00000002 [INF] Executed DbCommand ("49"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T22:07:12.4468937+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T22:07:12.4552470+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T22:07:12.4557623+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T22:07:12.4558193+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T22:07:13.6333280+07:00 0HMT1HSH8IE48:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T22:07:14.6176165+07:00 0HMT1HSH8IE48:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:07:15.0152489+07:00 0HMT1HSH8IE48:00000002 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:07:15.0638435+07:00 0HMT1HSH8IE48:00000002 [INF] Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:07:15.0855677+07:00 0HMT1HSH8IE48:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:07:15.1133237+07:00 0HMT1HSH8IE48:00000002 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:07:15.1227020+07:00 0HMT1HSH8IE48:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:07:15.5866954+07:00 0HMT1HSH8IE48:00000002 [INF] Executed DbCommand ("52"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T22:13:24.9310828+07:00 0HMT1HSH8IE48:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:13:24.9375641+07:00 0HMT1HSH8IE48:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:13:24.9561159+07:00 0HMT1HSH8IE48:00000002 [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:13:26.8788420+07:00 0HMT1HSH8IE4C:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:13:26.8788420+07:00 0HMT1HSH8IE4D:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:13:26.8799977+07:00 0HMT1HSH8IE4C:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:13:26.8821962+07:00 0HMT1HSH8IE4C:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:13:26.8847205+07:00 0HMT1HSH8IE4D:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:13:26.8873548+07:00 0HMT1HSH8IE4E:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:13:26.8873681+07:00 0HMT1HSH8IE4D:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:13:26.8883502+07:00 0HMT1HSH8IE4E:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:13:26.8912547+07:00 0HMT1HSH8IE4E:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:13:26.8968908+07:00 0HMT1HSH8IE4E:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:13:26.8976496+07:00 0HMT1HSH8IE4E:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:13:26.9001392+07:00 0HMT1HSH8IE4E:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:13:26.9094810+07:00 0HMT1HSH8IE4E:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T22:13:27.1622936+07:00 0HMT1HSH8IE4D:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T22:13:27.1707417+07:00 0HMT1HSH8IE4C:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:13:27.3852629+07:00 0HMT1HSH8IE4C:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T22:13:27.4376450+07:00 0HMT1HSH8IE4C:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T22:13:27.4465271+07:00 0HMT1HSH8IE4C:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:13:27.4666288+07:00 0HMT1HSH8IE4C:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T22:13:27.4678811+07:00 0HMT1HSH8IE4C:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:13:28.9811370+07:00 0HMT1HSH8IE4C:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:13:28.9816394+07:00 0HMT1HSH8IE4C:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:13:28.9830448+07:00 0HMT1HSH8IE4C:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:13:29.0041892+07:00 0HMT1HSH8IE4C:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T22:13:29.0640655+07:00 0HMT1HSH8IE4D:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:13:29.0643019+07:00 0HMT1HSH8IE4C:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:13:29.0646602+07:00 0HMT1HSH8IE4C:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:13:29.0646602+07:00 0HMT1HSH8IE4D:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:13:29.0661185+07:00 0HMT1HSH8IE4C:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:13:29.0661943+07:00 0HMT1HSH8IE4D:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:13:29.0804807+07:00 0HMT1HSH8IE4D:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:13:29.0804806+07:00 0HMT1HSH8IE4C:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:13:29.1263321+07:00 0HMT1HSH8IE4C:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:13:29.1271607+07:00 0HMT1HSH8IE4C:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:13:29.1296294+07:00 0HMT1HSH8IE4C:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:13:29.1517724+07:00 0HMT1HSH8IE4C:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:13:38.9625811+07:00 0HMT1HSH8IE4C:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:13:38.9631683+07:00 0HMT1HSH8IE4C:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:13:38.9647499+07:00 0HMT1HSH8IE4C:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:13:39.0815411+07:00 0HMT1HSH8IE4C:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T22:13:39.1230478+07:00 0HMT1HSH8IE4C:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T22:13:39.1811801+07:00 0HMT1HSH8IE4C:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:13:39.1816865+07:00 0HMT1HSH8IE4C:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:13:39.1830043+07:00 0HMT1HSH8IE4C:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:13:39.1855350+07:00 0HMT1HSH8IE4C:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:13:39.2059293+07:00 0HMT1HSH8IE4C:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T22:15:37.5789741+07:00 0HMT1HSH8IE4F:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:15:37.5803462+07:00 0HMT1HSH8IE4F:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:15:37.5898273+07:00 0HMT1HSH8IE4G:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:15:37.5910137+07:00 0HMT1HSH8IE4G:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:15:37.5978040+07:00 0HMT1HSH8IE4F:00000003 [INF] Executed DbCommand ("17"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:15:37.5987300+07:00 0HMT1HSH8IE4G:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:15:37.6075439+07:00 0HMT1HSH8IE4F:00000003 [INF] Executed DbCommand ("9"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:15:37.6075439+07:00 0HMT1HSH8IE4G:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T22:15:37.6313284+07:00 0HMT1HSH8IE4F:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T22:15:37.6342213+07:00 0HMT1HSH8IE4F:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T22:15:37.6366822+07:00 0HMT1HSH8IE4F:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:15:37.6388288+07:00 0HMT1HSH8IE4F:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T22:15:37.6399856+07:00 0HMT1HSH8IE4F:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:15:39.0920534+07:00 0HMT1HSH8IE4E:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:15:39.0925409+07:00 0HMT1HSH8IE4E:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:15:39.0938842+07:00 0HMT1HSH8IE4E:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:15:40.9243135+07:00 0HMT1HSH8IE4F:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:15:40.9249323+07:00 0HMT1HSH8IE4F:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:15:40.9267294+07:00 0HMT1HSH8IE4F:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:15:40.9293179+07:00 0HMT1HSH8IE4F:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:15:40.9314384+07:00 0HMT1HSH8IE4F:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T22:15:40.9324584+07:00 0HMT1HSH8IE4F:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T22:15:40.9332548+07:00 0HMT1HSH8IE4F:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:15:40.9340996+07:00 0HMT1HSH8IE4F:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T22:15:40.9352543+07:00 0HMT1HSH8IE4F:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:15:40.9606452+07:00 0HMT1HSH8IE4F:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:15:40.9611563+07:00 0HMT1HSH8IE4F:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:15:40.9630431+07:00 0HMT1HSH8IE4F:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:15:40.9657456+07:00 0HMT1HSH8IE4F:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T22:15:41.0299790+07:00 0HMT1HSH8IE4I:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:15:41.0306397+07:00 0HMT1HSH8IE4I:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:15:41.0321851+07:00 0HMT1HSH8IE4I:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:15:41.0383115+07:00 0HMT1HSH8IE4I:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:15:41.0388716+07:00 0HMT1HSH8IE4I:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:15:41.0402311+07:00 0HMT1HSH8IE4I:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:15:41.0429959+07:00 0HMT1HSH8IE4I:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T22:16:22.6469399+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T22:16:22.6565413+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T22:16:22.6569676+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T22:16:22.6570082+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T22:16:23.1627626+07:00 0HMT1I1L1DI35:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T22:16:24.3155106+07:00 0HMT1I1L1DI35:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:16:24.6901817+07:00 0HMT1I1L1DI35:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:16:24.7345968+07:00 0HMT1I1L1DI35:00000002 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:16:24.7513558+07:00 0HMT1I1L1DI35:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:16:24.7739885+07:00 0HMT1I1L1DI35:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:16:24.7756511+07:00 0HMT1I1L1DI35:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:16:25.2387806+07:00 0HMT1I1L1DI35:00000002 [INF] Executed DbCommand ("49"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T22:16:46.9761356+07:00 0HMT1I1L1DI36:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:16:46.9761357+07:00 0HMT1I1L1DI37:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:16:46.9813910+07:00 0HMT1I1L1DI36:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:16:46.9826874+07:00 0HMT1I1L1DI36:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:16:46.9834507+07:00 0HMT1I1L1DI37:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:16:46.9847353+07:00 0HMT1I1L1DI37:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:16:46.9907631+07:00 0HMT1I1L1DI38:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:16:46.9914401+07:00 0HMT1I1L1DI38:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:16:46.9930162+07:00 0HMT1I1L1DI38:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:16:47.0207683+07:00 0HMT1I1L1DI38:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:16:47.0217037+07:00 0HMT1I1L1DI38:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:16:47.0236004+07:00 0HMT1I1L1DI38:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:16:47.0289341+07:00 0HMT1I1L1DI38:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T22:16:47.1803549+07:00 0HMT1I1L1DI37:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T22:16:47.1855190+07:00 0HMT1I1L1DI36:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:16:47.4359003+07:00 0HMT1I1L1DI36:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T22:16:47.4796076+07:00 0HMT1I1L1DI36:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T22:16:47.4906938+07:00 0HMT1I1L1DI36:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:16:47.5110827+07:00 0HMT1I1L1DI36:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T22:16:47.5120624+07:00 0HMT1I1L1DI36:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:16:51.4692227+07:00 0HMT1I1L1DI3A:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:16:51.4692227+07:00 0HMT1I1L1DI39:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:16:51.4700349+07:00 0HMT1I1L1DI3A:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:16:51.4700349+07:00 0HMT1I1L1DI39:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:16:51.4720195+07:00 0HMT1I1L1DI3A:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:16:51.4720195+07:00 0HMT1I1L1DI39:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:16:51.4738754+07:00 0HMT1I1L1DI39:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:16:51.4737863+07:00 0HMT1I1L1DI3A:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T22:16:51.4767248+07:00 0HMT1I1L1DI39:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T22:16:51.4787356+07:00 0HMT1I1L1DI39:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T22:16:51.4796480+07:00 0HMT1I1L1DI39:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:16:51.4808981+07:00 0HMT1I1L1DI39:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T22:16:51.4817831+07:00 0HMT1I1L1DI39:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:16:51.5451045+07:00 0HMT1I1L1DI3B:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:16:51.5456694+07:00 0HMT1I1L1DI3B:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:16:51.5470775+07:00 0HMT1I1L1DI3B:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:16:51.5760280+07:00 0HMT1I1L1DI3B:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:16:51.5772568+07:00 0HMT1I1L1DI3B:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:16:51.5791503+07:00 0HMT1I1L1DI3B:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:16:51.5809299+07:00 0HMT1I1L1DI3B:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T22:16:55.8939437+07:00 0HMT1I1L1DI35:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:16:55.8939437+07:00 0HMT1I1L1DI3B:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:16:55.8939436+07:00 0HMT1I1L1DI38:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:16:55.8945254+07:00 0HMT1I1L1DI38:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:16:55.8945254+07:00 0HMT1I1L1DI35:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:16:55.8962242+07:00 0HMT1I1L1DI38:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:16:55.8962243+07:00 0HMT1I1L1DI35:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:16:55.8981249+07:00 0HMT1I1L1DI3B:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:16:55.9017385+07:00 0HMT1I1L1DI3B:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:16:58.9628911+07:00 0HMT1I1L1DI39:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:16:58.9637914+07:00 0HMT1I1L1DI39:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:16:58.9672797+07:00 0HMT1I1L1DI39:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:16:58.9745487+07:00 0HMT1I1L1DI39:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:16:58.9787228+07:00 0HMT1I1L1DI3A:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:16:58.9803061+07:00 0HMT1I1L1DI3A:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:16:58.9808082+07:00 0HMT1I1L1DI39:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T22:16:58.9828329+07:00 0HMT1I1L1DI3A:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:16:58.9832802+07:00 0HMT1I1L1DI39:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T22:16:58.9856669+07:00 0HMT1I1L1DI39:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:16:58.9856669+07:00 0HMT1I1L1DI3A:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T22:16:58.9887442+07:00 0HMT1I1L1DI39:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T22:16:58.9915836+07:00 0HMT1I1L1DI39:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:16:59.0604159+07:00 0HMT1I1L1DI3D:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:16:59.0613321+07:00 0HMT1I1L1DI3D:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:16:59.0631417+07:00 0HMT1I1L1DI3D:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:16:59.0715030+07:00 0HMT1I1L1DI3D:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:16:59.0726530+07:00 0HMT1I1L1DI3D:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:16:59.0759657+07:00 0HMT1I1L1DI3D:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:16:59.0776828+07:00 0HMT1I1L1DI3D:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T22:17:07.1594117+07:00 0HMT1I1L1DI39:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:17:07.1600444+07:00 0HMT1I1L1DI39:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:17:07.1614666+07:00 0HMT1I1L1DI39:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:17:07.1790071+07:00 0HMT1I1L1DI39:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T22:17:07.2878878+07:00 0HMT1I1L1DI39:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:17:07.2892196+07:00 0HMT1I1L1DI3A:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:17:07.2892018+07:00 0HMT1I1L1DI39:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:17:07.2898334+07:00 0HMT1I1L1DI3A:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:17:07.2913662+07:00 0HMT1I1L1DI39:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:17:07.2913664+07:00 0HMT1I1L1DI3A:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:17:07.3030052+07:00 0HMT1I1L1DI3E:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:17:07.3037294+07:00 0HMT1I1L1DI3E:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:17:07.3065780+07:00 0HMT1I1L1DI3E:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:17:07.3072641+07:00 0HMT1I1L1DI3A:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:17:07.3072648+07:00 0HMT1I1L1DI39:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:17:07.3320487+07:00 0HMT1I1L1DI3E:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:17:09.8010341+07:00 0HMT1I1L1DI39:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:17:09.8016016+07:00 0HMT1I1L1DI39:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:17:09.8029602+07:00 0HMT1I1L1DI39:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:17:09.9191268+07:00 0HMT1I1L1DI39:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T22:17:09.9627333+07:00 0HMT1I1L1DI39:0000000B [INF] Executed DbCommand ("4"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T22:17:10.0193210+07:00 0HMT1I1L1DI39:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:17:10.0198533+07:00 0HMT1I1L1DI39:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:17:10.0213017+07:00 0HMT1I1L1DI39:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:17:10.0233697+07:00 0HMT1I1L1DI39:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:17:10.0428424+07:00 0HMT1I1L1DI39:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T22:17:30.1389000+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T22:17:30.1466515+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T22:17:30.1469204+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T22:17:30.1469424+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T22:17:39.8699042+07:00 0HMT1I2BST2NA:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T22:17:40.9536564+07:00 0HMT1I2BST2NA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:17:41.3315181+07:00 0HMT1I2BST2NA:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:17:41.3813010+07:00 0HMT1I2BST2NA:00000002 [INF] Executed DbCommand ("35"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:17:41.4068424+07:00 0HMT1I2BST2NA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:17:41.4164093+07:00 0HMT1I2BST2NA:00000002 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:17:41.4186755+07:00 0HMT1I2BST2NA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:17:41.9296785+07:00 0HMT1I2BST2NA:00000002 [INF] Executed DbCommand ("66"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T22:18:02.6872324+07:00 0HMT1I2BST2NB:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:18:02.6931136+07:00 0HMT1I2BST2NB:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:18:02.6945478+07:00 0HMT1I2BST2NB:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:18:02.8542253+07:00 0HMT1I2BST2NB:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__8__locals1_lastMessageId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[CreatedTime]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__8__locals1_lastMessageId_0" (0723d8ff)
2023-08-20T22:18:02.9752297+07:00 0HMT1I2BST2NB:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__p_3='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100), @__lastMessageTime_1='?' (DbType = DateTime2), @__8__locals1_lastMessageId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_3) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE ([m].[ChatRoomId] = @__chatRoomId_0) AND (([m].[CreatedTime] <= @__lastMessageTime_1) AND ([m].[Id] <> @__8__locals1_lastMessageId_2))
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T22:18:03.0382775+07:00 0HMT1I2BST2NB:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:18:03.0388395+07:00 0HMT1I2BST2NB:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:18:03.0401369+07:00 0HMT1I2BST2NB:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:18:03.0688964+07:00 0HMT1I2BST2NB:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:18:04.0893407+07:00 0HMT1I2BST2NB:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:18:04.0900517+07:00 0HMT1I2BST2NB:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:18:04.0914800+07:00 0HMT1I2BST2NB:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:18:04.0954514+07:00 0HMT1I2BST2NB:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_lastMessageId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[CreatedTime]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__8__locals1_lastMessageId_0" (0723d8ff)
2023-08-20T22:18:04.0979787+07:00 0HMT1I2BST2NB:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_3='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100), @__lastMessageTime_1='?' (DbType = DateTime2), @__8__locals1_lastMessageId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_3) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE ([m].[ChatRoomId] = @__chatRoomId_0) AND (([m].[CreatedTime] <= @__lastMessageTime_1) AND ([m].[Id] <> @__8__locals1_lastMessageId_2))
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T22:18:04.1391971+07:00 0HMT1I2BST2NB:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:18:04.1398658+07:00 0HMT1I2BST2NB:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:18:04.1418101+07:00 0HMT1I2BST2NB:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:18:04.1445308+07:00 0HMT1I2BST2NB:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:18:05.1558114+07:00 0HMT1I2BST2NB:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:18:05.1565013+07:00 0HMT1I2BST2NB:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:18:05.1586521+07:00 0HMT1I2BST2NB:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:18:05.1612105+07:00 0HMT1I2BST2NB:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__8__locals1_lastMessageId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[CreatedTime]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__8__locals1_lastMessageId_0" (0723d8ff)
2023-08-20T22:18:05.1633525+07:00 0HMT1I2BST2NB:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_3='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100), @__lastMessageTime_1='?' (DbType = DateTime2), @__8__locals1_lastMessageId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_3) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE ([m].[ChatRoomId] = @__chatRoomId_0) AND (([m].[CreatedTime] <= @__lastMessageTime_1) AND ([m].[Id] <> @__8__locals1_lastMessageId_2))
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T22:18:05.2037983+07:00 0HMT1I2BST2NB:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:18:05.2046871+07:00 0HMT1I2BST2NB:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:18:05.2066319+07:00 0HMT1I2BST2NB:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:18:05.2090146+07:00 0HMT1I2BST2NB:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:18:25.3378093+07:00 0HMT1I2BST2NA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:18:25.3384663+07:00 0HMT1I2BST2NA:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:18:25.3482143+07:00 0HMT1I2BST2NA:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:18:27.2991722+07:00 0HMT1I2BST2ND:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:18:27.2997428+07:00 0HMT1I2BST2ND:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:18:27.3016446+07:00 0HMT1I2BST2ND:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:18:27.3056561+07:00 0HMT1I2BST2NE:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:18:27.3056562+07:00 0HMT1I2BST2NB:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:18:27.3057093+07:00 0HMT1I2BST2ND:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:18:27.3063641+07:00 0HMT1I2BST2NB:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:18:27.3066796+07:00 0HMT1I2BST2NE:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:18:27.3096013+07:00 0HMT1I2BST2NB:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:18:27.3112860+07:00 0HMT1I2BST2ND:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:18:27.3118257+07:00 0HMT1I2BST2NE:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:18:27.3136607+07:00 0HMT1I2BST2ND:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:18:27.3176151+07:00 0HMT1I2BST2ND:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T22:18:27.3379898+07:00 0HMT1I2BST2NE:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T22:18:27.3386377+07:00 0HMT1I2BST2NB:0000000B [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:18:27.4929944+07:00 0HMT1I2BST2NB:0000000B [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T22:18:27.5466588+07:00 0HMT1I2BST2NB:0000000B [INF] Executed DbCommand ("5"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T22:18:27.5785891+07:00 0HMT1I2BST2NB:0000000B [INF] Executed DbCommand ("7"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:18:27.6151571+07:00 0HMT1I2BST2NB:0000000B [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T22:18:27.6202331+07:00 0HMT1I2BST2NB:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:22:16.4626457+07:00 0HMT1I2BST2NF:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:22:16.4627701+07:00 0HMT1I2BST2NG:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:22:16.4632458+07:00 0HMT1I2BST2NF:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:22:16.4632523+07:00 0HMT1I2BST2NG:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:22:16.4731880+07:00 0HMT1I2BST2NF:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:22:16.4731880+07:00 0HMT1I2BST2NG:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:22:16.4786146+07:00 0HMT1I2BST2NG:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T22:22:16.4832237+07:00 0HMT1I2BST2NF:00000003 [INF] Executed DbCommand ("9"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:22:16.4960482+07:00 0HMT1I2BST2NF:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T22:22:16.4998260+07:00 0HMT1I2BST2NF:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T22:22:16.5022214+07:00 0HMT1I2BST2NF:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:22:16.5041279+07:00 0HMT1I2BST2NF:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T22:22:16.5051684+07:00 0HMT1I2BST2NF:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:28:11.2061118+07:00 0HMT1I2BST2ND:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:28:11.2323650+07:00 0HMT1I2BST2ND:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:28:11.2615511+07:00 0HMT1I2BST2ND:00000002 [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:28:13.0647234+07:00 0HMT1I2BST2NI:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:28:13.0658143+07:00 0HMT1I2BST2NI:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:28:13.0696414+07:00 0HMT1I2BST2NJ:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:28:13.0774199+07:00 0HMT1I2BST2NJ:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:28:13.0909694+07:00 0HMT1I2BST2NI:00000003 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:28:13.0933236+07:00 0HMT1I2BST2NK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:28:13.0960994+07:00 0HMT1I2BST2NI:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:28:13.0974290+07:00 0HMT1I2BST2NJ:00000003 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:28:13.1062418+07:00 0HMT1I2BST2NK:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:28:13.1080413+07:00 0HMT1I2BST2NJ:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T22:28:13.1081059+07:00 0HMT1I2BST2NI:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T22:28:13.1210566+07:00 0HMT1I2BST2NI:00000003 [INF] Executed DbCommand ("12"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T22:28:13.1222450+07:00 0HMT1I2BST2NK:00000002 [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:28:13.1228766+07:00 0HMT1I2BST2NK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:28:13.1240131+07:00 0HMT1I2BST2NK:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:28:13.1254979+07:00 0HMT1I2BST2NI:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:28:13.1281003+07:00 0HMT1I2BST2NI:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T22:28:13.1292688+07:00 0HMT1I2BST2NI:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:28:13.1335797+07:00 0HMT1I2BST2NK:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:28:13.1378781+07:00 0HMT1I2BST2NK:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T22:28:14.7697304+07:00 0HMT1I2BST2NI:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:28:14.7724313+07:00 0HMT1I2BST2NI:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:28:14.7896410+07:00 0HMT1I2BST2NI:00000005 [INF] Executed DbCommand ("17"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:28:14.8022278+07:00 0HMT1I2BST2NI:00000005 [INF] Executed DbCommand ("5"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T22:28:14.8787601+07:00 0HMT1I2BST2NI:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:28:14.8789694+07:00 0HMT1I2BST2NJ:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:28:14.8793929+07:00 0HMT1I2BST2NJ:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:28:14.8793946+07:00 0HMT1I2BST2NI:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:28:14.8919854+07:00 0HMT1I2BST2NI:00000007 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:28:14.8959725+07:00 0HMT1I2BST2NJ:00000005 [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:28:14.9038207+07:00 0HMT1I2BST2NJ:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:28:14.9038227+07:00 0HMT1I2BST2NI:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:28:14.9929159+07:00 0HMT1I2BST2NI:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:28:14.9937026+07:00 0HMT1I2BST2NI:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:28:15.0102553+07:00 0HMT1I2BST2NI:00000009 [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:28:15.0156632+07:00 0HMT1I2BST2NI:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:28:21.1034609+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T22:28:21.1317170+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T22:28:21.1321395+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T22:28:21.1321822+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T22:28:23.9523073+07:00 0HMT1I8BRHIBE:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T22:28:24.9168829+07:00 0HMT1I8BRHIBE:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:28:25.2789251+07:00 0HMT1I8BRHIBE:00000002 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:28:25.3224502+07:00 0HMT1I8BRHIBE:00000002 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:28:25.3394930+07:00 0HMT1I8BRHIBE:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:28:25.3632380+07:00 0HMT1I8BRHIBE:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:28:25.3645960+07:00 0HMT1I8BRHIBE:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:28:25.7975176+07:00 0HMT1I8BRHIBE:00000002 [INF] Executed DbCommand ("48"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T22:28:36.9119050+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T22:28:36.9211991+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T22:28:36.9214737+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T22:28:36.9215044+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T22:28:40.3996689+07:00 0HMT1I8GOD52P:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T22:28:41.3722128+07:00 0HMT1I8GOD52P:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:28:41.7234856+07:00 0HMT1I8GOD52P:00000002 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:28:41.7592884+07:00 0HMT1I8GOD52P:00000002 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:28:41.7803325+07:00 0HMT1I8GOD52P:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:28:41.7959484+07:00 0HMT1I8GOD52P:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:28:41.8009475+07:00 0HMT1I8GOD52P:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:28:42.2327576+07:00 0HMT1I8GOD52P:00000002 [INF] Executed DbCommand ("50"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T22:31:23.1041841+07:00 0HMT1I8GOD52Q:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:31:23.1041840+07:00 0HMT1I8GOD52R:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:31:23.1096909+07:00 0HMT1I8GOD52R:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:31:23.1128564+07:00 0HMT1I8GOD52Q:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:31:23.1241233+07:00 0HMT1I8GOD52Q:00000003 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:31:23.1241233+07:00 0HMT1I8GOD52R:00000003 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:31:23.3476818+07:00 0HMT1I8GOD52R:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T22:31:23.3527676+07:00 0HMT1I8GOD52Q:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:31:23.5843830+07:00 0HMT1I8GOD52Q:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T22:31:23.6556382+07:00 0HMT1I8GOD52Q:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T22:31:23.6696966+07:00 0HMT1I8GOD52Q:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:31:23.6946966+07:00 0HMT1I8GOD52Q:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T22:31:23.6984570+07:00 0HMT1I8GOD52Q:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:31:25.0142185+07:00 0HMT1I8GOD52Q:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:31:25.0148219+07:00 0HMT1I8GOD52Q:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:31:25.0162866+07:00 0HMT1I8GOD52Q:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:31:25.0395255+07:00 0HMT1I8GOD52Q:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T22:31:25.1186961+07:00 0HMT1I8GOD52Q:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:31:25.1198201+07:00 0HMT1I8GOD52Q:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:31:25.1225962+07:00 0HMT1I8GOD52Q:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:31:25.1382956+07:00 0HMT1I8GOD52Q:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:31:25.1436908+07:00 0HMT1I8GOD52R:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:31:25.1445735+07:00 0HMT1I8GOD52R:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:31:25.1469777+07:00 0HMT1I8GOD52R:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:31:25.1501333+07:00 0HMT1I8GOD52R:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:31:25.2251377+07:00 0HMT1I8GOD52Q:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:31:25.2264114+07:00 0HMT1I8GOD52Q:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:31:25.2292677+07:00 0HMT1I8GOD52Q:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:31:25.2598094+07:00 0HMT1I8GOD52Q:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:31:30.4460137+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T22:31:30.4604715+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T22:31:30.4608990+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T22:31:30.4609322+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T22:31:34.2035908+07:00 0HMT1IA4HTC54:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T22:31:35.1931428+07:00 0HMT1IA4HTC54:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:31:35.5795720+07:00 0HMT1IA4HTC54:00000002 [INF] Executed DbCommand ("26"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:31:35.6260509+07:00 0HMT1IA4HTC54:00000002 [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:31:35.6534269+07:00 0HMT1IA4HTC54:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:31:35.6676437+07:00 0HMT1IA4HTC54:00000002 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:31:35.6690812+07:00 0HMT1IA4HTC54:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:31:36.1032043+07:00 0HMT1IA4HTC54:00000002 [INF] Executed DbCommand ("52"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T22:31:44.8921427+07:00 0HMT1IA4HTC54:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:31:44.8921428+07:00 0HMT1IA4HTC55:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:31:44.8921428+07:00 0HMT1IA4HTC56:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:31:44.8976370+07:00 0HMT1IA4HTC55:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:31:44.8979467+07:00 0HMT1IA4HTC54:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:31:44.8995817+07:00 0HMT1IA4HTC55:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:31:44.9001849+07:00 0HMT1IA4HTC56:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:31:44.9009893+07:00 0HMT1IA4HTC54:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:31:44.9013370+07:00 0HMT1IA4HTC56:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:31:45.1291172+07:00 0HMT1IA4HTC56:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T22:31:45.1332317+07:00 0HMT1IA4HTC55:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:31:45.3761671+07:00 0HMT1IA4HTC55:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T22:31:45.4256120+07:00 0HMT1IA4HTC55:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T22:31:45.4350959+07:00 0HMT1IA4HTC55:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:31:45.4569017+07:00 0HMT1IA4HTC55:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T22:31:45.4608840+07:00 0HMT1IA4HTC55:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:33:25.3360792+07:00 0HMT1IA4HTC57:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:33:25.3366930+07:00 0HMT1IA4HTC57:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:33:25.3479327+07:00 0HMT1IA4HTC57:00000003 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:33:25.3637371+07:00 0HMT1IA4HTC57:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:33:26.0741911+07:00 0HMT1IA4HTC57:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:33:26.0759626+07:00 0HMT1IA4HTC57:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:33:26.0761364+07:00 0HMT1IA4HTC59:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:33:26.0766703+07:00 0HMT1IA4HTC59:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:33:26.0776896+07:00 0HMT1IA4HTC57:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:33:26.0778841+07:00 0HMT1IA4HTC59:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:33:26.0828704+07:00 0HMT1IA4HTC59:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T22:33:26.0836002+07:00 0HMT1IA4HTC57:00000006 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:33:26.0943882+07:00 0HMT1IA4HTC57:00000006 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T22:33:26.0996732+07:00 0HMT1IA4HTC57:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T22:33:26.1047313+07:00 0HMT1IA4HTC57:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:33:26.1080694+07:00 0HMT1IA4HTC57:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T22:33:26.1096447+07:00 0HMT1IA4HTC57:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:33:26.1664273+07:00 0HMT1IA4HTC58:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:33:26.1670641+07:00 0HMT1IA4HTC58:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:33:26.1689510+07:00 0HMT1IA4HTC58:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:33:26.1766790+07:00 0HMT1IA4HTC58:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:33:26.1772741+07:00 0HMT1IA4HTC58:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:33:26.1787639+07:00 0HMT1IA4HTC58:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:33:26.1829546+07:00 0HMT1IA4HTC58:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T22:33:27.4124259+07:00 0HMT1IA4HTC57:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:33:27.4130259+07:00 0HMT1IA4HTC57:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:33:27.4149948+07:00 0HMT1IA4HTC57:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:33:27.4332834+07:00 0HMT1IA4HTC57:00000008 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T22:33:27.5497750+07:00 0HMT1IA4HTC57:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:33:27.5504590+07:00 0HMT1IA4HTC57:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:33:27.5520904+07:00 0HMT1IA4HTC57:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:33:27.5540997+07:00 0HMT1IA4HTC57:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:33:27.5570870+07:00 0HMT1IA4HTC59:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:33:27.5576904+07:00 0HMT1IA4HTC59:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:33:27.5593893+07:00 0HMT1IA4HTC59:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:33:27.5628988+07:00 0HMT1IA4HTC59:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:33:27.5676719+07:00 0HMT1IA4HTC57:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:33:27.5684564+07:00 0HMT1IA4HTC57:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:33:27.5699744+07:00 0HMT1IA4HTC57:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:33:27.5883733+07:00 0HMT1IA4HTC57:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:33:45.1108243+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T22:33:45.1217168+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T22:33:45.1220230+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T22:33:45.1220513+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T22:33:45.4691567+07:00 0HMT1IBBKTM1V:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T22:33:46.7792271+07:00 0HMT1IBBKTM1V:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:33:47.1469300+07:00 0HMT1IBBKTM1V:00000002 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:33:47.1937134+07:00 0HMT1IBBKTM1V:00000002 [INF] Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:33:47.2248921+07:00 0HMT1IBBKTM1V:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:33:47.2345509+07:00 0HMT1IBBKTM1V:00000002 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:33:47.2387394+07:00 0HMT1IBBKTM1V:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:33:47.6934612+07:00 0HMT1IBBKTM1V:00000002 [INF] Executed DbCommand ("53"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T22:34:08.9966376+07:00 0HMT1IBBKTM22:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:34:08.9966373+07:00 0HMT1IBBKTM21:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:34:09.0043303+07:00 0HMT1IBBKTM21:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:34:09.0104597+07:00 0HMT1IBBKTM22:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:34:09.0226567+07:00 0HMT1IBBKTM21:00000003 [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:34:09.0226568+07:00 0HMT1IBBKTM22:00000003 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:34:09.0282226+07:00 0HMT1IBBKTM23:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:34:09.0294594+07:00 0HMT1IBBKTM23:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:34:09.0340278+07:00 0HMT1IBBKTM23:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:34:09.0526696+07:00 0HMT1IBBKTM23:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:34:09.0533667+07:00 0HMT1IBBKTM23:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:34:09.0554301+07:00 0HMT1IBBKTM23:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:34:09.0618674+07:00 0HMT1IBBKTM23:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T22:34:09.2448768+07:00 0HMT1IBBKTM22:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-20T22:34:09.2517954+07:00 0HMT1IBBKTM21:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:34:09.4419252+07:00 0HMT1IBBKTM21:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-20T22:34:09.4895928+07:00 0HMT1IBBKTM21:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-20T22:34:09.5036164+07:00 0HMT1IBBKTM21:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:34:09.5617740+07:00 0HMT1IBBKTM21:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-20T22:34:09.5641777+07:00 0HMT1IBBKTM21:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-20T22:34:11.1997659+07:00 0HMT1IBBKTM21:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:34:11.2003414+07:00 0HMT1IBBKTM21:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:34:11.2017627+07:00 0HMT1IBBKTM21:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:34:11.2209063+07:00 0HMT1IBBKTM21:00000005 [INF] Executed DbCommand ("5"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-20T22:34:11.2606319+07:00 0HMT1IBBKTM22:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:34:11.2613623+07:00 0HMT1IBBKTM22:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:34:11.2636653+07:00 0HMT1IBBKTM21:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:34:11.2644391+07:00 0HMT1IBBKTM21:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:34:11.2644391+07:00 0HMT1IBBKTM22:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:34:11.2660644+07:00 0HMT1IBBKTM21:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:34:11.2779978+07:00 0HMT1IBBKTM22:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:34:11.2779944+07:00 0HMT1IBBKTM21:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:34:11.3199870+07:00 0HMT1IBBKTM21:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:34:11.3206882+07:00 0HMT1IBBKTM21:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:34:11.3220333+07:00 0HMT1IBBKTM21:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:34:11.3454717+07:00 0HMT1IBBKTM21:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:34:35.4754656+07:00 0HMT1IBBKTM21:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:34:35.4759409+07:00 0HMT1IBBKTM21:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:34:35.4771647+07:00 0HMT1IBBKTM21:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:34:35.5886166+07:00 0HMT1IBBKTM21:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T22:34:35.6320236+07:00 0HMT1IBBKTM21:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T22:34:35.7264196+07:00 0HMT1IBBKTM21:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:34:35.7270413+07:00 0HMT1IBBKTM21:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:34:35.7286302+07:00 0HMT1IBBKTM21:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:34:35.7310361+07:00 0HMT1IBBKTM21:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:34:35.7502742+07:00 0HMT1IBBKTM21:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T22:34:36.8169059+07:00 0HMT1IBBKTM21:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:34:36.8173922+07:00 0HMT1IBBKTM21:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:34:36.8186653+07:00 0HMT1IBBKTM21:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:34:36.8212731+07:00 0HMT1IBBKTM21:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-20T22:34:36.8228261+07:00 0HMT1IBBKTM21:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-20T22:34:36.8710839+07:00 0HMT1IBBKTM21:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:34:36.8716388+07:00 0HMT1IBBKTM21:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:34:36.8730145+07:00 0HMT1IBBKTM21:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:34:36.8751907+07:00 0HMT1IBBKTM21:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-20T22:34:36.8774482+07:00 0HMT1IBBKTM21:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-20T22:34:45.0547700+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-20T22:34:45.0665416+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-20T22:34:45.0668645+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-20T22:34:45.0668956+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-20T22:34:45.3081647+07:00 0HMT1IBTFL664:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-20T22:34:46.6611680+07:00 0HMT1IBTFL666:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:34:46.6611704+07:00 0HMT1IBTFL664:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:34:47.0309730+07:00 0HMT1IBTFL664:00000002 [INF] Executed DbCommand ("26"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:34:47.0309741+07:00 0HMT1IBTFL666:00000002 [INF] Executed DbCommand ("26"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:34:47.0691316+07:00 0HMT1IBTFL664:00000002 [INF] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:34:47.0691316+07:00 0HMT1IBTFL666:00000002 [INF] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:34:47.1283650+07:00 0HMT1IBTFL664:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:34:47.1283648+07:00 0HMT1IBTFL666:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-20T22:34:47.1339549+07:00 0HMT1IBTFL666:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:34:47.1339549+07:00 0HMT1IBTFL664:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-20T22:34:47.1351929+07:00 0HMT1IBTFL664:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:34:47.1351929+07:00 0HMT1IBTFL666:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-20T22:34:47.5653838+07:00 0HMT1IBTFL666:00000002 [INF] Executed DbCommand ("53"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-20T22:34:47.5653791+07:00 0HMT1IBTFL664:00000002 [INF] Executed DbCommand ("53"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
