2023-08-22T08:18:54.4136794+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-22T08:18:54.4212277+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-22T08:18:54.4214947+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-22T08:18:54.4215211+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-22T08:18:59.1537154+07:00 0HMT2LN1HLE0B:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-22T08:19:00.7993679+07:00 0HMT2LN1HLE09:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:00.7993685+07:00 0HMT2LN1HLE0B:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:00.7993691+07:00 0HMT2LN1HLE0A:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:01.9217065+07:00 0HMT2LN1HLE09:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:01.9217073+07:00 0HMT2LN1HLE0A:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:01.9217060+07:00 0HMT2LN1HLE0B:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:01.9678550+07:00 0HMT2LN1HLE0B:00000002 [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:01.9678550+07:00 0HMT2LN1HLE09:00000003 [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:01.9678550+07:00 0HMT2LN1HLE0A:00000003 [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:02.0337378+07:00 0HMT2LN1HLE0B:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:02.0399695+07:00 0HMT2LN1HLE0B:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:02.0417585+07:00 0HMT2LN1HLE0B:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:02.4841578+07:00 0HMT2LN1HLE09:00000003 [INF] Executed DbCommand ("68"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T08:19:02.4841579+07:00 0HMT2LN1HLE0B:00000002 [INF] Executed DbCommand ("68"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T08:19:02.4841579+07:00 0HMT2LN1HLE0A:00000003 [INF] Executed DbCommand ("68"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T08:19:02.5452426+07:00 0HMT2LN1HLE0C:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:02.5462043+07:00 0HMT2LN1HLE0C:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:02.5471214+07:00 0HMT2LN1HLE0D:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:02.5477918+07:00 0HMT2LN1HLE0C:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:02.5510303+07:00 0HMT2LN1HLE0D:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:02.5528543+07:00 0HMT2LN1HLE0D:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:02.5545042+07:00 0HMT2LN1HLE0C:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T08:19:02.5557720+07:00 0HMT2LN1HLE0D:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T08:19:02.8007003+07:00 0HMT2LN1HLE09:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T08:19:02.8007003+07:00 0HMT2LN1HLE0C:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T08:19:02.8384361+07:00 0HMT2LN1HLE09:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T08:19:02.8384698+07:00 0HMT2LN1HLE0C:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T08:19:02.8466780+07:00 0HMT2LN1HLE09:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T08:19:02.8466781+07:00 0HMT2LN1HLE0C:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T08:19:02.8530894+07:00 0HMT2LN1HLE0C:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T08:19:02.8530894+07:00 0HMT2LN1HLE09:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T08:19:02.8542825+07:00 0HMT2LN1HLE09:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T08:19:02.8544696+07:00 0HMT2LN1HLE0C:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T08:19:02.8554381+07:00 0HMT2LN1HLE0C:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T08:19:02.8554342+07:00 0HMT2LN1HLE09:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T08:19:02.8567098+07:00 0HMT2LN1HLE09:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T08:19:02.8567116+07:00 0HMT2LN1HLE0C:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T08:19:29.4940352+07:00 0HMT2LN1HLE0C:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:29.4945584+07:00 0HMT2LN1HLE0C:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:29.4958736+07:00 0HMT2LN1HLE0C:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:29.5244847+07:00 0HMT2LN1HLE0C:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:19:29.6890939+07:00 0HMT2LN1HLE0C:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:29.6897993+07:00 0HMT2LN1HLE0C:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:29.6911559+07:00 0HMT2LN1HLE0C:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:29.7155226+07:00 0HMT2LN1HLE0C:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T08:19:30.0902155+07:00 0HMT2LN1HLE0C:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:30.0907426+07:00 0HMT2LN1HLE0C:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:30.0921189+07:00 0HMT2LN1HLE0C:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:30.0941248+07:00 0HMT2LN1HLE0C:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:19:30.7716988+07:00 0HMT2LN1HLE0C:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:30.7722245+07:00 0HMT2LN1HLE0C:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:30.7735093+07:00 0HMT2LN1HLE0C:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:30.7758207+07:00 0HMT2LN1HLE0C:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:19:30.8331831+07:00 0HMT2LN1HLE0C:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:30.8336758+07:00 0HMT2LN1HLE0C:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:30.8350361+07:00 0HMT2LN1HLE0C:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:30.8377237+07:00 0HMT2LN1HLE0C:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T08:19:31.1320704+07:00 0HMT2LN1HLE0C:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:31.1328293+07:00 0HMT2LN1HLE0C:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:31.1341785+07:00 0HMT2LN1HLE0C:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:31.1361729+07:00 0HMT2LN1HLE0C:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:19:31.4029705+07:00 0HMT2LN1HLE0C:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:31.4035523+07:00 0HMT2LN1HLE0C:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:31.4048009+07:00 0HMT2LN1HLE0C:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:31.4065682+07:00 0HMT2LN1HLE0C:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:19:31.9429228+07:00 0HMT2LN1HLE0C:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:31.9434870+07:00 0HMT2LN1HLE0C:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:31.9451382+07:00 0HMT2LN1HLE0C:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:31.9471493+07:00 0HMT2LN1HLE0C:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:19:32.0046815+07:00 0HMT2LN1HLE0C:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:32.0052508+07:00 0HMT2LN1HLE0C:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:32.0066467+07:00 0HMT2LN1HLE0C:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:32.0085252+07:00 0HMT2LN1HLE0C:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T08:19:41.5212919+07:00 0HMT2LN1HLE0C:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:41.5217583+07:00 0HMT2LN1HLE0C:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:41.5301117+07:00 0HMT2LN1HLE0C:00000011 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:41.5336623+07:00 0HMT2LN1HLE0C:00000011 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:19:42.1339480+07:00 0HMT2LN1HLE0C:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:42.1344520+07:00 0HMT2LN1HLE0C:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:42.1427809+07:00 0HMT2LN1HLE0C:00000013 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:42.1465464+07:00 0HMT2LN1HLE0C:00000013 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:19:42.4328963+07:00 0HMT2LN1HLE0C:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:42.4333684+07:00 0HMT2LN1HLE0C:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:42.4434540+07:00 0HMT2LN1HLE0C:00000014 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:42.4474565+07:00 0HMT2LN1HLE0C:00000014 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:19:42.7088611+07:00 0HMT2LN1HLE0C:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:42.7094571+07:00 0HMT2LN1HLE0C:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:42.7178721+07:00 0HMT2LN1HLE0C:00000016 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:42.7219549+07:00 0HMT2LN1HLE0C:00000016 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:19:42.7925952+07:00 0HMT2LN1HLE0C:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:42.7931279+07:00 0HMT2LN1HLE0C:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:42.8022203+07:00 0HMT2LN1HLE0C:00000018 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:42.8058067+07:00 0HMT2LN1HLE0C:00000018 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T08:19:48.1928682+07:00 0HMT2LN1HLE0C:0000001A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:48.1933394+07:00 0HMT2LN1HLE0C:0000001A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:48.2015893+07:00 0HMT2LN1HLE0C:0000001A [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:48.2137125+07:00 0HMT2LN1HLE0C:0000001A [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime]
FROM [UserRelationships] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T08:19:48.2972414+07:00 0HMT2LN1HLE0C:0000001A [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [UserRelationships]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-22T08:19:49.7995930+07:00 0HMT2LN1HLE0C:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:49.8001284+07:00 0HMT2LN1HLE0C:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:49.8056278+07:00 0HMT2LN1HLE0C:0000001C [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:49.8091740+07:00 0HMT2LN1HLE0C:0000001C [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:19:50.1347931+07:00 0HMT2LN1HLE0C:0000001E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:50.1353059+07:00 0HMT2LN1HLE0C:0000001E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:50.1409063+07:00 0HMT2LN1HLE0C:0000001E [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:50.1426632+07:00 0HMT2LN1HLE0C:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:19:50.6582454+07:00 0HMT2LN1HLE0C:0000001F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:50.6587676+07:00 0HMT2LN1HLE0C:0000001F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:50.6640510+07:00 0HMT2LN1HLE0C:0000001F [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:50.6662128+07:00 0HMT2LN1HLE0C:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:19:50.9106693+07:00 0HMT2LN1HLE0C:00000021 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:50.9112171+07:00 0HMT2LN1HLE0C:00000021 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:50.9166319+07:00 0HMT2LN1HLE0C:00000021 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:50.9187166+07:00 0HMT2LN1HLE0C:00000021 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:19:50.9803323+07:00 0HMT2LN1HLE0C:00000023 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:50.9810051+07:00 0HMT2LN1HLE0C:00000023 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:50.9861976+07:00 0HMT2LN1HLE0C:00000023 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:50.9891958+07:00 0HMT2LN1HLE0C:00000023 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T08:19:51.9704885+07:00 0HMT2LN1HLE0C:00000024 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:19:51.9710683+07:00 0HMT2LN1HLE0C:00000024 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:19:51.9762487+07:00 0HMT2LN1HLE0C:00000024 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:19:51.9783130+07:00 0HMT2LN1HLE0C:00000024 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:20:01.0509073+07:00 0HMT2LN1HLE0C:00000026 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:20:01.0516188+07:00 0HMT2LN1HLE0C:00000026 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:20:01.0594786+07:00 0HMT2LN1HLE0C:00000026 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:20:01.0626512+07:00 0HMT2LN1HLE0C:00000026 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:20:01.1263069+07:00 0HMT2LN1HLE0C:00000028 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:20:01.1272936+07:00 0HMT2LN1HLE0C:00000028 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:20:01.1339090+07:00 0HMT2LN1HLE0C:00000028 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:20:01.1361340+07:00 0HMT2LN1HLE0C:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T08:20:02.3060159+07:00 0HMT2LN1HLE0C:0000002A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:20:02.3064863+07:00 0HMT2LN1HLE0C:0000002A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:20:02.3114132+07:00 0HMT2LN1HLE0C:0000002A [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:20:02.3131012+07:00 0HMT2LN1HLE0C:0000002A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:20:02.6101221+07:00 0HMT2LN1HLE0C:0000002B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:20:02.6105763+07:00 0HMT2LN1HLE0C:0000002B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:20:02.6155107+07:00 0HMT2LN1HLE0C:0000002B [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:20:02.6174739+07:00 0HMT2LN1HLE0C:0000002B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:20:02.6816443+07:00 0HMT2LN1HLE0C:0000002C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:20:02.6822000+07:00 0HMT2LN1HLE0C:0000002C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:20:02.6891823+07:00 0HMT2LN1HLE0C:0000002C [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:20:02.6915106+07:00 0HMT2LN1HLE0C:0000002C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T08:20:03.0661103+07:00 0HMT2LN1HLE0C:0000002D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:20:03.0667053+07:00 0HMT2LN1HLE0C:0000002D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:20:03.0717869+07:00 0HMT2LN1HLE0C:0000002D [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:20:03.0735609+07:00 0HMT2LN1HLE0C:0000002D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:20:03.5539753+07:00 0HMT2LN1HLE0C:0000002E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:20:03.5547303+07:00 0HMT2LN1HLE0C:0000002E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:20:03.5603518+07:00 0HMT2LN1HLE0C:0000002E [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:20:03.5631803+07:00 0HMT2LN1HLE0C:0000002E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:20:03.6224518+07:00 0HMT2LN1HLE0C:0000002F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:20:03.6231361+07:00 0HMT2LN1HLE0C:0000002F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:20:03.6283072+07:00 0HMT2LN1HLE0C:0000002F [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:20:03.6304423+07:00 0HMT2LN1HLE0C:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T08:20:03.9374132+07:00 0HMT2LN1HLE0C:00000030 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:20:03.9378919+07:00 0HMT2LN1HLE0C:00000030 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:20:03.9429343+07:00 0HMT2LN1HLE0C:00000030 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:20:03.9448948+07:00 0HMT2LN1HLE0C:00000030 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:20:04.2280137+07:00 0HMT2LN1HLE0C:00000031 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:20:04.2284951+07:00 0HMT2LN1HLE0C:00000031 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:20:04.2334556+07:00 0HMT2LN1HLE0C:00000031 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:20:04.2352892+07:00 0HMT2LN1HLE0C:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:20:04.2859241+07:00 0HMT2LN1HLE0C:00000032 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:20:04.2863869+07:00 0HMT2LN1HLE0C:00000032 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:20:04.2921713+07:00 0HMT2LN1HLE0C:00000032 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:20:04.2943368+07:00 0HMT2LN1HLE0C:00000032 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T08:20:04.5340814+07:00 0HMT2LN1HLE0C:00000033 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:20:04.5345228+07:00 0HMT2LN1HLE0C:00000033 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:20:04.5394574+07:00 0HMT2LN1HLE0C:00000033 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:20:04.5412159+07:00 0HMT2LN1HLE0C:00000033 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:20:04.9216511+07:00 0HMT2LN1HLE0C:00000035 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:20:04.9221262+07:00 0HMT2LN1HLE0C:00000035 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:20:04.9272846+07:00 0HMT2LN1HLE0C:00000035 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:20:04.9293444+07:00 0HMT2LN1HLE0C:00000035 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T08:20:11.9574811+07:00 0HMT2LN1HLE0C:00000037 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:20:11.9581049+07:00 0HMT2LN1HLE0C:00000037 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:20:11.9632195+07:00 0HMT2LN1HLE0C:00000037 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:20:12.0060061+07:00 0HMT2LN1HLE0C:00000037 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-22T08:20:12.0134738+07:00 0HMT2LN1HLE0C:00000037 [INF] Executed DbCommand ("2"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-22T08:20:12.0551136+07:00 0HMT2LN1HLE0C:00000039 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:20:12.0555861+07:00 0HMT2LN1HLE0C:00000039 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:20:12.0606363+07:00 0HMT2LN1HLE0C:00000039 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:20:12.0624965+07:00 0HMT2LN1HLE0C:00000039 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T08:20:12.0771011+07:00 0HMT2LN1HLE0C:00000039 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-22T08:20:19.0605765+07:00 0HMT2LN1HLE0C:0000003B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:20:19.0610392+07:00 0HMT2LN1HLE0C:0000003B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:20:19.0662050+07:00 0HMT2LN1HLE0C:0000003B [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:20:19.0863043+07:00 0HMT2LN1HLE0C:0000003B [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-22T08:20:19.1155474+07:00 0HMT2LN1HLE0C:0000003D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:20:19.1160486+07:00 0HMT2LN1HLE0C:0000003D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:20:19.1223009+07:00 0HMT2LN1HLE0C:0000003D [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:20:19.1244649+07:00 0HMT2LN1HLE0C:0000003D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T08:20:19.1267710+07:00 0HMT2LN1HLE0C:0000003D [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-22T08:20:21.8529930+07:00 0HMT2LN1HLE0C:0000003F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:20:21.8534609+07:00 0HMT2LN1HLE0C:0000003F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:20:21.8590323+07:00 0HMT2LN1HLE0C:0000003F [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:20:21.8673357+07:00 0HMT2LN1HLE0C:0000003F [INF] Executed DbCommand ("2"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-22T08:20:21.8737063+07:00 0HMT2LN1HLE0C:0000003F [INF] Executed DbCommand ("1"ms) [Parameters=["@p2='?' (Size = 100), @p0='?' (Size = 50), @p1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Messages] SET [FileStatus] = @p0, [FileUrls] = @p1
WHERE [Id] = @p2;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-22T08:20:21.8942785+07:00 0HMT2LN1HLE0C:00000040 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:20:21.8949023+07:00 0HMT2LN1HLE0C:00000040 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:20:21.9005608+07:00 0HMT2LN1HLE0C:00000040 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:20:21.9027792+07:00 0HMT2LN1HLE0C:00000040 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T08:20:40.6652232+07:00 0HMT2LN1HLE0C:00000042 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T08:20:40.6658263+07:00 0HMT2LN1HLE0C:00000042 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T08:20:40.6712426+07:00 0HMT2LN1HLE0C:00000042 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T08:20:40.6781824+07:00 0HMT2LN1HLE0C:00000042 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T09:46:55.2448887+07:00 0HMT2LN1HLE0B:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:46:55.2516712+07:00 0HMT2LN1HLE0B:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:46:55.2647191+07:00 0HMT2LN1HLE0B:00000002 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:46:57.4704863+07:00 0HMT2LN1HLE0E:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:46:57.4704863+07:00 0HMT2LN1HLE0F:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:46:57.4714060+07:00 0HMT2LN1HLE0E:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:46:57.4728088+07:00 0HMT2LN1HLE0E:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:46:57.4747947+07:00 0HMT2LN1HLE0F:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:46:57.4770058+07:00 0HMT2LN1HLE0F:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:46:57.4818234+07:00 0HMT2LN1HLE0E:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:46:57.4838630+07:00 0HMT2LN1HLE0F:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T09:46:57.4923840+07:00 0HMT2LN1HLE0E:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T09:46:57.4958837+07:00 0HMT2LN1HLE0E:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T09:46:57.4990995+07:00 0HMT2LN1HLE0E:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:46:57.5019205+07:00 0HMT2LN1HLE0E:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T09:46:57.5032215+07:00 0HMT2LN1HLE0E:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:46:57.5048022+07:00 0HMT2LN1HLE0E:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T09:46:57.5058615+07:00 0HMT2LN1HLE0E:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:46:57.5536796+07:00 0HMT2LN1HLE0G:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:46:57.5543878+07:00 0HMT2LN1HLE0G:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:46:57.5562332+07:00 0HMT2LN1HLE0G:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:46:57.6041308+07:00 0HMT2LN1HLE0G:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:46:57.6047760+07:00 0HMT2LN1HLE0G:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:46:57.6064069+07:00 0HMT2LN1HLE0G:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:46:57.6099070+07:00 0HMT2LN1HLE0G:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T09:46:57.6266193+07:00 0HMT2LN1HLE0E:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:46:57.6271985+07:00 0HMT2LN1HLE0E:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:46:57.6294955+07:00 0HMT2LN1HLE0E:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:46:57.6326769+07:00 0HMT2LN1HLE0E:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:46:57.6350301+07:00 0HMT2LN1HLE0E:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T09:46:57.6362542+07:00 0HMT2LN1HLE0E:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T09:46:57.6374030+07:00 0HMT2LN1HLE0E:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:46:57.6391706+07:00 0HMT2LN1HLE0E:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T09:46:57.6402653+07:00 0HMT2LN1HLE0E:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:46:57.6414925+07:00 0HMT2LN1HLE0E:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T09:46:57.6428048+07:00 0HMT2LN1HLE0E:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:46:57.6481581+07:00 0HMT2LN1HLE0E:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:46:57.6486976+07:00 0HMT2LN1HLE0E:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:46:57.6501780+07:00 0HMT2LN1HLE0E:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:46:57.6518468+07:00 0HMT2LN1HLE0E:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T09:46:58.7029937+07:00 0HMT2LN1HLE0E:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:46:58.7035443+07:00 0HMT2LN1HLE0E:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:46:58.7049721+07:00 0HMT2LN1HLE0E:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:46:58.7086018+07:00 0HMT2LN1HLE0E:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T09:46:58.8414644+07:00 0HMT2LN1HLE0E:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:46:58.8422879+07:00 0HMT2LN1HLE0E:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:46:58.8439003+07:00 0HMT2LN1HLE0E:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:46:58.8484502+07:00 0HMT2LN1HLE0E:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T09:49:30.2643181+07:00 0HMT2LN1HLE0G:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:49:30.2651150+07:00 0HMT2LN1HLE0G:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:49:30.2743664+07:00 0HMT2LN1HLE0G:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:49:30.3989678+07:00 0HMT2LN1HLE0H:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:49:30.3996027+07:00 0HMT2LN1HLE0H:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:49:30.4014286+07:00 0HMT2LN1HLE0H:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:49:30.4062676+07:00 0HMT2LN1HLE0H:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:49:30.4088418+07:00 0HMT2LN1HLE0I:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:49:30.4099728+07:00 0HMT2LN1HLE0I:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:49:30.4121513+07:00 0HMT2LN1HLE0I:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:49:30.4153337+07:00 0HMT2LN1HLE0H:00000004 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T09:49:30.4173039+07:00 0HMT2LN1HLE0I:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T09:49:30.4192346+07:00 0HMT2LN1HLE0H:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T09:49:30.4240047+07:00 0HMT2LN1HLE0H:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:49:30.4285060+07:00 0HMT2LN1HLE0H:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T09:49:30.4305268+07:00 0HMT2LN1HLE0H:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:49:30.4328721+07:00 0HMT2LN1HLE0H:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T09:49:30.4416108+07:00 0HMT2LN1HLE0H:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:49:37.1766439+07:00 0HMT2LN1HLE0I:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:49:37.1766437+07:00 0HMT2LN1HLE0H:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:49:37.1772378+07:00 0HMT2LN1HLE0I:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:49:37.1772379+07:00 0HMT2LN1HLE0H:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:49:37.1786256+07:00 0HMT2LN1HLE0H:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:49:37.1789546+07:00 0HMT2LN1HLE0I:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:49:37.1803994+07:00 0HMT2LN1HLE0H:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:49:37.1809152+07:00 0HMT2LN1HLE0I:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T09:49:37.1849105+07:00 0HMT2LN1HLE0H:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T09:49:37.1861156+07:00 0HMT2LN1HLE0H:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T09:49:37.1870788+07:00 0HMT2LN1HLE0H:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:49:37.1885748+07:00 0HMT2LN1HLE0H:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T09:49:37.1903297+07:00 0HMT2LN1HLE0H:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:49:37.1919127+07:00 0HMT2LN1HLE0H:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T09:49:37.1930426+07:00 0HMT2LN1HLE0H:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:49:37.2460869+07:00 0HMT2LN1HLE0K:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:49:37.2468803+07:00 0HMT2LN1HLE0K:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:49:37.2494383+07:00 0HMT2LN1HLE0K:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:49:37.3495764+07:00 0HMT2LN1HLE0K:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:49:37.3502595+07:00 0HMT2LN1HLE0K:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:49:37.3518587+07:00 0HMT2LN1HLE0K:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:49:37.3546467+07:00 0HMT2LN1HLE0K:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T09:49:37.3786194+07:00 0HMT2LN1HLE0H:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:49:37.3786196+07:00 0HMT2LN1HLE0I:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:49:37.3791994+07:00 0HMT2LN1HLE0I:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:49:37.3791958+07:00 0HMT2LN1HLE0H:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:49:37.3809805+07:00 0HMT2LN1HLE0I:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:49:37.3809806+07:00 0HMT2LN1HLE0H:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:49:37.3830187+07:00 0HMT2LN1HLE0I:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T09:49:37.3830197+07:00 0HMT2LN1HLE0H:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:49:37.3877487+07:00 0HMT2LN1HLE0H:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T09:49:37.3887853+07:00 0HMT2LN1HLE0H:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T09:49:37.3897692+07:00 0HMT2LN1HLE0H:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:49:37.3911339+07:00 0HMT2LN1HLE0H:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T09:49:37.3921543+07:00 0HMT2LN1HLE0H:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:49:37.3933747+07:00 0HMT2LN1HLE0H:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T09:49:37.3944698+07:00 0HMT2LN1HLE0H:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:49:38.4614556+07:00 0HMT2LN1HLE0H:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:49:38.4621201+07:00 0HMT2LN1HLE0H:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:49:38.4635028+07:00 0HMT2LN1HLE0H:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:49:38.4668358+07:00 0HMT2LN1HLE0H:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T09:49:38.5565263+07:00 0HMT2LN1HLE0H:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:49:38.5571158+07:00 0HMT2LN1HLE0H:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:49:38.5586951+07:00 0HMT2LN1HLE0H:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:49:38.5613925+07:00 0HMT2LN1HLE0H:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T09:56:53.5646139+07:00 0HMT2LN1HLE0K:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:56:53.5718893+07:00 0HMT2LN1HLE0K:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:56:53.5836640+07:00 0HMT2LN1HLE0K:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:56:53.6745730+07:00 0HMT2LN1HLE0L:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:56:53.6751625+07:00 0HMT2LN1HLE0L:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:56:53.6795279+07:00 0HMT2LN1HLE0L:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:56:53.6887085+07:00 0HMT2LN1HLE0L:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:56:53.6892766+07:00 0HMT2LN1HLE0M:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:56:53.6898538+07:00 0HMT2LN1HLE0M:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:56:53.6917524+07:00 0HMT2LN1HLE0M:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:56:53.6984001+07:00 0HMT2LN1HLE0M:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T09:56:53.7171772+07:00 0HMT2LN1HLE0L:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T09:56:53.7221470+07:00 0HMT2LN1HLE0L:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T09:56:53.7254009+07:00 0HMT2LN1HLE0L:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:56:53.7287461+07:00 0HMT2LN1HLE0L:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T09:56:53.7298587+07:00 0HMT2LN1HLE0L:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:56:53.7313564+07:00 0HMT2LN1HLE0L:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T09:56:53.7330767+07:00 0HMT2LN1HLE0L:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:56:53.8735799+07:00 0HMT2LN1HLE0N:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:56:53.8745341+07:00 0HMT2LN1HLE0N:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:56:53.8763669+07:00 0HMT2LN1HLE0N:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:56:53.9125365+07:00 0HMT2LN1HLE0N:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:56:53.9133731+07:00 0HMT2LN1HLE0N:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:56:53.9152475+07:00 0HMT2LN1HLE0N:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:56:53.9216176+07:00 0HMT2LN1HLE0N:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T09:56:53.9502423+07:00 0HMT2LN1HLE0L:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:56:53.9512551+07:00 0HMT2LN1HLE0L:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:56:53.9534281+07:00 0HMT2LN1HLE0L:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:56:53.9557558+07:00 0HMT2LN1HLE0L:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:56:53.9627575+07:00 0HMT2LN1HLE0L:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T09:56:53.9673196+07:00 0HMT2LN1HLE0L:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T09:56:53.9707482+07:00 0HMT2LN1HLE0L:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:56:53.9753151+07:00 0HMT2LN1HLE0L:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T09:56:53.9863733+07:00 0HMT2LN1HLE0M:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:56:53.9936094+07:00 0HMT2LN1HLE0M:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:56:53.9961634+07:00 0HMT2LN1HLE0M:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:56:54.0081588+07:00 0HMT2LN1HLE0L:00000005 [INF] Executed DbCommand ("28"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:56:54.0203313+07:00 0HMT2LN1HLE0O:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:56:54.0203338+07:00 0HMT2LN1HLE0L:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T09:56:54.0210303+07:00 0HMT2LN1HLE0O:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:56:54.0220428+07:00 0HMT2LN1HLE0L:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:56:54.0241768+07:00 0HMT2LN1HLE0O:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:56:54.0267368+07:00 0HMT2LN1HLE0O:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T09:56:54.0345423+07:00 0HMT2LN1HLE0M:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-22T09:56:54.0482906+07:00 0HMT2LN1HLE0M:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=["@__message_CreatedTime_0='?' (DbType = DateTime2), @__message_Id_1='?' (Size = 100), @__message_ChatRoomId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE (([m].[CreatedTime] >= @__message_CreatedTime_0) AND ([m].[Id] <> @__message_Id_1)) AND ([m].[ChatRoomId] = @__message_ChatRoomId_2)" (0723d8ff)
2023-08-22T09:57:00.9071302+07:00 0HMT2LN1HLE0N:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:57:00.9081782+07:00 0HMT2LN1HLE0N:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:57:00.9100777+07:00 0HMT2LN1HLE0N:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:57:00.9509379+07:00 0HMT2LN1HLE0L:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:57:00.9519531+07:00 0HMT2LN1HLE0L:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:57:00.9551334+07:00 0HMT2LN1HLE0L:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:57:00.9595500+07:00 0HMT2LN1HLE0L:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:57:00.9646449+07:00 0HMT2LN1HLE0L:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T09:57:00.9670540+07:00 0HMT2LN1HLE0L:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T09:57:00.9699661+07:00 0HMT2LN1HLE0L:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:57:00.9727546+07:00 0HMT2LN1HLE0L:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T09:57:00.9747233+07:00 0HMT2LN1HLE0L:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:57:00.9800645+07:00 0HMT2LN1HLE0L:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T09:57:00.9817495+07:00 0HMT2LN1HLE0L:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:57:01.0141975+07:00 0HMT2LN1HLE0L:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:57:01.0155116+07:00 0HMT2LN1HLE0L:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:57:01.0200466+07:00 0HMT2LN1HLE0L:00000008 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:57:01.0228617+07:00 0HMT2LN1HLE0L:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T09:57:10.1606536+07:00 0HMT2LN1HLE0O:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:57:10.1609297+07:00 0HMT2LN1HLE0L:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:57:10.1617757+07:00 0HMT2LN1HLE0L:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:57:10.1617759+07:00 0HMT2LN1HLE0O:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:57:10.1737797+07:00 0HMT2LN1HLE0L:0000000A [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:57:10.1760669+07:00 0HMT2LN1HLE0P:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:57:10.1795467+07:00 0HMT2LN1HLE0L:0000000A [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:57:10.1795465+07:00 0HMT2LN1HLE0O:00000004 [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:57:10.1833146+07:00 0HMT2LN1HLE0P:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:57:10.1843663+07:00 0HMT2LN1HLE0O:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T09:57:10.1849113+07:00 0HMT2LN1HLE0P:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:57:10.1858207+07:00 0HMT2LN1HLE0L:0000000A [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T09:57:10.1895668+07:00 0HMT2LN1HLE0L:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T09:57:10.1947873+07:00 0HMT2LN1HLE0L:0000000A [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:57:10.1989815+07:00 0HMT2LN1HLE0L:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T09:57:10.2001995+07:00 0HMT2LN1HLE0L:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:57:10.2017444+07:00 0HMT2LN1HLE0L:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T09:57:10.2027194+07:00 0HMT2LN1HLE0L:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:57:10.2159677+07:00 0HMT2LN1HLE0P:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:57:10.2171929+07:00 0HMT2LN1HLE0P:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:57:10.2194782+07:00 0HMT2LN1HLE0P:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:57:10.2223745+07:00 0HMT2LN1HLE0P:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T09:57:10.3079380+07:00 0HMT2LN1HLE0M:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:57:10.3079371+07:00 0HMT2LN1HLE0L:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:57:10.3085066+07:00 0HMT2LN1HLE0M:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:57:10.3085061+07:00 0HMT2LN1HLE0L:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:57:10.3100987+07:00 0HMT2LN1HLE0M:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:57:10.3101492+07:00 0HMT2LN1HLE0L:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:57:10.3121690+07:00 0HMT2LN1HLE0L:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:57:10.3121561+07:00 0HMT2LN1HLE0M:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T09:57:10.3171666+07:00 0HMT2LN1HLE0L:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T09:57:10.3189157+07:00 0HMT2LN1HLE0L:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T09:57:10.3198499+07:00 0HMT2LN1HLE0L:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:57:10.3208819+07:00 0HMT2LN1HLE0L:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T09:57:10.3218390+07:00 0HMT2LN1HLE0L:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:57:10.3233319+07:00 0HMT2LN1HLE0L:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T09:57:10.3249903+07:00 0HMT2LN1HLE0L:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T09:57:11.3869463+07:00 0HMT2LN1HLE0L:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:57:11.3875219+07:00 0HMT2LN1HLE0L:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:57:11.3962208+07:00 0HMT2LN1HLE0L:0000000D [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:57:11.4001042+07:00 0HMT2LN1HLE0L:0000000D [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T09:57:11.5163660+07:00 0HMT2LN1HLE0L:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:57:11.5168355+07:00 0HMT2LN1HLE0L:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:57:11.5182717+07:00 0HMT2LN1HLE0L:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:57:11.5216705+07:00 0HMT2LN1HLE0L:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T09:59:42.5300497+07:00 0HMT2LN1HLE0Q:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:59:42.5309789+07:00 0HMT2LN1HLE0Q:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:59:42.5406605+07:00 0HMT2LN1HLE0Q:00000003 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:59:42.5455980+07:00 0HMT2LN1HLE0Q:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T09:59:42.6783768+07:00 0HMT2LN1HLE0Q:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:59:42.6789241+07:00 0HMT2LN1HLE0Q:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:59:42.6806707+07:00 0HMT2LN1HLE0Q:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:59:42.6846443+07:00 0HMT2LN1HLE0Q:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T09:59:42.8392730+07:00 0HMT2LN1HLE0Q:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:59:42.8397646+07:00 0HMT2LN1HLE0Q:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:59:42.8414965+07:00 0HMT2LN1HLE0Q:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:59:42.8434111+07:00 0HMT2LN1HLE0Q:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T09:59:42.8971940+07:00 0HMT2LN1HLE0Q:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T09:59:42.8976997+07:00 0HMT2LN1HLE0Q:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T09:59:42.8990107+07:00 0HMT2LN1HLE0Q:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T09:59:42.9019345+07:00 0HMT2LN1HLE0Q:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T10:01:46.3343736+07:00 0HMT2LN1HLE0P:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:01:46.3349690+07:00 0HMT2LN1HLE0P:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:01:46.3438226+07:00 0HMT2LN1HLE0P:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:01:46.4457990+07:00 0HMT2LN1HLE0R:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:01:46.4467452+07:00 0HMT2LN1HLE0R:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:01:46.4489009+07:00 0HMT2LN1HLE0R:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:01:46.4532569+07:00 0HMT2LN1HLE0R:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:01:46.4573853+07:00 0HMT2LN1HLE0S:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:01:46.4583936+07:00 0HMT2LN1HLE0S:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:01:46.4603717+07:00 0HMT2LN1HLE0S:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:01:46.4612155+07:00 0HMT2LN1HLE0R:00000004 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T10:01:46.4664665+07:00 0HMT2LN1HLE0R:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T10:01:46.4666685+07:00 0HMT2LN1HLE0S:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T10:01:46.4701608+07:00 0HMT2LN1HLE0R:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:01:46.4751441+07:00 0HMT2LN1HLE0R:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:01:46.4767832+07:00 0HMT2LN1HLE0R:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:01:46.4781389+07:00 0HMT2LN1HLE0R:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:01:46.4792273+07:00 0HMT2LN1HLE0R:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:01:48.4955620+07:00 0HMT2LN1HLE0R:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:01:48.4961645+07:00 0HMT2LN1HLE0R:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:01:48.4975961+07:00 0HMT2LN1HLE0S:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:01:48.4982930+07:00 0HMT2LN1HLE0S:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:01:48.4983532+07:00 0HMT2LN1HLE0R:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:01:48.5002785+07:00 0HMT2LN1HLE0R:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:01:48.5006311+07:00 0HMT2LN1HLE0S:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:01:48.5037689+07:00 0HMT2LN1HLE0S:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T10:01:48.5045510+07:00 0HMT2LN1HLE0R:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T10:01:48.5083428+07:00 0HMT2LN1HLE0R:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T10:01:48.5103820+07:00 0HMT2LN1HLE0R:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:01:48.5121747+07:00 0HMT2LN1HLE0R:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:01:48.5134887+07:00 0HMT2LN1HLE0R:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:01:48.5150213+07:00 0HMT2LN1HLE0R:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:01:48.5163972+07:00 0HMT2LN1HLE0R:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:01:48.6593397+07:00 0HMT2LN1HLE0T:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:01:48.6598649+07:00 0HMT2LN1HLE0T:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:01:48.6613140+07:00 0HMT2LN1HLE0T:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:01:48.6658086+07:00 0HMT2LN1HLE0T:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:01:48.6662519+07:00 0HMT2LN1HLE0T:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:01:48.6681947+07:00 0HMT2LN1HLE0T:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:01:48.6707005+07:00 0HMT2LN1HLE0T:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T10:01:48.7006520+07:00 0HMT2LN1HLE0R:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:01:48.7006760+07:00 0HMT2LN1HLE0S:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:01:48.7011885+07:00 0HMT2LN1HLE0R:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:01:48.7011885+07:00 0HMT2LN1HLE0S:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:01:48.7028979+07:00 0HMT2LN1HLE0R:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:01:48.7028979+07:00 0HMT2LN1HLE0S:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:01:48.7061738+07:00 0HMT2LN1HLE0R:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:01:48.7073804+07:00 0HMT2LN1HLE0S:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T10:01:48.7167210+07:00 0HMT2LN1HLE0R:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T10:01:48.7180145+07:00 0HMT2LN1HLE0R:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T10:01:48.7189679+07:00 0HMT2LN1HLE0R:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:01:48.7199360+07:00 0HMT2LN1HLE0R:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:01:48.7210178+07:00 0HMT2LN1HLE0R:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:01:48.7226480+07:00 0HMT2LN1HLE0R:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:01:48.7240397+07:00 0HMT2LN1HLE0R:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:01:55.3596445+07:00 0HMT2LN1HLE0R:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:01:55.3602219+07:00 0HMT2LN1HLE0R:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:01:55.3621233+07:00 0HMT2LN1HLE0R:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:01:55.3673301+07:00 0HMT2LN1HLE0R:00000008 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T10:01:55.5115585+07:00 0HMT2LN1HLE0R:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:01:55.5121976+07:00 0HMT2LN1HLE0R:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:01:55.5140162+07:00 0HMT2LN1HLE0R:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:01:55.5175984+07:00 0HMT2LN1HLE0R:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T10:03:10.5707494+07:00 0HMT2LN1HLE0T:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:03:10.5729203+07:00 0HMT2LN1HLE0T:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:03:10.5825078+07:00 0HMT2LN1HLE0T:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:03:12.9371158+07:00 0HMT2LN1HLE0R:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:03:12.9377612+07:00 0HMT2LN1HLE0R:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:03:12.9403123+07:00 0HMT2LN1HLE0R:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:03:12.9582372+07:00 0HMT2LN1HLE0R:0000000C [INF] Executed DbCommand ("11"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:03:12.9596845+07:00 0HMT2LN1HLE0S:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:03:12.9613328+07:00 0HMT2LN1HLE0S:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:03:12.9633521+07:00 0HMT2LN1HLE0S:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:03:12.9679952+07:00 0HMT2LN1HLE0S:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T10:03:12.9689434+07:00 0HMT2LN1HLE0R:0000000C [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T10:03:12.9717668+07:00 0HMT2LN1HLE0R:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T10:03:12.9753192+07:00 0HMT2LN1HLE0R:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:03:12.9788090+07:00 0HMT2LN1HLE0R:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:03:12.9802722+07:00 0HMT2LN1HLE0R:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:03:12.9820736+07:00 0HMT2LN1HLE0R:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:03:12.9832287+07:00 0HMT2LN1HLE0R:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:03:13.0915771+07:00 0HMT2LN1HLE0U:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:03:13.0920666+07:00 0HMT2LN1HLE0U:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:03:13.0934072+07:00 0HMT2LN1HLE0U:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:03:13.1043635+07:00 0HMT2LN1HLE0U:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:03:13.1048674+07:00 0HMT2LN1HLE0U:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:03:13.1062013+07:00 0HMT2LN1HLE0U:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:03:13.1081652+07:00 0HMT2LN1HLE0U:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T10:03:13.1219034+07:00 0HMT2LN1HLE0R:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:03:13.1224059+07:00 0HMT2LN1HLE0R:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:03:13.1236871+07:00 0HMT2LN1HLE0R:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:03:13.1241890+07:00 0HMT2LN1HLE0S:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:03:13.1250445+07:00 0HMT2LN1HLE0R:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:03:13.1258408+07:00 0HMT2LN1HLE0S:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:03:13.1278588+07:00 0HMT2LN1HLE0R:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T10:03:13.1279257+07:00 0HMT2LN1HLE0S:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:03:13.1293174+07:00 0HMT2LN1HLE0S:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T10:03:13.1293298+07:00 0HMT2LN1HLE0R:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T10:03:13.1318283+07:00 0HMT2LN1HLE0R:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:03:13.1336877+07:00 0HMT2LN1HLE0R:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:03:13.1351221+07:00 0HMT2LN1HLE0R:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:03:13.1363342+07:00 0HMT2LN1HLE0R:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:03:13.1373087+07:00 0HMT2LN1HLE0R:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:03:13.9859776+07:00 0HMT2LN1HLE0R:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:03:13.9865317+07:00 0HMT2LN1HLE0R:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:03:13.9878800+07:00 0HMT2LN1HLE0R:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:03:13.9909121+07:00 0HMT2LN1HLE0R:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T10:03:14.0683396+07:00 0HMT2LN1HLE0R:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:03:14.0690473+07:00 0HMT2LN1HLE0R:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:03:14.0707695+07:00 0HMT2LN1HLE0R:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:03:14.0758193+07:00 0HMT2LN1HLE0R:00000011 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T10:03:46.5996424+07:00 0HMT2LN1HLE0U:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:03:46.6002111+07:00 0HMT2LN1HLE0U:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:03:46.6094511+07:00 0HMT2LN1HLE0U:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:03:48.4330161+07:00 0HMT2LN1HLE0R:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:03:48.4334647+07:00 0HMT2LN1HLE0S:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:03:48.4337121+07:00 0HMT2LN1HLE0R:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:03:48.4340148+07:00 0HMT2LN1HLE0S:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:03:48.4461582+07:00 0HMT2LN1HLE0R:00000014 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:03:48.4503225+07:00 0HMT2LN1HLE0R:00000014 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:03:48.4518711+07:00 0HMT2LN1HLE0S:00000009 [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:03:48.4574158+07:00 0HMT2LN1HLE0S:00000009 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T10:03:48.4574954+07:00 0HMT2LN1HLE0R:00000014 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T10:03:48.4618820+07:00 0HMT2LN1HLE0R:00000014 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T10:03:48.4653413+07:00 0HMT2LN1HLE0R:00000014 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:03:48.4687562+07:00 0HMT2LN1HLE0R:00000014 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:03:48.4710670+07:00 0HMT2LN1HLE0R:00000014 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:03:48.4767947+07:00 0HMT2LN1HLE0V:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:03:48.4772708+07:00 0HMT2LN1HLE0R:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:03:48.4775752+07:00 0HMT2LN1HLE0V:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:03:48.4784209+07:00 0HMT2LN1HLE0R:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:03:48.4794651+07:00 0HMT2LN1HLE0V:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:03:48.5560523+07:00 0HMT2LN1HLE0V:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:03:48.5568060+07:00 0HMT2LN1HLE0V:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:03:48.5584208+07:00 0HMT2LN1HLE0V:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:03:48.5609074+07:00 0HMT2LN1HLE0V:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T10:03:48.6142013+07:00 0HMT2LN1HLE0R:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:03:48.6144767+07:00 0HMT2LN1HLE0S:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:03:48.6148471+07:00 0HMT2LN1HLE0R:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:03:48.6148820+07:00 0HMT2LN1HLE0S:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:03:48.6162242+07:00 0HMT2LN1HLE0S:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:03:48.6162214+07:00 0HMT2LN1HLE0R:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:03:48.6179867+07:00 0HMT2LN1HLE0S:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T10:03:48.6209066+07:00 0HMT2LN1HLE0R:00000015 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:03:48.6350553+07:00 0HMT2LN1HLE0R:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T10:03:48.6364844+07:00 0HMT2LN1HLE0R:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T10:03:48.6376034+07:00 0HMT2LN1HLE0R:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:03:48.6390136+07:00 0HMT2LN1HLE0R:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:03:48.6399972+07:00 0HMT2LN1HLE0R:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:03:48.6412913+07:00 0HMT2LN1HLE0R:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:03:48.6424756+07:00 0HMT2LN1HLE0R:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:03:49.6894058+07:00 0HMT2LN1HLE0R:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:03:49.6899795+07:00 0HMT2LN1HLE0R:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:03:49.6985690+07:00 0HMT2LN1HLE0R:00000017 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:03:49.7024294+07:00 0HMT2LN1HLE0R:00000017 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T10:03:49.8139178+07:00 0HMT2LN1HLE0R:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:03:49.8144860+07:00 0HMT2LN1HLE0R:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:03:49.8160585+07:00 0HMT2LN1HLE0R:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:03:49.8191878+07:00 0HMT2LN1HLE0R:00000019 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T10:04:00.2764033+07:00 0HMT2LN1HLE0V:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:04:00.2770027+07:00 0HMT2LN1HLE0V:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:04:00.2783103+07:00 0HMT2LN1HLE0V:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:04:02.3404333+07:00 0HMT2LN1HLE0R:0000001D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:04:02.3405134+07:00 0HMT2LN1HLE0S:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:04:02.3410338+07:00 0HMT2LN1HLE0R:0000001D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:04:02.3410337+07:00 0HMT2LN1HLE0S:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:04:02.3425016+07:00 0HMT2LN1HLE0R:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:04:02.3425017+07:00 0HMT2LN1HLE0S:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:04:02.3469506+07:00 0HMT2LN1HLE0S:0000000C [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T10:04:02.3469506+07:00 0HMT2LN1HLE0R:0000001D [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:04:02.3530348+07:00 0HMT2LN1HLE0R:0000001D [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T10:04:02.3559592+07:00 0HMT2LN1HLE0R:0000001D [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T10:04:02.3594044+07:00 0HMT2LN1HLE0R:0000001D [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:04:02.3629689+07:00 0HMT2LN1HLE0R:0000001D [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:04:02.3643889+07:00 0HMT2LN1HLE0R:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:04:02.3656021+07:00 0HMT2LN1HLE0R:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:04:02.3667324+07:00 0HMT2LN1HLE0R:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:04:02.4472344+07:00 0HMT2LN1HLE10:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:04:02.4477396+07:00 0HMT2LN1HLE10:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:04:02.4491248+07:00 0HMT2LN1HLE10:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:04:02.4687598+07:00 0HMT2LN1HLE10:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:04:02.4693591+07:00 0HMT2LN1HLE10:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:04:02.4713239+07:00 0HMT2LN1HLE10:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:04:02.4739434+07:00 0HMT2LN1HLE10:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T10:04:02.4891321+07:00 0HMT2LN1HLE0R:0000001E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:04:02.4896532+07:00 0HMT2LN1HLE0R:0000001E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:04:02.4917069+07:00 0HMT2LN1HLE0R:0000001E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:04:02.4947199+07:00 0HMT2LN1HLE0R:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:04:02.4969812+07:00 0HMT2LN1HLE0R:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T10:04:02.4973147+07:00 0HMT2LN1HLE0S:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:04:02.4977353+07:00 0HMT2LN1HLE0S:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:04:02.4983331+07:00 0HMT2LN1HLE0R:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T10:04:02.4991195+07:00 0HMT2LN1HLE0R:0000001E [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:04:02.4994506+07:00 0HMT2LN1HLE0S:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:04:02.5000408+07:00 0HMT2LN1HLE0R:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:04:02.5010445+07:00 0HMT2LN1HLE0S:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T10:04:02.5010451+07:00 0HMT2LN1HLE0R:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:04:02.5048301+07:00 0HMT2LN1HLE0R:0000001E [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:04:02.5060836+07:00 0HMT2LN1HLE0R:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:05:38.6896838+07:00 0HMT2LN1HLE0R:00000020 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:05:38.6903973+07:00 0HMT2LN1HLE0R:00000020 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:05:38.7002659+07:00 0HMT2LN1HLE0R:00000020 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:05:38.7040943+07:00 0HMT2LN1HLE0R:00000020 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T10:05:38.8277910+07:00 0HMT2LN1HLE0R:00000022 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:05:38.8282976+07:00 0HMT2LN1HLE0R:00000022 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:05:38.8299730+07:00 0HMT2LN1HLE0R:00000022 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:05:38.8346873+07:00 0HMT2LN1HLE0R:00000022 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T10:07:16.6315775+07:00 0HMT2LN1HLE10:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:07:16.6353609+07:00 0HMT2LN1HLE10:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:07:16.6493423+07:00 0HMT2LN1HLE10:00000002 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:07:16.7002868+07:00 0HMT2LN1HLE0R:00000024 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:07:16.7010618+07:00 0HMT2LN1HLE0R:00000024 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:07:16.7026820+07:00 0HMT2LN1HLE0R:00000024 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:07:16.7077037+07:00 0HMT2LN1HLE0R:00000024 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:07:16.7155678+07:00 0HMT2LN1HLE0R:00000024 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T10:07:16.7179614+07:00 0HMT2LN1HLE0R:00000024 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T10:07:16.7207327+07:00 0HMT2LN1HLE0R:00000024 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:07:16.7210962+07:00 0HMT2LN1HLE11:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:07:16.7217282+07:00 0HMT2LN1HLE11:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:07:16.7235246+07:00 0HMT2LN1HLE11:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:07:16.7235358+07:00 0HMT2LN1HLE0R:00000024 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:07:16.7251942+07:00 0HMT2LN1HLE0R:00000024 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:07:16.7280465+07:00 0HMT2LN1HLE0R:00000024 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:07:16.7291555+07:00 0HMT2LN1HLE11:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T10:07:16.7291555+07:00 0HMT2LN1HLE0R:00000024 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:07:18.4866148+07:00 0HMT2LN1HLE11:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:07:18.4873580+07:00 0HMT2LN1HLE11:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:07:18.4873885+07:00 0HMT2LN1HLE0R:00000026 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:07:18.4877297+07:00 0HMT2LN1HLE0R:00000026 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:07:18.4886994+07:00 0HMT2LN1HLE11:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:07:18.4894269+07:00 0HMT2LN1HLE0R:00000026 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:07:18.4902326+07:00 0HMT2LN1HLE11:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T10:07:18.4923515+07:00 0HMT2LN1HLE0R:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:07:18.4950860+07:00 0HMT2LN1HLE0R:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T10:07:18.4962379+07:00 0HMT2LN1HLE0R:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T10:07:18.4976395+07:00 0HMT2LN1HLE0R:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:07:18.4993885+07:00 0HMT2LN1HLE0R:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:07:18.5005675+07:00 0HMT2LN1HLE0R:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:07:18.5015025+07:00 0HMT2LN1HLE0R:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:07:18.5023043+07:00 0HMT2LN1HLE0R:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:07:18.5195673+07:00 0HMT2LN1HLE12:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:07:18.5206682+07:00 0HMT2LN1HLE12:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:07:18.5233111+07:00 0HMT2LN1HLE12:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:07:18.6384672+07:00 0HMT2LN1HLE12:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:07:18.6390064+07:00 0HMT2LN1HLE12:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:07:18.6403309+07:00 0HMT2LN1HLE12:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:07:18.6429296+07:00 0HMT2LN1HLE12:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T10:07:18.6812438+07:00 0HMT2LN1HLE0R:00000027 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:07:18.6818889+07:00 0HMT2LN1HLE0R:00000027 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:07:18.6834422+07:00 0HMT2LN1HLE0R:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:07:18.6857046+07:00 0HMT2LN1HLE0R:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:07:18.6887236+07:00 0HMT2LN1HLE0R:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T10:07:18.6901998+07:00 0HMT2LN1HLE0R:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T10:07:18.6912993+07:00 0HMT2LN1HLE0R:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:07:18.6927967+07:00 0HMT2LN1HLE0R:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:07:18.6938670+07:00 0HMT2LN1HLE0R:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:07:18.6948941+07:00 0HMT2LN1HLE11:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:07:18.6949124+07:00 0HMT2LN1HLE0R:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T10:07:18.6953304+07:00 0HMT2LN1HLE11:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:07:18.6964122+07:00 0HMT2LN1HLE0R:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T10:07:18.6982247+07:00 0HMT2LN1HLE11:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:07:18.7000747+07:00 0HMT2LN1HLE11:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T10:07:19.1664837+07:00 0HMT2LN1HLE0R:00000029 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:07:19.1671543+07:00 0HMT2LN1HLE0R:00000029 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:07:19.1684062+07:00 0HMT2LN1HLE0R:00000029 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:07:19.1718525+07:00 0HMT2LN1HLE0R:00000029 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T10:07:19.3114770+07:00 0HMT2LN1HLE0R:0000002B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T10:07:19.3120712+07:00 0HMT2LN1HLE0R:0000002B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T10:07:19.3133639+07:00 0HMT2LN1HLE0R:0000002B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T10:07:19.3162664+07:00 0HMT2LN1HLE0R:0000002B [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T12:29:16.8608533+07:00 0HMT2LN1HLE12:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:29:16.8675875+07:00 0HMT2LN1HLE12:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:29:16.8781016+07:00 0HMT2LN1HLE12:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:29:16.9366190+07:00 0HMT2LN1HLE14:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:29:16.9366190+07:00 0HMT2LN1HLE13:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:29:16.9371958+07:00 0HMT2LN1HLE14:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:29:16.9386900+07:00 0HMT2LN1HLE14:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:29:16.9396844+07:00 0HMT2LN1HLE13:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:29:16.9416058+07:00 0HMT2LN1HLE13:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:29:16.9433525+07:00 0HMT2LN1HLE14:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T12:29:16.9452924+07:00 0HMT2LN1HLE13:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:29:16.9508248+07:00 0HMT2LN1HLE13:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T12:29:16.9543431+07:00 0HMT2LN1HLE13:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T12:29:16.9568866+07:00 0HMT2LN1HLE13:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:29:16.9601366+07:00 0HMT2LN1HLE13:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:29:16.9613768+07:00 0HMT2LN1HLE13:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:29:16.9624758+07:00 0HMT2LN1HLE13:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:29:16.9635212+07:00 0HMT2LN1HLE13:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:29:17.0705592+07:00 0HMT2LN1HLE15:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:29:17.0711799+07:00 0HMT2LN1HLE15:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:29:17.0726974+07:00 0HMT2LN1HLE15:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:29:17.0923599+07:00 0HMT2LN1HLE15:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:29:17.0934813+07:00 0HMT2LN1HLE15:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:29:17.0953274+07:00 0HMT2LN1HLE15:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:29:19.1840289+07:00 0HMT2LN1HLE13:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:29:19.1845329+07:00 0HMT2LN1HLE13:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:29:19.1850624+07:00 0HMT2LN1HLE14:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:29:19.1853699+07:00 0HMT2LN1HLE14:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:29:19.1859897+07:00 0HMT2LN1HLE13:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:29:19.1865478+07:00 0HMT2LN1HLE14:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:29:19.1884944+07:00 0HMT2LN1HLE13:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:29:19.1960951+07:00 0HMT2LN1HLE14:00000004 [INF] Executed DbCommand ("9"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T12:29:19.2012738+07:00 0HMT2LN1HLE13:00000004 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T12:29:19.2045174+07:00 0HMT2LN1HLE13:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T12:29:19.2055902+07:00 0HMT2LN1HLE13:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:29:19.2066569+07:00 0HMT2LN1HLE13:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:29:19.2077477+07:00 0HMT2LN1HLE13:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:29:19.2087972+07:00 0HMT2LN1HLE13:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:29:19.2096749+07:00 0HMT2LN1HLE13:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:29:19.3305695+07:00 0HMT2LN1HLE16:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:29:19.3318594+07:00 0HMT2LN1HLE16:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:29:19.3347130+07:00 0HMT2LN1HLE16:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:29:19.3358674+07:00 0HMT2LN1HLE16:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:29:19.3369195+07:00 0HMT2LN1HLE16:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:29:19.3388330+07:00 0HMT2LN1HLE16:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:29:19.3428401+07:00 0HMT2LN1HLE16:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T12:29:19.3685002+07:00 0HMT2LN1HLE13:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:29:19.3694662+07:00 0HMT2LN1HLE13:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:29:19.3698659+07:00 0HMT2LN1HLE14:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:29:19.3702688+07:00 0HMT2LN1HLE14:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:29:19.3712250+07:00 0HMT2LN1HLE13:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:29:19.3715083+07:00 0HMT2LN1HLE14:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:29:19.3729139+07:00 0HMT2LN1HLE14:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T12:29:19.3729156+07:00 0HMT2LN1HLE13:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:29:19.3779505+07:00 0HMT2LN1HLE13:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T12:29:19.3821496+07:00 0HMT2LN1HLE13:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T12:29:19.3838361+07:00 0HMT2LN1HLE13:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:29:19.3852552+07:00 0HMT2LN1HLE13:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:29:19.3864348+07:00 0HMT2LN1HLE13:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:29:19.3879140+07:00 0HMT2LN1HLE13:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:29:19.3893653+07:00 0HMT2LN1HLE13:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:29:19.8788493+07:00 0HMT2LN1HLE13:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:29:19.8793511+07:00 0HMT2LN1HLE13:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:29:19.8814936+07:00 0HMT2LN1HLE13:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:29:19.8849084+07:00 0HMT2LN1HLE13:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T12:29:20.1026617+07:00 0HMT2LN1HLE13:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:29:20.1031469+07:00 0HMT2LN1HLE13:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:29:20.1044821+07:00 0HMT2LN1HLE13:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:29:20.1073370+07:00 0HMT2LN1HLE13:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T12:30:36.5001396+07:00 0HMT2LN1HLE16:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:30:36.5032108+07:00 0HMT2LN1HLE16:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:30:36.5140758+07:00 0HMT2LN1HLE16:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:30:36.6129129+07:00 0HMT2LN1HLE13:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:30:36.6144494+07:00 0HMT2LN1HLE13:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:30:36.6235370+07:00 0HMT2LN1HLE14:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:30:36.6242838+07:00 0HMT2LN1HLE14:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:30:36.6319053+07:00 0HMT2LN1HLE13:0000000C [INF] Executed DbCommand ("17"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:30:36.6395099+07:00 0HMT2LN1HLE14:00000006 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:30:36.6395443+07:00 0HMT2LN1HLE13:0000000C [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:30:36.6462647+07:00 0HMT2LN1HLE14:00000006 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T12:30:36.6502154+07:00 0HMT2LN1HLE13:0000000C [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T12:30:36.6535716+07:00 0HMT2LN1HLE13:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T12:30:36.6599129+07:00 0HMT2LN1HLE13:0000000C [INF] Executed DbCommand ("6"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:30:36.6637901+07:00 0HMT2LN1HLE13:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:30:36.6649326+07:00 0HMT2LN1HLE13:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:30:36.6661094+07:00 0HMT2LN1HLE13:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:30:36.6671776+07:00 0HMT2LN1HLE13:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:30:38.4671384+07:00 0HMT2LN1HLE13:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:30:38.4681254+07:00 0HMT2LN1HLE13:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:30:38.4811530+07:00 0HMT2LN1HLE13:0000000F [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:30:38.4817335+07:00 0HMT2LN1HLE14:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:30:38.4826929+07:00 0HMT2LN1HLE14:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:30:38.4858415+07:00 0HMT2LN1HLE14:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:30:38.4860067+07:00 0HMT2LN1HLE13:0000000F [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:30:38.4901883+07:00 0HMT2LN1HLE14:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T12:30:38.4920791+07:00 0HMT2LN1HLE13:0000000F [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T12:30:38.4954507+07:00 0HMT2LN1HLE13:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T12:30:38.4988598+07:00 0HMT2LN1HLE13:0000000F [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:30:38.5022180+07:00 0HMT2LN1HLE13:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:30:38.5034418+07:00 0HMT2LN1HLE13:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:30:38.5044703+07:00 0HMT2LN1HLE13:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:30:38.5052455+07:00 0HMT2LN1HLE13:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:30:38.6560069+07:00 0HMT2LN1HLE18:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:30:38.6568509+07:00 0HMT2LN1HLE18:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:30:38.6588094+07:00 0HMT2LN1HLE18:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:30:38.6687731+07:00 0HMT2LN1HLE18:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:30:38.6692663+07:00 0HMT2LN1HLE18:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:30:38.6711519+07:00 0HMT2LN1HLE18:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:30:38.6736907+07:00 0HMT2LN1HLE18:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T12:30:38.7071707+07:00 0HMT2LN1HLE13:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:30:38.7077654+07:00 0HMT2LN1HLE13:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:30:38.7092103+07:00 0HMT2LN1HLE13:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:30:38.7114778+07:00 0HMT2LN1HLE13:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:30:38.7140619+07:00 0HMT2LN1HLE13:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T12:30:38.7154036+07:00 0HMT2LN1HLE13:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T12:30:38.7164255+07:00 0HMT2LN1HLE13:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:30:38.7174154+07:00 0HMT2LN1HLE13:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:30:38.7183549+07:00 0HMT2LN1HLE13:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:30:38.7187925+07:00 0HMT2LN1HLE14:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:30:38.7193910+07:00 0HMT2LN1HLE13:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:30:38.7195503+07:00 0HMT2LN1HLE14:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:30:38.7201928+07:00 0HMT2LN1HLE13:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:30:38.7209814+07:00 0HMT2LN1HLE14:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:30:38.7222163+07:00 0HMT2LN1HLE14:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T12:30:39.6474780+07:00 0HMT2LN1HLE13:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:30:39.6480288+07:00 0HMT2LN1HLE13:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:30:39.6493316+07:00 0HMT2LN1HLE13:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:30:39.6525796+07:00 0HMT2LN1HLE13:00000012 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T12:30:39.7433182+07:00 0HMT2LN1HLE13:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:30:39.7439588+07:00 0HMT2LN1HLE13:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:30:39.7455320+07:00 0HMT2LN1HLE13:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:30:39.7483039+07:00 0HMT2LN1HLE13:00000014 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T12:31:00.6152508+07:00 0HMT2LN1HLE18:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:31:00.6158119+07:00 0HMT2LN1HLE18:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:31:00.6173128+07:00 0HMT2LN1HLE18:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:31:00.7358129+07:00 0HMT2LN1HLE13:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:31:00.7365066+07:00 0HMT2LN1HLE13:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:31:00.7377605+07:00 0HMT2LN1HLE14:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:31:00.7382115+07:00 0HMT2LN1HLE13:00000016 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:31:00.7382722+07:00 0HMT2LN1HLE14:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:31:00.7401922+07:00 0HMT2LN1HLE13:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:31:00.7402938+07:00 0HMT2LN1HLE14:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:31:00.7429607+07:00 0HMT2LN1HLE14:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T12:31:00.7465944+07:00 0HMT2LN1HLE13:00000016 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T12:31:00.7533564+07:00 0HMT2LN1HLE13:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T12:31:00.7543116+07:00 0HMT2LN1HLE13:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:31:00.7553418+07:00 0HMT2LN1HLE13:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:31:00.7563611+07:00 0HMT2LN1HLE13:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:31:00.7574757+07:00 0HMT2LN1HLE13:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:31:00.7599489+07:00 0HMT2LN1HLE13:00000016 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:31:02.7729029+07:00 0HMT2LN1HLE13:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:31:02.7737105+07:00 0HMT2LN1HLE13:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:31:02.7758660+07:00 0HMT2LN1HLE13:00000017 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:31:02.7781034+07:00 0HMT2LN1HLE13:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T12:31:02.7869054+07:00 0HMT2LN1HLE13:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:31:02.7875087+07:00 0HMT2LN1HLE13:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:31:02.7895419+07:00 0HMT2LN1HLE13:00000018 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:31:02.7913314+07:00 0HMT2LN1HLE13:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:31:02.7939792+07:00 0HMT2LN1HLE13:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T12:31:02.7953045+07:00 0HMT2LN1HLE13:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T12:31:02.7965078+07:00 0HMT2LN1HLE13:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:31:02.7974895+07:00 0HMT2LN1HLE13:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:31:02.7985826+07:00 0HMT2LN1HLE13:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:31:02.8014330+07:00 0HMT2LN1HLE13:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:31:02.8030214+07:00 0HMT2LN1HLE13:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:31:02.8313701+07:00 0HMT2LN1HLE1A:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:31:02.8319997+07:00 0HMT2LN1HLE1A:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:31:02.8337182+07:00 0HMT2LN1HLE1A:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:31:02.8344525+07:00 0HMT2LN1HLE1A:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:31:02.8350307+07:00 0HMT2LN1HLE1A:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:31:02.8367958+07:00 0HMT2LN1HLE1A:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:31:02.8384724+07:00 0HMT2LN1HLE1A:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T12:31:02.8626267+07:00 0HMT2LN1HLE13:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:31:02.8635016+07:00 0HMT2LN1HLE13:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:31:02.8648475+07:00 0HMT2LN1HLE14:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:31:02.8651498+07:00 0HMT2LN1HLE13:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:31:02.8657342+07:00 0HMT2LN1HLE14:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:31:02.8683981+07:00 0HMT2LN1HLE13:00000019 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:31:02.8689527+07:00 0HMT2LN1HLE14:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:31:02.8709133+07:00 0HMT2LN1HLE14:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T12:31:02.8709133+07:00 0HMT2LN1HLE13:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T12:31:02.8732346+07:00 0HMT2LN1HLE13:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T12:31:02.8742610+07:00 0HMT2LN1HLE13:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:31:02.8755315+07:00 0HMT2LN1HLE13:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:31:02.8765311+07:00 0HMT2LN1HLE13:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:31:02.8780247+07:00 0HMT2LN1HLE13:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:31:02.8793781+07:00 0HMT2LN1HLE13:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:31:12.2134266+07:00 0HMT2LN1HLE13:0000001B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:31:12.2140033+07:00 0HMT2LN1HLE13:0000001B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:31:12.2153740+07:00 0HMT2LN1HLE13:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:31:12.2178559+07:00 0HMT2LN1HLE13:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T12:31:12.3174895+07:00 0HMT2LN1HLE13:0000001D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:31:12.3186881+07:00 0HMT2LN1HLE13:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:31:12.3207600+07:00 0HMT2LN1HLE13:0000001D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:31:12.3267917+07:00 0HMT2LN1HLE13:0000001D [INF] Executed DbCommand ("5"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T12:50:15.2845184+07:00 0HMT2LN1HLE1B:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:50:15.2946164+07:00 0HMT2LN1HLE1B:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:50:15.3258054+07:00 0HMT2LN1HLE1B:00000004 [INF] Executed DbCommand ("30"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:50:15.3420902+07:00 0HMT2LN1HLE1D:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:50:15.3432206+07:00 0HMT2LN1HLE1D:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:50:15.3458281+07:00 0HMT2LN1HLE1D:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:50:15.3575664+07:00 0HMT2LN1HLE1D:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T12:50:15.3655470+07:00 0HMT2LN1HLE1B:00000004 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:50:15.3714355+07:00 0HMT2LN1HLE1B:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T12:50:15.3748567+07:00 0HMT2LN1HLE1B:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T12:50:15.3792032+07:00 0HMT2LN1HLE1B:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:50:15.3824921+07:00 0HMT2LN1HLE1B:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:50:15.3837098+07:00 0HMT2LN1HLE1B:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:50:15.3849053+07:00 0HMT2LN1HLE1B:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:50:15.3858110+07:00 0HMT2LN1HLE1B:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:50:15.4039847+07:00 0HMT2LN1HLE1C:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:50:15.4046605+07:00 0HMT2LN1HLE1C:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:50:15.4060258+07:00 0HMT2LN1HLE1C:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:50:15.4226634+07:00 0HMT2LN1HLE1C:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:50:15.4233682+07:00 0HMT2LN1HLE1C:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:50:15.4247625+07:00 0HMT2LN1HLE1C:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:50:15.4279291+07:00 0HMT2LN1HLE1C:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T12:50:15.4557796+07:00 0HMT2LN1HLE1D:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:50:15.4557796+07:00 0HMT2LN1HLE1B:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:50:15.4563523+07:00 0HMT2LN1HLE1B:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:50:15.4563524+07:00 0HMT2LN1HLE1D:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:50:15.4576784+07:00 0HMT2LN1HLE1B:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:50:15.4577280+07:00 0HMT2LN1HLE1D:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:50:15.4598613+07:00 0HMT2LN1HLE1D:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T12:50:15.4598614+07:00 0HMT2LN1HLE1B:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:50:15.4635332+07:00 0HMT2LN1HLE1B:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T12:50:15.4646138+07:00 0HMT2LN1HLE1B:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T12:50:15.4655190+07:00 0HMT2LN1HLE1B:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:50:15.4665096+07:00 0HMT2LN1HLE1B:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:50:15.4675242+07:00 0HMT2LN1HLE1B:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:50:15.4690709+07:00 0HMT2LN1HLE1B:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:50:15.4701633+07:00 0HMT2LN1HLE1B:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:50:20.3378279+07:00 0HMT2LN1HLE1B:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:50:20.3385544+07:00 0HMT2LN1HLE1B:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:50:20.3401784+07:00 0HMT2LN1HLE1B:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:50:20.3437923+07:00 0HMT2LN1HLE1B:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T12:50:20.4091399+07:00 0HMT2LN1HLE1B:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:50:20.4096200+07:00 0HMT2LN1HLE1B:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:50:20.4108780+07:00 0HMT2LN1HLE1B:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:50:20.4138052+07:00 0HMT2LN1HLE1B:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T12:52:55.9078520+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-22T12:52:55.9157775+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-22T12:52:55.9160825+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-22T12:52:55.9161049+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-22T12:52:56.2447794+07:00 0HMT2QG470EH3:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-22T12:52:57.4384098+07:00 0HMT2QG470EH8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:52:57.4383747+07:00 0HMT2QG470EH3:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:52:57.4383721+07:00 0HMT2QG470EH6:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:52:57.4383751+07:00 0HMT2QG470EH4:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:52:57.4383754+07:00 0HMT2QG470EH5:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:52:58.5651134+07:00 0HMT2QG470EH3:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:52:58.5651188+07:00 0HMT2QG470EH6:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:52:58.5651133+07:00 0HMT2QG470EH5:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:52:58.5651231+07:00 0HMT2QG470EH8:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:52:58.5651195+07:00 0HMT2QG470EH4:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:52:58.6091109+07:00 0HMT2QG470EH6:00000003 [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:52:58.6091105+07:00 0HMT2QG470EH3:00000002 [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:52:58.6091105+07:00 0HMT2QG470EH5:00000003 [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:52:58.6091105+07:00 0HMT2QG470EH4:00000003 [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:52:58.6091105+07:00 0HMT2QG470EH8:00000002 [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:52:58.6814847+07:00 0HMT2QG470EH3:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:52:58.6814846+07:00 0HMT2QG470EH8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T12:52:58.6875933+07:00 0HMT2QG470EH8:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:52:58.6875933+07:00 0HMT2QG470EH3:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T12:52:58.6899180+07:00 0HMT2QG470EH3:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:52:58.6899180+07:00 0HMT2QG470EH8:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T12:52:59.1371251+07:00 0HMT2QG470EH3:00000002 [INF] Executed DbCommand ("54"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T12:52:59.1371305+07:00 0HMT2QG470EH8:00000002 [INF] Executed DbCommand ("54"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T12:52:59.1371251+07:00 0HMT2QG470EH5:00000003 [INF] Executed DbCommand ("53"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-22T12:52:59.1371251+07:00 0HMT2QG470EH6:00000003 [INF] Executed DbCommand ("53"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T12:52:59.1371417+07:00 0HMT2QG470EH4:00000003 [INF] Executed DbCommand ("53"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:52:59.2315416+07:00 0HMT2QG470EH5:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=["@__message_CreatedTime_0='?' (DbType = DateTime2), @__message_Id_1='?' (Size = 100), @__message_ChatRoomId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE (([m].[CreatedTime] >= @__message_CreatedTime_0) AND ([m].[Id] <> @__message_Id_1)) AND ([m].[ChatRoomId] = @__message_ChatRoomId_2)" (0723d8ff)
2023-08-22T12:52:59.3625563+07:00 0HMT2QG470EH4:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T12:52:59.3844680+07:00 0HMT2QG470EH4:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T12:52:59.3936168+07:00 0HMT2QG470EH4:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:52:59.4136043+07:00 0HMT2QG470EH4:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:52:59.4152049+07:00 0HMT2QG470EH4:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T12:52:59.4162965+07:00 0HMT2QG470EH4:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T12:52:59.4171731+07:00 0HMT2QG470EH4:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T13:00:36.6623294+07:00 0HMT2QG470EH9:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:00:36.6660422+07:00 0HMT2QG470EH9:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:00:36.6759226+07:00 0HMT2QG470EH9:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:00:36.6942164+07:00 0HMT2QG470EH9:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T13:00:36.8335625+07:00 0HMT2QG470EH9:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:00:36.8346095+07:00 0HMT2QG470EH9:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:00:36.8369527+07:00 0HMT2QG470EH9:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:00:36.8553255+07:00 0HMT2QG470EH9:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T13:00:36.9589071+07:00 0HMT2QG470EH9:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:00:36.9595244+07:00 0HMT2QG470EH9:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:00:36.9613270+07:00 0HMT2QG470EH9:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:00:36.9639235+07:00 0HMT2QG470EH9:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T13:00:37.0143998+07:00 0HMT2QG470EH9:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:00:37.0149527+07:00 0HMT2QG470EH9:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:00:37.0162865+07:00 0HMT2QG470EH9:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:00:37.0190114+07:00 0HMT2QG470EH9:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T13:01:41.9544953+07:00 0HMT2QG470EH8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:01:41.9544953+07:00 0HMT2QG470EH3:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:01:41.9553990+07:00 0HMT2QG470EH3:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:01:41.9605967+07:00 0HMT2QG470EH8:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:01:41.9690754+07:00 0HMT2QG470EH8:00000002 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:01:41.9700576+07:00 0HMT2QG470EH3:00000002 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:01:42.0365600+07:00 0HMT2QG470EH9:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:01:42.0372986+07:00 0HMT2QG470EH9:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:01:42.0390360+07:00 0HMT2QG470EH9:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:01:42.0447107+07:00 0HMT2QG470EH9:0000000B [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T13:01:42.0459902+07:00 0HMT2QG470EHA:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:01:42.0469322+07:00 0HMT2QG470EHA:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:01:42.0494278+07:00 0HMT2QG470EHA:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:01:42.0534471+07:00 0HMT2QG470EH9:0000000B [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T13:01:42.0560541+07:00 0HMT2QG470EHA:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T13:01:42.0582477+07:00 0HMT2QG470EH9:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T13:01:42.0622867+07:00 0HMT2QG470EH9:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T13:01:42.0664300+07:00 0HMT2QG470EH9:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T13:01:42.0679421+07:00 0HMT2QG470EH9:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T13:01:42.0698946+07:00 0HMT2QG470EH9:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T13:01:42.0714751+07:00 0HMT2QG470EH9:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T13:01:42.1734858+07:00 0HMT2QG470EHB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:01:42.1740420+07:00 0HMT2QG470EHB:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:01:42.1754260+07:00 0HMT2QG470EHB:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:01:42.2143922+07:00 0HMT2QG470EHB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:01:42.2148700+07:00 0HMT2QG470EHB:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:01:42.2162754+07:00 0HMT2QG470EHB:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:01:43.9210098+07:00 0HMT2QG470EH9:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:01:43.9214903+07:00 0HMT2QG470EH9:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:01:43.9215226+07:00 0HMT2QG470EHA:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:01:43.9218016+07:00 0HMT2QG470EHA:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:01:43.9227569+07:00 0HMT2QG470EH9:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:01:43.9227835+07:00 0HMT2QG470EHA:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:01:43.9240415+07:00 0HMT2QG470EH9:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T13:01:43.9240386+07:00 0HMT2QG470EHA:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T13:01:43.9285449+07:00 0HMT2QG470EH9:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T13:01:43.9295502+07:00 0HMT2QG470EH9:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T13:01:43.9303471+07:00 0HMT2QG470EH9:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T13:01:43.9314538+07:00 0HMT2QG470EH9:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T13:01:43.9324488+07:00 0HMT2QG470EH9:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T13:01:43.9333663+07:00 0HMT2QG470EH9:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T13:01:43.9341378+07:00 0HMT2QG470EH9:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T13:01:44.1344093+07:00 0HMT2QG470EHC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:01:44.1349949+07:00 0HMT2QG470EHC:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:01:44.1368202+07:00 0HMT2QG470EHC:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:01:44.1565225+07:00 0HMT2QG470EHC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:01:44.1574629+07:00 0HMT2QG470EHC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:01:44.1589601+07:00 0HMT2QG470EHC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:01:44.1615386+07:00 0HMT2QG470EHC:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T13:01:44.1975951+07:00 0HMT2QG470EH9:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:01:44.1982590+07:00 0HMT2QG470EH9:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:01:44.1996645+07:00 0HMT2QG470EH9:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:01:44.2013942+07:00 0HMT2QG470EH9:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T13:01:44.2027552+07:00 0HMT2QG470EHA:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:01:44.2036765+07:00 0HMT2QG470EHA:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:01:44.2041980+07:00 0HMT2QG470EH9:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T13:01:44.2054783+07:00 0HMT2QG470EHA:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:01:44.2054936+07:00 0HMT2QG470EH9:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T13:01:44.2066794+07:00 0HMT2QG470EH9:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T13:01:44.2066846+07:00 0HMT2QG470EHA:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T13:01:44.2094072+07:00 0HMT2QG470EH9:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T13:01:44.2103840+07:00 0HMT2QG470EH9:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T13:01:44.2117821+07:00 0HMT2QG470EH9:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T13:01:44.2128743+07:00 0HMT2QG470EH9:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T13:01:44.4659162+07:00 0HMT2QG470EH9:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:01:44.4664422+07:00 0HMT2QG470EH9:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:01:44.4677087+07:00 0HMT2QG470EH9:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:01:44.4708085+07:00 0HMT2QG470EH9:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T13:01:44.5461178+07:00 0HMT2QG470EH9:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:01:44.5466709+07:00 0HMT2QG470EH9:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:01:44.5479790+07:00 0HMT2QG470EH9:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:01:44.5511445+07:00 0HMT2QG470EH9:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T13:46:01.3615965+07:00 0HMT2QG470EHE:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:46:01.3675838+07:00 0HMT2QG470EHD:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:46:01.3795683+07:00 0HMT2QG470EHE:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:46:01.3912179+07:00 0HMT2QG470EHD:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:46:01.3958470+07:00 0HMT2QG470EHF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:46:01.4006583+07:00 0HMT2QG470EHD:00000003 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:46:01.4006583+07:00 0HMT2QG470EHE:00000003 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:46:01.4007956+07:00 0HMT2QG470EHF:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:46:01.4035551+07:00 0HMT2QG470EHF:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:46:01.4063797+07:00 0HMT2QG470EHE:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T13:46:01.4063798+07:00 0HMT2QG470EHD:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T13:46:01.4064193+07:00 0HMT2QG470EHF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:46:01.4070153+07:00 0HMT2QG470EHF:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:46:01.4088575+07:00 0HMT2QG470EHF:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:46:01.4126111+07:00 0HMT2QG470EHF:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T13:46:01.4148563+07:00 0HMT2QG470EHD:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T13:46:01.4196700+07:00 0HMT2QG470EHD:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T13:46:01.4232312+07:00 0HMT2QG470EHD:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T13:46:01.4263638+07:00 0HMT2QG470EHD:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T13:46:01.4275643+07:00 0HMT2QG470EHD:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T13:46:01.4288612+07:00 0HMT2QG470EHD:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T13:46:01.4299660+07:00 0HMT2QG470EHD:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T13:46:01.4959671+07:00 0HMT2QG470EHE:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:46:01.4960522+07:00 0HMT2QG470EHD:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:46:01.4967361+07:00 0HMT2QG470EHE:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:46:01.4967362+07:00 0HMT2QG470EHD:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:46:01.4982563+07:00 0HMT2QG470EHD:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:46:01.4982565+07:00 0HMT2QG470EHE:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:46:01.4999552+07:00 0HMT2QG470EHE:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T13:46:01.5001834+07:00 0HMT2QG470EHD:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T13:46:01.5036382+07:00 0HMT2QG470EHD:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T13:46:01.5055840+07:00 0HMT2QG470EHD:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T13:46:01.5073023+07:00 0HMT2QG470EHD:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T13:46:01.5089868+07:00 0HMT2QG470EHD:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T13:46:01.5114676+07:00 0HMT2QG470EHD:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T13:46:01.5133490+07:00 0HMT2QG470EHD:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T13:46:01.5144267+07:00 0HMT2QG470EHD:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T13:46:02.3092633+07:00 0HMT2QG470EHD:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:46:02.3101808+07:00 0HMT2QG470EHD:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:46:02.3117788+07:00 0HMT2QG470EHD:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:46:02.3154066+07:00 0HMT2QG470EHD:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T13:46:02.4237755+07:00 0HMT2QG470EHD:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T13:46:02.4244109+07:00 0HMT2QG470EHD:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T13:46:02.4269324+07:00 0HMT2QG470EHD:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T13:46:02.4310070+07:00 0HMT2QG470EHD:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:17:18.4718399+07:00 0HMT2QG470EHG:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:17:18.4731983+07:00 0HMT2QG470EHH:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:17:18.4789061+07:00 0HMT2QG470EHG:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:17:18.4829550+07:00 0HMT2QG470EHH:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:17:18.4984619+07:00 0HMT2QG470EHH:00000003 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:17:18.4984613+07:00 0HMT2QG470EHG:00000003 [INF] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:17:18.5026284+07:00 0HMT2QG470EHI:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:17:18.5057131+07:00 0HMT2QG470EHH:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:17:18.5069123+07:00 0HMT2QG470EHG:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:17:18.5154247+07:00 0HMT2QG470EHI:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:17:18.5214934+07:00 0HMT2QG470EHI:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:17:18.5229914+07:00 0HMT2QG470EHI:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:17:18.5240355+07:00 0HMT2QG470EHI:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:17:18.5260179+07:00 0HMT2QG470EHI:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:17:18.5267548+07:00 0HMT2QG470EHG:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:17:18.5310438+07:00 0HMT2QG470EHI:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T14:17:18.5319773+07:00 0HMT2QG470EHG:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:17:18.5370127+07:00 0HMT2QG470EHG:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:17:18.5420467+07:00 0HMT2QG470EHG:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:17:18.5433226+07:00 0HMT2QG470EHG:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:17:18.5445021+07:00 0HMT2QG470EHG:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:17:18.5454592+07:00 0HMT2QG470EHG:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:17:18.5589446+07:00 0HMT2QG470EHG:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:17:18.5595174+07:00 0HMT2QG470EHG:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:17:18.5609774+07:00 0HMT2QG470EHG:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:17:18.5628548+07:00 0HMT2QG470EHG:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:17:18.5663084+07:00 0HMT2QG470EHG:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:17:18.5667980+07:00 0HMT2QG470EHH:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:17:18.5675269+07:00 0HMT2QG470EHH:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:17:18.5677083+07:00 0HMT2QG470EHG:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:17:18.5686455+07:00 0HMT2QG470EHG:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:17:18.5698894+07:00 0HMT2QG470EHH:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:17:18.5699989+07:00 0HMT2QG470EHG:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:17:18.5717819+07:00 0HMT2QG470EHG:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:17:18.5726954+07:00 0HMT2QG470EHH:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:17:18.5851634+07:00 0HMT2QG470EHG:00000004 [INF] Executed DbCommand ("8"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:17:18.5863502+07:00 0HMT2QG470EHG:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:17:20.0192400+07:00 0HMT2QG470EHG:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:17:20.0200385+07:00 0HMT2QG470EHG:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:17:20.0220681+07:00 0HMT2QG470EHG:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:17:20.0258562+07:00 0HMT2QG470EHG:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:17:20.1341839+07:00 0HMT2QG470EHG:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:17:20.1348736+07:00 0HMT2QG470EHG:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:17:20.1363602+07:00 0HMT2QG470EHG:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:17:20.1401919+07:00 0HMT2QG470EHG:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:18:28.9287946+07:00 0HMT2QG470EHG:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:18:28.9294590+07:00 0HMT2QG470EHG:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:18:28.9393326+07:00 0HMT2QG470EHG:0000000A [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:18:28.9438433+07:00 0HMT2QG470EHG:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:18:29.0667560+07:00 0HMT2QG470EHG:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:18:29.0672559+07:00 0HMT2QG470EHG:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:18:29.0685491+07:00 0HMT2QG470EHG:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:18:29.0722704+07:00 0HMT2QG470EHG:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:18:29.2067783+07:00 0HMT2QG470EHG:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:18:29.2073752+07:00 0HMT2QG470EHG:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:18:29.2086986+07:00 0HMT2QG470EHG:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:18:29.2106474+07:00 0HMT2QG470EHG:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:18:29.2461432+07:00 0HMT2QG470EHG:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:18:29.2467312+07:00 0HMT2QG470EHG:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:18:29.2483995+07:00 0HMT2QG470EHG:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:18:29.2508902+07:00 0HMT2QG470EHG:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:18:30.7841295+07:00 0HMT2QG470EHF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:18:30.7859534+07:00 0HMT2QG470EHI:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:18:30.7886092+07:00 0HMT2QG470EHF:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:18:30.7886093+07:00 0HMT2QG470EHI:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:18:30.7913813+07:00 0HMT2QG470EHF:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:18:30.7913813+07:00 0HMT2QG470EHI:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:18:30.7975764+07:00 0HMT2QG470EHC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:18:30.8013150+07:00 0HMT2QG470EHC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:18:30.8066108+07:00 0HMT2QG470EHC:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:18:30.8690275+07:00 0HMT2QG470EHG:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:18:30.8697483+07:00 0HMT2QG470EHG:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:18:30.8723623+07:00 0HMT2QG470EHG:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:18:30.8773986+07:00 0HMT2QG470EHG:00000013 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:18:30.8792672+07:00 0HMT2QG470EHH:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:18:30.8796781+07:00 0HMT2QG470EHH:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:18:30.8820358+07:00 0HMT2QG470EHH:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:18:30.8826755+07:00 0HMT2QG470EHG:00000013 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:18:30.8861033+07:00 0HMT2QG470EHG:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:18:30.8866021+07:00 0HMT2QG470EHH:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:18:30.8902795+07:00 0HMT2QG470EHG:00000013 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:18:30.8949451+07:00 0HMT2QG470EHG:00000013 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:18:30.8962859+07:00 0HMT2QG470EHG:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:18:30.8973481+07:00 0HMT2QG470EHG:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:18:30.8982851+07:00 0HMT2QG470EHG:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:18:33.2591907+07:00 0HMT2QG470EHH:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:18:33.2591908+07:00 0HMT2QG470EHG:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:18:33.2598719+07:00 0HMT2QG470EHH:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:18:33.2599115+07:00 0HMT2QG470EHG:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:18:33.2615724+07:00 0HMT2QG470EHH:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:18:33.2615724+07:00 0HMT2QG470EHG:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:18:33.2633771+07:00 0HMT2QG470EHH:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:18:33.2634752+07:00 0HMT2QG470EHG:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:18:33.2683250+07:00 0HMT2QG470EHG:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:18:33.2696660+07:00 0HMT2QG470EHG:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:18:33.2708250+07:00 0HMT2QG470EHG:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:18:33.2723276+07:00 0HMT2QG470EHG:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:18:33.2735536+07:00 0HMT2QG470EHG:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:18:33.2749037+07:00 0HMT2QG470EHG:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:18:33.2758439+07:00 0HMT2QG470EHG:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:18:33.2846860+07:00 0HMT2QG470EHJ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:18:33.2852246+07:00 0HMT2QG470EHJ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:18:33.2874380+07:00 0HMT2QG470EHJ:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:18:33.3841795+07:00 0HMT2QG470EHJ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:18:33.3850439+07:00 0HMT2QG470EHJ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:18:33.3869342+07:00 0HMT2QG470EHJ:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:18:33.3891465+07:00 0HMT2QG470EHJ:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T14:18:33.4145396+07:00 0HMT2QG470EHG:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:18:33.4145410+07:00 0HMT2QG470EHH:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:18:33.4150126+07:00 0HMT2QG470EHG:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:18:33.4150204+07:00 0HMT2QG470EHH:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:18:33.4164045+07:00 0HMT2QG470EHG:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:18:33.4164062+07:00 0HMT2QG470EHH:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:18:33.4180365+07:00 0HMT2QG470EHH:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:18:33.4180452+07:00 0HMT2QG470EHG:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:18:33.4226814+07:00 0HMT2QG470EHG:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:18:33.4239960+07:00 0HMT2QG470EHG:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:18:33.4251505+07:00 0HMT2QG470EHG:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:18:33.4264789+07:00 0HMT2QG470EHG:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:18:33.4275931+07:00 0HMT2QG470EHG:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:18:33.4289300+07:00 0HMT2QG470EHG:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:18:33.4300001+07:00 0HMT2QG470EHG:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:18:34.0739869+07:00 0HMT2QG470EHG:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:18:34.0744563+07:00 0HMT2QG470EHG:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:18:34.0758043+07:00 0HMT2QG470EHG:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:18:34.0776556+07:00 0HMT2QG470EHG:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:18:34.1593957+07:00 0HMT2QG470EHG:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:18:34.1603092+07:00 0HMT2QG470EHG:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:18:34.1622088+07:00 0HMT2QG470EHG:00000018 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:18:34.1647001+07:00 0HMT2QG470EHG:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:20:13.5375918+07:00 0HMT2QG470EHG:0000001A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:13.5381881+07:00 0HMT2QG470EHG:0000001A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:13.5468730+07:00 0HMT2QG470EHG:0000001A [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:13.5512314+07:00 0HMT2QG470EHG:0000001A [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:20:13.6806674+07:00 0HMT2QG470EHG:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:13.6811922+07:00 0HMT2QG470EHG:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:13.6825991+07:00 0HMT2QG470EHG:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:13.6854393+07:00 0HMT2QG470EHG:0000001C [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:20:13.7707899+07:00 0HMT2QG470EHG:0000001E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:13.7713506+07:00 0HMT2QG470EHG:0000001E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:13.7726341+07:00 0HMT2QG470EHG:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:13.7742234+07:00 0HMT2QG470EHG:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:20:13.8422392+07:00 0HMT2QG470EHG:00000020 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:13.8432449+07:00 0HMT2QG470EHG:00000020 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:13.8454205+07:00 0HMT2QG470EHG:00000020 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:13.8478778+07:00 0HMT2QG470EHG:00000020 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:20:14.7721057+07:00 0HMT2QG470EHJ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:14.7737432+07:00 0HMT2QG470EHJ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:14.7781952+07:00 0HMT2QG470EHJ:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:16.6896578+07:00 0HMT2QG470EHG:00000022 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:16.6902122+07:00 0HMT2QG470EHG:00000022 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:16.6915784+07:00 0HMT2QG470EHG:00000022 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:16.6953309+07:00 0HMT2QG470EHG:00000022 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:20:16.6963192+07:00 0HMT2QG470EHH:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:16.6970485+07:00 0HMT2QG470EHH:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:16.6997102+07:00 0HMT2QG470EHH:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:16.7033268+07:00 0HMT2QG470EHG:00000022 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:20:16.7054686+07:00 0HMT2QG470EHH:0000000A [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:20:16.7064033+07:00 0HMT2QG470EHG:00000022 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:20:16.7107564+07:00 0HMT2QG470EHG:00000022 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:20:16.7156782+07:00 0HMT2QG470EHG:00000022 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:20:16.7168257+07:00 0HMT2QG470EHG:00000022 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:20:16.7178811+07:00 0HMT2QG470EHG:00000022 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:20:16.7187266+07:00 0HMT2QG470EHG:00000022 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:20:16.7364962+07:00 0HMT2QG470EHK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:16.7374153+07:00 0HMT2QG470EHK:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:16.7399298+07:00 0HMT2QG470EHK:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:16.8296140+07:00 0HMT2QG470EHK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:16.8302895+07:00 0HMT2QG470EHK:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:16.8326545+07:00 0HMT2QG470EHK:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:16.8347658+07:00 0HMT2QG470EHK:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T14:20:16.8533029+07:00 0HMT2QG470EHH:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:16.8532986+07:00 0HMT2QG470EHG:00000023 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:16.8540794+07:00 0HMT2QG470EHG:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:16.8540832+07:00 0HMT2QG470EHH:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:16.8553855+07:00 0HMT2QG470EHH:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:16.8554684+07:00 0HMT2QG470EHG:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:16.8596140+07:00 0HMT2QG470EHG:00000023 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:20:16.8607991+07:00 0HMT2QG470EHH:0000000B [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:20:16.8768909+07:00 0HMT2QG470EHG:00000023 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:20:16.8780787+07:00 0HMT2QG470EHG:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:20:16.8789013+07:00 0HMT2QG470EHG:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:20:16.8798420+07:00 0HMT2QG470EHG:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:20:16.8806034+07:00 0HMT2QG470EHG:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:20:16.8814108+07:00 0HMT2QG470EHG:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:20:16.8822036+07:00 0HMT2QG470EHG:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:20:17.6006477+07:00 0HMT2QG470EHG:00000024 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:17.6011589+07:00 0HMT2QG470EHG:00000024 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:17.6024515+07:00 0HMT2QG470EHG:00000024 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:17.6039530+07:00 0HMT2QG470EHG:00000024 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:20:17.6923307+07:00 0HMT2QG470EHG:00000025 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:17.6928502+07:00 0HMT2QG470EHG:00000025 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:17.6944406+07:00 0HMT2QG470EHG:00000025 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:17.6969835+07:00 0HMT2QG470EHG:00000025 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:20:32.0601613+07:00 0HMT2QG470EHG:00000027 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:32.0607732+07:00 0HMT2QG470EHG:00000027 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:32.0623829+07:00 0HMT2QG470EHG:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:32.0658888+07:00 0HMT2QG470EHG:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:20:32.1752838+07:00 0HMT2QG470EHG:00000029 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:32.1758708+07:00 0HMT2QG470EHG:00000029 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:32.1773151+07:00 0HMT2QG470EHG:00000029 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:32.1790955+07:00 0HMT2QG470EHG:00000029 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:20:32.3372656+07:00 0HMT2QG470EHG:0000002B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:32.3377442+07:00 0HMT2QG470EHG:0000002B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:32.3391091+07:00 0HMT2QG470EHG:0000002B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:32.3416515+07:00 0HMT2QG470EHG:0000002B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:20:32.3899358+07:00 0HMT2QG470EHG:0000002D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:32.3904523+07:00 0HMT2QG470EHG:0000002D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:32.3918356+07:00 0HMT2QG470EHG:0000002D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:32.3941201+07:00 0HMT2QG470EHG:0000002D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:20:32.7603850+07:00 0HMT2QG470EHK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:32.7609546+07:00 0HMT2QG470EHK:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:32.7624867+07:00 0HMT2QG470EHK:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:32.8198013+07:00 0HMT2QG470EHG:0000002F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:32.8203052+07:00 0HMT2QG470EHG:0000002F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:32.8217582+07:00 0HMT2QG470EHG:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:32.8230498+07:00 0HMT2QG470EHG:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:20:32.8258027+07:00 0HMT2QG470EHG:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:20:32.8272480+07:00 0HMT2QG470EHG:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:20:32.8281437+07:00 0HMT2QG470EHG:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:20:32.8290930+07:00 0HMT2QG470EHG:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:20:32.8300207+07:00 0HMT2QG470EHG:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:20:32.8310240+07:00 0HMT2QG470EHH:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:32.8310789+07:00 0HMT2QG470EHG:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:20:32.8313876+07:00 0HMT2QG470EHH:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:32.8319377+07:00 0HMT2QG470EHG:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:20:32.8330800+07:00 0HMT2QG470EHH:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:32.8345932+07:00 0HMT2QG470EHH:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:20:32.8906998+07:00 0HMT2QG470EHL:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:32.8915246+07:00 0HMT2QG470EHL:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:32.8943251+07:00 0HMT2QG470EHL:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:32.9180111+07:00 0HMT2QG470EHL:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:32.9188684+07:00 0HMT2QG470EHL:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:32.9207311+07:00 0HMT2QG470EHL:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:35.1055623+07:00 0HMT2QG470EHG:00000030 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:35.1055606+07:00 0HMT2QG470EHH:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:35.1064465+07:00 0HMT2QG470EHH:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:35.1064459+07:00 0HMT2QG470EHG:00000030 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:35.1082009+07:00 0HMT2QG470EHG:00000030 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:35.1082079+07:00 0HMT2QG470EHH:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:35.1096332+07:00 0HMT2QG470EHG:00000030 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:20:35.1097078+07:00 0HMT2QG470EHH:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:20:35.1139022+07:00 0HMT2QG470EHG:00000030 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:20:35.1149073+07:00 0HMT2QG470EHG:00000030 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:20:35.1157715+07:00 0HMT2QG470EHG:00000030 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:20:35.1168049+07:00 0HMT2QG470EHG:00000030 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:20:35.1178654+07:00 0HMT2QG470EHG:00000030 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:20:35.1195362+07:00 0HMT2QG470EHG:00000030 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:20:35.1208180+07:00 0HMT2QG470EHG:00000030 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:20:35.3110969+07:00 0HMT2QG470EHM:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:35.3116437+07:00 0HMT2QG470EHM:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:35.3131364+07:00 0HMT2QG470EHM:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:35.3140958+07:00 0HMT2QG470EHM:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:35.3144391+07:00 0HMT2QG470EHM:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:35.3155695+07:00 0HMT2QG470EHM:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:35.3166827+07:00 0HMT2QG470EHM:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T14:20:35.3366811+07:00 0HMT2QG470EHG:00000031 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:35.3372699+07:00 0HMT2QG470EHG:00000031 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:35.3385982+07:00 0HMT2QG470EHG:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:35.3402812+07:00 0HMT2QG470EHG:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:20:35.3417016+07:00 0HMT2QG470EHH:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:35.3423244+07:00 0HMT2QG470EHH:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:35.3429855+07:00 0HMT2QG470EHG:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:20:35.3437318+07:00 0HMT2QG470EHH:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:35.3440630+07:00 0HMT2QG470EHG:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:20:35.3460994+07:00 0HMT2QG470EHH:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:20:35.3460053+07:00 0HMT2QG470EHG:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:20:35.3483728+07:00 0HMT2QG470EHG:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:20:35.3495611+07:00 0HMT2QG470EHG:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:20:35.3508127+07:00 0HMT2QG470EHG:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:20:35.3516596+07:00 0HMT2QG470EHG:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:20:35.6711410+07:00 0HMT2QG470EHG:00000032 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:35.6716159+07:00 0HMT2QG470EHG:00000032 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:35.6731154+07:00 0HMT2QG470EHG:00000032 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:35.6749806+07:00 0HMT2QG470EHG:00000032 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:20:35.8203737+07:00 0HMT2QG470EHG:00000033 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:35.8208872+07:00 0HMT2QG470EHG:00000033 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:35.8224195+07:00 0HMT2QG470EHG:00000033 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:35.8248796+07:00 0HMT2QG470EHG:00000033 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:20:54.6143029+07:00 0HMT2QG470EHG:00000035 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:54.6154377+07:00 0HMT2QG470EHG:00000035 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:54.6353866+07:00 0HMT2QG470EHG:00000035 [INF] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:54.6413230+07:00 0HMT2QG470EHG:00000035 [INF] Executed DbCommand ("5"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:20:54.8010140+07:00 0HMT2QG470EHG:00000037 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:20:54.8023545+07:00 0HMT2QG470EHG:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:20:54.8148742+07:00 0HMT2QG470EHG:00000037 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:20:54.8185069+07:00 0HMT2QG470EHG:00000037 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:21:12.9529832+07:00 0HMT2QG470EHM:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:21:12.9550938+07:00 0HMT2QG470EHM:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:21:12.9646899+07:00 0HMT2QG470EHM:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:21:14.9044851+07:00 0HMT2QG470EHG:0000003C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:21:14.9050626+07:00 0HMT2QG470EHG:0000003C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:21:14.9063107+07:00 0HMT2QG470EHH:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:21:14.9074360+07:00 0HMT2QG470EHH:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:21:14.9076609+07:00 0HMT2QG470EHG:0000003C [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:21:14.9096551+07:00 0HMT2QG470EHH:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:21:14.9131131+07:00 0HMT2QG470EHG:0000003C [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:21:14.9149972+07:00 0HMT2QG470EHH:00000010 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:21:14.9185165+07:00 0HMT2QG470EHG:0000003C [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:21:14.9221764+07:00 0HMT2QG470EHG:0000003C [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:21:14.9266651+07:00 0HMT2QG470EHG:0000003C [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:21:14.9303339+07:00 0HMT2QG470EHG:0000003C [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:21:14.9314465+07:00 0HMT2QG470EHG:0000003C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:21:14.9328421+07:00 0HMT2QG470EHG:0000003C [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:21:14.9340347+07:00 0HMT2QG470EHG:0000003C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:21:14.9356631+07:00 0HMT2QG470EHO:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:21:14.9366940+07:00 0HMT2QG470EHO:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:21:14.9383001+07:00 0HMT2QG470EHO:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:21:15.0084098+07:00 0HMT2QG470EHO:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:21:15.0091311+07:00 0HMT2QG470EHO:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:21:15.0105430+07:00 0HMT2QG470EHO:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:21:15.0130691+07:00 0HMT2QG470EHO:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T14:21:15.0321671+07:00 0HMT2QG470EHG:0000003D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:21:15.0327476+07:00 0HMT2QG470EHG:0000003D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:21:15.0345535+07:00 0HMT2QG470EHG:0000003D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:21:15.0350616+07:00 0HMT2QG470EHH:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:21:15.0356868+07:00 0HMT2QG470EHH:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:21:15.0360848+07:00 0HMT2QG470EHG:0000003D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:21:15.0377259+07:00 0HMT2QG470EHH:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:21:15.0384251+07:00 0HMT2QG470EHG:0000003D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:21:15.0393414+07:00 0HMT2QG470EHH:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:21:15.0414495+07:00 0HMT2QG470EHG:0000003D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:21:15.0426146+07:00 0HMT2QG470EHG:0000003D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:21:15.0439101+07:00 0HMT2QG470EHG:0000003D [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:21:15.0449298+07:00 0HMT2QG470EHG:0000003D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:21:15.0460881+07:00 0HMT2QG470EHG:0000003D [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:21:15.0472369+07:00 0HMT2QG470EHG:0000003D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:21:15.3917455+07:00 0HMT2QG470EHG:0000003F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:21:15.3922605+07:00 0HMT2QG470EHG:0000003F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:21:15.3935362+07:00 0HMT2QG470EHG:0000003F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:21:15.3964874+07:00 0HMT2QG470EHG:0000003F [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:21:15.5197812+07:00 0HMT2QG470EHG:00000041 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:21:15.5203562+07:00 0HMT2QG470EHG:00000041 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:21:15.5217628+07:00 0HMT2QG470EHG:00000041 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:21:15.5251378+07:00 0HMT2QG470EHG:00000041 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:21:42.1295080+07:00 0HMT2QG470EHG:00000043 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:21:42.1301237+07:00 0HMT2QG470EHG:00000043 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:21:42.1320381+07:00 0HMT2QG470EHG:00000043 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:21:42.1343395+07:00 0HMT2QG470EHG:00000043 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:21:42.2530737+07:00 0HMT2QG470EHG:00000045 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:21:42.2537273+07:00 0HMT2QG470EHG:00000045 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:21:42.2551256+07:00 0HMT2QG470EHG:00000045 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:21:42.2569817+07:00 0HMT2QG470EHG:00000045 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:21:42.4858764+07:00 0HMT2QG470EHG:00000047 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:21:42.4864326+07:00 0HMT2QG470EHG:00000047 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:21:42.4876892+07:00 0HMT2QG470EHG:00000047 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:21:42.4903717+07:00 0HMT2QG470EHG:00000047 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:21:42.5376663+07:00 0HMT2QG470EHG:00000049 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:21:42.5381794+07:00 0HMT2QG470EHG:00000049 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:21:42.5396477+07:00 0HMT2QG470EHG:00000049 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:21:42.5419002+07:00 0HMT2QG470EHG:00000049 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:22:31.2498211+07:00 0HMT2QG470EHO:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:22:31.2516951+07:00 0HMT2QG470EHO:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:22:31.2612128+07:00 0HMT2QG470EHO:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:22:31.3344664+07:00 0HMT2QG470EHG:0000004B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:22:31.3352898+07:00 0HMT2QG470EHG:0000004B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:22:31.3370638+07:00 0HMT2QG470EHG:0000004B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:22:31.3419861+07:00 0HMT2QG470EHG:0000004B [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:31.3435546+07:00 0HMT2QG470EHH:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:22:31.3441487+07:00 0HMT2QG470EHH:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:22:31.3463233+07:00 0HMT2QG470EHH:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:22:31.3491555+07:00 0HMT2QG470EHG:0000004B [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:22:31.3512691+07:00 0HMT2QG470EHH:00000013 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:22:31.3522640+07:00 0HMT2QG470EHG:0000004B [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:22:31.3571511+07:00 0HMT2QG470EHG:0000004B [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:31.3634746+07:00 0HMT2QG470EHG:0000004B [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:22:31.3647295+07:00 0HMT2QG470EHG:0000004B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:31.3663043+07:00 0HMT2QG470EHG:0000004B [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:22:31.3674527+07:00 0HMT2QG470EHG:0000004B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:33.2520635+07:00 0HMT2QG470EHG:0000004C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:22:33.2521166+07:00 0HMT2QG470EHH:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:22:33.2525938+07:00 0HMT2QG470EHH:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:22:33.2526967+07:00 0HMT2QG470EHG:0000004C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:22:33.2538796+07:00 0HMT2QG470EHH:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:22:33.2539013+07:00 0HMT2QG470EHG:0000004C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:22:33.2556244+07:00 0HMT2QG470EHH:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:22:33.2568514+07:00 0HMT2QG470EHG:0000004C [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:33.2651190+07:00 0HMT2QG470EHG:0000004C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:22:33.2663963+07:00 0HMT2QG470EHG:0000004C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:22:33.2676892+07:00 0HMT2QG470EHG:0000004C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:33.2714514+07:00 0HMT2QG470EHG:0000004C [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:22:33.2725418+07:00 0HMT2QG470EHG:0000004C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:33.2736978+07:00 0HMT2QG470EHG:0000004C [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:22:33.2747690+07:00 0HMT2QG470EHG:0000004C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:33.3178297+07:00 0HMT2QG470EHQ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:22:33.3183526+07:00 0HMT2QG470EHQ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:22:33.3197818+07:00 0HMT2QG470EHQ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:22:33.4120561+07:00 0HMT2QG470EHQ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:22:33.4127024+07:00 0HMT2QG470EHQ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:22:33.4142400+07:00 0HMT2QG470EHQ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:22:33.4169361+07:00 0HMT2QG470EHQ:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T14:22:33.4364010+07:00 0HMT2QG470EHG:0000004D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:22:33.4370063+07:00 0HMT2QG470EHG:0000004D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:22:33.4390560+07:00 0HMT2QG470EHH:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:22:33.4390973+07:00 0HMT2QG470EHG:0000004D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:22:33.4397202+07:00 0HMT2QG470EHH:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:22:33.4409506+07:00 0HMT2QG470EHG:0000004D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:33.4420017+07:00 0HMT2QG470EHH:00000015 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:22:33.4439123+07:00 0HMT2QG470EHG:0000004D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:22:33.4452221+07:00 0HMT2QG470EHG:0000004D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:22:33.4463133+07:00 0HMT2QG470EHG:0000004D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:33.4480754+07:00 0HMT2QG470EHG:0000004D [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:22:33.4516035+07:00 0HMT2QG470EHG:0000004D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:33.4576419+07:00 0HMT2QG470EHH:00000015 [INF] Executed DbCommand ("13"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:22:33.4658308+07:00 0HMT2QG470EHG:0000004D [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:22:33.4681154+07:00 0HMT2QG470EHG:0000004D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:33.9302055+07:00 0HMT2QG470EHG:0000004F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:22:33.9306998+07:00 0HMT2QG470EHG:0000004F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:22:33.9320014+07:00 0HMT2QG470EHG:0000004F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:22:33.9356418+07:00 0HMT2QG470EHG:0000004F [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:22:34.0228606+07:00 0HMT2QG470EHG:00000051 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:22:34.0233733+07:00 0HMT2QG470EHG:00000051 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:22:34.0246792+07:00 0HMT2QG470EHG:00000051 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:22:34.0275930+07:00 0HMT2QG470EHG:00000051 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:22:51.5561258+07:00 0HMT2QG470EHQ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:22:51.5577591+07:00 0HMT2QG470EHQ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:22:51.5598789+07:00 0HMT2QG470EHQ:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:22:51.6219832+07:00 0HMT2QG470EHG:00000053 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:22:51.6230271+07:00 0HMT2QG470EHG:00000053 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:22:51.6247809+07:00 0HMT2QG470EHG:00000053 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:22:51.6265881+07:00 0HMT2QG470EHG:00000053 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:51.6293853+07:00 0HMT2QG470EHG:00000053 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:22:51.6304838+07:00 0HMT2QG470EHG:00000053 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:22:51.6314462+07:00 0HMT2QG470EHG:00000053 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:51.6329693+07:00 0HMT2QG470EHG:00000053 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:22:51.6341307+07:00 0HMT2QG470EHG:00000053 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:51.6357089+07:00 0HMT2QG470EHG:00000053 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:22:51.6384755+07:00 0HMT2QG470EHG:00000053 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:51.8073432+07:00 0HMT2QG470EHG:00000055 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:22:51.8085079+07:00 0HMT2QG470EHG:00000055 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:22:51.8109464+07:00 0HMT2QG470EHG:00000055 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:22:51.8127789+07:00 0HMT2QG470EHG:00000055 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:22:53.5138053+07:00 0HMT2QG470EHG:00000056 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:22:53.5142832+07:00 0HMT2QG470EHG:00000056 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:22:53.5155916+07:00 0HMT2QG470EHG:00000056 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:22:53.5171554+07:00 0HMT2QG470EHG:00000056 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:53.5202190+07:00 0HMT2QG470EHG:00000056 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:22:53.5215149+07:00 0HMT2QG470EHG:00000056 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:22:53.5223794+07:00 0HMT2QG470EHG:00000056 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:53.5232650+07:00 0HMT2QG470EHG:00000056 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:22:53.5240286+07:00 0HMT2QG470EHG:00000056 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:53.5248224+07:00 0HMT2QG470EHG:00000056 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:22:53.5256225+07:00 0HMT2QG470EHG:00000056 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:53.5707492+07:00 0HMT2QG470EHG:00000058 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:22:53.5714411+07:00 0HMT2QG470EHG:00000058 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:22:53.5729197+07:00 0HMT2QG470EHG:00000058 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:22:53.5744982+07:00 0HMT2QG470EHG:00000058 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:22:53.6079683+07:00 0HMT2QG470EHR:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:22:53.6084589+07:00 0HMT2QG470EHR:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:22:53.6103081+07:00 0HMT2QG470EHR:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:22:53.6108654+07:00 0HMT2QG470EHR:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:22:53.6113230+07:00 0HMT2QG470EHR:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:22:53.6127184+07:00 0HMT2QG470EHR:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:22:53.6140142+07:00 0HMT2QG470EHR:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T14:22:53.6496513+07:00 0HMT2QG470EHG:00000059 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:22:53.6503666+07:00 0HMT2QG470EHG:00000059 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:22:53.6518352+07:00 0HMT2QG470EHG:00000059 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:22:53.6538768+07:00 0HMT2QG470EHG:00000059 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:53.6554323+07:00 0HMT2QG470EHH:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:22:53.6561560+07:00 0HMT2QG470EHH:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:22:53.6563720+07:00 0HMT2QG470EHG:00000059 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:22:53.6577758+07:00 0HMT2QG470EHG:00000059 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:22:53.6581043+07:00 0HMT2QG470EHH:00000016 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:22:53.6591489+07:00 0HMT2QG470EHG:00000059 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:53.6599067+07:00 0HMT2QG470EHH:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:22:53.6618683+07:00 0HMT2QG470EHG:00000059 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:22:53.6627767+07:00 0HMT2QG470EHG:00000059 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:53.6641452+07:00 0HMT2QG470EHG:00000059 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:22:53.6650072+07:00 0HMT2QG470EHG:00000059 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:22:54.3359924+07:00 0HMT2QG470EHG:0000005B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:22:54.3365259+07:00 0HMT2QG470EHG:0000005B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:22:54.3378038+07:00 0HMT2QG470EHG:0000005B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:22:54.3398583+07:00 0HMT2QG470EHG:0000005B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:22:54.6433055+07:00 0HMT2QG470EHG:0000005D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:22:54.6438200+07:00 0HMT2QG470EHG:0000005D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:22:54.6452196+07:00 0HMT2QG470EHG:0000005D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:22:54.6470516+07:00 0HMT2QG470EHG:0000005D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:23:29.8695395+07:00 0HMT2QG470EHG:0000005F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:29.8701857+07:00 0HMT2QG470EHG:0000005F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:29.8802721+07:00 0HMT2QG470EHG:0000005F [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:29.8845620+07:00 0HMT2QG470EHG:0000005F [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:23:29.9845220+07:00 0HMT2QG470EHG:00000061 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:29.9851565+07:00 0HMT2QG470EHG:00000061 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:29.9865793+07:00 0HMT2QG470EHG:00000061 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:29.9909754+07:00 0HMT2QG470EHG:00000061 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:23:30.0744331+07:00 0HMT2QG470EHG:00000063 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:30.0749282+07:00 0HMT2QG470EHG:00000063 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:30.0767854+07:00 0HMT2QG470EHG:00000063 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:30.0794045+07:00 0HMT2QG470EHG:00000063 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:23:30.1788861+07:00 0HMT2QG470EHG:00000065 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:30.1795564+07:00 0HMT2QG470EHG:00000065 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:30.1808473+07:00 0HMT2QG470EHG:00000065 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:30.1830096+07:00 0HMT2QG470EHG:00000065 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:23:30.4773172+07:00 0HMT2QG470EHR:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:30.4778119+07:00 0HMT2QG470EHR:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:30.4791786+07:00 0HMT2QG470EHR:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:30.5113553+07:00 0HMT2QG470EHG:00000067 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:30.5118626+07:00 0HMT2QG470EHG:00000067 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:30.5131693+07:00 0HMT2QG470EHG:00000067 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:30.5171111+07:00 0HMT2QG470EHG:00000067 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:23:30.5182756+07:00 0HMT2QG470EHH:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:30.5192791+07:00 0HMT2QG470EHH:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:30.5209425+07:00 0HMT2QG470EHH:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:30.5236424+07:00 0HMT2QG470EHG:00000067 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:23:30.5244404+07:00 0HMT2QG470EHH:00000018 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:23:30.5278657+07:00 0HMT2QG470EHG:00000067 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:23:30.5358188+07:00 0HMT2QG470EHG:00000067 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:23:30.5391389+07:00 0HMT2QG470EHG:00000067 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:23:30.5405638+07:00 0HMT2QG470EHG:00000067 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:23:30.5416775+07:00 0HMT2QG470EHG:00000067 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:23:30.5426629+07:00 0HMT2QG470EHG:00000067 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:23:30.6351205+07:00 0HMT2QG470EHS:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:30.6357664+07:00 0HMT2QG470EHS:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:30.6379523+07:00 0HMT2QG470EHS:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:30.6483469+07:00 0HMT2QG470EHS:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:30.6488368+07:00 0HMT2QG470EHS:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:30.6504443+07:00 0HMT2QG470EHS:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:30.6525460+07:00 0HMT2QG470EHS:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T14:23:30.6640306+07:00 0HMT2QG470EHG:00000068 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:30.6646091+07:00 0HMT2QG470EHG:00000068 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:30.6661619+07:00 0HMT2QG470EHG:00000068 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:30.6685376+07:00 0HMT2QG470EHG:00000068 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:23:30.6721610+07:00 0HMT2QG470EHG:00000068 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:23:30.6733137+07:00 0HMT2QG470EHG:00000068 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:23:30.6741393+07:00 0HMT2QG470EHG:00000068 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:23:30.6752058+07:00 0HMT2QG470EHG:00000068 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:23:30.6763728+07:00 0HMT2QG470EHG:00000068 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:23:30.6776752+07:00 0HMT2QG470EHG:00000068 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:23:30.6787322+07:00 0HMT2QG470EHG:00000068 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:23:30.6836939+07:00 0HMT2QG470EHG:00000069 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:30.6843892+07:00 0HMT2QG470EHG:00000069 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:30.6860549+07:00 0HMT2QG470EHG:00000069 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:30.6877228+07:00 0HMT2QG470EHG:00000069 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:23:30.7218579+07:00 0HMT2QG470EHG:0000006A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:30.7228413+07:00 0HMT2QG470EHG:0000006A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:30.7246717+07:00 0HMT2QG470EHG:0000006A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:30.7286744+07:00 0HMT2QG470EHG:0000006A [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:23:30.7318019+07:00 0HMT2QG470EHG:0000006A [INF] Executed DbCommand ("2"ms) [Parameters=["@__message_CreatedTime_0='?' (DbType = DateTime2), @__message_Id_1='?' (Size = 100), @__message_ChatRoomId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE (([m].[CreatedTime] >= @__message_CreatedTime_0) AND ([m].[Id] <> @__message_Id_1)) AND ([m].[ChatRoomId] = @__message_ChatRoomId_2)" (0723d8ff)
2023-08-22T14:23:30.7484626+07:00 0HMT2QG470EHS:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:30.7535805+07:00 0HMT2QG470EHS:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:30.7551876+07:00 0HMT2QG470EHS:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:30.8343213+07:00 0HMT2QG470EHG:0000006B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:30.8343239+07:00 0HMT2QG470EHH:0000001A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:30.8348386+07:00 0HMT2QG470EHG:0000006B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:30.8348386+07:00 0HMT2QG470EHH:0000001A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:30.8361541+07:00 0HMT2QG470EHG:0000006B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:30.8361267+07:00 0HMT2QG470EHH:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:30.8381263+07:00 0HMT2QG470EHH:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:23:30.8398019+07:00 0HMT2QG470EHG:0000006B [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:23:30.8464644+07:00 0HMT2QG470EHG:0000006B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:23:30.8477816+07:00 0HMT2QG470EHG:0000006B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:23:30.8489824+07:00 0HMT2QG470EHG:0000006B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:23:30.8509033+07:00 0HMT2QG470EHG:0000006B [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:23:30.8521026+07:00 0HMT2QG470EHG:0000006B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:23:30.8537820+07:00 0HMT2QG470EHG:0000006B [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:23:30.8549979+07:00 0HMT2QG470EHG:0000006B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:23:32.6207975+07:00 0HMT2QG470EHG:0000006D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:32.6207957+07:00 0HMT2QG470EHH:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:32.6212820+07:00 0HMT2QG470EHH:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:32.6212836+07:00 0HMT2QG470EHG:0000006D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:32.6225281+07:00 0HMT2QG470EHG:0000006D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:32.6225282+07:00 0HMT2QG470EHH:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:32.6241897+07:00 0HMT2QG470EHH:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:23:32.6241340+07:00 0HMT2QG470EHG:0000006D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:23:32.6282926+07:00 0HMT2QG470EHG:0000006D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:23:32.6294521+07:00 0HMT2QG470EHG:0000006D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:23:32.6303297+07:00 0HMT2QG470EHG:0000006D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:23:32.6315237+07:00 0HMT2QG470EHG:0000006D [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:23:32.6324547+07:00 0HMT2QG470EHG:0000006D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:23:32.6334283+07:00 0HMT2QG470EHG:0000006D [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:23:32.6343108+07:00 0HMT2QG470EHG:0000006D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:23:32.6596032+07:00 0HMT2QG470EHU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:32.6605946+07:00 0HMT2QG470EHU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:32.6620793+07:00 0HMT2QG470EHU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:32.7063715+07:00 0HMT2QG470EHU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:32.7069262+07:00 0HMT2QG470EHU:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:32.7082676+07:00 0HMT2QG470EHU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:32.7095585+07:00 0HMT2QG470EHU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T14:23:32.7454044+07:00 0HMT2QG470EHG:0000006E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:32.7462208+07:00 0HMT2QG470EHG:0000006E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:32.7484255+07:00 0HMT2QG470EHG:0000006E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:32.7505254+07:00 0HMT2QG470EHG:0000006E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:23:32.7529946+07:00 0HMT2QG470EHG:0000006E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:23:32.7542608+07:00 0HMT2QG470EHG:0000006E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:23:32.7552279+07:00 0HMT2QG470EHG:0000006E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:23:32.7564725+07:00 0HMT2QG470EHG:0000006E [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:23:32.7588280+07:00 0HMT2QG470EHG:0000006E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:23:32.7615530+07:00 0HMT2QG470EHG:0000006E [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:23:32.7627853+07:00 0HMT2QG470EHG:0000006E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:23:32.7674570+07:00 0HMT2QG470EHG:0000006F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:32.7680088+07:00 0HMT2QG470EHG:0000006F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:32.7694615+07:00 0HMT2QG470EHG:0000006F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:32.7720059+07:00 0HMT2QG470EHG:0000006F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:23:59.3010949+07:00 0HMT2QG470EHG:00000071 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:59.3017227+07:00 0HMT2QG470EHG:00000071 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:59.3032372+07:00 0HMT2QG470EHG:00000071 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:59.3054980+07:00 0HMT2QG470EHG:00000071 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:23:59.4372759+07:00 0HMT2QG470EHG:00000073 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:23:59.4378724+07:00 0HMT2QG470EHG:00000073 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:23:59.4394501+07:00 0HMT2QG470EHG:00000073 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:23:59.4414294+07:00 0HMT2QG470EHG:00000073 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:39:15.7571821+07:00 0HMT2QG470EHU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:39:15.7673352+07:00 0HMT2QG470EHU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:39:15.7819539+07:00 0HMT2QG470EHU:00000002 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:39:18.5314666+07:00 0HMT2QG470EHV:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:39:18.5319937+07:00 0HMT2QG470EHV:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:39:18.5334008+07:00 0HMT2QG470EHV:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:39:18.5396532+07:00 0HMT2QG470EHV:00000006 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:39:18.5401586+07:00 0HMT2QG470EI2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:39:18.5407648+07:00 0HMT2QG470EI2:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:39:18.5427646+07:00 0HMT2QG470EI2:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:39:18.5493560+07:00 0HMT2QG470EI1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:39:18.5544719+07:00 0HMT2QG470EI2:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:39:18.5569006+07:00 0HMT2QG470EI1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:39:18.5610022+07:00 0HMT2QG470EI1:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:39:18.5734335+07:00 0HMT2QG470EHV:00000006 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:39:18.5768102+07:00 0HMT2QG470EHV:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:39:18.5823030+07:00 0HMT2QG470EHV:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:39:18.5858003+07:00 0HMT2QG470EHV:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:39:18.5869279+07:00 0HMT2QG470EHV:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:39:18.5882497+07:00 0HMT2QG470EHV:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:39:18.5892382+07:00 0HMT2QG470EHV:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:39:18.6171405+07:00 0HMT2QG470EI1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:39:18.6180935+07:00 0HMT2QG470EI1:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:39:18.6203755+07:00 0HMT2QG470EI1:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:39:18.6235328+07:00 0HMT2QG470EI1:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T14:39:18.7783308+07:00 0HMT2QG470EHV:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:39:18.7783612+07:00 0HMT2QG470EI2:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:39:18.7789071+07:00 0HMT2QG470EHV:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:39:18.7789073+07:00 0HMT2QG470EI2:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:39:18.7803846+07:00 0HMT2QG470EI2:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:39:18.7803846+07:00 0HMT2QG470EHV:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:39:18.7822922+07:00 0HMT2QG470EI2:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:39:18.7822920+07:00 0HMT2QG470EHV:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:39:18.7863478+07:00 0HMT2QG470EHV:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:39:18.7873573+07:00 0HMT2QG470EHV:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:39:18.7881863+07:00 0HMT2QG470EHV:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:39:18.7890467+07:00 0HMT2QG470EHV:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:39:18.7898311+07:00 0HMT2QG470EHV:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:39:18.7908055+07:00 0HMT2QG470EHV:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:39:18.7917051+07:00 0HMT2QG470EHV:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:39:19.4171650+07:00 0HMT2QG470EHV:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:39:19.4177913+07:00 0HMT2QG470EHV:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:39:19.4190793+07:00 0HMT2QG470EHV:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:39:19.4225894+07:00 0HMT2QG470EHV:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:39:19.5375505+07:00 0HMT2QG470EHV:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:39:19.5383480+07:00 0HMT2QG470EHV:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:39:19.5400774+07:00 0HMT2QG470EHV:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:39:19.5432230+07:00 0HMT2QG470EHV:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:44:06.4372051+07:00 0HMT2QG470EI3:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:44:06.4408201+07:00 0HMT2QG470EI3:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:44:06.4514503+07:00 0HMT2QG470EI3:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:44:06.4580306+07:00 0HMT2QG470EI3:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:44:06.6306817+07:00 0HMT2QG470EI3:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:44:06.6312230+07:00 0HMT2QG470EI3:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:44:06.6328660+07:00 0HMT2QG470EI3:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:44:06.6360917+07:00 0HMT2QG470EI3:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:44:06.7239387+07:00 0HMT2QG470EI3:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:44:06.7246204+07:00 0HMT2QG470EI3:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:44:06.7260566+07:00 0HMT2QG470EI3:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:44:06.7277710+07:00 0HMT2QG470EI3:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:44:06.7755360+07:00 0HMT2QG470EI3:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:44:06.7760161+07:00 0HMT2QG470EI3:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:44:06.7777734+07:00 0HMT2QG470EI3:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:44:06.7804463+07:00 0HMT2QG470EI3:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:44:07.2996898+07:00 0HMT2QG470EI3:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:44:07.3001584+07:00 0HMT2QG470EI3:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:44:07.3014641+07:00 0HMT2QG470EI3:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:44:07.3032778+07:00 0HMT2QG470EI3:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:44:07.4009577+07:00 0HMT2QG470EI3:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:44:07.4017118+07:00 0HMT2QG470EI3:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:44:07.4032061+07:00 0HMT2QG470EI3:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:44:07.4054106+07:00 0HMT2QG470EI3:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:44:07.6724532+07:00 0HMT2QG470EI3:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:44:07.6729214+07:00 0HMT2QG470EI3:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:44:07.6741988+07:00 0HMT2QG470EI3:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:44:07.6756419+07:00 0HMT2QG470EI3:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:44:07.7155430+07:00 0HMT2QG470EI3:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:44:07.7161832+07:00 0HMT2QG470EI3:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:44:07.7177554+07:00 0HMT2QG470EI3:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:44:07.7204288+07:00 0HMT2QG470EI3:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:44:07.9720403+07:00 0HMT2QG470EI3:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:44:07.9725349+07:00 0HMT2QG470EI3:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:44:07.9738542+07:00 0HMT2QG470EI3:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:44:07.9760284+07:00 0HMT2QG470EI3:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:44:08.0685828+07:00 0HMT2QG470EI3:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:44:08.0691261+07:00 0HMT2QG470EI3:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:44:08.0707338+07:00 0HMT2QG470EI3:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:44:08.0732051+07:00 0HMT2QG470EI3:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:44:08.2334149+07:00 0HMT2QG470EI3:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:44:08.2338709+07:00 0HMT2QG470EI3:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:44:08.2351521+07:00 0HMT2QG470EI3:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:44:08.2365720+07:00 0HMT2QG470EI3:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:44:08.2855128+07:00 0HMT2QG470EI3:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:44:08.2866356+07:00 0HMT2QG470EI3:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:44:08.2893094+07:00 0HMT2QG470EI3:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:44:08.2915903+07:00 0HMT2QG470EI3:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:44:08.5133594+07:00 0HMT2QG470EI3:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:44:08.5140149+07:00 0HMT2QG470EI3:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:44:08.5153652+07:00 0HMT2QG470EI3:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:44:08.5174107+07:00 0HMT2QG470EI3:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:44:08.6477881+07:00 0HMT2QG470EI3:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:44:08.6483355+07:00 0HMT2QG470EI3:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:44:08.6498887+07:00 0HMT2QG470EI3:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:44:08.6520339+07:00 0HMT2QG470EI3:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:44:08.7451180+07:00 0HMT2QG470EI3:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:44:08.7456317+07:00 0HMT2QG470EI3:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:44:08.7469886+07:00 0HMT2QG470EI3:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:44:08.7487180+07:00 0HMT2QG470EI3:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:44:08.8204619+07:00 0HMT2QG470EI3:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:44:08.8209893+07:00 0HMT2QG470EI3:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:44:08.8222992+07:00 0HMT2QG470EI3:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:44:08.8240961+07:00 0HMT2QG470EI3:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:44:11.1883423+07:00 0HMT2QG470EI3:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:44:11.1888236+07:00 0HMT2QG470EI3:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:44:11.1900918+07:00 0HMT2QG470EI3:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:44:11.1915506+07:00 0HMT2QG470EI3:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T14:44:11.2660893+07:00 0HMT2QG470EI3:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:44:11.2665837+07:00 0HMT2QG470EI3:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:44:11.2678593+07:00 0HMT2QG470EI3:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:44:11.2695166+07:00 0HMT2QG470EI3:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T14:48:38.0748983+07:00 0HMT2QG470EI4:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:48:38.0748984+07:00 0HMT2QG470EI5:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:48:38.0749452+07:00 0HMT2QG470EI6:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:48:38.0823003+07:00 0HMT2QG470EI5:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:48:38.0827665+07:00 0HMT2QG470EI4:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:48:38.0851978+07:00 0HMT2QG470EI6:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:48:38.0968568+07:00 0HMT2QG470EI5:00000003 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:48:38.0968568+07:00 0HMT2QG470EI6:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:48:38.0968568+07:00 0HMT2QG470EI4:00000003 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:48:38.0973975+07:00 0HMT2QG470EI6:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:48:38.0981062+07:00 0HMT2QG470EI6:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:48:38.1007695+07:00 0HMT2QG470EI6:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:48:38.1018591+07:00 0HMT2QG470EI5:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:48:38.1018564+07:00 0HMT2QG470EI4:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:48:38.1043723+07:00 0HMT2QG470EI6:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T14:48:38.1102981+07:00 0HMT2QG470EI4:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:48:38.1144375+07:00 0HMT2QG470EI4:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:48:38.1186093+07:00 0HMT2QG470EI4:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:48:38.1227586+07:00 0HMT2QG470EI4:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:48:38.1241662+07:00 0HMT2QG470EI4:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:48:38.1253300+07:00 0HMT2QG470EI4:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:48:38.1262875+07:00 0HMT2QG470EI4:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:48:38.1666894+07:00 0HMT2QG470EI4:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:48:38.1672416+07:00 0HMT2QG470EI4:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:48:38.1686465+07:00 0HMT2QG470EI4:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:48:38.1692902+07:00 0HMT2QG470EI5:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:48:38.1703524+07:00 0HMT2QG470EI4:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:48:38.1704603+07:00 0HMT2QG470EI5:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:48:38.1729487+07:00 0HMT2QG470EI5:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:48:38.1732192+07:00 0HMT2QG470EI4:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:48:38.1745097+07:00 0HMT2QG470EI5:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:48:38.1762642+07:00 0HMT2QG470EI4:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:48:38.1773774+07:00 0HMT2QG470EI4:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:48:38.1791718+07:00 0HMT2QG470EI4:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:48:38.1806516+07:00 0HMT2QG470EI4:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:48:38.1822347+07:00 0HMT2QG470EI4:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:48:38.1834500+07:00 0HMT2QG470EI4:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:50:34.8276208+07:00 0HMT2QG470EI6:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:50:34.8276207+07:00 0HMT2QG470EI1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:50:34.8284566+07:00 0HMT2QG470EI1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:50:34.8284566+07:00 0HMT2QG470EI6:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:50:34.8390912+07:00 0HMT2QG470EI6:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:50:34.8390912+07:00 0HMT2QG470EI1:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:50:34.9756006+07:00 0HMT2QG470EI8:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:50:34.9762588+07:00 0HMT2QG470EI8:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:50:34.9780940+07:00 0HMT2QG470EI8:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:50:34.9784063+07:00 0HMT2QG470EI9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:50:34.9792790+07:00 0HMT2QG470EI9:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:50:34.9820276+07:00 0HMT2QG470EI9:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:50:34.9845034+07:00 0HMT2QG470EI8:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:50:34.9882228+07:00 0HMT2QG470EI9:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:50:34.9911692+07:00 0HMT2QG470EI7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:50:34.9918447+07:00 0HMT2QG470EI7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:50:34.9930127+07:00 0HMT2QG470EI8:00000004 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:50:34.9939876+07:00 0HMT2QG470EI7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:50:34.9964537+07:00 0HMT2QG470EI8:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:50:35.0023341+07:00 0HMT2QG470EI8:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:50:35.0080896+07:00 0HMT2QG470EI8:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:50:35.0094970+07:00 0HMT2QG470EI8:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:50:35.0113075+07:00 0HMT2QG470EI8:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:50:35.0140706+07:00 0HMT2QG470EI8:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:50:35.0240277+07:00 0HMT2QG470EI7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:50:35.0247025+07:00 0HMT2QG470EI7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:50:35.0273469+07:00 0HMT2QG470EI7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:50:37.4315351+07:00 0HMT2QG470EI8:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:50:37.4320787+07:00 0HMT2QG470EI8:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:50:37.4386504+07:00 0HMT2QG470EI9:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:50:37.4393995+07:00 0HMT2QG470EI9:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:50:37.4440984+07:00 0HMT2QG470EI8:00000006 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:50:37.4489782+07:00 0HMT2QG470EI8:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:50:37.4490730+07:00 0HMT2QG470EI9:00000004 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:50:37.4530570+07:00 0HMT2QG470EI9:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:50:37.4549663+07:00 0HMT2QG470EI8:00000006 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:50:37.4587684+07:00 0HMT2QG470EI8:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:50:37.4626958+07:00 0HMT2QG470EI8:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:50:37.4660929+07:00 0HMT2QG470EI8:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:50:37.4676625+07:00 0HMT2QG470EI8:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:50:37.4695878+07:00 0HMT2QG470EI8:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:50:37.4708035+07:00 0HMT2QG470EI8:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:50:37.4762322+07:00 0HMT2QG470EIB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:50:37.4770159+07:00 0HMT2QG470EIB:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:50:37.4787835+07:00 0HMT2QG470EIB:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:50:37.5842146+07:00 0HMT2QG470EIB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:50:37.5847611+07:00 0HMT2QG470EIB:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:50:37.5862120+07:00 0HMT2QG470EIB:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:50:37.5880338+07:00 0HMT2QG470EIB:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T14:50:37.6439386+07:00 0HMT2QG470EI8:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:50:37.6446583+07:00 0HMT2QG470EI8:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:50:37.6467027+07:00 0HMT2QG470EI8:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:50:37.6491131+07:00 0HMT2QG470EI8:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:50:37.6516406+07:00 0HMT2QG470EI8:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T14:50:37.6528169+07:00 0HMT2QG470EI8:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T14:50:37.6529291+07:00 0HMT2QG470EI9:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T14:50:37.6534945+07:00 0HMT2QG470EI9:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T14:50:37.6536367+07:00 0HMT2QG470EI8:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:50:37.6546198+07:00 0HMT2QG470EI8:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:50:37.6549683+07:00 0HMT2QG470EI9:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T14:50:37.6554078+07:00 0HMT2QG470EI8:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T14:50:37.6565923+07:00 0HMT2QG470EI9:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T14:50:37.6565912+07:00 0HMT2QG470EI8:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T14:50:37.6592640+07:00 0HMT2QG470EI8:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:36:21.7278967+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-22T15:36:21.7356781+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-22T15:36:21.7359659+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-22T15:36:21.7359941+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-22T15:36:47.2335564+07:00 0HMT2TBM1EVL3:00000003 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-22T15:36:48.5173620+07:00 0HMT2TBM1EVL3:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:36:49.7748534+07:00 0HMT2TBM1EVL3:00000003 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:36:49.8219762+07:00 0HMT2TBM1EVL3:00000003 [INF] Executed DbCommand ("32"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:36:50.3494722+07:00 0HMT2TBM1EVL3:00000003 [INF] Executed DbCommand ("54"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T15:36:51.2480797+07:00 0HMT2TBM1EVL3:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:36:51.2741181+07:00 0HMT2TBM1EVL3:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:36:51.2807686+07:00 0HMT2TBM1EVL3:00000005 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:36:51.3532827+07:00 0HMT2TBM1EVL5:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:36:51.3615591+07:00 0HMT2TBM1EVL5:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:36:51.3634314+07:00 0HMT2TBM1EVL5:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:36:51.4304915+07:00 0HMT2TBM1EVL4:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:36:51.4313433+07:00 0HMT2TBM1EVL4:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:36:51.4329325+07:00 0HMT2TBM1EVL4:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:36:51.4491784+07:00 0HMT2TBM1EVL4:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:36:51.4499416+07:00 0HMT2TBM1EVL4:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:36:51.4517873+07:00 0HMT2TBM1EVL4:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:36:51.4764876+07:00 0HMT2TBM1EVL4:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T15:36:51.5145687+07:00 0HMT2TBM1EVL5:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T15:36:51.5947474+07:00 0HMT2TBM1EVL3:00000005 [INF] Executed DbCommand ("57"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:36:51.6382618+07:00 0HMT2TBM1EVL6:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:36:51.6382995+07:00 0HMT2TBM1EVL7:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:36:51.6811117+07:00 0HMT2TBM1EVL7:00000003 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:36:51.6954009+07:00 0HMT2TBM1EVL7:00000003 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:36:51.6973089+07:00 0HMT2TBM1EVL6:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:36:51.6988346+07:00 0HMT2TBM1EVL6:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:36:51.7008611+07:00 0HMT2TBM1EVL7:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T15:36:51.7041273+07:00 0HMT2TBM1EVL6:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:36:51.8490636+07:00 0HMT2TBM1EVL3:00000005 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T15:36:51.8494882+07:00 0HMT2TBM1EVL6:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T15:36:51.8839042+07:00 0HMT2TBM1EVL6:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T15:36:51.8838985+07:00 0HMT2TBM1EVL3:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T15:36:51.8934095+07:00 0HMT2TBM1EVL6:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:36:51.8934093+07:00 0HMT2TBM1EVL3:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:36:51.8998092+07:00 0HMT2TBM1EVL3:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:36:51.8998092+07:00 0HMT2TBM1EVL6:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:36:51.9013497+07:00 0HMT2TBM1EVL6:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:36:51.9013496+07:00 0HMT2TBM1EVL3:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:36:51.9027044+07:00 0HMT2TBM1EVL3:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:36:51.9027074+07:00 0HMT2TBM1EVL6:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:36:51.9040579+07:00 0HMT2TBM1EVL6:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:36:51.9040580+07:00 0HMT2TBM1EVL3:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:36:53.2176995+07:00 0HMT2TBM1EVL6:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:36:53.2181981+07:00 0HMT2TBM1EVL6:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:36:53.2195146+07:00 0HMT2TBM1EVL6:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:36:53.2387258+07:00 0HMT2TBM1EVL6:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T15:36:53.3465741+07:00 0HMT2TBM1EVL6:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:36:53.3471182+07:00 0HMT2TBM1EVL6:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:36:53.3484942+07:00 0HMT2TBM1EVL6:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:36:53.3660418+07:00 0HMT2TBM1EVL6:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T15:36:54.9906680+07:00 0HMT2TBM1EVL6:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:36:54.9913442+07:00 0HMT2TBM1EVL6:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:36:54.9930569+07:00 0HMT2TBM1EVL6:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:36:54.9957544+07:00 0HMT2TBM1EVL6:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T15:36:55.1287118+07:00 0HMT2TBM1EVL6:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:36:55.1292516+07:00 0HMT2TBM1EVL6:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:36:55.1307342+07:00 0HMT2TBM1EVL6:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:36:55.1334464+07:00 0HMT2TBM1EVL6:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T15:38:28.0826437+07:00 0HMT2TBM1EVL4:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:38:28.0834462+07:00 0HMT2TBM1EVL4:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:38:28.0954435+07:00 0HMT2TBM1EVL4:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:38:28.2087543+07:00 0HMT2TBM1EVL6:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:38:28.2096122+07:00 0HMT2TBM1EVL6:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:38:28.2112307+07:00 0HMT2TBM1EVL6:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:38:28.2144339+07:00 0HMT2TBM1EVL7:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:38:28.2148968+07:00 0HMT2TBM1EVL7:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:38:28.2157005+07:00 0HMT2TBM1EVL6:0000000D [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:38:28.2165121+07:00 0HMT2TBM1EVL7:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:38:28.2214027+07:00 0HMT2TBM1EVL7:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T15:38:28.2217185+07:00 0HMT2TBM1EVL6:0000000D [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T15:38:28.2250195+07:00 0HMT2TBM1EVL6:0000000D [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T15:38:28.2283947+07:00 0HMT2TBM1EVL6:0000000D [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:38:28.2312702+07:00 0HMT2TBM1EVL6:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:38:28.2325475+07:00 0HMT2TBM1EVL6:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:38:28.2339031+07:00 0HMT2TBM1EVL6:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:38:28.2353513+07:00 0HMT2TBM1EVL6:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:38:28.3904905+07:00 0HMT2TBM1EVL8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:38:28.3911818+07:00 0HMT2TBM1EVL8:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:38:28.3929884+07:00 0HMT2TBM1EVL8:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:38:28.4397926+07:00 0HMT2TBM1EVL8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:38:28.4419022+07:00 0HMT2TBM1EVL8:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:38:28.4437985+07:00 0HMT2TBM1EVL8:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:38:46.5490443+07:00 0HMT2TBM1EVL6:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:38:46.5498899+07:00 0HMT2TBM1EVL7:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:38:46.5505952+07:00 0HMT2TBM1EVL6:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:38:46.5508322+07:00 0HMT2TBM1EVL7:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:38:46.5618942+07:00 0HMT2TBM1EVL7:00000007 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:38:46.5655790+07:00 0HMT2TBM1EVL7:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T15:38:46.5667979+07:00 0HMT2TBM1EVL6:0000000F [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:38:46.5699878+07:00 0HMT2TBM1EVL9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:38:46.5701031+07:00 0HMT2TBM1EVL6:0000000F [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:38:46.5704884+07:00 0HMT2TBM1EVL9:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:38:46.5720077+07:00 0HMT2TBM1EVL9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:38:46.5776702+07:00 0HMT2TBM1EVL6:0000000F [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T15:38:46.5805308+07:00 0HMT2TBM1EVL6:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T15:38:46.5833993+07:00 0HMT2TBM1EVL6:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:38:46.5876688+07:00 0HMT2TBM1EVL6:0000000F [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:38:46.5895361+07:00 0HMT2TBM1EVL6:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:38:46.5917686+07:00 0HMT2TBM1EVL6:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:38:46.5928145+07:00 0HMT2TBM1EVL6:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:38:46.6700992+07:00 0HMT2TBM1EVL9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:38:46.6706307+07:00 0HMT2TBM1EVL9:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:38:46.6720126+07:00 0HMT2TBM1EVL9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:38:46.6742725+07:00 0HMT2TBM1EVL9:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T15:38:46.6998899+07:00 0HMT2TBM1EVL6:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:38:46.6998899+07:00 0HMT2TBM1EVL7:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:38:46.7003814+07:00 0HMT2TBM1EVL7:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:38:46.7003814+07:00 0HMT2TBM1EVL6:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:38:46.7019091+07:00 0HMT2TBM1EVL7:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:38:46.7019091+07:00 0HMT2TBM1EVL6:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:38:46.7056041+07:00 0HMT2TBM1EVL6:00000010 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:38:46.7070123+07:00 0HMT2TBM1EVL7:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T15:38:46.7173600+07:00 0HMT2TBM1EVL6:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T15:38:46.7184816+07:00 0HMT2TBM1EVL6:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T15:38:46.7197822+07:00 0HMT2TBM1EVL6:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:38:46.7209743+07:00 0HMT2TBM1EVL6:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:38:46.7219628+07:00 0HMT2TBM1EVL6:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:38:46.7234731+07:00 0HMT2TBM1EVL6:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:38:46.7244146+07:00 0HMT2TBM1EVL6:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:38:48.4511939+07:00 0HMT2TBM1EVL6:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:38:48.4519635+07:00 0HMT2TBM1EVL6:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:38:48.4627128+07:00 0HMT2TBM1EVL6:00000012 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:38:48.4669080+07:00 0HMT2TBM1EVL6:00000012 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T15:38:48.5842107+07:00 0HMT2TBM1EVL6:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:38:48.5847015+07:00 0HMT2TBM1EVL6:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:38:48.5859564+07:00 0HMT2TBM1EVL6:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:38:48.5895884+07:00 0HMT2TBM1EVL6:00000014 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T15:38:57.5271611+07:00 0HMT2TBM1EVL6:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:38:57.5279276+07:00 0HMT2TBM1EVL6:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:38:57.5330169+07:00 0HMT2TBM1EVL7:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:38:57.5336508+07:00 0HMT2TBM1EVL7:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:38:57.5386087+07:00 0HMT2TBM1EVL6:00000016 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:38:57.5423443+07:00 0HMT2TBM1EVL6:00000016 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:38:57.5428012+07:00 0HMT2TBM1EVL7:0000000A [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:38:57.5462319+07:00 0HMT2TBM1EVL7:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T15:38:57.5473347+07:00 0HMT2TBM1EVL6:00000016 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T15:38:57.5499636+07:00 0HMT2TBM1EVL6:00000016 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T15:38:57.5534965+07:00 0HMT2TBM1EVL6:00000016 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:38:57.5571788+07:00 0HMT2TBM1EVL6:00000016 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:38:57.5583093+07:00 0HMT2TBM1EVL6:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:38:57.5593922+07:00 0HMT2TBM1EVL6:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:38:57.5602574+07:00 0HMT2TBM1EVL6:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:38:59.9483097+07:00 0HMT2TBM1EVL6:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:38:59.9488951+07:00 0HMT2TBM1EVL6:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:38:59.9540014+07:00 0HMT2TBM1EVL7:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:38:59.9548331+07:00 0HMT2TBM1EVL7:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:38:59.9593799+07:00 0HMT2TBM1EVL6:00000018 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:38:59.9627867+07:00 0HMT2TBM1EVL6:00000018 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:38:59.9632135+07:00 0HMT2TBM1EVL7:0000000C [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:38:59.9676818+07:00 0HMT2TBM1EVL7:0000000C [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T15:38:59.9678230+07:00 0HMT2TBM1EVL6:00000018 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T15:38:59.9713828+07:00 0HMT2TBM1EVL6:00000018 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T15:38:59.9744636+07:00 0HMT2TBM1EVL6:00000018 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:38:59.9794759+07:00 0HMT2TBM1EVL6:00000018 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:38:59.9808009+07:00 0HMT2TBM1EVL6:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:38:59.9818737+07:00 0HMT2TBM1EVL6:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:38:59.9827213+07:00 0HMT2TBM1EVL6:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:39:00.0942458+07:00 0HMT2TBM1EVLA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:39:00.0949354+07:00 0HMT2TBM1EVLA:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:39:00.0965615+07:00 0HMT2TBM1EVLA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:39:00.1499794+07:00 0HMT2TBM1EVLA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:39:00.1506237+07:00 0HMT2TBM1EVLA:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:39:00.1532631+07:00 0HMT2TBM1EVLA:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:39:00.1596370+07:00 0HMT2TBM1EVLA:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T15:39:00.1923500+07:00 0HMT2TBM1EVL6:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:39:00.1932216+07:00 0HMT2TBM1EVL6:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:39:00.1953479+07:00 0HMT2TBM1EVL6:00000019 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:39:00.1972679+07:00 0HMT2TBM1EVL6:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:39:00.1995804+07:00 0HMT2TBM1EVL6:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T15:39:00.2007784+07:00 0HMT2TBM1EVL6:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T15:39:00.2017878+07:00 0HMT2TBM1EVL6:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:39:00.2030447+07:00 0HMT2TBM1EVL6:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:39:00.2041589+07:00 0HMT2TBM1EVL6:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:39:00.2057078+07:00 0HMT2TBM1EVL6:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:39:00.2069482+07:00 0HMT2TBM1EVL6:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:39:00.2098840+07:00 0HMT2TBM1EVL6:0000001A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:39:00.2105630+07:00 0HMT2TBM1EVL6:0000001A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:39:00.2127844+07:00 0HMT2TBM1EVL6:0000001A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:39:00.2156241+07:00 0HMT2TBM1EVL6:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T15:39:18.4959318+07:00 0HMT2TBM1EVL6:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:39:18.4966827+07:00 0HMT2TBM1EVL6:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:39:18.5076993+07:00 0HMT2TBM1EVL6:0000001C [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:39:18.5119451+07:00 0HMT2TBM1EVL6:0000001C [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T15:39:18.5883215+07:00 0HMT2TBM1EVL6:0000001E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:39:18.5890154+07:00 0HMT2TBM1EVL6:0000001E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:39:18.5906237+07:00 0HMT2TBM1EVL6:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:39:18.5937635+07:00 0HMT2TBM1EVL6:0000001E [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T15:55:08.3118274+07:00 0HMT2TBM1EVLB:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:55:08.3129687+07:00 0HMT2TBM1EVLC:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:55:08.3177413+07:00 0HMT2TBM1EVLB:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:55:08.3200077+07:00 0HMT2TBM1EVLC:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:55:08.3335747+07:00 0HMT2TBM1EVLC:00000003 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:55:08.3335746+07:00 0HMT2TBM1EVLB:00000003 [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:55:08.3383354+07:00 0HMT2TBM1EVLB:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:55:08.3383354+07:00 0HMT2TBM1EVLC:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T15:55:08.3480493+07:00 0HMT2TBM1EVLB:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T15:55:08.3491266+07:00 0HMT2TBM1EVLD:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:55:08.3548773+07:00 0HMT2TBM1EVLD:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:55:08.3566618+07:00 0HMT2TBM1EVLB:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T15:55:08.3571428+07:00 0HMT2TBM1EVLD:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:55:08.3604379+07:00 0HMT2TBM1EVLB:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:55:08.3641664+07:00 0HMT2TBM1EVLB:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:55:08.3655051+07:00 0HMT2TBM1EVLB:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:55:08.3670019+07:00 0HMT2TBM1EVLB:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:55:08.3680915+07:00 0HMT2TBM1EVLB:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:55:08.3917530+07:00 0HMT2TBM1EVLD:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:55:08.3928066+07:00 0HMT2TBM1EVLD:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:55:08.3946605+07:00 0HMT2TBM1EVLD:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:55:08.3976043+07:00 0HMT2TBM1EVLD:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T15:55:08.4244071+07:00 0HMT2TBM1EVLB:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:55:08.4249724+07:00 0HMT2TBM1EVLB:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:55:08.4263927+07:00 0HMT2TBM1EVLB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:55:08.4280279+07:00 0HMT2TBM1EVLB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:55:08.4295166+07:00 0HMT2TBM1EVLC:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:55:08.4301495+07:00 0HMT2TBM1EVLC:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:55:08.4304089+07:00 0HMT2TBM1EVLB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T15:55:08.4314085+07:00 0HMT2TBM1EVLB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T15:55:08.4320911+07:00 0HMT2TBM1EVLC:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:55:08.4323924+07:00 0HMT2TBM1EVLB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:55:08.4343705+07:00 0HMT2TBM1EVLB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:55:08.4344537+07:00 0HMT2TBM1EVLC:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T15:55:08.4357867+07:00 0HMT2TBM1EVLB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:55:08.4369299+07:00 0HMT2TBM1EVLB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:55:08.4382407+07:00 0HMT2TBM1EVLB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:57:03.3474434+07:00 0HMT2TBM1EVLB:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:57:03.3480888+07:00 0HMT2TBM1EVLB:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:57:03.3591133+07:00 0HMT2TBM1EVLB:00000006 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:57:03.3653033+07:00 0HMT2TBM1EVLB:00000006 [INF] Executed DbCommand ("5"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T15:57:03.6332337+07:00 0HMT2TBM1EVLB:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:57:03.6339426+07:00 0HMT2TBM1EVLB:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:57:03.6447870+07:00 0HMT2TBM1EVLB:00000008 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:57:03.6479610+07:00 0HMT2TBM1EVLB:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T15:57:54.8468750+07:00 0HMT2TBM1EVLA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:57:54.8559295+07:00 0HMT2TBM1EVLA:00000002 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:57:54.8567524+07:00 0HMT2TBM1EVLD:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:57:54.8569110+07:00 0HMT2TBM1EVL9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:57:54.8593210+07:00 0HMT2TBM1EVLD:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:57:54.8674292+07:00 0HMT2TBM1EVL9:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:57:54.8715502+07:00 0HMT2TBM1EVLA:00000002 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:57:54.8715501+07:00 0HMT2TBM1EVLD:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:57:54.8805435+07:00 0HMT2TBM1EVL9:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:57:54.9652428+07:00 0HMT2TBM1EVLE:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:57:54.9658942+07:00 0HMT2TBM1EVLE:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:57:54.9675155+07:00 0HMT2TBM1EVLE:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:57:54.9689791+07:00 0HMT2TBM1EVLF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:57:54.9701664+07:00 0HMT2TBM1EVLF:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:57:54.9720891+07:00 0HMT2TBM1EVLF:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:57:55.0136283+07:00 0HMT2TBM1EVLB:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:57:55.0142820+07:00 0HMT2TBM1EVLB:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:57:55.0160726+07:00 0HMT2TBM1EVLB:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:57:55.0220171+07:00 0HMT2TBM1EVLB:0000000B [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:57:55.0266668+07:00 0HMT2TBM1EVLB:0000000B [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T15:57:55.0305013+07:00 0HMT2TBM1EVLB:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T15:57:55.0335950+07:00 0HMT2TBM1EVLB:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:57:55.0362699+07:00 0HMT2TBM1EVLB:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:57:55.0373436+07:00 0HMT2TBM1EVLB:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:57:55.0385714+07:00 0HMT2TBM1EVLB:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:57:55.0396014+07:00 0HMT2TBM1EVLB:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:57:55.0546122+07:00 0HMT2TBM1EVLG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:57:55.0553214+07:00 0HMT2TBM1EVLG:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:57:55.0572541+07:00 0HMT2TBM1EVLG:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:57:55.0639344+07:00 0HMT2TBM1EVLF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:57:55.0639344+07:00 0HMT2TBM1EVLE:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:57:55.0645385+07:00 0HMT2TBM1EVLF:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:57:55.0645382+07:00 0HMT2TBM1EVLE:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:57:55.0664177+07:00 0HMT2TBM1EVLF:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:57:55.0664174+07:00 0HMT2TBM1EVLE:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:57:55.0689108+07:00 0HMT2TBM1EVLF:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T15:57:55.0689107+07:00 0HMT2TBM1EVLE:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T15:57:55.1041022+07:00 0HMT2TBM1EVLB:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:57:55.1050841+07:00 0HMT2TBM1EVLB:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:57:55.1095554+07:00 0HMT2TBM1EVLB:0000000C [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:57:55.1140223+07:00 0HMT2TBM1EVLB:0000000C [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T15:57:55.1590037+07:00 0HMT2TBM1EVLG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:57:55.1590037+07:00 0HMT2TBM1EVLF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:57:55.1590058+07:00 0HMT2TBM1EVLE:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:57:55.1597035+07:00 0HMT2TBM1EVLF:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:57:55.1597050+07:00 0HMT2TBM1EVLE:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:57:55.1598216+07:00 0HMT2TBM1EVLG:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:57:55.1618960+07:00 0HMT2TBM1EVLE:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:57:55.1618960+07:00 0HMT2TBM1EVLF:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:57:55.1635302+07:00 0HMT2TBM1EVLG:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:57:57.0538734+07:00 0HMT2TBM1EVLB:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:57:57.0544305+07:00 0HMT2TBM1EVLB:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:57:57.0550704+07:00 0HMT2TBM1EVLH:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:57:57.0555666+07:00 0HMT2TBM1EVLH:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:57:57.0565894+07:00 0HMT2TBM1EVLB:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:57:57.0570545+07:00 0HMT2TBM1EVLH:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:57:57.0581436+07:00 0HMT2TBM1EVLB:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:57:57.0603508+07:00 0HMT2TBM1EVLH:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T15:57:57.0627905+07:00 0HMT2TBM1EVLB:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T15:57:57.0640215+07:00 0HMT2TBM1EVLB:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T15:57:57.0649904+07:00 0HMT2TBM1EVLB:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:57:57.0660978+07:00 0HMT2TBM1EVLB:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:57:57.0671115+07:00 0HMT2TBM1EVLB:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:57:57.0685062+07:00 0HMT2TBM1EVLB:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:57:57.0708196+07:00 0HMT2TBM1EVLB:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:57:57.2265446+07:00 0HMT2TBM1EVLI:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:57:57.2270607+07:00 0HMT2TBM1EVLI:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:57:57.2286347+07:00 0HMT2TBM1EVLI:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:57:57.3399046+07:00 0HMT2TBM1EVLI:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:57:57.3407134+07:00 0HMT2TBM1EVLI:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:57:57.3421061+07:00 0HMT2TBM1EVLI:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:57:57.3431998+07:00 0HMT2TBM1EVLI:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T15:57:57.3823318+07:00 0HMT2TBM1EVLB:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:57:57.3824727+07:00 0HMT2TBM1EVLH:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:57:57.3828471+07:00 0HMT2TBM1EVLH:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:57:57.3828464+07:00 0HMT2TBM1EVLB:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:57:57.3841399+07:00 0HMT2TBM1EVLH:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:57:57.3841400+07:00 0HMT2TBM1EVLB:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:57:57.3857727+07:00 0HMT2TBM1EVLH:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T15:57:57.3857722+07:00 0HMT2TBM1EVLB:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:57:57.3908658+07:00 0HMT2TBM1EVLB:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T15:57:57.3923119+07:00 0HMT2TBM1EVLB:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T15:57:57.3934593+07:00 0HMT2TBM1EVLB:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:57:57.3945148+07:00 0HMT2TBM1EVLB:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:57:57.3952934+07:00 0HMT2TBM1EVLB:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:57:57.3961613+07:00 0HMT2TBM1EVLB:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T15:57:57.3969404+07:00 0HMT2TBM1EVLB:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T15:58:37.9985696+07:00 0HMT2TBM1EVLB:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:58:37.9992100+07:00 0HMT2TBM1EVLB:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:58:38.0100303+07:00 0HMT2TBM1EVLB:00000012 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:58:38.0146290+07:00 0HMT2TBM1EVLB:00000012 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T15:58:38.1769169+07:00 0HMT2TBM1EVLB:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T15:58:38.1778480+07:00 0HMT2TBM1EVLB:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T15:58:38.1800675+07:00 0HMT2TBM1EVLB:00000014 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T15:58:38.1842726+07:00 0HMT2TBM1EVLB:00000014 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T15:59:56.2983152+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-22T15:59:56.3110913+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-22T15:59:56.3114463+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-22T15:59:56.3114853+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-22T16:00:00.1241100+07:00 0HMT2TOL64LA1:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-22T16:00:01.1709963+07:00 0HMT2TOL64LA2:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:00:01.1709975+07:00 0HMT2TOL64LA3:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:00:01.1710001+07:00 0HMT2TOL64LA1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:00:01.1709950+07:00 0HMT2TOL64LA4:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:00:01.5608664+07:00 0HMT2TOL64LA1:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:00:01.5608630+07:00 0HMT2TOL64LA2:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:00:01.5608645+07:00 0HMT2TOL64LA4:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:00:01.5608635+07:00 0HMT2TOL64LA3:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:00:01.6055981+07:00 0HMT2TOL64LA2:00000003 [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:00:01.6055981+07:00 0HMT2TOL64LA1:00000002 [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:00:01.6055982+07:00 0HMT2TOL64LA3:00000003 [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:00:01.6055982+07:00 0HMT2TOL64LA4:00000003 [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:00:01.6879454+07:00 0HMT2TOL64LA1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:00:01.6949661+07:00 0HMT2TOL64LA1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:00:01.6965493+07:00 0HMT2TOL64LA1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:00:02.0909442+07:00 0HMT2TOL64LA2:00000003 [INF] Executed DbCommand ("56"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:00:02.0909442+07:00 0HMT2TOL64LA3:00000003 [INF] Executed DbCommand ("56"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:00:02.0909443+07:00 0HMT2TOL64LA1:00000002 [INF] Executed DbCommand ("56"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T16:00:02.0909442+07:00 0HMT2TOL64LA4:00000003 [INF] Executed DbCommand ("56"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T16:00:02.1874840+07:00 0HMT2TOL64LA2:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=["@__message_CreatedTime_0='?' (DbType = DateTime2), @__message_Id_1='?' (Size = 100), @__message_ChatRoomId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE (([m].[CreatedTime] >= @__message_CreatedTime_0) AND ([m].[Id] <> @__message_Id_1)) AND ([m].[ChatRoomId] = @__message_ChatRoomId_2)" (0723d8ff)
2023-08-22T16:00:02.3072936+07:00 0HMT2TOL64LA3:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T16:00:02.3328420+07:00 0HMT2TOL64LA3:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:00:02.3414606+07:00 0HMT2TOL64LA3:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:00:02.3615877+07:00 0HMT2TOL64LA3:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T16:00:02.3650117+07:00 0HMT2TOL64LA3:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:00:02.3662587+07:00 0HMT2TOL64LA3:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T16:00:02.3671755+07:00 0HMT2TOL64LA3:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:09:04.7941814+07:00 0HMT2TOL64LA6:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:04.7989152+07:00 0HMT2TOL64LA6:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:04.8202898+07:00 0HMT2TOL64LA6:00000002 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:05.0433977+07:00 0HMT2TOL64LA6:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-22T16:09:05.1171353+07:00 0HMT2TOL64LA5:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:05.1176199+07:00 0HMT2TOL64LA5:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:05.1188914+07:00 0HMT2TOL64LA5:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:05.1273201+07:00 0HMT2TOL64LA5:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:09:05.1513494+07:00 0HMT2TOL64LA5:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-22T16:09:15.8460613+07:00 0HMT2TOL64LA6:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:15.8466209+07:00 0HMT2TOL64LA6:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:15.8595059+07:00 0HMT2TOL64LA6:00000003 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:15.8794979+07:00 0HMT2TOL64LA6:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T16:09:15.9915919+07:00 0HMT2TOL64LA5:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:15.9924202+07:00 0HMT2TOL64LA5:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:15.9943435+07:00 0HMT2TOL64LA5:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:15.9991723+07:00 0HMT2TOL64LA5:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:09:16.0980097+07:00 0HMT2TOL64LA6:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:16.0985710+07:00 0HMT2TOL64LA6:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:16.0999250+07:00 0HMT2TOL64LA6:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:16.1022730+07:00 0HMT2TOL64LA6:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T16:09:16.2232060+07:00 0HMT2TOL64LA5:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:16.2241096+07:00 0HMT2TOL64LA5:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:16.2264238+07:00 0HMT2TOL64LA5:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:16.2287672+07:00 0HMT2TOL64LA5:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:09:17.6153250+07:00 0HMT2TOL64LA1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:17.6160258+07:00 0HMT2TOL64LA1:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:17.6175063+07:00 0HMT2TOL64LA1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:17.7074054+07:00 0HMT2TOL64LA5:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:17.7079561+07:00 0HMT2TOL64LA5:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:17.7098050+07:00 0HMT2TOL64LA5:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:17.7136291+07:00 0HMT2TOL64LA6:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:17.7143037+07:00 0HMT2TOL64LA5:0000000A [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:09:17.7181812+07:00 0HMT2TOL64LA6:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:17.7195458+07:00 0HMT2TOL64LA5:0000000A [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T16:09:17.7199181+07:00 0HMT2TOL64LA6:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:17.7231630+07:00 0HMT2TOL64LA5:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:09:17.7250775+07:00 0HMT2TOL64LA6:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T16:09:17.7259790+07:00 0HMT2TOL64LA5:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:09:17.7287194+07:00 0HMT2TOL64LA5:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T16:09:17.7304128+07:00 0HMT2TOL64LA5:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:09:17.7318235+07:00 0HMT2TOL64LA5:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T16:09:17.7328703+07:00 0HMT2TOL64LA5:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:09:17.8648484+07:00 0HMT2TOL64LA7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:17.8660724+07:00 0HMT2TOL64LA7:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:17.8690697+07:00 0HMT2TOL64LA7:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:17.9123058+07:00 0HMT2TOL64LA7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:17.9169229+07:00 0HMT2TOL64LA7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:17.9190698+07:00 0HMT2TOL64LA7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:20.0994675+07:00 0HMT2TOL64LA6:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:20.0994675+07:00 0HMT2TOL64LA5:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:20.1004791+07:00 0HMT2TOL64LA6:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:20.1004845+07:00 0HMT2TOL64LA5:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:20.1025793+07:00 0HMT2TOL64LA6:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:20.1025794+07:00 0HMT2TOL64LA5:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:20.1075280+07:00 0HMT2TOL64LA6:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T16:09:20.1075280+07:00 0HMT2TOL64LA5:0000000B [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:09:20.1156688+07:00 0HMT2TOL64LA5:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T16:09:20.1177107+07:00 0HMT2TOL64LA5:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:09:20.1210824+07:00 0HMT2TOL64LA5:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:09:20.1224319+07:00 0HMT2TOL64LA5:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T16:09:20.1235718+07:00 0HMT2TOL64LA5:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:09:20.1247184+07:00 0HMT2TOL64LA5:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T16:09:20.1256947+07:00 0HMT2TOL64LA5:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:09:20.2312116+07:00 0HMT2TOL64LA8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:20.2318050+07:00 0HMT2TOL64LA8:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:20.2339485+07:00 0HMT2TOL64LA8:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:20.2378941+07:00 0HMT2TOL64LA8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:20.2388866+07:00 0HMT2TOL64LA8:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:20.2406617+07:00 0HMT2TOL64LA8:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:20.2430417+07:00 0HMT2TOL64LA8:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T16:09:20.2604404+07:00 0HMT2TOL64LA5:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:20.2610746+07:00 0HMT2TOL64LA5:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:20.2625200+07:00 0HMT2TOL64LA5:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:20.2645208+07:00 0HMT2TOL64LA5:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:09:20.2652059+07:00 0HMT2TOL64LA6:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:20.2659638+07:00 0HMT2TOL64LA6:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:20.2671958+07:00 0HMT2TOL64LA5:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T16:09:20.2685261+07:00 0HMT2TOL64LA6:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:20.2687334+07:00 0HMT2TOL64LA5:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:09:20.2700073+07:00 0HMT2TOL64LA5:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:09:20.2701758+07:00 0HMT2TOL64LA6:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T16:09:20.2726896+07:00 0HMT2TOL64LA5:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T16:09:20.2737449+07:00 0HMT2TOL64LA5:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:09:20.2748086+07:00 0HMT2TOL64LA5:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T16:09:20.2756998+07:00 0HMT2TOL64LA5:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:09:21.2652948+07:00 0HMT2TOL64LA6:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:21.2658430+07:00 0HMT2TOL64LA6:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:21.2672173+07:00 0HMT2TOL64LA6:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:21.2691932+07:00 0HMT2TOL64LA6:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T16:09:21.3700825+07:00 0HMT2TOL64LA5:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:21.3707351+07:00 0HMT2TOL64LA5:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:21.3725140+07:00 0HMT2TOL64LA5:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:21.3754128+07:00 0HMT2TOL64LA5:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:09:21.5918641+07:00 0HMT2TOL64LA6:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:21.5925168+07:00 0HMT2TOL64LA6:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:21.5939221+07:00 0HMT2TOL64LA6:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:21.5961207+07:00 0HMT2TOL64LA6:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T16:09:21.6956216+07:00 0HMT2TOL64LA5:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:21.6962198+07:00 0HMT2TOL64LA5:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:21.6976463+07:00 0HMT2TOL64LA5:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:21.7001411+07:00 0HMT2TOL64LA5:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:09:22.5562104+07:00 0HMT2TOL64LA6:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:22.5567514+07:00 0HMT2TOL64LA6:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:22.5582078+07:00 0HMT2TOL64LA6:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:22.5602031+07:00 0HMT2TOL64LA6:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T16:09:22.6114138+07:00 0HMT2TOL64LA5:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:09:22.6121187+07:00 0HMT2TOL64LA5:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:09:22.6135943+07:00 0HMT2TOL64LA5:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:09:22.6158913+07:00 0HMT2TOL64LA5:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:11:48.4718685+07:00 0HMT2TOL64LA9:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:11:48.4725790+07:00 0HMT2TOL64LA9:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:11:48.4844328+07:00 0HMT2TOL64LA9:00000003 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:11:48.4903409+07:00 0HMT2TOL64LA9:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-22T16:11:48.5651596+07:00 0HMT2TOL64LA9:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:11:48.5660102+07:00 0HMT2TOL64LA9:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:11:48.5674566+07:00 0HMT2TOL64LA9:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:11:48.5711693+07:00 0HMT2TOL64LA9:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:11:48.5750981+07:00 0HMT2TOL64LA9:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-22T16:12:36.9368284+07:00 0HMT2TOL64LA9:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:12:36.9378615+07:00 0HMT2TOL64LA9:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:12:36.9481239+07:00 0HMT2TOL64LA9:00000007 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:12:36.9537229+07:00 0HMT2TOL64LA9:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-22T16:12:37.0406787+07:00 0HMT2TOL64LA9:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:12:37.0427438+07:00 0HMT2TOL64LA9:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:12:37.0465971+07:00 0HMT2TOL64LA9:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:12:37.0502743+07:00 0HMT2TOL64LA9:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:12:37.0531850+07:00 0HMT2TOL64LA9:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-22T16:13:25.3326694+07:00 0HMT2TOL64LA9:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:13:25.3332728+07:00 0HMT2TOL64LA9:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:13:25.3356175+07:00 0HMT2TOL64LA9:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:13:25.3424000+07:00 0HMT2TOL64LA9:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T16:13:25.4845213+07:00 0HMT2TOL64LA9:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:13:25.4850701+07:00 0HMT2TOL64LA9:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:13:25.4865065+07:00 0HMT2TOL64LA9:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:13:25.4884745+07:00 0HMT2TOL64LA9:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:13:25.5438236+07:00 0HMT2TOL64LA9:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:13:25.5443536+07:00 0HMT2TOL64LA9:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:13:25.5462830+07:00 0HMT2TOL64LA9:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:13:25.5483607+07:00 0HMT2TOL64LA9:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T16:13:25.6364240+07:00 0HMT2TOL64LA9:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:13:25.6371596+07:00 0HMT2TOL64LA9:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:13:25.6386069+07:00 0HMT2TOL64LA9:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:13:25.6423567+07:00 0HMT2TOL64LA9:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:13:31.2025970+07:00 0HMT2TOL64LA9:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:13:31.2031682+07:00 0HMT2TOL64LA9:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:13:31.2045533+07:00 0HMT2TOL64LA9:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:13:31.2066373+07:00 0HMT2TOL64LA9:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T16:13:31.2966527+07:00 0HMT2TOL64LA9:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:13:31.2972781+07:00 0HMT2TOL64LA9:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:13:31.2985907+07:00 0HMT2TOL64LA9:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:13:31.3004898+07:00 0HMT2TOL64LA9:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:13:31.3839141+07:00 0HMT2TOL64LA9:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:13:31.3845424+07:00 0HMT2TOL64LA9:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:13:31.3862133+07:00 0HMT2TOL64LA9:00000017 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:13:31.3887307+07:00 0HMT2TOL64LA9:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T16:13:31.4392157+07:00 0HMT2TOL64LA9:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:13:31.4397893+07:00 0HMT2TOL64LA9:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:13:31.4411637+07:00 0HMT2TOL64LA9:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:13:31.4431101+07:00 0HMT2TOL64LA9:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:13:46.4066591+07:00 0HMT2TOL64LA8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:13:46.4072425+07:00 0HMT2TOL64LA8:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:13:46.4134496+07:00 0HMT2TOL64LA8:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:13:48.8933998+07:00 0HMT2TOL64LA9:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:13:48.8939384+07:00 0HMT2TOL64LA9:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:13:48.8976770+07:00 0HMT2TOL64LAC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:13:48.8984779+07:00 0HMT2TOL64LAC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:13:48.9014642+07:00 0HMT2TOL64LA9:0000001C [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:13:48.9053140+07:00 0HMT2TOL64LA9:0000001C [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T16:13:48.9071492+07:00 0HMT2TOL64LAC:00000002 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:13:48.9114986+07:00 0HMT2TOL64LAC:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:13:48.9174108+07:00 0HMT2TOL64LAC:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T16:13:48.9206430+07:00 0HMT2TOL64LAC:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:13:48.9245667+07:00 0HMT2TOL64LAC:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:13:48.9264755+07:00 0HMT2TOL64LAC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:13:48.9276444+07:00 0HMT2TOL64LAC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:13:48.9289405+07:00 0HMT2TOL64LAC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:13:48.9301567+07:00 0HMT2TOL64LAC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:13:49.0583143+07:00 0HMT2TOL64LAB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:13:49.0592573+07:00 0HMT2TOL64LAB:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:13:49.0700416+07:00 0HMT2TOL64LAB:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:13:49.1485363+07:00 0HMT2TOL64LAB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:13:49.1492408+07:00 0HMT2TOL64LAB:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:13:49.1513080+07:00 0HMT2TOL64LAB:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:13:49.1552805+07:00 0HMT2TOL64LAB:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T16:13:49.2444172+07:00 0HMT2TOL64LA9:0000001D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:13:49.2444238+07:00 0HMT2TOL64LAC:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:13:49.2449606+07:00 0HMT2TOL64LA9:0000001D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:13:49.2449609+07:00 0HMT2TOL64LAC:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:13:49.2464184+07:00 0HMT2TOL64LAC:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:13:49.2464134+07:00 0HMT2TOL64LA9:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:13:49.2558740+07:00 0HMT2TOL64LAC:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T16:13:49.2558740+07:00 0HMT2TOL64LA9:0000001D [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:13:49.2748450+07:00 0HMT2TOL64LA9:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T16:13:49.2764383+07:00 0HMT2TOL64LA9:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:13:49.2782968+07:00 0HMT2TOL64LA9:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:13:49.2804722+07:00 0HMT2TOL64LA9:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:13:49.2820547+07:00 0HMT2TOL64LA9:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:13:49.2834326+07:00 0HMT2TOL64LA9:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:13:49.2853725+07:00 0HMT2TOL64LA9:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:13:50.0119007+07:00 0HMT2TOL64LA9:0000001F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:13:50.0123717+07:00 0HMT2TOL64LA9:0000001F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:13:50.0136594+07:00 0HMT2TOL64LA9:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:13:50.0166142+07:00 0HMT2TOL64LA9:0000001F [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T16:13:55.3086694+07:00 0HMT2TOL64LA9:00000021 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:13:55.3092073+07:00 0HMT2TOL64LA9:00000021 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:13:55.3106293+07:00 0HMT2TOL64LA9:00000021 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:13:55.3141058+07:00 0HMT2TOL64LA9:00000021 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-22T16:13:55.3603515+07:00 0HMT2TOL64LA9:00000023 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:13:55.3609190+07:00 0HMT2TOL64LA9:00000023 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:13:55.3622698+07:00 0HMT2TOL64LA9:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:13:55.3649205+07:00 0HMT2TOL64LA9:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:13:55.3686425+07:00 0HMT2TOL64LA9:00000023 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-22T16:17:22.2174069+07:00 0HMT2TOL64LAB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:17:22.2258331+07:00 0HMT2TOL64LAB:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:17:22.2451173+07:00 0HMT2TOL64LAB:00000002 [INF] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:17:22.3319259+07:00 0HMT2TOL64LAD:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:17:22.3332439+07:00 0HMT2TOL64LAD:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:17:22.3357180+07:00 0HMT2TOL64LAD:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:17:22.3437827+07:00 0HMT2TOL64LAE:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:17:22.3445379+07:00 0HMT2TOL64LAD:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:17:22.3446426+07:00 0HMT2TOL64LAE:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:17:22.3468947+07:00 0HMT2TOL64LAE:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:17:22.3538753+07:00 0HMT2TOL64LAD:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T16:17:22.3578326+07:00 0HMT2TOL64LAE:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T16:17:22.3616868+07:00 0HMT2TOL64LAD:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T16:17:22.3697485+07:00 0HMT2TOL64LAD:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:17:22.3745710+07:00 0HMT2TOL64LAD:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:17:22.3760793+07:00 0HMT2TOL64LAD:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:17:22.3781266+07:00 0HMT2TOL64LAD:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:17:22.3801404+07:00 0HMT2TOL64LAD:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:17:22.6072485+07:00 0HMT2TOL64LAF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:17:22.6083753+07:00 0HMT2TOL64LAF:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:17:22.6126454+07:00 0HMT2TOL64LAF:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:17:22.6654309+07:00 0HMT2TOL64LAF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:17:22.6661050+07:00 0HMT2TOL64LAF:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:17:22.6674570+07:00 0HMT2TOL64LAF:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:17:24.8188834+07:00 0HMT2TOL64LAD:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:17:24.8196033+07:00 0HMT2TOL64LAD:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:17:24.8214327+07:00 0HMT2TOL64LAD:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:17:24.8232467+07:00 0HMT2TOL64LAD:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:17:24.8247940+07:00 0HMT2TOL64LAE:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:17:24.8256414+07:00 0HMT2TOL64LAE:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:17:24.8257368+07:00 0HMT2TOL64LAD:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T16:17:24.8269343+07:00 0HMT2TOL64LAD:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T16:17:24.8275375+07:00 0HMT2TOL64LAE:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:17:24.8283385+07:00 0HMT2TOL64LAD:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:17:24.8305426+07:00 0HMT2TOL64LAE:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T16:17:24.8309597+07:00 0HMT2TOL64LAD:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:17:24.8355398+07:00 0HMT2TOL64LAD:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:17:24.8371089+07:00 0HMT2TOL64LAD:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:17:24.8382390+07:00 0HMT2TOL64LAD:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:17:25.0358730+07:00 0HMT2TOL64LAG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:17:25.0366427+07:00 0HMT2TOL64LAG:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:17:25.0386577+07:00 0HMT2TOL64LAG:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:17:25.0548856+07:00 0HMT2TOL64LAG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:17:25.0558164+07:00 0HMT2TOL64LAG:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:17:25.0578304+07:00 0HMT2TOL64LAG:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:17:25.0610100+07:00 0HMT2TOL64LAG:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T16:17:25.1084681+07:00 0HMT2TOL64LAD:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:17:25.1085333+07:00 0HMT2TOL64LAE:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:17:25.1090058+07:00 0HMT2TOL64LAE:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:17:25.1090058+07:00 0HMT2TOL64LAD:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:17:25.1103517+07:00 0HMT2TOL64LAD:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:17:25.1103483+07:00 0HMT2TOL64LAE:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:17:25.1127666+07:00 0HMT2TOL64LAD:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:17:25.1127666+07:00 0HMT2TOL64LAE:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T16:17:25.1172976+07:00 0HMT2TOL64LAD:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T16:17:25.1186942+07:00 0HMT2TOL64LAD:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T16:17:25.1198319+07:00 0HMT2TOL64LAD:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:17:25.1210788+07:00 0HMT2TOL64LAD:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:17:25.1220338+07:00 0HMT2TOL64LAD:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:17:25.1230835+07:00 0HMT2TOL64LAD:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:17:25.1241766+07:00 0HMT2TOL64LAD:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:17:25.9346981+07:00 0HMT2TOL64LAD:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:17:25.9353184+07:00 0HMT2TOL64LAD:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:17:25.9368115+07:00 0HMT2TOL64LAD:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:17:25.9418359+07:00 0HMT2TOL64LAD:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T16:17:26.0368118+07:00 0HMT2TOL64LAD:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:17:26.0373226+07:00 0HMT2TOL64LAD:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:17:26.0387335+07:00 0HMT2TOL64LAD:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:17:26.0416043+07:00 0HMT2TOL64LAD:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:17:33.4704401+07:00 0HMT2TOL64LAD:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:17:33.4709879+07:00 0HMT2TOL64LAD:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:17:33.4727740+07:00 0HMT2TOL64LAD:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:17:33.4776095+07:00 0HMT2TOL64LAD:0000000B [INF] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-22T16:17:33.5281035+07:00 0HMT2TOL64LAD:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:17:33.5288102+07:00 0HMT2TOL64LAD:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:17:33.5307163+07:00 0HMT2TOL64LAD:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:17:33.5345877+07:00 0HMT2TOL64LAD:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:17:33.5387140+07:00 0HMT2TOL64LAD:0000000D [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-22T16:18:33.5949360+07:00 0HMT2TOL64LAG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:18:33.5956776+07:00 0HMT2TOL64LAG:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:18:33.6119518+07:00 0HMT2TOL64LAG:00000002 [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:18:33.7381019+07:00 0HMT2TOL64LAD:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:18:33.7391985+07:00 0HMT2TOL64LAD:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:18:33.7418795+07:00 0HMT2TOL64LAD:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:18:33.7464162+07:00 0HMT2TOL64LAE:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:18:33.7466591+07:00 0HMT2TOL64LAD:0000000F [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:18:33.7475004+07:00 0HMT2TOL64LAE:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:18:33.7499155+07:00 0HMT2TOL64LAE:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:18:33.7556277+07:00 0HMT2TOL64LAD:0000000F [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T16:18:33.7574276+07:00 0HMT2TOL64LAE:00000007 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T16:18:33.7589423+07:00 0HMT2TOL64LAD:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T16:18:33.7636882+07:00 0HMT2TOL64LAD:0000000F [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:18:33.7684835+07:00 0HMT2TOL64LAD:0000000F [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:18:33.7702604+07:00 0HMT2TOL64LAD:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:18:33.7838199+07:00 0HMT2TOL64LAD:0000000F [INF] Executed DbCommand ("12"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:18:33.7910668+07:00 0HMT2TOL64LAD:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:18:33.9631550+07:00 0HMT2TOL64LAH:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:18:33.9641987+07:00 0HMT2TOL64LAH:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:18:33.9679449+07:00 0HMT2TOL64LAH:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:18:33.9843563+07:00 0HMT2TOL64LAH:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:18:33.9852665+07:00 0HMT2TOL64LAH:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:18:33.9876587+07:00 0HMT2TOL64LAH:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:18:36.1766538+07:00 0HMT2TOL64LAD:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:18:36.1766927+07:00 0HMT2TOL64LAE:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:18:36.1771448+07:00 0HMT2TOL64LAE:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:18:36.1771443+07:00 0HMT2TOL64LAD:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:18:36.1789205+07:00 0HMT2TOL64LAE:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:18:36.1789204+07:00 0HMT2TOL64LAD:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:18:36.1826594+07:00 0HMT2TOL64LAE:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T16:18:36.1826619+07:00 0HMT2TOL64LAD:00000010 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:18:36.1979924+07:00 0HMT2TOL64LAD:00000010 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T16:18:36.2022020+07:00 0HMT2TOL64LAD:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T16:18:36.2034187+07:00 0HMT2TOL64LAD:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:18:36.2046833+07:00 0HMT2TOL64LAD:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:18:36.2058273+07:00 0HMT2TOL64LAD:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:18:36.2075297+07:00 0HMT2TOL64LAD:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:18:36.2089811+07:00 0HMT2TOL64LAD:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:18:36.2964088+07:00 0HMT2TOL64LAI:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:18:36.2970272+07:00 0HMT2TOL64LAI:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:18:36.2990896+07:00 0HMT2TOL64LAI:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:18:36.3156551+07:00 0HMT2TOL64LAI:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:18:36.3162394+07:00 0HMT2TOL64LAI:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:18:36.3177261+07:00 0HMT2TOL64LAI:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:18:36.3196753+07:00 0HMT2TOL64LAI:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T16:18:36.3467503+07:00 0HMT2TOL64LAD:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:18:36.3473377+07:00 0HMT2TOL64LAD:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:18:36.3480838+07:00 0HMT2TOL64LAE:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:18:36.3485292+07:00 0HMT2TOL64LAE:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:18:36.3488012+07:00 0HMT2TOL64LAD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:18:36.3501470+07:00 0HMT2TOL64LAE:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:18:36.3503251+07:00 0HMT2TOL64LAD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:18:36.3530285+07:00 0HMT2TOL64LAE:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T16:18:36.3554523+07:00 0HMT2TOL64LAD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T16:18:36.3568645+07:00 0HMT2TOL64LAD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T16:18:36.3583938+07:00 0HMT2TOL64LAD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:18:36.3617974+07:00 0HMT2TOL64LAD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:18:36.3630310+07:00 0HMT2TOL64LAD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:18:36.3642738+07:00 0HMT2TOL64LAD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:18:36.3657221+07:00 0HMT2TOL64LAD:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:18:39.1419103+07:00 0HMT2TOL64LAD:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:18:39.1426460+07:00 0HMT2TOL64LAD:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:18:39.1454729+07:00 0HMT2TOL64LAD:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:18:39.1500180+07:00 0HMT2TOL64LAD:00000013 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T16:18:39.3361967+07:00 0HMT2TOL64LAD:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:18:39.3367926+07:00 0HMT2TOL64LAD:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:18:39.3381779+07:00 0HMT2TOL64LAD:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:18:39.3421808+07:00 0HMT2TOL64LAD:00000015 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:18:54.3731823+07:00 0HMT2TOL64LAD:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:18:54.3738936+07:00 0HMT2TOL64LAD:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:18:54.3753425+07:00 0HMT2TOL64LAD:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:18:54.3775747+07:00 0HMT2TOL64LAD:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T16:18:54.6419669+07:00 0HMT2TOL64LAD:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:18:54.6425556+07:00 0HMT2TOL64LAD:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:18:54.6443710+07:00 0HMT2TOL64LAD:00000019 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:18:54.6462290+07:00 0HMT2TOL64LAD:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T16:18:55.1861563+07:00 0HMT2TOL64LAD:0000001B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:18:55.1869459+07:00 0HMT2TOL64LAD:0000001B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:18:55.1888390+07:00 0HMT2TOL64LAD:0000001B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:18:55.1908969+07:00 0HMT2TOL64LAD:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T16:18:55.2439872+07:00 0HMT2TOL64LAD:0000001D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:18:55.2445252+07:00 0HMT2TOL64LAD:0000001D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:18:55.2459368+07:00 0HMT2TOL64LAD:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:18:55.2479313+07:00 0HMT2TOL64LAD:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:19:00.9674948+07:00 0HMT2TOL64LAD:0000001F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:19:00.9679974+07:00 0HMT2TOL64LAD:0000001F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:19:00.9693338+07:00 0HMT2TOL64LAD:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:19:00.9712166+07:00 0HMT2TOL64LAD:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T16:19:01.2096242+07:00 0HMT2TOL64LAD:00000021 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:19:01.2102541+07:00 0HMT2TOL64LAD:00000021 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:19:01.2119842+07:00 0HMT2TOL64LAD:00000021 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:19:01.2142725+07:00 0HMT2TOL64LAD:00000021 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T16:19:01.2691351+07:00 0HMT2TOL64LAD:00000023 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:19:01.2697481+07:00 0HMT2TOL64LAD:00000023 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:19:01.2720241+07:00 0HMT2TOL64LAD:00000023 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:19:01.2746834+07:00 0HMT2TOL64LAD:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:19:01.7520214+07:00 0HMT2TOL64LAI:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:19:01.7526005+07:00 0HMT2TOL64LAI:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:19:01.7539639+07:00 0HMT2TOL64LAI:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:19:04.5717629+07:00 0HMT2TOL64LAD:00000027 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:19:04.5717630+07:00 0HMT2TOL64LAE:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:19:04.5723590+07:00 0HMT2TOL64LAE:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:19:04.5723671+07:00 0HMT2TOL64LAD:00000027 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:19:04.5869007+07:00 0HMT2TOL64LAE:0000000B [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:19:04.5914661+07:00 0HMT2TOL64LAD:00000027 [INF] Executed DbCommand ("19"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:19:04.5917423+07:00 0HMT2TOL64LAE:0000000B [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T16:19:04.5963133+07:00 0HMT2TOL64LAD:00000027 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:19:04.6010593+07:00 0HMT2TOL64LAD:00000027 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T16:19:04.6052879+07:00 0HMT2TOL64LAD:00000027 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T16:19:04.6083533+07:00 0HMT2TOL64LAD:00000027 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:19:04.6114413+07:00 0HMT2TOL64LAD:00000027 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:19:04.6125637+07:00 0HMT2TOL64LAD:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:19:04.6136151+07:00 0HMT2TOL64LAD:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:19:04.6146772+07:00 0HMT2TOL64LAD:00000027 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:19:04.6770070+07:00 0HMT2TOL64LAK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:19:04.6781671+07:00 0HMT2TOL64LAK:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:19:04.6800962+07:00 0HMT2TOL64LAK:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:19:04.7026180+07:00 0HMT2TOL64LAK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:19:04.7031570+07:00 0HMT2TOL64LAK:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:19:04.7050392+07:00 0HMT2TOL64LAK:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:19:04.7078451+07:00 0HMT2TOL64LAK:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T16:19:04.7239928+07:00 0HMT2TOL64LAD:00000028 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:19:04.7246104+07:00 0HMT2TOL64LAD:00000028 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:19:04.7255044+07:00 0HMT2TOL64LAE:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:19:04.7263450+07:00 0HMT2TOL64LAE:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:19:04.7272030+07:00 0HMT2TOL64LAD:00000028 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:19:04.7286770+07:00 0HMT2TOL64LAE:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:19:04.7289876+07:00 0HMT2TOL64LAD:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:19:04.7317496+07:00 0HMT2TOL64LAE:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T16:19:04.7330284+07:00 0HMT2TOL64LAD:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T16:19:04.7343187+07:00 0HMT2TOL64LAD:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T16:19:04.7359674+07:00 0HMT2TOL64LAD:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:19:04.7373576+07:00 0HMT2TOL64LAD:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:19:04.7388706+07:00 0HMT2TOL64LAD:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:19:04.7414547+07:00 0HMT2TOL64LAD:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:19:04.7429145+07:00 0HMT2TOL64LAD:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:19:06.3754345+07:00 0HMT2TOL64LAD:0000002A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:19:06.3761483+07:00 0HMT2TOL64LAD:0000002A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:19:06.3873701+07:00 0HMT2TOL64LAD:0000002A [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:19:06.3916650+07:00 0HMT2TOL64LAD:0000002A [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T16:19:06.5428138+07:00 0HMT2TOL64LAD:0000002C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:19:06.5439060+07:00 0HMT2TOL64LAD:0000002C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:19:06.5537228+07:00 0HMT2TOL64LAD:0000002C [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:19:06.5571480+07:00 0HMT2TOL64LAD:0000002C [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:20:42.2570450+07:00 0HMT2TOL64LAK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:20:42.2605506+07:00 0HMT2TOL64LAK:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:20:42.2791804+07:00 0HMT2TOL64LAK:00000002 [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:20:42.3622500+07:00 0HMT2TOL64LAD:0000002E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:20:42.3629342+07:00 0HMT2TOL64LAD:0000002E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:20:42.3654302+07:00 0HMT2TOL64LAD:0000002E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:20:42.3706528+07:00 0HMT2TOL64LAD:0000002E [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:20:42.3750513+07:00 0HMT2TOL64LAE:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:20:42.3756776+07:00 0HMT2TOL64LAE:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:20:42.3764784+07:00 0HMT2TOL64LAD:0000002E [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T16:20:42.3777405+07:00 0HMT2TOL64LAE:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:20:42.3801331+07:00 0HMT2TOL64LAD:0000002E [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T16:20:42.3830249+07:00 0HMT2TOL64LAE:0000000E [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T16:20:42.3851042+07:00 0HMT2TOL64LAD:0000002E [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:20:42.3881421+07:00 0HMT2TOL64LAD:0000002E [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:20:42.3897942+07:00 0HMT2TOL64LAD:0000002E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:20:42.3916212+07:00 0HMT2TOL64LAD:0000002E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:20:42.3930949+07:00 0HMT2TOL64LAD:0000002E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:20:42.4842061+07:00 0HMT2TOL64LAL:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:20:42.4852762+07:00 0HMT2TOL64LAL:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:20:42.4870369+07:00 0HMT2TOL64LAL:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:20:42.5325828+07:00 0HMT2TOL64LAL:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:20:42.5335611+07:00 0HMT2TOL64LAL:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:20:42.5355640+07:00 0HMT2TOL64LAL:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:20:45.8094238+07:00 0HMT2TOL64LAD:0000002F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:20:45.8094887+07:00 0HMT2TOL64LAE:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:20:45.8100997+07:00 0HMT2TOL64LAD:0000002F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:20:45.8101092+07:00 0HMT2TOL64LAE:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:20:45.8116719+07:00 0HMT2TOL64LAE:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:20:45.8116810+07:00 0HMT2TOL64LAD:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:20:45.8145709+07:00 0HMT2TOL64LAD:0000002F [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:20:45.8146507+07:00 0HMT2TOL64LAE:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T16:20:45.8190022+07:00 0HMT2TOL64LAD:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T16:20:45.8207451+07:00 0HMT2TOL64LAD:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T16:20:45.8224908+07:00 0HMT2TOL64LAD:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:20:45.8241677+07:00 0HMT2TOL64LAD:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:20:45.8273680+07:00 0HMT2TOL64LAD:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:20:45.8310379+07:00 0HMT2TOL64LAD:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:20:45.8334842+07:00 0HMT2TOL64LAD:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:20:45.9797911+07:00 0HMT2TOL64LAM:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:20:45.9803812+07:00 0HMT2TOL64LAM:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:20:45.9819664+07:00 0HMT2TOL64LAM:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:20:45.9989133+07:00 0HMT2TOL64LAM:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:20:45.9995930+07:00 0HMT2TOL64LAM:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:20:46.0018704+07:00 0HMT2TOL64LAM:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:20:46.0067316+07:00 0HMT2TOL64LAM:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T16:20:46.0339242+07:00 0HMT2TOL64LAE:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:20:46.0339241+07:00 0HMT2TOL64LAD:00000030 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:20:46.0345672+07:00 0HMT2TOL64LAE:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:20:46.0345672+07:00 0HMT2TOL64LAD:00000030 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:20:46.0364558+07:00 0HMT2TOL64LAD:00000030 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:20:46.0364561+07:00 0HMT2TOL64LAE:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:20:46.0388665+07:00 0HMT2TOL64LAD:00000030 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:20:46.0388663+07:00 0HMT2TOL64LAE:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T16:20:46.0438230+07:00 0HMT2TOL64LAD:00000030 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T16:20:46.0453982+07:00 0HMT2TOL64LAD:00000030 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T16:20:46.0465646+07:00 0HMT2TOL64LAD:00000030 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:20:46.0477792+07:00 0HMT2TOL64LAD:00000030 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:20:46.0488871+07:00 0HMT2TOL64LAD:00000030 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:20:46.0500947+07:00 0HMT2TOL64LAD:00000030 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:20:46.0515646+07:00 0HMT2TOL64LAD:00000030 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:20:46.5959361+07:00 0HMT2TOL64LAD:00000032 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:20:46.5965421+07:00 0HMT2TOL64LAD:00000032 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:20:46.5981196+07:00 0HMT2TOL64LAD:00000032 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:20:46.6026123+07:00 0HMT2TOL64LAD:00000032 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T16:20:46.7224892+07:00 0HMT2TOL64LAD:00000034 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:20:46.7231264+07:00 0HMT2TOL64LAD:00000034 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:20:46.7248925+07:00 0HMT2TOL64LAD:00000034 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:20:46.7280892+07:00 0HMT2TOL64LAD:00000034 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:21:06.5797859+07:00 0HMT2TOL64LAM:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:21:06.5807033+07:00 0HMT2TOL64LAM:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:21:06.5833773+07:00 0HMT2TOL64LAM:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:21:06.6689535+07:00 0HMT2TOL64LAD:00000037 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:21:06.6695250+07:00 0HMT2TOL64LAD:00000037 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:21:06.6708277+07:00 0HMT2TOL64LAE:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:21:06.6713767+07:00 0HMT2TOL64LAD:00000037 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:21:06.6713775+07:00 0HMT2TOL64LAE:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:21:06.6732043+07:00 0HMT2TOL64LAD:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:21:06.6736073+07:00 0HMT2TOL64LAE:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:21:06.6775540+07:00 0HMT2TOL64LAE:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T16:21:06.6784797+07:00 0HMT2TOL64LAD:00000037 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T16:21:06.6920877+07:00 0HMT2TOL64LAD:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T16:21:06.6935858+07:00 0HMT2TOL64LAD:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:21:06.6951120+07:00 0HMT2TOL64LAD:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:21:06.6966313+07:00 0HMT2TOL64LAD:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:21:06.6980423+07:00 0HMT2TOL64LAD:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:21:06.6990779+07:00 0HMT2TOL64LAD:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:21:06.8073303+07:00 0HMT2TOL64LAN:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:21:06.8083791+07:00 0HMT2TOL64LAN:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:21:06.8121174+07:00 0HMT2TOL64LAN:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:21:06.8245400+07:00 0HMT2TOL64LAN:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:21:06.8254906+07:00 0HMT2TOL64LAN:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:21:06.8276825+07:00 0HMT2TOL64LAN:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:21:09.2009649+07:00 0HMT2TOL64LAD:00000038 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:21:09.2012407+07:00 0HMT2TOL64LAE:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:21:09.2014483+07:00 0HMT2TOL64LAD:00000038 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:21:09.2015413+07:00 0HMT2TOL64LAE:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:21:09.2027422+07:00 0HMT2TOL64LAE:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:21:09.2027422+07:00 0HMT2TOL64LAD:00000038 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:21:09.2039066+07:00 0HMT2TOL64LAD:00000038 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:21:09.2039065+07:00 0HMT2TOL64LAE:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T16:21:09.2084177+07:00 0HMT2TOL64LAD:00000038 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T16:21:09.2100746+07:00 0HMT2TOL64LAD:00000038 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T16:21:09.2112146+07:00 0HMT2TOL64LAD:00000038 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:21:09.2123355+07:00 0HMT2TOL64LAD:00000038 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:21:09.2132391+07:00 0HMT2TOL64LAD:00000038 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:21:09.2142675+07:00 0HMT2TOL64LAD:00000038 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:21:09.2151084+07:00 0HMT2TOL64LAD:00000038 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:21:09.2647133+07:00 0HMT2TOL64LAO:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:21:09.2653902+07:00 0HMT2TOL64LAO:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:21:09.2667504+07:00 0HMT2TOL64LAO:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:21:09.2671892+07:00 0HMT2TOL64LAO:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:21:09.2674699+07:00 0HMT2TOL64LAO:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:21:09.2685954+07:00 0HMT2TOL64LAO:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:21:09.2697203+07:00 0HMT2TOL64LAO:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T16:21:09.2970662+07:00 0HMT2TOL64LAD:00000039 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:21:09.2976868+07:00 0HMT2TOL64LAD:00000039 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:21:09.2993511+07:00 0HMT2TOL64LAD:00000039 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:21:09.2998017+07:00 0HMT2TOL64LAE:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:21:09.3005038+07:00 0HMT2TOL64LAE:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:21:09.3010085+07:00 0HMT2TOL64LAD:00000039 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:21:09.3031751+07:00 0HMT2TOL64LAE:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:21:09.3059560+07:00 0HMT2TOL64LAD:00000039 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T16:21:09.3059154+07:00 0HMT2TOL64LAE:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T16:21:09.3082300+07:00 0HMT2TOL64LAD:00000039 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T16:21:09.3095011+07:00 0HMT2TOL64LAD:00000039 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:21:09.3109827+07:00 0HMT2TOL64LAD:00000039 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:21:09.3122415+07:00 0HMT2TOL64LAD:00000039 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:21:09.3134265+07:00 0HMT2TOL64LAD:00000039 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T16:21:09.3145631+07:00 0HMT2TOL64LAD:00000039 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T16:21:10.0944729+07:00 0HMT2TOL64LAD:0000003B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:21:10.0951259+07:00 0HMT2TOL64LAD:0000003B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:21:10.0967163+07:00 0HMT2TOL64LAD:0000003B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:21:10.0988885+07:00 0HMT2TOL64LAD:0000003B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T16:21:11.1180555+07:00 0HMT2TOL64LAD:0000003D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:21:11.1193084+07:00 0HMT2TOL64LAD:0000003D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:21:11.1223434+07:00 0HMT2TOL64LAD:0000003D [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:21:11.1250252+07:00 0HMT2TOL64LAD:0000003D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:22:48.6230176+07:00 0HMT2TOL64LAD:0000003F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:22:48.6237298+07:00 0HMT2TOL64LAD:0000003F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:22:48.6335247+07:00 0HMT2TOL64LAD:0000003F [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:22:48.6374157+07:00 0HMT2TOL64LAD:0000003F [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-22T16:22:48.6949687+07:00 0HMT2TOL64LAD:00000041 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:22:48.6955635+07:00 0HMT2TOL64LAD:00000041 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:22:48.6971291+07:00 0HMT2TOL64LAD:00000041 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:22:48.7012034+07:00 0HMT2TOL64LAD:00000041 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:22:48.7045830+07:00 0HMT2TOL64LAD:00000041 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-22T16:23:03.5741457+07:00 0HMT2TOL64LAD:00000043 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:23:03.5748475+07:00 0HMT2TOL64LAD:00000043 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:23:03.5769912+07:00 0HMT2TOL64LAD:00000043 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:23:03.5803017+07:00 0HMT2TOL64LAD:00000043 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-22T16:23:03.7340312+07:00 0HMT2TOL64LAD:00000045 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:23:03.7346440+07:00 0HMT2TOL64LAD:00000045 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:23:03.7366205+07:00 0HMT2TOL64LAD:00000045 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:23:03.7392145+07:00 0HMT2TOL64LAD:00000045 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:23:03.7412784+07:00 0HMT2TOL64LAD:00000045 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-22T16:23:20.8677120+07:00 0HMT2TOL64LAD:00000047 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:23:20.8681872+07:00 0HMT2TOL64LAD:00000047 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:23:20.8695012+07:00 0HMT2TOL64LAD:00000047 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:23:20.8711576+07:00 0HMT2TOL64LAD:00000047 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-22T16:23:20.9903978+07:00 0HMT2TOL64LAD:00000049 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T16:23:20.9913132+07:00 0HMT2TOL64LAD:00000049 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T16:23:20.9936584+07:00 0HMT2TOL64LAD:00000049 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T16:23:20.9967360+07:00 0HMT2TOL64LAD:00000049 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T16:23:20.9992209+07:00 0HMT2TOL64LAD:00000049 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-22T17:33:52.1543984+07:00 0HMT2TOL64LAO:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:33:52.1587541+07:00 0HMT2TOL64LAO:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:33:52.1701642+07:00 0HMT2TOL64LAO:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:33:52.3205467+07:00 0HMT2TOL64LAP:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:33:52.3210865+07:00 0HMT2TOL64LAP:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:33:52.3228746+07:00 0HMT2TOL64LAP:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:33:52.3279124+07:00 0HMT2TOL64LAQ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:33:52.3289251+07:00 0HMT2TOL64LAP:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:33:52.3322103+07:00 0HMT2TOL64LAQ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:33:52.3336084+07:00 0HMT2TOL64LAP:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:33:52.3340160+07:00 0HMT2TOL64LAQ:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:33:52.3366064+07:00 0HMT2TOL64LAP:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:33:52.3389382+07:00 0HMT2TOL64LAQ:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:33:52.3401710+07:00 0HMT2TOL64LAP:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:33:52.3416114+07:00 0HMT2TOL64LAP:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:33:52.3425940+07:00 0HMT2TOL64LAP:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:33:52.3434807+07:00 0HMT2TOL64LAP:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:33:52.3443374+07:00 0HMT2TOL64LAP:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:33:54.3590905+07:00 0HMT2TOL64LAP:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:33:54.3598436+07:00 0HMT2TOL64LAP:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:33:54.3619962+07:00 0HMT2TOL64LAP:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:33:54.3641226+07:00 0HMT2TOL64LAP:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:33:54.3666902+07:00 0HMT2TOL64LAP:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:33:54.3683583+07:00 0HMT2TOL64LAP:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:33:54.3695992+07:00 0HMT2TOL64LAP:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:33:54.3707123+07:00 0HMT2TOL64LAQ:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:33:54.3713290+07:00 0HMT2TOL64LAP:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:33:54.3717417+07:00 0HMT2TOL64LAQ:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:33:54.3726034+07:00 0HMT2TOL64LAP:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:33:54.3740222+07:00 0HMT2TOL64LAP:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:33:54.3742089+07:00 0HMT2TOL64LAQ:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:33:54.3754164+07:00 0HMT2TOL64LAP:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:33:54.3802309+07:00 0HMT2TOL64LAQ:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:33:54.4524655+07:00 0HMT2TOL64LAR:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:33:54.4533360+07:00 0HMT2TOL64LAR:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:33:54.4553038+07:00 0HMT2TOL64LAR:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:33:54.6233552+07:00 0HMT2TOL64LAR:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:33:54.6240232+07:00 0HMT2TOL64LAR:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:33:54.6255024+07:00 0HMT2TOL64LAR:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:33:54.6274667+07:00 0HMT2TOL64LAR:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T17:33:54.6579886+07:00 0HMT2TOL64LAP:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:33:54.6588279+07:00 0HMT2TOL64LAP:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:33:54.6608936+07:00 0HMT2TOL64LAP:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:33:54.6630519+07:00 0HMT2TOL64LAP:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:33:54.6649559+07:00 0HMT2TOL64LAP:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:33:54.6652111+07:00 0HMT2TOL64LAQ:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:33:54.6657566+07:00 0HMT2TOL64LAQ:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:33:54.6659194+07:00 0HMT2TOL64LAP:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:33:54.6667074+07:00 0HMT2TOL64LAP:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:33:54.6676577+07:00 0HMT2TOL64LAQ:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:33:54.6677956+07:00 0HMT2TOL64LAP:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:33:54.6689176+07:00 0HMT2TOL64LAQ:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:33:54.6697599+07:00 0HMT2TOL64LAP:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:33:54.6771375+07:00 0HMT2TOL64LAP:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:33:54.6783635+07:00 0HMT2TOL64LAP:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:34:29.7352963+07:00 0HMT2TOL64LAP:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:34:29.7358827+07:00 0HMT2TOL64LAP:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:34:29.7490907+07:00 0HMT2TOL64LAP:00000009 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:34:29.7530149+07:00 0HMT2TOL64LAP:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T17:34:37.2434459+07:00 0HMT2TOL64LAP:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:34:37.2439259+07:00 0HMT2TOL64LAP:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:34:37.2453268+07:00 0HMT2TOL64LAP:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:34:37.2489379+07:00 0HMT2TOL64LAP:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-22T17:34:37.3060029+07:00 0HMT2TOL64LAP:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:34:37.3065970+07:00 0HMT2TOL64LAP:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:34:37.3082292+07:00 0HMT2TOL64LAP:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:34:37.3121214+07:00 0HMT2TOL64LAP:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T17:34:37.3157655+07:00 0HMT2TOL64LAP:0000000D [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-22T17:35:24.7198312+07:00 0HMT2TOL64LAR:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:35:24.7206526+07:00 0HMT2TOL64LAR:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:35:24.7296474+07:00 0HMT2TOL64LAR:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:35:26.9581797+07:00 0HMT2TOL64LAP:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:35:26.9596103+07:00 0HMT2TOL64LAP:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:35:26.9619917+07:00 0HMT2TOL64LAP:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:35:26.9662910+07:00 0HMT2TOL64LAP:0000000F [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:35:26.9666304+07:00 0HMT2TOL64LAQ:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:35:26.9672602+07:00 0HMT2TOL64LAQ:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:35:26.9693811+07:00 0HMT2TOL64LAQ:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:35:26.9741206+07:00 0HMT2TOL64LAP:0000000F [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:35:26.9782909+07:00 0HMT2TOL64LAP:0000000F [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:35:26.9799584+07:00 0HMT2TOL64LAQ:00000007 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:35:26.9841204+07:00 0HMT2TOL64LAP:0000000F [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:35:27.0188601+07:00 0HMT2TOL64LAP:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:35:27.0206042+07:00 0HMT2TOL64LAP:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:35:27.0217458+07:00 0HMT2TOL64LAP:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:35:27.0227863+07:00 0HMT2TOL64LAP:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:35:27.1106884+07:00 0HMT2TOL64LAS:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:35:27.1114086+07:00 0HMT2TOL64LAS:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:35:27.1141158+07:00 0HMT2TOL64LAS:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:35:27.1501431+07:00 0HMT2TOL64LAS:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:35:27.1509498+07:00 0HMT2TOL64LAS:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:35:27.1523606+07:00 0HMT2TOL64LAS:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:35:27.1544472+07:00 0HMT2TOL64LAS:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T17:35:27.1889110+07:00 0HMT2TOL64LAP:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:35:27.1896344+07:00 0HMT2TOL64LAP:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:35:27.1916285+07:00 0HMT2TOL64LAP:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:35:27.1931320+07:00 0HMT2TOL64LAP:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:35:27.1952699+07:00 0HMT2TOL64LAP:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:35:27.1961299+07:00 0HMT2TOL64LAP:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:35:27.1969967+07:00 0HMT2TOL64LAP:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:35:27.1979662+07:00 0HMT2TOL64LAP:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:35:27.1995048+07:00 0HMT2TOL64LAP:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:35:27.2003742+07:00 0HMT2TOL64LAQ:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:35:27.2011154+07:00 0HMT2TOL64LAP:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:35:27.2014252+07:00 0HMT2TOL64LAQ:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:35:27.2026294+07:00 0HMT2TOL64LAP:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:35:27.2035657+07:00 0HMT2TOL64LAQ:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:35:27.2052714+07:00 0HMT2TOL64LAQ:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:36:10.9941436+07:00 0HMT2TOL64LAP:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:36:10.9946828+07:00 0HMT2TOL64LAP:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:36:10.9960337+07:00 0HMT2TOL64LAP:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:36:10.9993901+07:00 0HMT2TOL64LAP:00000012 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T17:36:33.6255944+07:00 0HMT2TOL64LAP:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:36:33.6262285+07:00 0HMT2TOL64LAP:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:36:33.6347656+07:00 0HMT2TOL64LAP:00000014 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:36:33.6383636+07:00 0HMT2TOL64LAP:00000014 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-22T17:36:33.6963772+07:00 0HMT2TOL64LAP:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:36:33.6970693+07:00 0HMT2TOL64LAP:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:36:33.6991801+07:00 0HMT2TOL64LAP:00000016 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:36:33.7030344+07:00 0HMT2TOL64LAP:00000016 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T17:36:33.7084388+07:00 0HMT2TOL64LAP:00000016 [INF] Executed DbCommand ("4"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-22T17:38:47.7007729+07:00 0HMT2TOL64LAT:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:38:47.7014583+07:00 0HMT2TOL64LAT:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:38:47.7120098+07:00 0HMT2TOL64LAT:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:38:47.7168614+07:00 0HMT2TOL64LAT:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T17:38:47.8994590+07:00 0HMT2TOL64LAT:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:38:47.9001306+07:00 0HMT2TOL64LAT:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:38:47.9016924+07:00 0HMT2TOL64LAT:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:38:47.9038926+07:00 0HMT2TOL64LAT:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T17:38:48.6830283+07:00 0HMT2TOL64LAT:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:38:48.6835852+07:00 0HMT2TOL64LAT:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:38:48.6849212+07:00 0HMT2TOL64LAT:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:38:48.6867458+07:00 0HMT2TOL64LAT:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T17:38:48.7261930+07:00 0HMT2TOL64LAT:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:38:48.7267685+07:00 0HMT2TOL64LAT:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:38:48.7285681+07:00 0HMT2TOL64LAT:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:38:48.7324644+07:00 0HMT2TOL64LAT:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T17:39:05.1216870+07:00 0HMT2TOL64LAS:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:39:05.1223750+07:00 0HMT2TOL64LAS:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:39:05.1238855+07:00 0HMT2TOL64LAS:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:39:07.5990650+07:00 0HMT2TOL64LAT:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:39:07.5997143+07:00 0HMT2TOL64LAT:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:39:07.6025915+07:00 0HMT2TOL64LAV:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:39:07.6027601+07:00 0HMT2TOL64LAT:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:39:07.6037000+07:00 0HMT2TOL64LAV:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:39:07.6066366+07:00 0HMT2TOL64LAV:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:39:07.6095597+07:00 0HMT2TOL64LAT:0000000B [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:39:07.6114294+07:00 0HMT2TOL64LAV:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:39:07.6160532+07:00 0HMT2TOL64LAT:0000000B [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:39:07.6203759+07:00 0HMT2TOL64LAT:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:39:07.6243721+07:00 0HMT2TOL64LAT:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:39:07.6257419+07:00 0HMT2TOL64LAT:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:39:07.6267883+07:00 0HMT2TOL64LAT:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:39:07.6289596+07:00 0HMT2TOL64LAT:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:39:07.6315357+07:00 0HMT2TOL64LAT:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:39:07.6721976+07:00 0HMT2TOL64LAU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:39:07.6738659+07:00 0HMT2TOL64LAU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:39:07.6774699+07:00 0HMT2TOL64LAU:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:39:07.7059962+07:00 0HMT2TOL64LAU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:39:07.7066061+07:00 0HMT2TOL64LAU:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:39:07.7097838+07:00 0HMT2TOL64LAU:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:39:07.7141464+07:00 0HMT2TOL64LAU:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T17:39:07.7593711+07:00 0HMT2TOL64LAT:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:39:07.7593923+07:00 0HMT2TOL64LAV:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:39:07.7623816+07:00 0HMT2TOL64LAV:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:39:07.7623815+07:00 0HMT2TOL64LAT:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:39:07.7647095+07:00 0HMT2TOL64LAV:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:39:07.7647095+07:00 0HMT2TOL64LAT:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:39:07.7669916+07:00 0HMT2TOL64LAT:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:39:07.7693327+07:00 0HMT2TOL64LAV:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:39:07.7857891+07:00 0HMT2TOL64LAT:0000000C [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:39:07.7869558+07:00 0HMT2TOL64LAT:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:39:07.7892246+07:00 0HMT2TOL64LAT:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:39:07.7917337+07:00 0HMT2TOL64LAT:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:39:07.7933919+07:00 0HMT2TOL64LAT:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:39:07.7945422+07:00 0HMT2TOL64LAT:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:39:07.7954628+07:00 0HMT2TOL64LAT:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:39:09.1209437+07:00 0HMT2TOL64LAT:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:39:09.1218477+07:00 0HMT2TOL64LAT:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:39:09.1234797+07:00 0HMT2TOL64LAT:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:39:09.1262829+07:00 0HMT2TOL64LAT:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T17:39:17.2918829+07:00 0HMT2TOL64LAT:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:39:17.2924460+07:00 0HMT2TOL64LAT:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:39:17.2938215+07:00 0HMT2TOL64LAT:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:39:17.2969046+07:00 0HMT2TOL64LAT:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-22T17:39:17.3425607+07:00 0HMT2TOL64LAT:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:39:17.3432502+07:00 0HMT2TOL64LAT:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:39:17.3450784+07:00 0HMT2TOL64LAT:00000012 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:39:17.3475060+07:00 0HMT2TOL64LAT:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T17:39:17.3508476+07:00 0HMT2TOL64LAT:00000012 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-22T17:40:28.9869057+07:00 0HMT2TOL64LAU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:40:28.9959520+07:00 0HMT2TOL64LAU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:40:29.0111963+07:00 0HMT2TOL64LAU:00000002 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:40:31.6260452+07:00 0HMT2TOL64LAT:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:40:31.6268929+07:00 0HMT2TOL64LAT:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:40:31.6270644+07:00 0HMT2TOL64LAV:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:40:31.6275157+07:00 0HMT2TOL64LAV:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:40:31.6286828+07:00 0HMT2TOL64LAT:00000017 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:40:31.6288692+07:00 0HMT2TOL64LAV:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:40:31.6336376+07:00 0HMT2TOL64LAT:00000017 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:40:31.6336377+07:00 0HMT2TOL64LAV:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:40:31.6402964+07:00 0HMT2TOL64LAT:00000017 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:40:31.6427279+07:00 0HMT2TOL64LAT:00000017 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T17:40:31.6458261+07:00 0HMT2TOL64LAT:00000017 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:40:31.6499950+07:00 0HMT2TOL64LAT:00000017 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:40:31.6516595+07:00 0HMT2TOL64LAT:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:40:31.6541541+07:00 0HMT2TOL64LAT:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:40:31.6557199+07:00 0HMT2TOL64LAT:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:40:31.8618121+07:00 0HMT2TOL64LB0:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:40:31.8631264+07:00 0HMT2TOL64LB0:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:40:31.8664041+07:00 0HMT2TOL64LB0:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:40:31.9052789+07:00 0HMT2TOL64LB0:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:40:31.9062269+07:00 0HMT2TOL64LB0:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:40:31.9082311+07:00 0HMT2TOL64LB0:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:40:31.9104081+07:00 0HMT2TOL64LB0:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T17:40:31.9673530+07:00 0HMT2TOL64LAT:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:40:31.9680506+07:00 0HMT2TOL64LAT:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:40:31.9697008+07:00 0HMT2TOL64LAT:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:40:31.9718166+07:00 0HMT2TOL64LAT:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:40:31.9731733+07:00 0HMT2TOL64LAV:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:40:31.9739173+07:00 0HMT2TOL64LAV:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:40:31.9741207+07:00 0HMT2TOL64LAT:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:40:31.9753909+07:00 0HMT2TOL64LAT:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T17:40:31.9759438+07:00 0HMT2TOL64LAV:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:40:31.9768737+07:00 0HMT2TOL64LAT:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:40:31.9783769+07:00 0HMT2TOL64LAV:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:40:31.9808300+07:00 0HMT2TOL64LAT:00000018 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:40:31.9825428+07:00 0HMT2TOL64LAT:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:40:31.9839794+07:00 0HMT2TOL64LAT:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:40:31.9850148+07:00 0HMT2TOL64LAT:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:40:40.4627456+07:00 0HMT2TOL64LAT:0000001A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:40:40.4634030+07:00 0HMT2TOL64LAT:0000001A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:40:40.4649499+07:00 0HMT2TOL64LAT:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:40:40.4681370+07:00 0HMT2TOL64LAT:0000001A [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T17:42:37.0337624+07:00 0HMT2TOL64LB0:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:42:37.0343273+07:00 0HMT2TOL64LB0:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:42:37.0439611+07:00 0HMT2TOL64LB0:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:42:37.1022419+07:00 0HMT2TOL64LB2:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:42:37.1031313+07:00 0HMT2TOL64LB2:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:42:37.1046402+07:00 0HMT2TOL64LB2:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:42:37.1080438+07:00 0HMT2TOL64LB1:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:42:37.1088991+07:00 0HMT2TOL64LB1:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:42:37.1106855+07:00 0HMT2TOL64LB2:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:42:37.1108435+07:00 0HMT2TOL64LB1:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:42:37.1160028+07:00 0HMT2TOL64LB1:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:42:37.1233874+07:00 0HMT2TOL64LB1:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:42:37.1265621+07:00 0HMT2TOL64LB1:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:42:37.1301864+07:00 0HMT2TOL64LB1:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:42:37.1320804+07:00 0HMT2TOL64LB1:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:42:37.1338136+07:00 0HMT2TOL64LB1:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:42:37.1362431+07:00 0HMT2TOL64LB1:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:42:37.1391978+07:00 0HMT2TOL64LB1:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:42:39.0672083+07:00 0HMT2TOL64LB2:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:42:39.0672083+07:00 0HMT2TOL64LB1:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:42:39.0682857+07:00 0HMT2TOL64LB2:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:42:39.0682853+07:00 0HMT2TOL64LB1:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:42:39.0704178+07:00 0HMT2TOL64LB2:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:42:39.0704419+07:00 0HMT2TOL64LB1:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:42:39.0747130+07:00 0HMT2TOL64LB1:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:42:39.0761691+07:00 0HMT2TOL64LB2:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:42:39.0910110+07:00 0HMT2TOL64LB1:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:42:39.0920494+07:00 0HMT2TOL64LB3:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:42:39.0931351+07:00 0HMT2TOL64LB3:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:42:39.0931068+07:00 0HMT2TOL64LB1:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:42:39.0948529+07:00 0HMT2TOL64LB1:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:42:39.0954100+07:00 0HMT2TOL64LB3:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:42:39.0964446+07:00 0HMT2TOL64LB1:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:42:39.0967081+07:00 0HMT2TOL64LB3:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:42:39.0974819+07:00 0HMT2TOL64LB3:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:42:39.0975429+07:00 0HMT2TOL64LB1:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:42:39.0985873+07:00 0HMT2TOL64LB1:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:42:39.1002776+07:00 0HMT2TOL64LB3:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:42:39.1004434+07:00 0HMT2TOL64LB1:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:42:39.1029314+07:00 0HMT2TOL64LB3:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T17:42:39.1389428+07:00 0HMT2TOL64LB1:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:42:39.1397181+07:00 0HMT2TOL64LB1:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:42:39.1414329+07:00 0HMT2TOL64LB1:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:42:39.1418073+07:00 0HMT2TOL64LB2:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:42:39.1424928+07:00 0HMT2TOL64LB2:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:42:39.1428902+07:00 0HMT2TOL64LB1:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:42:39.1444307+07:00 0HMT2TOL64LB2:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:42:39.1489324+07:00 0HMT2TOL64LB1:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:42:39.1566739+07:00 0HMT2TOL64LB2:00000005 [INF] Executed DbCommand ("11"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:42:39.2026103+07:00 0HMT2TOL64LB1:00000005 [INF] Executed DbCommand ("45"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:42:39.2045019+07:00 0HMT2TOL64LB1:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:42:39.2057327+07:00 0HMT2TOL64LB1:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:42:39.2067920+07:00 0HMT2TOL64LB1:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:42:39.2083922+07:00 0HMT2TOL64LB1:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:42:39.2097004+07:00 0HMT2TOL64LB1:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:42:40.4792256+07:00 0HMT2TOL64LB1:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:42:40.4801685+07:00 0HMT2TOL64LB1:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:42:40.4823528+07:00 0HMT2TOL64LB1:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:42:40.4862530+07:00 0HMT2TOL64LB1:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T17:45:44.8897732+07:00 0HMT2TOL64LB3:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:45:44.8935149+07:00 0HMT2TOL64LB3:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:45:44.9060550+07:00 0HMT2TOL64LB3:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:45:45.0065095+07:00 0HMT2TOL64LB4:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:45:45.0073033+07:00 0HMT2TOL64LB4:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:45:45.0090011+07:00 0HMT2TOL64LB5:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:45:45.0094182+07:00 0HMT2TOL64LB4:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:45:45.0096034+07:00 0HMT2TOL64LB5:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:45:45.0117198+07:00 0HMT2TOL64LB5:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:45:45.0149984+07:00 0HMT2TOL64LB4:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:45:45.0172677+07:00 0HMT2TOL64LB5:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:45:45.0220299+07:00 0HMT2TOL64LB4:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:45:45.0242872+07:00 0HMT2TOL64LB4:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:45:45.0270046+07:00 0HMT2TOL64LB4:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:45:45.0284574+07:00 0HMT2TOL64LB4:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:45:45.0302801+07:00 0HMT2TOL64LB4:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:45:45.0318439+07:00 0HMT2TOL64LB4:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:45:45.0351237+07:00 0HMT2TOL64LB4:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:45:46.9025514+07:00 0HMT2TOL64LB4:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:45:46.9031759+07:00 0HMT2TOL64LB4:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:45:46.9048108+07:00 0HMT2TOL64LB4:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:45:46.9069042+07:00 0HMT2TOL64LB4:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:45:46.9123847+07:00 0HMT2TOL64LB4:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:45:46.9131346+07:00 0HMT2TOL64LB4:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:45:46.9153299+07:00 0HMT2TOL64LB4:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:45:46.9171651+07:00 0HMT2TOL64LB4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:45:46.9198231+07:00 0HMT2TOL64LB4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:45:46.9210530+07:00 0HMT2TOL64LB4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:45:46.9221735+07:00 0HMT2TOL64LB4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:45:46.9243009+07:00 0HMT2TOL64LB4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:45:46.9263039+07:00 0HMT2TOL64LB4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:45:46.9308669+07:00 0HMT2TOL64LB4:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:45:46.9329550+07:00 0HMT2TOL64LB4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:45:47.0404017+07:00 0HMT2TOL64LB7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:45:47.0410278+07:00 0HMT2TOL64LB7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:45:47.0424589+07:00 0HMT2TOL64LB7:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:45:47.0705140+07:00 0HMT2TOL64LB7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:45:47.0714175+07:00 0HMT2TOL64LB7:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:45:47.0733836+07:00 0HMT2TOL64LB7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:45:47.0762416+07:00 0HMT2TOL64LB7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T17:45:47.1048506+07:00 0HMT2TOL64LB4:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:45:47.1049255+07:00 0HMT2TOL64LB5:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:45:47.1053494+07:00 0HMT2TOL64LB5:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:45:47.1053496+07:00 0HMT2TOL64LB4:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:45:47.1066479+07:00 0HMT2TOL64LB5:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:45:47.1066467+07:00 0HMT2TOL64LB4:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:45:47.1080509+07:00 0HMT2TOL64LB5:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:45:47.1080528+07:00 0HMT2TOL64LB4:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:45:47.1124155+07:00 0HMT2TOL64LB4:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:45:47.1137295+07:00 0HMT2TOL64LB4:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:45:47.1150421+07:00 0HMT2TOL64LB4:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:45:47.1161731+07:00 0HMT2TOL64LB4:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:45:47.1170847+07:00 0HMT2TOL64LB4:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:45:47.1181688+07:00 0HMT2TOL64LB4:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:45:47.1191413+07:00 0HMT2TOL64LB4:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:45:49.7072737+07:00 0HMT2TOL64LB4:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:45:49.7081004+07:00 0HMT2TOL64LB4:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:45:49.7097834+07:00 0HMT2TOL64LB4:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:45:49.7137480+07:00 0HMT2TOL64LB4:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T17:46:01.3771773+07:00 0HMT2TOL64LB7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:46:01.3776976+07:00 0HMT2TOL64LB7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:46:01.3791208+07:00 0HMT2TOL64LB7:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:46:01.4248006+07:00 0HMT2TOL64LB4:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:46:01.4253746+07:00 0HMT2TOL64LB4:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:46:01.4269326+07:00 0HMT2TOL64LB4:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:46:01.4289237+07:00 0HMT2TOL64LB4:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:46:01.4312656+07:00 0HMT2TOL64LB4:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:46:01.4313420+07:00 0HMT2TOL64LB5:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:46:01.4320768+07:00 0HMT2TOL64LB5:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:46:01.4322212+07:00 0HMT2TOL64LB4:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:46:01.4331941+07:00 0HMT2TOL64LB4:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:46:01.4342576+07:00 0HMT2TOL64LB5:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:46:01.4342942+07:00 0HMT2TOL64LB4:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:46:01.4354448+07:00 0HMT2TOL64LB4:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:46:01.4358655+07:00 0HMT2TOL64LB5:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:46:01.4380684+07:00 0HMT2TOL64LB4:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:46:01.4390894+07:00 0HMT2TOL64LB4:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:46:01.5425713+07:00 0HMT2TOL64LB8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:46:01.5449371+07:00 0HMT2TOL64LB8:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:46:01.5491956+07:00 0HMT2TOL64LB8:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:46:01.5649122+07:00 0HMT2TOL64LB8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:46:01.5659129+07:00 0HMT2TOL64LB8:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:46:01.5678202+07:00 0HMT2TOL64LB8:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:46:03.1370618+07:00 0HMT2TOL64LB4:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:46:03.1371440+07:00 0HMT2TOL64LB5:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:46:03.1376775+07:00 0HMT2TOL64LB5:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:46:03.1377207+07:00 0HMT2TOL64LB4:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:46:03.1395455+07:00 0HMT2TOL64LB4:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:46:03.1395453+07:00 0HMT2TOL64LB5:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:46:03.1414224+07:00 0HMT2TOL64LB4:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:46:03.1414291+07:00 0HMT2TOL64LB5:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:46:03.1467582+07:00 0HMT2TOL64LB4:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:46:03.1486483+07:00 0HMT2TOL64LB4:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:46:03.1535760+07:00 0HMT2TOL64LB4:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:46:03.1550546+07:00 0HMT2TOL64LB4:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:46:03.1566482+07:00 0HMT2TOL64LB4:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:46:03.1581716+07:00 0HMT2TOL64LB4:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:46:03.1597002+07:00 0HMT2TOL64LB4:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:46:03.2597154+07:00 0HMT2TOL64LB9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:46:03.2603156+07:00 0HMT2TOL64LB9:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:46:03.2619293+07:00 0HMT2TOL64LB9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:46:03.2625435+07:00 0HMT2TOL64LB9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:46:03.2629809+07:00 0HMT2TOL64LB9:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:46:03.2648203+07:00 0HMT2TOL64LB9:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:46:03.2662461+07:00 0HMT2TOL64LB9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T17:46:03.2811496+07:00 0HMT2TOL64LB4:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:46:03.2816370+07:00 0HMT2TOL64LB4:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:46:03.2830310+07:00 0HMT2TOL64LB4:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:46:03.2834558+07:00 0HMT2TOL64LB5:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:46:03.2841403+07:00 0HMT2TOL64LB5:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:46:03.2842592+07:00 0HMT2TOL64LB4:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:46:03.2860573+07:00 0HMT2TOL64LB5:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:46:03.2867763+07:00 0HMT2TOL64LB4:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:46:03.2877171+07:00 0HMT2TOL64LB4:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:46:03.2877216+07:00 0HMT2TOL64LB5:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:46:03.2900983+07:00 0HMT2TOL64LB4:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:46:03.2915356+07:00 0HMT2TOL64LB4:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:46:03.2926030+07:00 0HMT2TOL64LB4:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:46:03.2935731+07:00 0HMT2TOL64LB4:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:46:03.2947850+07:00 0HMT2TOL64LB4:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:46:07.0253555+07:00 0HMT2TOL64LB4:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:46:07.0258976+07:00 0HMT2TOL64LB4:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:46:07.0272788+07:00 0HMT2TOL64LB4:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:46:07.0290866+07:00 0HMT2TOL64LB4:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T17:46:32.5596778+07:00 0HMT2TOL64LB4:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:46:32.5603505+07:00 0HMT2TOL64LB4:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:46:32.5698846+07:00 0HMT2TOL64LB4:00000010 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:46:32.5734535+07:00 0HMT2TOL64LB4:00000010 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T17:46:32.9009048+07:00 0HMT2TOL64LB4:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:46:32.9014730+07:00 0HMT2TOL64LB4:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:46:32.9031845+07:00 0HMT2TOL64LB4:00000012 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:46:32.9055659+07:00 0HMT2TOL64LB4:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T17:47:56.3253231+07:00 0HMT2TOL64LB9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:47:56.3261339+07:00 0HMT2TOL64LB9:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:47:56.3373836+07:00 0HMT2TOL64LB9:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:47:56.4119524+07:00 0HMT2TOL64LB4:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:47:56.4135825+07:00 0HMT2TOL64LB4:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:47:56.4167365+07:00 0HMT2TOL64LB4:00000014 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:47:56.4218045+07:00 0HMT2TOL64LB4:00000014 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:47:56.4308870+07:00 0HMT2TOL64LB4:00000014 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:47:56.4333102+07:00 0HMT2TOL64LB5:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:47:56.4343676+07:00 0HMT2TOL64LB5:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:47:56.4351375+07:00 0HMT2TOL64LB4:00000014 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:47:56.4369377+07:00 0HMT2TOL64LB5:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:47:56.4420593+07:00 0HMT2TOL64LB4:00000014 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:47:56.4441383+07:00 0HMT2TOL64LB5:0000000B [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:47:56.4527174+07:00 0HMT2TOL64LB4:00000014 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:47:56.4641082+07:00 0HMT2TOL64LB4:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:47:56.4685845+07:00 0HMT2TOL64LB4:00000014 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:47:56.4707192+07:00 0HMT2TOL64LB4:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:47:58.5206210+07:00 0HMT2TOL64LB4:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:47:58.5212569+07:00 0HMT2TOL64LB4:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:47:58.5232448+07:00 0HMT2TOL64LB4:00000016 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:47:58.5255828+07:00 0HMT2TOL64LB4:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:47:58.5288581+07:00 0HMT2TOL64LB4:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:47:58.5300213+07:00 0HMT2TOL64LB4:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:47:58.5309587+07:00 0HMT2TOL64LB4:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:47:58.5323098+07:00 0HMT2TOL64LB4:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:47:58.5338306+07:00 0HMT2TOL64LB4:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:47:58.5351368+07:00 0HMT2TOL64LB5:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:47:58.5352957+07:00 0HMT2TOL64LB4:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:47:58.5361605+07:00 0HMT2TOL64LB5:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:47:58.5386395+07:00 0HMT2TOL64LB4:00000016 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:47:58.5387560+07:00 0HMT2TOL64LB5:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:47:58.5412039+07:00 0HMT2TOL64LB5:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:47:58.6500707+07:00 0HMT2TOL64LBB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:47:58.6509379+07:00 0HMT2TOL64LBB:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:47:58.6546160+07:00 0HMT2TOL64LBB:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:47:58.8040003+07:00 0HMT2TOL64LBB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:47:58.8045835+07:00 0HMT2TOL64LBB:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:47:58.8065541+07:00 0HMT2TOL64LBB:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:47:58.8093838+07:00 0HMT2TOL64LBB:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T17:47:58.8480538+07:00 0HMT2TOL64LB4:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:47:58.8480539+07:00 0HMT2TOL64LB5:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:47:58.8486853+07:00 0HMT2TOL64LB4:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:47:58.8486853+07:00 0HMT2TOL64LB5:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:47:58.8511897+07:00 0HMT2TOL64LB4:00000017 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:47:58.8511898+07:00 0HMT2TOL64LB5:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:47:58.8556219+07:00 0HMT2TOL64LB5:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:47:58.8563672+07:00 0HMT2TOL64LB4:00000017 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:47:58.8681612+07:00 0HMT2TOL64LB4:00000017 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:47:58.8716495+07:00 0HMT2TOL64LB4:00000017 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:47:58.8732691+07:00 0HMT2TOL64LB4:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:47:58.8747687+07:00 0HMT2TOL64LB4:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:47:58.8762995+07:00 0HMT2TOL64LB4:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:47:58.8781991+07:00 0HMT2TOL64LB4:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:47:58.8819683+07:00 0HMT2TOL64LB4:00000017 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:49:06.1827233+07:00 0HMT2TOL64LB4:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:49:06.1834207+07:00 0HMT2TOL64LB4:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:49:06.1973920+07:00 0HMT2TOL64LB4:00000019 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:49:06.2029186+07:00 0HMT2TOL64LB4:00000019 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T17:50:54.8147730+07:00 0HMT2TOL64LBB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:50:54.8163526+07:00 0HMT2TOL64LBB:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:50:54.8257106+07:00 0HMT2TOL64LBB:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:50:57.3664013+07:00 0HMT2TOL64LB4:0000001B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:50:57.3673665+07:00 0HMT2TOL64LB4:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:50:57.3699664+07:00 0HMT2TOL64LB4:0000001B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:50:57.3776113+07:00 0HMT2TOL64LB4:0000001B [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:50:57.3837011+07:00 0HMT2TOL64LB4:0000001B [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:50:57.3871939+07:00 0HMT2TOL64LB4:0000001B [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:50:57.3917696+07:00 0HMT2TOL64LB4:0000001B [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:50:57.3935739+07:00 0HMT2TOL64LB4:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:50:57.3944834+07:00 0HMT2TOL64LB4:0000001B [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:50:57.3968714+07:00 0HMT2TOL64LB4:0000001B [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:50:57.4053544+07:00 0HMT2TOL64LBD:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:50:57.4053898+07:00 0HMT2TOL64LB4:0000001B [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:50:57.4118898+07:00 0HMT2TOL64LBD:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:50:57.4137927+07:00 0HMT2TOL64LBD:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:50:57.4185901+07:00 0HMT2TOL64LBD:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:50:57.5300124+07:00 0HMT2TOL64LBC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:50:57.5305601+07:00 0HMT2TOL64LBC:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:50:57.5326385+07:00 0HMT2TOL64LBC:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:50:57.5593326+07:00 0HMT2TOL64LBC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:50:57.5600757+07:00 0HMT2TOL64LBC:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:50:57.5619911+07:00 0HMT2TOL64LBC:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:50:57.5642941+07:00 0HMT2TOL64LBC:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T17:50:57.6143229+07:00 0HMT2TOL64LB4:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:50:57.6143229+07:00 0HMT2TOL64LBD:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:50:57.6148200+07:00 0HMT2TOL64LBD:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:50:57.6148200+07:00 0HMT2TOL64LB4:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:50:57.6161880+07:00 0HMT2TOL64LBD:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:50:57.6161885+07:00 0HMT2TOL64LB4:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:50:57.6189802+07:00 0HMT2TOL64LBD:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T17:50:57.6189802+07:00 0HMT2TOL64LB4:0000001C [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:50:57.6317654+07:00 0HMT2TOL64LB4:0000001C [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T17:50:57.6348116+07:00 0HMT2TOL64LB4:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:50:57.6359303+07:00 0HMT2TOL64LB4:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:50:57.6370716+07:00 0HMT2TOL64LB4:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:50:57.6380242+07:00 0HMT2TOL64LB4:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:50:57.6390952+07:00 0HMT2TOL64LB4:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T17:50:57.6401670+07:00 0HMT2TOL64LB4:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T17:50:57.8840074+07:00 0HMT2TOL64LB4:0000001E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:50:57.8844825+07:00 0HMT2TOL64LB4:0000001E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:50:57.8857258+07:00 0HMT2TOL64LB4:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T17:50:57.8888341+07:00 0HMT2TOL64LB4:0000001E [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T17:51:54.1038012+07:00 0HMT2TOL64LBC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T17:51:54.1054322+07:00 0HMT2TOL64LBC:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T17:51:54.1179895+07:00 0HMT2TOL64LBC:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:30:36.5925883+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-22T19:30:36.6008200+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-22T19:30:36.6013380+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-22T19:30:36.6013848+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-22T19:30:43.1774946+07:00 0HMT31ED0AIHJ:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-22T19:30:44.3216567+07:00 0HMT31ED0AIHI:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:30:44.3216551+07:00 0HMT31ED0AIHH:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:30:44.3216558+07:00 0HMT31ED0AIHJ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:30:44.9376973+07:00 0HMT31ED0AIHI:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:30:44.9376961+07:00 0HMT31ED0AIHJ:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:30:44.9376945+07:00 0HMT31ED0AIHH:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:30:44.9826912+07:00 0HMT31ED0AIHJ:00000002 [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:30:44.9826912+07:00 0HMT31ED0AIHH:00000003 [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:30:44.9826912+07:00 0HMT31ED0AIHI:00000003 [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:30:45.0515302+07:00 0HMT31ED0AIHJ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:30:45.0569626+07:00 0HMT31ED0AIHJ:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:30:45.0588940+07:00 0HMT31ED0AIHJ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:30:45.4850462+07:00 0HMT31ED0AIHI:00000003 [INF] Executed DbCommand ("51"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T19:30:45.4850461+07:00 0HMT31ED0AIHJ:00000002 [INF] Executed DbCommand ("52"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T19:30:45.4850462+07:00 0HMT31ED0AIHH:00000003 [INF] Executed DbCommand ("51"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:30:45.5700654+07:00 0HMT31ED0AIHI:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:30:45.5707396+07:00 0HMT31ED0AIHI:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:30:45.5759822+07:00 0HMT31ED0AIHK:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:30:45.5769735+07:00 0HMT31ED0AIHK:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:30:45.5848024+07:00 0HMT31ED0AIHK:00000002 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:30:45.5887494+07:00 0HMT31ED0AIHI:00000004 [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:30:45.5946477+07:00 0HMT31ED0AIHK:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T19:30:45.5949882+07:00 0HMT31ED0AIHI:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:30:45.6873975+07:00 0HMT31ED0AIHI:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T19:30:45.6886102+07:00 0HMT31ED0AIHH:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T19:30:45.7156120+07:00 0HMT31ED0AIHI:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:30:45.7156121+07:00 0HMT31ED0AIHH:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:30:45.7263908+07:00 0HMT31ED0AIHH:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:30:45.7263907+07:00 0HMT31ED0AIHI:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:30:45.7454748+07:00 0HMT31ED0AIHH:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:30:45.7454746+07:00 0HMT31ED0AIHI:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:30:45.7479250+07:00 0HMT31ED0AIHI:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:30:45.7479248+07:00 0HMT31ED0AIHH:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:30:45.7489329+07:00 0HMT31ED0AIHH:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:30:45.7490121+07:00 0HMT31ED0AIHI:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:30:45.7505672+07:00 0HMT31ED0AIHH:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:30:45.7504906+07:00 0HMT31ED0AIHI:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:30:55.3640082+07:00 0HMT31ED0AIHI:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:30:55.3645441+07:00 0HMT31ED0AIHI:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:30:55.3732361+07:00 0HMT31ED0AIHI:00000006 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:30:55.3908685+07:00 0HMT31ED0AIHI:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T19:30:55.7984264+07:00 0HMT31ED0AIHI:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:30:55.7989331+07:00 0HMT31ED0AIHI:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:30:55.8001886+07:00 0HMT31ED0AIHI:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:30:55.8020593+07:00 0HMT31ED0AIHI:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T19:34:01.0800200+07:00 0HMT31ED0AIHL:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:34:01.0806683+07:00 0HMT31ED0AIHL:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:34:01.0910825+07:00 0HMT31ED0AIHL:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:34:01.0962035+07:00 0HMT31ED0AIHL:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T19:34:01.2653136+07:00 0HMT31ED0AIHL:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:34:01.2657992+07:00 0HMT31ED0AIHL:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:34:01.2759831+07:00 0HMT31ED0AIHL:00000005 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:34:01.2813642+07:00 0HMT31ED0AIHL:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T19:37:29.8225697+07:00 0HMT31ED0AIHM:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:37:29.8232758+07:00 0HMT31ED0AIHM:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:37:29.8333034+07:00 0HMT31ED0AIHM:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:37:29.8384940+07:00 0HMT31ED0AIHM:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T19:37:30.0643748+07:00 0HMT31ED0AIHM:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:37:30.0648431+07:00 0HMT31ED0AIHM:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:37:30.0660909+07:00 0HMT31ED0AIHM:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:37:30.0685421+07:00 0HMT31ED0AIHM:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T19:37:30.7274579+07:00 0HMT31ED0AIHJ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:37:30.7280783+07:00 0HMT31ED0AIHJ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:37:30.7303694+07:00 0HMT31ED0AIHJ:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:37:30.8249620+07:00 0HMT31ED0AIHM:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:37:30.8249620+07:00 0HMT31ED0AIHN:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:37:30.8257349+07:00 0HMT31ED0AIHM:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:37:30.8275832+07:00 0HMT31ED0AIHM:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:37:30.8313202+07:00 0HMT31ED0AIHN:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:37:30.8331426+07:00 0HMT31ED0AIHN:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:37:30.8331427+07:00 0HMT31ED0AIHM:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:37:30.8409305+07:00 0HMT31ED0AIHN:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T19:37:30.8419539+07:00 0HMT31ED0AIHM:00000007 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T19:37:30.8473874+07:00 0HMT31ED0AIHM:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:37:30.8530956+07:00 0HMT31ED0AIHM:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:37:30.8545295+07:00 0HMT31ED0AIHM:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:37:30.8557040+07:00 0HMT31ED0AIHM:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:37:30.8568551+07:00 0HMT31ED0AIHM:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:37:30.8578529+07:00 0HMT31ED0AIHM:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:37:32.7750238+07:00 0HMT31ED0AIHN:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:37:32.7754762+07:00 0HMT31ED0AIHO:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:37:32.7755739+07:00 0HMT31ED0AIHN:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:37:32.7758214+07:00 0HMT31ED0AIHO:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:37:32.7769860+07:00 0HMT31ED0AIHO:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:37:32.7769861+07:00 0HMT31ED0AIHN:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:37:32.7786902+07:00 0HMT31ED0AIHO:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T19:37:32.7816831+07:00 0HMT31ED0AIHN:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:37:32.7922214+07:00 0HMT31ED0AIHN:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T19:37:32.7936444+07:00 0HMT31ED0AIHN:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:37:32.7948264+07:00 0HMT31ED0AIHN:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:37:32.7965171+07:00 0HMT31ED0AIHN:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:37:32.7977344+07:00 0HMT31ED0AIHN:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:37:32.7990649+07:00 0HMT31ED0AIHN:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:37:32.8003219+07:00 0HMT31ED0AIHN:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:37:32.8713329+07:00 0HMT31ED0AIHP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:37:32.8722421+07:00 0HMT31ED0AIHP:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:37:32.8756204+07:00 0HMT31ED0AIHP:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:37:32.9147793+07:00 0HMT31ED0AIHP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:37:32.9155603+07:00 0HMT31ED0AIHP:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:37:32.9177437+07:00 0HMT31ED0AIHP:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:37:32.9211011+07:00 0HMT31ED0AIHP:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T19:37:33.0064695+07:00 0HMT31ED0AIHN:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:37:33.0071734+07:00 0HMT31ED0AIHN:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:37:33.0081516+07:00 0HMT31ED0AIHO:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:37:33.0090878+07:00 0HMT31ED0AIHO:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:37:33.0100708+07:00 0HMT31ED0AIHN:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:37:33.0116697+07:00 0HMT31ED0AIHO:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:37:33.0122235+07:00 0HMT31ED0AIHN:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:37:33.0146249+07:00 0HMT31ED0AIHO:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T19:37:33.0158995+07:00 0HMT31ED0AIHN:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T19:37:33.0171028+07:00 0HMT31ED0AIHN:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:37:33.0189610+07:00 0HMT31ED0AIHN:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:37:33.0199080+07:00 0HMT31ED0AIHN:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:37:33.0207212+07:00 0HMT31ED0AIHN:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:37:33.0220403+07:00 0HMT31ED0AIHN:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:37:33.0231961+07:00 0HMT31ED0AIHN:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:37:33.6548898+07:00 0HMT31ED0AIHN:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:37:33.6553622+07:00 0HMT31ED0AIHN:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:37:33.6566644+07:00 0HMT31ED0AIHN:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:37:33.6582267+07:00 0HMT31ED0AIHN:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T19:37:54.4749903+07:00 0HMT31ED0AIHN:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:37:54.4754720+07:00 0HMT31ED0AIHN:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:37:54.4773914+07:00 0HMT31ED0AIHN:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:37:54.4792881+07:00 0HMT31ED0AIHN:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T19:37:54.6898899+07:00 0HMT31ED0AIHN:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:37:54.6903702+07:00 0HMT31ED0AIHN:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:37:54.6917231+07:00 0HMT31ED0AIHN:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:37:54.6932293+07:00 0HMT31ED0AIHN:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T19:38:39.7124988+07:00 0HMT31ED0AIHN:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:38:39.7137735+07:00 0HMT31ED0AIHN:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:38:39.7251563+07:00 0HMT31ED0AIHN:0000000E [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:38:39.7306590+07:00 0HMT31ED0AIHN:0000000E [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T19:38:39.9072406+07:00 0HMT31ED0AIHN:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:38:39.9077813+07:00 0HMT31ED0AIHN:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:38:39.9092898+07:00 0HMT31ED0AIHN:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:38:39.9111349+07:00 0HMT31ED0AIHN:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T19:38:40.4773011+07:00 0HMT31ED0AIHP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:38:40.4778249+07:00 0HMT31ED0AIHP:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:38:40.4790936+07:00 0HMT31ED0AIHP:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:38:40.5240738+07:00 0HMT31ED0AIHN:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:38:40.5246997+07:00 0HMT31ED0AIHN:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:38:40.5264160+07:00 0HMT31ED0AIHN:00000012 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:38:40.5318004+07:00 0HMT31ED0AIHN:00000012 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:38:40.5351920+07:00 0HMT31ED0AIHO:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:38:40.5360844+07:00 0HMT31ED0AIHO:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:38:40.5375416+07:00 0HMT31ED0AIHN:00000012 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T19:38:40.5392173+07:00 0HMT31ED0AIHO:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:38:40.5425610+07:00 0HMT31ED0AIHN:00000012 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:38:40.5449304+07:00 0HMT31ED0AIHO:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T19:38:40.5466910+07:00 0HMT31ED0AIHN:00000012 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:38:40.5484879+07:00 0HMT31ED0AIHN:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:38:40.5503165+07:00 0HMT31ED0AIHN:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:38:40.5521602+07:00 0HMT31ED0AIHN:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:38:40.5534725+07:00 0HMT31ED0AIHN:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:38:42.4939760+07:00 0HMT31ED0AIHN:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:38:42.4944590+07:00 0HMT31ED0AIHN:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:38:42.4957420+07:00 0HMT31ED0AIHN:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:38:42.4969770+07:00 0HMT31ED0AIHN:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T19:38:42.5013507+07:00 0HMT31ED0AIHN:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:38:42.5018739+07:00 0HMT31ED0AIHN:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:38:42.5032170+07:00 0HMT31ED0AIHN:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:38:42.5045409+07:00 0HMT31ED0AIHN:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:38:42.5072697+07:00 0HMT31ED0AIHN:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T19:38:42.5081784+07:00 0HMT31ED0AIHN:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:38:42.5089012+07:00 0HMT31ED0AIHN:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:38:42.5097771+07:00 0HMT31ED0AIHN:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:38:42.5124452+07:00 0HMT31ED0AIHN:00000014 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:38:42.5176890+07:00 0HMT31ED0AIHN:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:38:42.5184979+07:00 0HMT31ED0AIHN:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:38:42.5253463+07:00 0HMT31ED0AIHR:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:38:42.5258674+07:00 0HMT31ED0AIHR:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:38:42.5280257+07:00 0HMT31ED0AIHR:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:38:42.5287939+07:00 0HMT31ED0AIHR:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:38:42.5292202+07:00 0HMT31ED0AIHR:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:38:42.5304550+07:00 0HMT31ED0AIHR:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:38:42.5322309+07:00 0HMT31ED0AIHR:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T19:38:42.5557859+07:00 0HMT31ED0AIHN:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:38:42.5565837+07:00 0HMT31ED0AIHN:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:38:42.5579791+07:00 0HMT31ED0AIHN:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:38:42.5594175+07:00 0HMT31ED0AIHN:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:38:42.5615001+07:00 0HMT31ED0AIHO:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:38:42.5619272+07:00 0HMT31ED0AIHN:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T19:38:42.5622912+07:00 0HMT31ED0AIHO:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:38:42.5629462+07:00 0HMT31ED0AIHN:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:38:42.5637094+07:00 0HMT31ED0AIHN:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:38:42.5640710+07:00 0HMT31ED0AIHO:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:38:42.5645524+07:00 0HMT31ED0AIHN:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:38:42.5655341+07:00 0HMT31ED0AIHN:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:38:42.5658965+07:00 0HMT31ED0AIHO:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T19:38:42.5684725+07:00 0HMT31ED0AIHN:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T19:38:42.5694314+07:00 0HMT31ED0AIHN:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T19:38:43.3095978+07:00 0HMT31ED0AIHN:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:38:43.3101385+07:00 0HMT31ED0AIHN:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:38:43.3116214+07:00 0HMT31ED0AIHN:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:38:43.3132780+07:00 0HMT31ED0AIHN:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T19:39:18.9589680+07:00 0HMT31ED0AIHN:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:39:18.9597128+07:00 0HMT31ED0AIHN:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:39:18.9611220+07:00 0HMT31ED0AIHN:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:39:18.9628200+07:00 0HMT31ED0AIHN:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T19:39:19.1764994+07:00 0HMT31ED0AIHN:0000001A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:39:19.1770594+07:00 0HMT31ED0AIHN:0000001A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:39:19.1786470+07:00 0HMT31ED0AIHN:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:39:19.1809449+07:00 0HMT31ED0AIHN:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T19:39:36.5016275+07:00 0HMT31ED0AIHN:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:39:36.5023737+07:00 0HMT31ED0AIHN:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:39:36.5172748+07:00 0HMT31ED0AIHN:0000001C [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:39:36.5219700+07:00 0HMT31ED0AIHN:0000001C [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T19:39:36.7065337+07:00 0HMT31ED0AIHN:0000001E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:39:36.7071886+07:00 0HMT31ED0AIHN:0000001E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:39:36.7168755+07:00 0HMT31ED0AIHN:0000001E [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:39:36.7212292+07:00 0HMT31ED0AIHN:0000001E [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T19:52:22.5683886+07:00 0HMT31ED0AIHS:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:52:22.5720716+07:00 0HMT31ED0AIHS:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:52:22.5812722+07:00 0HMT31ED0AIHS:00000003 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:52:22.5857917+07:00 0HMT31ED0AIHS:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T19:52:22.7951157+07:00 0HMT31ED0AIHS:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:52:22.7955852+07:00 0HMT31ED0AIHS:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:52:22.7969293+07:00 0HMT31ED0AIHS:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:52:22.7993329+07:00 0HMT31ED0AIHS:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T19:52:30.7112844+07:00 0HMT31ED0AIHS:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:52:30.7117434+07:00 0HMT31ED0AIHS:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:52:30.7131000+07:00 0HMT31ED0AIHS:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:52:30.9301781+07:00 0HMT31ED0AIHS:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-22T19:52:31.0256534+07:00 0HMT31ED0AIHS:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:52:31.0261611+07:00 0HMT31ED0AIHS:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:52:31.0274986+07:00 0HMT31ED0AIHS:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:52:31.0610512+07:00 0HMT31ED0AIHS:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T19:52:31.0898478+07:00 0HMT31ED0AIHS:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-22T19:52:33.7007357+07:00 0HMT31ED0AIHS:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:52:33.7013084+07:00 0HMT31ED0AIHS:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:52:33.7025685+07:00 0HMT31ED0AIHS:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:52:33.7993890+07:00 0HMT31ED0AIHS:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-22T19:52:33.8047975+07:00 0HMT31ED0AIHS:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@p2='?' (Size = 100), @p0='?' (Size = 50), @p1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Messages] SET [FileStatus] = @p0, [FileUrls] = @p1
WHERE [Id] = @p2;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-22T19:52:33.8600548+07:00 0HMT31ED0AIHS:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:52:33.8605886+07:00 0HMT31ED0AIHS:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:52:33.8618847+07:00 0HMT31ED0AIHS:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:52:33.8639729+07:00 0HMT31ED0AIHS:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T19:53:07.8543484+07:00 0HMT31ED0AIHS:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:53:07.8549786+07:00 0HMT31ED0AIHS:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:53:07.8640415+07:00 0HMT31ED0AIHS:0000000E [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:53:07.8682776+07:00 0HMT31ED0AIHS:0000000E [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-22T19:53:07.9278960+07:00 0HMT31ED0AIHS:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:53:07.9284404+07:00 0HMT31ED0AIHS:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:53:07.9304812+07:00 0HMT31ED0AIHS:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:53:07.9338720+07:00 0HMT31ED0AIHS:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T19:53:07.9368813+07:00 0HMT31ED0AIHS:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-22T19:53:10.0059446+07:00 0HMT31ED0AIHS:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:53:10.0063989+07:00 0HMT31ED0AIHS:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:53:10.0076635+07:00 0HMT31ED0AIHS:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:53:10.0100574+07:00 0HMT31ED0AIHS:00000012 [INF] Executed DbCommand ("2"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-22T19:53:10.0119027+07:00 0HMT31ED0AIHS:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@p2='?' (Size = 100), @p0='?' (Size = 50), @p1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Messages] SET [FileStatus] = @p0, [FileUrls] = @p1
WHERE [Id] = @p2;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-22T19:53:10.0415830+07:00 0HMT31ED0AIHS:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T19:53:10.0421133+07:00 0HMT31ED0AIHS:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T19:53:10.0436001+07:00 0HMT31ED0AIHS:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T19:53:10.0455546+07:00 0HMT31ED0AIHS:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T20:02:01.1197637+07:00 0HMT31ED0AIHU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:02:01.1236089+07:00 0HMT31ED0AIHU:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:02:01.1349947+07:00 0HMT31ED0AIHU:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:02:01.1397613+07:00 0HMT31ED0AIHU:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-22T20:02:01.2147527+07:00 0HMT31ED0AIHT:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:02:01.2153094+07:00 0HMT31ED0AIHT:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:02:01.2170501+07:00 0HMT31ED0AIHT:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:02:01.2206306+07:00 0HMT31ED0AIHT:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T20:02:01.2247417+07:00 0HMT31ED0AIHT:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-22T20:02:19.4706882+07:00 0HMT31ED0AIHU:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:02:19.4711935+07:00 0HMT31ED0AIHU:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:02:19.4725928+07:00 0HMT31ED0AIHU:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:02:19.4760785+07:00 0HMT31ED0AIHU:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T20:02:19.6788138+07:00 0HMT31ED0AIHU:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:02:19.6793989+07:00 0HMT31ED0AIHU:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:02:19.6807294+07:00 0HMT31ED0AIHU:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:02:19.6828088+07:00 0HMT31ED0AIHU:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T20:02:19.7698529+07:00 0HMT31ED0AIHT:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:02:19.7703461+07:00 0HMT31ED0AIHT:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:02:19.7716565+07:00 0HMT31ED0AIHT:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:02:19.7737955+07:00 0HMT31ED0AIHT:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T20:02:20.6938537+07:00 0HMT31ED0AIHR:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:02:20.6944475+07:00 0HMT31ED0AIHR:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:02:20.6966022+07:00 0HMT31ED0AIHR:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:02:23.3780410+07:00 0HMT31ED0AIHT:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:02:23.3787537+07:00 0HMT31ED0AIHT:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:02:23.3802519+07:00 0HMT31ED0AIHT:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:02:23.3837428+07:00 0HMT31ED0AIHT:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T20:02:23.4022801+07:00 0HMT31ED0AIHT:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:02:23.4033942+07:00 0HMT31ED0AIHT:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:02:23.4051197+07:00 0HMT31ED0AIHT:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:02:23.4098215+07:00 0HMT31ED0AIHT:0000000D [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:02:23.4168390+07:00 0HMT31ED0AIHT:0000000D [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T20:02:23.4254105+07:00 0HMT31ED0AIHT:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T20:02:23.4285307+07:00 0HMT31ED0AIHT:0000000D [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:02:23.4316857+07:00 0HMT31ED0AIHT:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:02:23.4331287+07:00 0HMT31ED0AIHT:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:02:23.4344179+07:00 0HMT31ED0AIHT:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:02:23.4353340+07:00 0HMT31ED0AIHT:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:02:23.5208522+07:00 0HMT31ED0AII0:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:02:23.5219195+07:00 0HMT31ED0AII0:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:02:23.5250632+07:00 0HMT31ED0AII0:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:02:23.5594729+07:00 0HMT31ED0AII0:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:02:23.5599927+07:00 0HMT31ED0AII0:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:02:23.5613102+07:00 0HMT31ED0AII0:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:02:23.5639001+07:00 0HMT31ED0AII0:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T20:02:23.6062960+07:00 0HMT31ED0AIHU:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:02:23.6062963+07:00 0HMT31ED0AIHT:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:02:23.6071163+07:00 0HMT31ED0AIHT:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:02:23.6093746+07:00 0HMT31ED0AIHT:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:02:23.6123324+07:00 0HMT31ED0AIHT:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:02:23.6131776+07:00 0HMT31ED0AIHU:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:02:23.6149010+07:00 0HMT31ED0AIHT:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T20:02:23.6153565+07:00 0HMT31ED0AIHU:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:02:23.6162176+07:00 0HMT31ED0AIHT:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T20:02:23.6171344+07:00 0HMT31ED0AIHU:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T20:02:23.6179575+07:00 0HMT31ED0AIHT:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:02:23.6197227+07:00 0HMT31ED0AIHT:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:02:23.6204900+07:00 0HMT31ED0AIHT:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:02:23.6214041+07:00 0HMT31ED0AIHT:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:02:23.6222338+07:00 0HMT31ED0AIHT:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:02:24.0238963+07:00 0HMT31ED0AIHT:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:02:24.0243518+07:00 0HMT31ED0AIHT:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:02:24.0256141+07:00 0HMT31ED0AIHT:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:02:24.0271574+07:00 0HMT31ED0AIHT:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T20:02:24.1180670+07:00 0HMT31ED0AIHT:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:02:24.1186535+07:00 0HMT31ED0AIHT:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:02:24.1199771+07:00 0HMT31ED0AIHT:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:02:24.1219801+07:00 0HMT31ED0AIHT:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T20:03:05.8009111+07:00 0HMT31ED0AII0:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:03:05.8029738+07:00 0HMT31ED0AII0:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:03:05.8122024+07:00 0HMT31ED0AII0:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:03:05.8754761+07:00 0HMT31ED0AIHT:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:03:05.8759944+07:00 0HMT31ED0AIHT:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:03:05.8773451+07:00 0HMT31ED0AIHT:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:03:05.8810405+07:00 0HMT31ED0AIHT:00000012 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:03:05.8829103+07:00 0HMT31ED0AIHU:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:03:05.8833637+07:00 0HMT31ED0AIHU:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:03:05.8846928+07:00 0HMT31ED0AIHU:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:03:05.8874489+07:00 0HMT31ED0AIHT:00000012 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T20:03:05.8890635+07:00 0HMT31ED0AIHU:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T20:03:05.8900523+07:00 0HMT31ED0AIHT:00000012 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T20:03:05.8930252+07:00 0HMT31ED0AIHT:00000012 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:03:05.8958722+07:00 0HMT31ED0AIHT:00000012 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:03:05.8973415+07:00 0HMT31ED0AIHT:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:03:05.8983204+07:00 0HMT31ED0AIHT:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:03:05.8993249+07:00 0HMT31ED0AIHT:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:03:06.0180363+07:00 0HMT31ED0AII1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:03:06.0189015+07:00 0HMT31ED0AII1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:03:06.0207405+07:00 0HMT31ED0AII1:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:03:06.0274905+07:00 0HMT31ED0AII1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:03:06.0279796+07:00 0HMT31ED0AII1:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:03:06.0293261+07:00 0HMT31ED0AII1:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:03:07.5216397+07:00 0HMT31ED0AIHU:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:03:07.5216397+07:00 0HMT31ED0AIHT:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:03:07.5221113+07:00 0HMT31ED0AIHU:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:03:07.5221103+07:00 0HMT31ED0AIHT:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:03:07.5233472+07:00 0HMT31ED0AIHU:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:03:07.5233519+07:00 0HMT31ED0AIHT:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:03:07.5248234+07:00 0HMT31ED0AIHU:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T20:03:07.5247581+07:00 0HMT31ED0AIHT:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:03:07.5293528+07:00 0HMT31ED0AIHT:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T20:03:07.5305079+07:00 0HMT31ED0AIHT:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T20:03:07.5314812+07:00 0HMT31ED0AIHT:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:03:07.5326378+07:00 0HMT31ED0AIHT:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:03:07.5334459+07:00 0HMT31ED0AIHT:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:03:07.5342348+07:00 0HMT31ED0AIHT:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:03:07.5349662+07:00 0HMT31ED0AIHT:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:03:07.6694003+07:00 0HMT31ED0AII2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:03:07.6698752+07:00 0HMT31ED0AII2:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:03:07.6711025+07:00 0HMT31ED0AII2:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:03:07.6834124+07:00 0HMT31ED0AII2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:03:07.6838773+07:00 0HMT31ED0AII2:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:03:07.6851068+07:00 0HMT31ED0AII2:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:03:07.6873246+07:00 0HMT31ED0AII2:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T20:03:07.7364914+07:00 0HMT31ED0AIHU:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:03:07.7364914+07:00 0HMT31ED0AIHT:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:03:07.7370003+07:00 0HMT31ED0AIHU:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:03:07.7370001+07:00 0HMT31ED0AIHT:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:03:07.7383343+07:00 0HMT31ED0AIHT:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:03:07.7383318+07:00 0HMT31ED0AIHU:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:03:07.7402668+07:00 0HMT31ED0AIHT:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:03:07.7425031+07:00 0HMT31ED0AIHU:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T20:03:07.7485769+07:00 0HMT31ED0AIHT:00000014 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T20:03:07.7496150+07:00 0HMT31ED0AIHT:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T20:03:07.7504319+07:00 0HMT31ED0AIHT:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:03:07.7513180+07:00 0HMT31ED0AIHT:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:03:07.7520650+07:00 0HMT31ED0AIHT:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:03:07.7530022+07:00 0HMT31ED0AIHT:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:03:07.7538495+07:00 0HMT31ED0AIHT:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:03:08.3522433+07:00 0HMT31ED0AIHT:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:03:08.3528981+07:00 0HMT31ED0AIHT:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:03:08.3542465+07:00 0HMT31ED0AIHT:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:03:08.3570595+07:00 0HMT31ED0AIHT:00000016 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T20:03:08.6564530+07:00 0HMT31ED0AIHT:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:03:08.6569548+07:00 0HMT31ED0AIHT:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:03:08.6582314+07:00 0HMT31ED0AIHT:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:03:08.6603137+07:00 0HMT31ED0AIHT:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T20:03:08.7248004+07:00 0HMT31ED0AIHT:0000001A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:03:08.7253730+07:00 0HMT31ED0AIHT:0000001A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:03:08.7271591+07:00 0HMT31ED0AIHT:0000001A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:03:08.7304280+07:00 0HMT31ED0AIHT:0000001A [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T20:16:26.9680915+07:00 0HMT31ED0AII2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:16:26.9715056+07:00 0HMT31ED0AII2:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:16:26.9828608+07:00 0HMT31ED0AII2:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:16:29.3799776+07:00 0HMT31ED0AII4:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:16:29.3799986+07:00 0HMT31ED0AII3:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:16:29.3805810+07:00 0HMT31ED0AII4:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:16:29.3832037+07:00 0HMT31ED0AII4:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:16:29.3851149+07:00 0HMT31ED0AII3:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:16:29.3883312+07:00 0HMT31ED0AII3:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:16:29.3912878+07:00 0HMT31ED0AII4:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T20:16:29.3948193+07:00 0HMT31ED0AII3:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:16:29.4005501+07:00 0HMT31ED0AII3:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T20:16:29.4037952+07:00 0HMT31ED0AII3:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:16:29.4082245+07:00 0HMT31ED0AII3:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:16:29.4095610+07:00 0HMT31ED0AII3:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:16:29.4105128+07:00 0HMT31ED0AII3:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:16:29.4117981+07:00 0HMT31ED0AII3:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:16:29.4130337+07:00 0HMT31ED0AII3:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:16:29.4476364+07:00 0HMT31ED0AII5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:16:29.4482807+07:00 0HMT31ED0AII5:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:16:29.4495870+07:00 0HMT31ED0AII5:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:16:29.5663287+07:00 0HMT31ED0AII5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:16:29.5669231+07:00 0HMT31ED0AII5:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:16:29.5682332+07:00 0HMT31ED0AII5:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:16:29.5699417+07:00 0HMT31ED0AII5:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T20:16:29.5878200+07:00 0HMT31ED0AII3:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:16:29.5885311+07:00 0HMT31ED0AII3:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:16:29.5901039+07:00 0HMT31ED0AII3:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:16:29.5915347+07:00 0HMT31ED0AII4:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:16:29.5918004+07:00 0HMT31ED0AII3:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:16:29.5927620+07:00 0HMT31ED0AII4:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:16:29.5940229+07:00 0HMT31ED0AII3:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T20:16:29.5943285+07:00 0HMT31ED0AII4:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:16:29.5951523+07:00 0HMT31ED0AII3:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:16:29.5958603+07:00 0HMT31ED0AII4:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T20:16:29.5983120+07:00 0HMT31ED0AII3:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:16:29.6133959+07:00 0HMT31ED0AII3:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:16:29.6145677+07:00 0HMT31ED0AII3:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:16:29.6157712+07:00 0HMT31ED0AII3:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:16:29.6167000+07:00 0HMT31ED0AII3:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:16:30.3481627+07:00 0HMT31ED0AII3:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:16:30.3488078+07:00 0HMT31ED0AII3:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:16:30.3501662+07:00 0HMT31ED0AII3:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:16:30.3527959+07:00 0HMT31ED0AII3:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T20:16:31.5058112+07:00 0HMT31ED0AII3:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:16:31.5063774+07:00 0HMT31ED0AII3:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:16:31.5078711+07:00 0HMT31ED0AII3:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:16:31.5104009+07:00 0HMT31ED0AII3:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T20:16:32.0915625+07:00 0HMT31ED0AII3:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:16:32.0920587+07:00 0HMT31ED0AII3:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:16:32.0933652+07:00 0HMT31ED0AII3:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:16:32.0947320+07:00 0HMT31ED0AII3:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T20:16:32.7486557+07:00 0HMT31ED0AII3:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:16:32.7492402+07:00 0HMT31ED0AII3:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:16:32.7505385+07:00 0HMT31ED0AII3:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:16:32.7518948+07:00 0HMT31ED0AII3:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T20:16:33.0866967+07:00 0HMT31ED0AII3:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:16:33.0871784+07:00 0HMT31ED0AII3:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:16:33.0884591+07:00 0HMT31ED0AII3:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:16:33.0902180+07:00 0HMT31ED0AII3:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T20:16:33.3441385+07:00 0HMT31ED0AII3:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:16:33.3446243+07:00 0HMT31ED0AII3:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:16:33.3459051+07:00 0HMT31ED0AII3:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:16:33.3471928+07:00 0HMT31ED0AII3:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T20:16:33.5346688+07:00 0HMT31ED0AII3:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:16:33.5351412+07:00 0HMT31ED0AII3:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:16:33.5367886+07:00 0HMT31ED0AII3:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:16:33.5387418+07:00 0HMT31ED0AII3:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T20:16:38.3174920+07:00 0HMT31ED0AII3:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:16:38.3182129+07:00 0HMT31ED0AII3:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:16:38.3197368+07:00 0HMT31ED0AII3:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:16:38.3231928+07:00 0HMT31ED0AII3:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-22T20:16:38.4466002+07:00 0HMT31ED0AII3:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:16:38.4479050+07:00 0HMT31ED0AII3:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:16:38.4495366+07:00 0HMT31ED0AII3:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:16:38.4529727+07:00 0HMT31ED0AII3:00000012 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T20:16:38.4557966+07:00 0HMT31ED0AII3:00000012 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-22T20:16:39.6953429+07:00 0HMT31ED0AII3:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:16:39.6957997+07:00 0HMT31ED0AII3:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:16:39.6970669+07:00 0HMT31ED0AII3:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:16:39.6999288+07:00 0HMT31ED0AII3:00000014 [INF] Executed DbCommand ("2"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-22T20:16:39.7020605+07:00 0HMT31ED0AII3:00000014 [INF] Executed DbCommand ("2"ms) [Parameters=["@p2='?' (Size = 100), @p0='?' (Size = 50), @p1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Messages] SET [FileStatus] = @p0, [FileUrls] = @p1
WHERE [Id] = @p2;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-22T20:16:39.7385468+07:00 0HMT31ED0AII3:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:16:39.7392238+07:00 0HMT31ED0AII3:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:16:39.7413650+07:00 0HMT31ED0AII3:00000015 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:16:39.7439036+07:00 0HMT31ED0AII3:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T20:17:13.6282186+07:00 0HMT31ED0AII3:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:17:13.6286698+07:00 0HMT31ED0AII4:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:17:13.6287617+07:00 0HMT31ED0AII3:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:17:13.6289771+07:00 0HMT31ED0AII4:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:17:13.6397428+07:00 0HMT31ED0AII3:00000017 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:17:13.6397427+07:00 0HMT31ED0AII4:00000006 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:17:13.6434174+07:00 0HMT31ED0AII3:00000017 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:17:13.6435812+07:00 0HMT31ED0AII4:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T20:17:13.6497687+07:00 0HMT31ED0AII3:00000017 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T20:17:13.6529534+07:00 0HMT31ED0AII3:00000017 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T20:17:13.6555037+07:00 0HMT31ED0AII3:00000017 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:17:13.6582029+07:00 0HMT31ED0AII3:00000017 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:17:13.6595674+07:00 0HMT31ED0AII3:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:17:13.6607655+07:00 0HMT31ED0AII3:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:17:13.6618454+07:00 0HMT31ED0AII3:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:17:22.9994826+07:00 0HMT31ED0AII5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:17:23.0000883+07:00 0HMT31ED0AII5:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:17:23.0016889+07:00 0HMT31ED0AII5:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:17:24.8615771+07:00 0HMT31ED0AII3:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:17:24.8617099+07:00 0HMT31ED0AII4:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:17:24.8624049+07:00 0HMT31ED0AII3:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:17:24.8624301+07:00 0HMT31ED0AII4:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:17:24.8637874+07:00 0HMT31ED0AII3:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:17:24.8637874+07:00 0HMT31ED0AII4:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:17:24.8662801+07:00 0HMT31ED0AII3:00000019 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:17:24.8662801+07:00 0HMT31ED0AII4:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T20:17:24.8699244+07:00 0HMT31ED0AII3:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T20:17:24.8711407+07:00 0HMT31ED0AII3:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T20:17:24.8719819+07:00 0HMT31ED0AII3:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:17:24.8728410+07:00 0HMT31ED0AII3:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:17:24.8735792+07:00 0HMT31ED0AII3:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:17:24.8743446+07:00 0HMT31ED0AII3:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:17:24.8751214+07:00 0HMT31ED0AII3:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:17:24.9691344+07:00 0HMT31ED0AII7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:17:24.9698422+07:00 0HMT31ED0AII7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:17:24.9722222+07:00 0HMT31ED0AII7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:17:24.9773917+07:00 0HMT31ED0AII7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:17:24.9778935+07:00 0HMT31ED0AII7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:17:24.9793619+07:00 0HMT31ED0AII7:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:17:24.9819566+07:00 0HMT31ED0AII7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T20:17:25.0168991+07:00 0HMT31ED0AII3:0000001A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:17:25.0169247+07:00 0HMT31ED0AII4:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:17:25.0175069+07:00 0HMT31ED0AII3:0000001A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:17:25.0175069+07:00 0HMT31ED0AII4:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:17:25.0187838+07:00 0HMT31ED0AII4:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:17:25.0187807+07:00 0HMT31ED0AII3:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:17:25.0202077+07:00 0HMT31ED0AII3:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:17:25.0200371+07:00 0HMT31ED0AII4:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T20:17:25.0260698+07:00 0HMT31ED0AII3:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T20:17:25.0282508+07:00 0HMT31ED0AII3:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T20:17:25.0381899+07:00 0HMT31ED0AII3:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:17:25.0400339+07:00 0HMT31ED0AII3:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:17:25.0410801+07:00 0HMT31ED0AII3:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:17:25.0420812+07:00 0HMT31ED0AII3:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:17:25.0430636+07:00 0HMT31ED0AII3:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:17:25.5693759+07:00 0HMT31ED0AII3:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:17:25.5698562+07:00 0HMT31ED0AII3:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:17:25.5712210+07:00 0HMT31ED0AII3:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:17:25.5743581+07:00 0HMT31ED0AII3:0000001C [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T20:17:25.6545240+07:00 0HMT31ED0AII3:0000001E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:17:25.6550493+07:00 0HMT31ED0AII3:0000001E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:17:25.6565743+07:00 0HMT31ED0AII3:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:17:25.6598396+07:00 0HMT31ED0AII3:0000001E [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T20:38:43.6825937+07:00 0HMT31ED0AII8:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:38:43.6868459+07:00 0HMT31ED0AII8:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:38:43.6963180+07:00 0HMT31ED0AII8:00000003 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:38:43.7012325+07:00 0HMT31ED0AII8:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T20:38:43.8706257+07:00 0HMT31ED0AII8:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:38:43.8711163+07:00 0HMT31ED0AII8:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:38:43.8725689+07:00 0HMT31ED0AII8:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:38:43.8744152+07:00 0HMT31ED0AII8:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T20:38:43.9441273+07:00 0HMT31ED0AII8:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:38:43.9446076+07:00 0HMT31ED0AII8:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:38:43.9460708+07:00 0HMT31ED0AII8:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:38:43.9492685+07:00 0HMT31ED0AII8:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T20:38:45.4912143+07:00 0HMT31ED0AII7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:38:45.4926615+07:00 0HMT31ED0AII7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:38:45.4940813+07:00 0HMT31ED0AII7:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:38:48.5078731+07:00 0HMT31ED0AII8:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:38:48.5083878+07:00 0HMT31ED0AII8:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:38:48.5096388+07:00 0HMT31ED0AII8:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:38:48.5131176+07:00 0HMT31ED0AII8:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:38:48.5142205+07:00 0HMT31ED0AIIA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:38:48.5182769+07:00 0HMT31ED0AII8:0000000A [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T20:38:48.5184677+07:00 0HMT31ED0AIIA:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:38:48.5202847+07:00 0HMT31ED0AIIA:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:38:48.5223181+07:00 0HMT31ED0AII8:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T20:38:48.5241614+07:00 0HMT31ED0AIIA:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T20:38:48.5260807+07:00 0HMT31ED0AII8:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:38:48.5288219+07:00 0HMT31ED0AII8:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:38:48.5302532+07:00 0HMT31ED0AII8:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:38:48.5316048+07:00 0HMT31ED0AII8:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:38:48.5324782+07:00 0HMT31ED0AII8:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:38:48.7254519+07:00 0HMT31ED0AII9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:38:48.7259620+07:00 0HMT31ED0AII9:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:38:48.7277204+07:00 0HMT31ED0AII9:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:38:48.7282427+07:00 0HMT31ED0AII9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:38:48.7286482+07:00 0HMT31ED0AII9:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:38:48.7301293+07:00 0HMT31ED0AII9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:38:48.7322030+07:00 0HMT31ED0AII9:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T20:38:48.7502826+07:00 0HMT31ED0AII8:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:38:48.7502869+07:00 0HMT31ED0AIIA:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:38:48.7508376+07:00 0HMT31ED0AIIA:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:38:48.7508376+07:00 0HMT31ED0AII8:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:38:48.7522986+07:00 0HMT31ED0AII8:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:38:48.7523454+07:00 0HMT31ED0AIIA:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:38:48.7576627+07:00 0HMT31ED0AIIA:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T20:38:48.7763872+07:00 0HMT31ED0AII8:0000000B [INF] Executed DbCommand ("24"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:38:48.8237086+07:00 0HMT31ED0AII8:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T20:38:48.8260276+07:00 0HMT31ED0AII8:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T20:38:48.8270671+07:00 0HMT31ED0AII8:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:38:48.8281825+07:00 0HMT31ED0AII8:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:38:48.8291290+07:00 0HMT31ED0AII8:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:38:48.8300390+07:00 0HMT31ED0AII8:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T20:38:48.8308080+07:00 0HMT31ED0AII8:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T20:38:49.3288566+07:00 0HMT31ED0AII8:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:38:49.3293721+07:00 0HMT31ED0AII8:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:38:49.3313169+07:00 0HMT31ED0AII8:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:38:49.3329642+07:00 0HMT31ED0AII8:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T20:38:49.4105549+07:00 0HMT31ED0AII8:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:38:49.4118013+07:00 0HMT31ED0AII8:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:38:49.4136363+07:00 0HMT31ED0AII8:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:38:49.4159431+07:00 0HMT31ED0AII8:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T20:39:25.8461285+07:00 0HMT31ED0AII8:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:39:25.8466940+07:00 0HMT31ED0AII8:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:39:25.8557451+07:00 0HMT31ED0AII8:00000011 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:39:25.8595856+07:00 0HMT31ED0AII8:00000011 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T20:39:26.0850754+07:00 0HMT31ED0AII8:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:39:26.0856654+07:00 0HMT31ED0AII8:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:39:26.0870630+07:00 0HMT31ED0AII8:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:39:26.0897819+07:00 0HMT31ED0AII8:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T20:39:26.1389771+07:00 0HMT31ED0AII8:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T20:39:26.1395064+07:00 0HMT31ED0AII8:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T20:39:26.1409600+07:00 0HMT31ED0AII8:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T20:39:26.1446871+07:00 0HMT31ED0AII8:00000015 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T21:23:25.9859189+07:00 0HMT31ED0AII9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:23:25.9908471+07:00 0HMT31ED0AII9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:23:26.0057344+07:00 0HMT31ED0AII9:00000002 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:23:29.9406005+07:00 0HMT31ED0AIIB:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:23:29.9418602+07:00 0HMT31ED0AIIB:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:23:29.9443984+07:00 0HMT31ED0AIIB:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:23:29.9497625+07:00 0HMT31ED0AIIB:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:23:29.9592949+07:00 0HMT31ED0AIIB:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T21:23:29.9604659+07:00 0HMT31ED0AIIC:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:23:29.9620114+07:00 0HMT31ED0AIIC:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:23:29.9676856+07:00 0HMT31ED0AIIC:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:23:29.9774198+07:00 0HMT31ED0AIIC:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T21:23:29.9820360+07:00 0HMT31ED0AIID:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:23:29.9980318+07:00 0HMT31ED0AIID:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:23:29.9992428+07:00 0HMT31ED0AIIB:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T21:23:29.9999535+07:00 0HMT31ED0AIID:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:23:30.0040289+07:00 0HMT31ED0AIIB:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:23:30.0100943+07:00 0HMT31ED0AIIB:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T21:23:30.0131591+07:00 0HMT31ED0AIIB:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:23:30.0169184+07:00 0HMT31ED0AIIB:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T21:23:30.0549337+07:00 0HMT31ED0AIIB:00000003 [INF] Executed DbCommand ("25"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:23:30.0724187+07:00 0HMT31ED0AIID:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:23:30.0764667+07:00 0HMT31ED0AIID:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:23:30.0805467+07:00 0HMT31ED0AIID:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:23:30.0847024+07:00 0HMT31ED0AIID:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T21:23:30.2876232+07:00 0HMT31ED0AIIB:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:23:30.2876591+07:00 0HMT31ED0AIIC:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:23:30.2883118+07:00 0HMT31ED0AIIC:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:23:30.2884842+07:00 0HMT31ED0AIIB:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:23:30.2899176+07:00 0HMT31ED0AIIC:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:23:30.2901397+07:00 0HMT31ED0AIIB:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:23:30.2917311+07:00 0HMT31ED0AIIC:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T21:23:30.2917359+07:00 0HMT31ED0AIIB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:23:30.2972329+07:00 0HMT31ED0AIIB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T21:23:30.2995012+07:00 0HMT31ED0AIIB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T21:23:30.3005612+07:00 0HMT31ED0AIIB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:23:30.3018592+07:00 0HMT31ED0AIIB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T21:23:30.3031043+07:00 0HMT31ED0AIIB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:23:30.3045966+07:00 0HMT31ED0AIIB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T21:23:30.3058100+07:00 0HMT31ED0AIIB:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:23:30.9403099+07:00 0HMT31ED0AIIB:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:23:30.9409419+07:00 0HMT31ED0AIIB:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:23:30.9428187+07:00 0HMT31ED0AIIB:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:23:30.9473966+07:00 0HMT31ED0AIIB:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T21:23:31.3077005+07:00 0HMT31ED0AIIB:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:23:31.3082451+07:00 0HMT31ED0AIIB:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:23:31.3096177+07:00 0HMT31ED0AIIB:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:23:31.3135031+07:00 0HMT31ED0AIIB:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T21:24:10.1284039+07:00 0HMT31ED0AIIB:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:24:10.1288944+07:00 0HMT31ED0AIIB:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:24:10.1304292+07:00 0HMT31ED0AIIB:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:24:10.1322602+07:00 0HMT31ED0AIIB:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T21:24:10.8112199+07:00 0HMT31ED0AIID:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:24:10.8151504+07:00 0HMT31ED0AIID:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:24:10.8166062+07:00 0HMT31ED0AIID:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:24:13.4536781+07:00 0HMT31ED0AIIB:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:24:13.4545632+07:00 0HMT31ED0AIIB:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:24:13.4569062+07:00 0HMT31ED0AIIB:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:24:13.4597735+07:00 0HMT31ED0AIIB:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:24:13.4627382+07:00 0HMT31ED0AIIB:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T21:24:13.4712421+07:00 0HMT31ED0AIIB:0000000E [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T21:24:13.4721771+07:00 0HMT31ED0AIIC:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:24:13.4726057+07:00 0HMT31ED0AIIB:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:24:13.4732031+07:00 0HMT31ED0AIIC:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:24:13.4741072+07:00 0HMT31ED0AIIB:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T21:24:13.4759246+07:00 0HMT31ED0AIIC:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:24:13.4760944+07:00 0HMT31ED0AIIB:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:24:13.4792902+07:00 0HMT31ED0AIIC:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T21:24:13.4792942+07:00 0HMT31ED0AIIB:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T21:24:13.4817268+07:00 0HMT31ED0AIIB:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:24:13.5613106+07:00 0HMT31ED0AIIE:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:24:13.5619201+07:00 0HMT31ED0AIIE:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:24:13.5635808+07:00 0HMT31ED0AIIE:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:24:13.5693788+07:00 0HMT31ED0AIIE:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:24:13.5701137+07:00 0HMT31ED0AIIE:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:24:13.5717664+07:00 0HMT31ED0AIIE:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:24:13.5730035+07:00 0HMT31ED0AIIE:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T21:24:13.6031016+07:00 0HMT31ED0AIIB:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:24:13.6031016+07:00 0HMT31ED0AIIC:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:24:13.6041450+07:00 0HMT31ED0AIIC:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:24:13.6041621+07:00 0HMT31ED0AIIB:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:24:13.6059921+07:00 0HMT31ED0AIIB:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:24:13.6059921+07:00 0HMT31ED0AIIC:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:24:13.6074995+07:00 0HMT31ED0AIIB:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:24:13.6075847+07:00 0HMT31ED0AIIC:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T21:24:13.6120894+07:00 0HMT31ED0AIIB:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T21:24:13.6132223+07:00 0HMT31ED0AIIB:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T21:24:13.6144256+07:00 0HMT31ED0AIIB:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:24:13.6158160+07:00 0HMT31ED0AIIB:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T21:24:13.6167642+07:00 0HMT31ED0AIIB:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:24:13.6176815+07:00 0HMT31ED0AIIB:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T21:24:13.6184977+07:00 0HMT31ED0AIIB:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:24:14.6760150+07:00 0HMT31ED0AIIB:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:24:14.6766283+07:00 0HMT31ED0AIIB:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:24:14.6779809+07:00 0HMT31ED0AIIB:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:24:14.6795189+07:00 0HMT31ED0AIIB:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T21:24:14.7699969+07:00 0HMT31ED0AIIB:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:24:14.7708363+07:00 0HMT31ED0AIIB:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:24:14.7723351+07:00 0HMT31ED0AIIB:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:24:14.7750056+07:00 0HMT31ED0AIIB:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T21:49:50.9817499+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-22T21:49:50.9894217+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-22T21:49:50.9897369+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-22T21:49:50.9897662+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-22T21:49:54.6954586+07:00 0HMT33S60M234:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-22T21:49:55.8407177+07:00 0HMT33S60M234:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:49:55.8407187+07:00 0HMT33S60M233:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:49:55.8407180+07:00 0HMT33S60M235:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:49:56.6498302+07:00 0HMT33S60M233:00000003 [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:49:56.6498305+07:00 0HMT33S60M234:00000002 [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:49:56.6498306+07:00 0HMT33S60M235:00000003 [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:49:56.7177351+07:00 0HMT33S60M235:00000003 [INF] Executed DbCommand ("48"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:49:56.7177371+07:00 0HMT33S60M234:00000002 [INF] Executed DbCommand ("48"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:49:56.7177353+07:00 0HMT33S60M233:00000003 [INF] Executed DbCommand ("48"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:49:56.8095488+07:00 0HMT33S60M234:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:49:56.8176778+07:00 0HMT33S60M234:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:49:56.8210224+07:00 0HMT33S60M234:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:49:57.3848802+07:00 0HMT33S60M234:00000002 [INF] Executed DbCommand ("66"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T21:49:57.3848803+07:00 0HMT33S60M235:00000003 [INF] Executed DbCommand ("65"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T21:49:57.3848804+07:00 0HMT33S60M233:00000003 [INF] Executed DbCommand ("65"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:49:57.4593480+07:00 0HMT33S60M235:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:49:57.4604242+07:00 0HMT33S60M235:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:49:57.4612508+07:00 0HMT33S60M236:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:49:57.4619633+07:00 0HMT33S60M236:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:49:57.4623811+07:00 0HMT33S60M235:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:49:57.4635324+07:00 0HMT33S60M236:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:49:57.4707745+07:00 0HMT33S60M235:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:49:57.4707743+07:00 0HMT33S60M236:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T21:49:57.6097895+07:00 0HMT33S60M235:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T21:49:57.6099386+07:00 0HMT33S60M233:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T21:49:57.6577604+07:00 0HMT33S60M235:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T21:49:57.6577605+07:00 0HMT33S60M233:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T21:49:57.6669521+07:00 0HMT33S60M235:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:49:57.6669542+07:00 0HMT33S60M233:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:49:57.6846591+07:00 0HMT33S60M233:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T21:49:57.6846593+07:00 0HMT33S60M235:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T21:49:57.6863734+07:00 0HMT33S60M233:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:49:57.6863747+07:00 0HMT33S60M235:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:49:57.6877667+07:00 0HMT33S60M233:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T21:49:57.6877689+07:00 0HMT33S60M235:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T21:49:57.6891561+07:00 0HMT33S60M233:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:49:57.6891651+07:00 0HMT33S60M235:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T21:49:58.4260188+07:00 0HMT33S60M235:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:49:58.4266098+07:00 0HMT33S60M235:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:49:58.4279695+07:00 0HMT33S60M235:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:49:58.4473169+07:00 0HMT33S60M235:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T21:49:58.5636971+07:00 0HMT33S60M235:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T21:49:58.5643056+07:00 0HMT33S60M235:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T21:49:58.5662373+07:00 0HMT33S60M235:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T21:49:58.6343344+07:00 0HMT33S60M235:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T22:07:04.5929883+07:00 0HMT33S60M234:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T22:07:04.5967461+07:00 0HMT33S60M234:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T22:07:04.6076182+07:00 0HMT33S60M234:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T22:07:04.6857213+07:00 0HMT33S60M238:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T22:07:04.6862585+07:00 0HMT33S60M238:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T22:07:04.6875033+07:00 0HMT33S60M238:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T22:07:04.6919252+07:00 0HMT33S60M238:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T22:07:04.6967942+07:00 0HMT33S60M238:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T22:07:04.6994965+07:00 0HMT33S60M238:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T22:07:04.7021917+07:00 0HMT33S60M238:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T22:07:04.7042265+07:00 0HMT33S60M238:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T22:07:04.7051219+07:00 0HMT33S60M238:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T22:07:04.7060264+07:00 0HMT33S60M238:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T22:07:04.7068874+07:00 0HMT33S60M238:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T22:07:04.7197142+07:00 0HMT33S60M238:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T22:07:04.7201969+07:00 0HMT33S60M238:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T22:07:04.7218109+07:00 0HMT33S60M238:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T22:07:04.7254420+07:00 0HMT33S60M238:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T22:07:06.7358166+07:00 0HMT33S60M238:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T22:07:06.7374346+07:00 0HMT33S60M238:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T22:07:06.7392341+07:00 0HMT33S60M238:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T22:07:06.7407843+07:00 0HMT33S60M238:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T22:07:06.7431551+07:00 0HMT33S60M237:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T22:07:06.7433650+07:00 0HMT33S60M238:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T22:07:06.7527950+07:00 0HMT33S60M238:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T22:07:06.7539399+07:00 0HMT33S60M238:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T22:07:06.7541047+07:00 0HMT33S60M237:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T22:07:06.7551121+07:00 0HMT33S60M238:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T22:07:06.7559791+07:00 0HMT33S60M237:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T22:07:06.7560180+07:00 0HMT33S60M238:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T22:07:06.7573060+07:00 0HMT33S60M238:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T22:07:06.7573060+07:00 0HMT33S60M237:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T22:07:06.7597166+07:00 0HMT33S60M238:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T22:07:06.8334795+07:00 0HMT33S60M239:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T22:07:06.8342818+07:00 0HMT33S60M239:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T22:07:06.8363738+07:00 0HMT33S60M239:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T22:07:06.8894166+07:00 0HMT33S60M239:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T22:07:06.8899790+07:00 0HMT33S60M239:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T22:07:06.8913384+07:00 0HMT33S60M239:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T22:07:06.8934404+07:00 0HMT33S60M239:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-22T22:07:06.9505335+07:00 0HMT33S60M238:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T22:07:06.9512705+07:00 0HMT33S60M238:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T22:07:06.9518512+07:00 0HMT33S60M237:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T22:07:06.9523580+07:00 0HMT33S60M237:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T22:07:06.9532031+07:00 0HMT33S60M238:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T22:07:06.9536617+07:00 0HMT33S60M237:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T22:07:06.9545405+07:00 0HMT33S60M238:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T22:07:06.9565720+07:00 0HMT33S60M237:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-22T22:07:06.9585869+07:00 0HMT33S60M238:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-22T22:07:06.9595933+07:00 0HMT33S60M238:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-22T22:07:06.9603841+07:00 0HMT33S60M238:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T22:07:06.9613148+07:00 0HMT33S60M238:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T22:07:06.9625606+07:00 0HMT33S60M238:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T22:07:06.9637640+07:00 0HMT33S60M238:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-22T22:07:06.9648142+07:00 0HMT33S60M238:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-22T22:07:07.6412475+07:00 0HMT33S60M238:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T22:07:07.6417259+07:00 0HMT33S60M238:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T22:07:07.6431948+07:00 0HMT33S60M238:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T22:07:07.6471391+07:00 0HMT33S60M238:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-22T22:07:07.7178919+07:00 0HMT33S60M238:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T22:07:07.7185823+07:00 0HMT33S60M238:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T22:07:07.7202003+07:00 0HMT33S60M238:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-22T22:07:07.7237336+07:00 0HMT33S60M238:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-22T22:43:21.2412624+07:00 0HMT33S60M239:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-22T22:43:21.2453894+07:00 0HMT33S60M239:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-22T22:43:21.2575642+07:00 0HMT33S60M239:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
