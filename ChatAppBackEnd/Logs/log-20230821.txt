2023-08-21T14:13:38.6421667+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-21T14:13:38.6502672+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-21T14:13:38.6505800+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-21T14:13:38.6506070+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-21T14:13:51.7494203+07:00 0HMT22OM0OUO2:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-21T14:13:53.0549357+07:00 0HMT22OM0OUO1:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:13:53.0549366+07:00 0HMT22OM0OUO0:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:13:53.0549360+07:00 0HMT22OM0OUO2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:13:54.3339977+07:00 0HMT22OM0OUO2:00000002 [INF] Executed DbCommand ("26"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:13:54.3339931+07:00 0HMT22OM0OUO1:00000003 [INF] Executed DbCommand ("26"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:13:54.3339915+07:00 0HMT22OM0OUO0:00000003 [INF] Executed DbCommand ("26"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:13:54.3980800+07:00 0HMT22OM0OUO1:00000003 [INF] Executed DbCommand ("36"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:13:54.3980798+07:00 0HMT22OM0OUO0:00000003 [INF] Executed DbCommand ("36"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:13:54.3980800+07:00 0HMT22OM0OUO2:00000002 [INF] Executed DbCommand ("36"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:13:54.4883818+07:00 0HMT22OM0OUO2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:13:54.4951921+07:00 0HMT22OM0OUO2:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:13:54.4974040+07:00 0HMT22OM0OUO2:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:13:54.9570653+07:00 0HMT22OM0OUO0:00000003 [INF] Executed DbCommand ("61"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T14:13:54.9570630+07:00 0HMT22OM0OUO1:00000003 [INF] Executed DbCommand ("61"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T14:13:54.9570597+07:00 0HMT22OM0OUO2:00000002 [INF] Executed DbCommand ("62"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T14:13:55.1480341+07:00 0HMT22OM0OUO0:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T14:13:55.1918983+07:00 0HMT22OM0OUO0:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T14:13:55.2008265+07:00 0HMT22OM0OUO0:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T14:13:55.2187057+07:00 0HMT22OM0OUO0:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T14:13:55.2223395+07:00 0HMT22OM0OUO0:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T14:13:56.7382528+07:00 0HMT22OM0OUO0:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:13:56.7388454+07:00 0HMT22OM0OUO0:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:13:56.7402789+07:00 0HMT22OM0OUO0:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:13:56.7583508+07:00 0HMT22OM0OUO0:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T14:13:56.8812611+07:00 0HMT22OM0OUO1:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:13:56.8812604+07:00 0HMT22OM0OUO0:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:13:56.8818384+07:00 0HMT22OM0OUO0:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:13:56.8818384+07:00 0HMT22OM0OUO1:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:13:56.8834839+07:00 0HMT22OM0OUO0:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:13:56.8837045+07:00 0HMT22OM0OUO1:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:13:56.8990563+07:00 0HMT22OM0OUO1:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:13:56.9074364+07:00 0HMT22OM0OUO0:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:13:56.9076645+07:00 0HMT22OM0OUO1:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:13:56.9081145+07:00 0HMT22OM0OUO1:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:13:56.9095709+07:00 0HMT22OM0OUO1:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:13:56.9119464+07:00 0HMT22OM0OUO1:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:14:01.3321631+07:00 0HMT22OM0OUO0:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:14:01.3329742+07:00 0HMT22OM0OUO0:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:14:01.3344760+07:00 0HMT22OM0OUO0:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:14:01.4490199+07:00 0HMT22OM0OUO0:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T14:14:01.5115206+07:00 0HMT22OM0OUO0:00000009 [INF] Executed DbCommand ("3"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-21T14:14:01.5645047+07:00 0HMT22OM0OUO0:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:14:01.5649745+07:00 0HMT22OM0OUO0:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:14:01.5666271+07:00 0HMT22OM0OUO0:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:14:01.5690191+07:00 0HMT22OM0OUO0:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:14:01.5867248+07:00 0HMT22OM0OUO0:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T14:14:05.3052566+07:00 0HMT22OM0OUO0:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:14:05.3058536+07:00 0HMT22OM0OUO0:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:14:05.3072496+07:00 0HMT22OM0OUO0:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:14:05.3098349+07:00 0HMT22OM0OUO0:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T14:14:05.3119982+07:00 0HMT22OM0OUO0:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-21T14:14:05.3414869+07:00 0HMT22OM0OUO0:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:14:05.3421682+07:00 0HMT22OM0OUO0:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:14:05.3435317+07:00 0HMT22OM0OUO0:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:14:05.3457362+07:00 0HMT22OM0OUO0:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:14:05.3479682+07:00 0HMT22OM0OUO0:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T14:14:10.9069496+07:00 0HMT22OM0OUO0:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:14:10.9075650+07:00 0HMT22OM0OUO0:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:14:10.9089214+07:00 0HMT22OM0OUO0:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:14:10.9108901+07:00 0HMT22OM0OUO0:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T14:14:10.9125497+07:00 0HMT22OM0OUO0:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-21T14:14:10.9424569+07:00 0HMT22OM0OUO0:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:14:10.9433454+07:00 0HMT22OM0OUO0:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:14:10.9448647+07:00 0HMT22OM0OUO0:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:14:10.9475090+07:00 0HMT22OM0OUO0:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:14:10.9494955+07:00 0HMT22OM0OUO0:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T14:14:12.4162344+07:00 0HMT22OM0OUO0:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:14:12.4167256+07:00 0HMT22OM0OUO0:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:14:12.4180025+07:00 0HMT22OM0OUO0:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:14:12.4196655+07:00 0HMT22OM0OUO0:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T14:14:12.4494226+07:00 0HMT22OM0OUO0:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:14:12.4499572+07:00 0HMT22OM0OUO0:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:14:12.4500163+07:00 0HMT22OM0OUO1:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:14:12.4504055+07:00 0HMT22OM0OUO1:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:14:12.4516680+07:00 0HMT22OM0OUO0:00000016 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:14:12.4516680+07:00 0HMT22OM0OUO1:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:14:12.4539667+07:00 0HMT22OM0OUO1:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:14:12.4539619+07:00 0HMT22OM0OUO0:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:14:14.8279276+07:00 0HMT22OM0OUO0:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:14:14.8285047+07:00 0HMT22OM0OUO0:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:14:14.8297344+07:00 0HMT22OM0OUO0:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:14:14.8315078+07:00 0HMT22OM0OUO0:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T14:14:14.8823794+07:00 0HMT22OM0OUO0:0000001A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:14:14.8829298+07:00 0HMT22OM0OUO0:0000001A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:14:14.8832134+07:00 0HMT22OM0OUO1:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:14:14.8836381+07:00 0HMT22OM0OUO1:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:14:14.8846606+07:00 0HMT22OM0OUO0:0000001A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:14:14.8848639+07:00 0HMT22OM0OUO1:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:14:14.8871559+07:00 0HMT22OM0OUO0:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:14:14.8871559+07:00 0HMT22OM0OUO1:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:14:14.9060853+07:00 0HMT22OM0OUO0:0000001B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:14:14.9066075+07:00 0HMT22OM0OUO0:0000001B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:14:14.9079345+07:00 0HMT22OM0OUO0:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:14:14.9102877+07:00 0HMT22OM0OUO0:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:19:13.7268291+07:00 0HMT22OM0OUO3:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:19:13.7274390+07:00 0HMT22OM0OUO3:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:19:13.7379905+07:00 0HMT22OM0OUO3:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:19:13.7422127+07:00 0HMT22OM0OUO3:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T14:19:13.7723087+07:00 0HMT22OM0OUO3:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:19:13.7731893+07:00 0HMT22OM0OUO3:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:19:13.7747253+07:00 0HMT22OM0OUO3:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:19:13.7840374+07:00 0HMT22OM0OUO4:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:19:13.7850426+07:00 0HMT22OM0OUO4:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:19:13.7866745+07:00 0HMT22OM0OUO3:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:19:13.7874096+07:00 0HMT22OM0OUO4:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:19:13.7936788+07:00 0HMT22OM0OUO4:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:19:14.0063791+07:00 0HMT22OM0OUO4:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:19:14.0068622+07:00 0HMT22OM0OUO4:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:19:14.0081177+07:00 0HMT22OM0OUO4:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:19:14.0103313+07:00 0HMT22OM0OUO4:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T14:19:14.0664033+07:00 0HMT22OM0OUO4:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:19:14.0669219+07:00 0HMT22OM0OUO4:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:19:14.0682364+07:00 0HMT22OM0OUO4:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:19:14.0703829+07:00 0HMT22OM0OUO4:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:19:14.0839295+07:00 0HMT22OM0OUO4:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:19:14.0844181+07:00 0HMT22OM0OUO4:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:19:14.0856793+07:00 0HMT22OM0OUO4:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:19:14.0877059+07:00 0HMT22OM0OUO4:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:19:14.0969026+07:00 0HMT22OM0OUO4:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:19:14.0974181+07:00 0HMT22OM0OUO4:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:19:14.0988061+07:00 0HMT22OM0OUO4:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:19:14.1016204+07:00 0HMT22OM0OUO4:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:19:17.3938626+07:00 0HMT22OM0OUO4:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:19:17.3944244+07:00 0HMT22OM0OUO4:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:19:17.4027631+07:00 0HMT22OM0OUO4:0000000C [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:19:17.4256727+07:00 0HMT22OM0OUO4:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T14:19:17.4744093+07:00 0HMT22OM0OUO4:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:19:17.4749601+07:00 0HMT22OM0OUO4:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:19:17.4892535+07:00 0HMT22OM0OUO4:0000000D [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:19:17.4926551+07:00 0HMT22OM0OUO4:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:19:17.4962443+07:00 0HMT22OM0OUO4:0000000D [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T14:19:20.2089006+07:00 0HMT22OM0OUO4:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:19:20.2094725+07:00 0HMT22OM0OUO4:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:19:20.2173475+07:00 0HMT22OM0OUO4:0000000F [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:19:20.2277339+07:00 0HMT22OM0OUO4:0000000F [INF] Executed DbCommand ("3"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-21T14:19:20.2342032+07:00 0HMT22OM0OUO4:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@p2='?' (Size = 100), @p0='?' (Size = 50), @p1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Messages] SET [FileStatus] = @p0, [FileUrls] = @p1
WHERE [Id] = @p2;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T14:19:20.2694816+07:00 0HMT22OM0OUO4:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:19:20.2700122+07:00 0HMT22OM0OUO4:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:19:20.2767659+07:00 0HMT22OM0OUO4:00000011 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:19:20.2796619+07:00 0HMT22OM0OUO4:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:20:00.0912146+07:00 0HMT22OM0OUO4:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:20:00.0917146+07:00 0HMT22OM0OUO4:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:20:00.1003250+07:00 0HMT22OM0OUO4:00000013 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:20:00.1046229+07:00 0HMT22OM0OUO4:00000013 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T14:20:00.1539553+07:00 0HMT22OM0OUO4:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:20:00.1545537+07:00 0HMT22OM0OUO4:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:20:00.1603971+07:00 0HMT22OM0OUO4:00000015 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:20:00.1629328+07:00 0HMT22OM0OUO4:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:20:00.1655659+07:00 0HMT22OM0OUO4:00000015 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T14:20:02.3605740+07:00 0HMT22OM0OUO4:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:20:02.3610442+07:00 0HMT22OM0OUO4:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:20:02.3661489+07:00 0HMT22OM0OUO4:00000017 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:20:02.3689019+07:00 0HMT22OM0OUO4:00000017 [INF] Executed DbCommand ("2"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-21T14:20:02.3706290+07:00 0HMT22OM0OUO4:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@p2='?' (Size = 100), @p0='?' (Size = 50), @p1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Messages] SET [FileStatus] = @p0, [FileUrls] = @p1
WHERE [Id] = @p2;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T14:20:02.4042293+07:00 0HMT22OM0OUO4:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:20:02.4048337+07:00 0HMT22OM0OUO4:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:20:02.4118248+07:00 0HMT22OM0OUO4:00000018 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:20:02.4138084+07:00 0HMT22OM0OUO4:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:22:54.3930114+07:00 0HMT22OM0OUO6:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:22:54.3955302+07:00 0HMT22OM0OUO5:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:22:54.3955082+07:00 0HMT22OM0OUO6:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:22:54.3973156+07:00 0HMT22OM0OUO5:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:22:54.4043124+07:00 0HMT22OM0OUO7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:22:54.4118052+07:00 0HMT22OM0OUO7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:22:54.4138796+07:00 0HMT22OM0OUO5:00000003 [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:22:54.4138796+07:00 0HMT22OM0OUO6:00000003 [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:22:54.4144007+07:00 0HMT22OM0OUO7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:22:54.4185401+07:00 0HMT22OM0OUO7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:22:54.4189675+07:00 0HMT22OM0OUO5:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T14:22:54.4190191+07:00 0HMT22OM0OUO6:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T14:22:54.4197083+07:00 0HMT22OM0OUO7:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:22:54.4217723+07:00 0HMT22OM0OUO7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:22:54.4255223+07:00 0HMT22OM0OUO7:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T14:22:54.4260471+07:00 0HMT22OM0OUO5:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T14:22:54.4302258+07:00 0HMT22OM0OUO5:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T14:22:54.4348601+07:00 0HMT22OM0OUO5:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T14:22:54.4377285+07:00 0HMT22OM0OUO5:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T14:22:54.4388658+07:00 0HMT22OM0OUO5:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T14:22:56.8884581+07:00 0HMT22OM0OUO5:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:22:56.8889857+07:00 0HMT22OM0OUO5:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:22:56.8903268+07:00 0HMT22OM0OUO5:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:22:56.8934321+07:00 0HMT22OM0OUO5:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T14:22:56.9706223+07:00 0HMT22OM0OUO5:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:22:56.9711906+07:00 0HMT22OM0OUO5:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:22:56.9715120+07:00 0HMT22OM0OUO6:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:22:56.9718147+07:00 0HMT22OM0OUO6:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:22:56.9725205+07:00 0HMT22OM0OUO5:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:22:56.9726935+07:00 0HMT22OM0OUO6:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:22:56.9753750+07:00 0HMT22OM0OUO5:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:22:56.9753749+07:00 0HMT22OM0OUO6:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:22:56.9841405+07:00 0HMT22OM0OUO5:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:22:56.9846515+07:00 0HMT22OM0OUO5:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:22:56.9862690+07:00 0HMT22OM0OUO5:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:22:56.9897007+07:00 0HMT22OM0OUO5:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:22:57.4072377+07:00 0HMT22OM0OUO5:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:22:57.4077608+07:00 0HMT22OM0OUO5:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:22:57.4090863+07:00 0HMT22OM0OUO5:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:22:57.4106709+07:00 0HMT22OM0OUO5:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T14:22:57.4361971+07:00 0HMT22OM0OUO5:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:22:57.4362184+07:00 0HMT22OM0OUO6:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:22:57.4366366+07:00 0HMT22OM0OUO5:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:22:57.4366415+07:00 0HMT22OM0OUO6:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:22:57.4378646+07:00 0HMT22OM0OUO6:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:22:57.4378638+07:00 0HMT22OM0OUO5:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:22:57.4395512+07:00 0HMT22OM0OUO6:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:22:57.4395514+07:00 0HMT22OM0OUO5:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:22:57.7941322+07:00 0HMT22OM0OUO5:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:22:57.7947380+07:00 0HMT22OM0OUO5:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:22:57.7960408+07:00 0HMT22OM0OUO5:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:22:57.7982229+07:00 0HMT22OM0OUO5:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T14:22:57.8428018+07:00 0HMT22OM0OUO5:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:22:57.8433230+07:00 0HMT22OM0OUO5:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:22:57.8433548+07:00 0HMT22OM0OUO6:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:22:57.8436307+07:00 0HMT22OM0OUO6:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:22:57.8445157+07:00 0HMT22OM0OUO8:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:22:57.8446036+07:00 0HMT22OM0OUO5:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:22:57.8446037+07:00 0HMT22OM0OUO6:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:22:57.8447974+07:00 0HMT22OM0OUO8:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:22:57.8463063+07:00 0HMT22OM0OUO6:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:22:57.8463803+07:00 0HMT22OM0OUO8:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:22:57.8473407+07:00 0HMT22OM0OUO5:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:22:57.8517029+07:00 0HMT22OM0OUO8:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:23:26.9927761+07:00 0HMT22OM0OUO6:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:23:26.9927762+07:00 0HMT22OM0OUO5:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:23:26.9933701+07:00 0HMT22OM0OUO5:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:23:26.9933701+07:00 0HMT22OM0OUO6:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:23:26.9948610+07:00 0HMT22OM0OUO5:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:23:26.9948610+07:00 0HMT22OM0OUO6:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:23:26.9966900+07:00 0HMT22OM0OUO5:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T14:23:26.9966901+07:00 0HMT22OM0OUO6:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T14:23:27.0014009+07:00 0HMT22OM0OUO6:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T14:23:27.0028738+07:00 0HMT22OM0OUO6:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T14:23:27.0042489+07:00 0HMT22OM0OUO6:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T14:23:27.0058435+07:00 0HMT22OM0OUO6:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T14:23:27.0071307+07:00 0HMT22OM0OUO6:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T14:23:28.9953820+07:00 0HMT22OM0OUO7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:23:28.9953819+07:00 0HMT22OM0OUO2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:23:28.9959394+07:00 0HMT22OM0OUO7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:23:28.9959426+07:00 0HMT22OM0OUO2:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:23:28.9974827+07:00 0HMT22OM0OUO2:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:23:28.9974828+07:00 0HMT22OM0OUO7:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:23:31.0336383+07:00 0HMT22OM0OUO5:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:23:31.0343717+07:00 0HMT22OM0OUO5:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:23:31.0360559+07:00 0HMT22OM0OUO5:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:23:31.0379575+07:00 0HMT22OM0OUO5:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T14:23:31.0401947+07:00 0HMT22OM0OUO5:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T14:23:31.0406251+07:00 0HMT22OM0OUO6:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:23:31.0412312+07:00 0HMT22OM0OUO5:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T14:23:31.0414553+07:00 0HMT22OM0OUO6:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:23:31.0425568+07:00 0HMT22OM0OUO5:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T14:23:31.0431162+07:00 0HMT22OM0OUO6:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:23:31.0466547+07:00 0HMT22OM0OUO5:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T14:23:31.0470008+07:00 0HMT22OM0OUO6:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T14:23:31.0492367+07:00 0HMT22OM0OUO5:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T14:23:31.0925459+07:00 0HMT22OM0OUOA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:23:31.0931307+07:00 0HMT22OM0OUOA:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:23:31.0944695+07:00 0HMT22OM0OUOA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:23:31.0970103+07:00 0HMT22OM0OUOA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:23:31.0975239+07:00 0HMT22OM0OUOA:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:23:31.0991402+07:00 0HMT22OM0OUOA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:23:31.1008820+07:00 0HMT22OM0OUOA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T14:23:31.5504331+07:00 0HMT22OM0OUO5:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:23:31.5509543+07:00 0HMT22OM0OUO5:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:23:31.5522945+07:00 0HMT22OM0OUO5:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:23:31.5545962+07:00 0HMT22OM0OUO5:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T14:23:31.7108906+07:00 0HMT22OM0OUO5:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:23:31.7115174+07:00 0HMT22OM0OUO5:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:23:31.7131155+07:00 0HMT22OM0OUO5:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:23:31.7151991+07:00 0HMT22OM0OUO5:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:23:31.7438151+07:00 0HMT22OM0OUO5:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:23:31.7445827+07:00 0HMT22OM0OUO5:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:23:31.7460139+07:00 0HMT22OM0OUO5:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:23:31.7483766+07:00 0HMT22OM0OUO5:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:23:31.7939147+07:00 0HMT22OM0OUO5:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:23:31.7943947+07:00 0HMT22OM0OUO5:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:23:31.7956710+07:00 0HMT22OM0OUO5:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:23:31.7976725+07:00 0HMT22OM0OUO5:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:50:35.3015505+07:00 0HMT22OM0OUOB:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:50:35.3055543+07:00 0HMT22OM0OUOB:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:50:35.3152052+07:00 0HMT22OM0OUOB:00000003 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:50:35.3197239+07:00 0HMT22OM0OUOB:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T14:50:35.3954134+07:00 0HMT22OM0OUOB:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:50:35.3958895+07:00 0HMT22OM0OUOB:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:50:35.3981373+07:00 0HMT22OM0OUOB:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:50:35.4017270+07:00 0HMT22OM0OUOB:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:50:35.4044421+07:00 0HMT22OM0OUOB:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T14:50:36.9511105+07:00 0HMT22OM0OUOB:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:50:36.9516530+07:00 0HMT22OM0OUOB:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:50:36.9530364+07:00 0HMT22OM0OUOB:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:50:36.9554332+07:00 0HMT22OM0OUOB:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-21T14:50:36.9575268+07:00 0HMT22OM0OUOB:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@p2='?' (Size = 100), @p0='?' (Size = 50), @p1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Messages] SET [FileStatus] = @p0, [FileUrls] = @p1
WHERE [Id] = @p2;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T14:50:37.0083315+07:00 0HMT22OM0OUOB:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:50:37.0090291+07:00 0HMT22OM0OUOB:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:50:37.0109067+07:00 0HMT22OM0OUOB:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:50:37.0134491+07:00 0HMT22OM0OUOB:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:50:45.3472134+07:00 0HMT22OM0OUOB:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:50:45.3477342+07:00 0HMT22OM0OUOB:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:50:45.3491779+07:00 0HMT22OM0OUOB:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:50:45.3511773+07:00 0HMT22OM0OUOB:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T14:50:45.3540629+07:00 0HMT22OM0OUOB:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-21T14:50:45.4328084+07:00 0HMT22OM0OUOB:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:50:45.4333368+07:00 0HMT22OM0OUOB:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:50:45.4348197+07:00 0HMT22OM0OUOB:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:50:45.4372690+07:00 0HMT22OM0OUOB:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:50:45.4388973+07:00 0HMT22OM0OUOB:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T14:54:39.1243286+07:00 0HMT22OM0OUOA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:54:39.1292633+07:00 0HMT22OM0OUOA:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:54:39.1432693+07:00 0HMT22OM0OUOA:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:54:39.2814277+07:00 0HMT22OM0OUOC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:54:39.2821515+07:00 0HMT22OM0OUOC:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:54:39.2955283+07:00 0HMT22OM0OUOC:00000002 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:54:39.2961946+07:00 0HMT22OM0OUOC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:54:39.2966647+07:00 0HMT22OM0OUOC:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:54:39.2981424+07:00 0HMT22OM0OUOC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:54:40.9964256+07:00 0HMT22OM0OUOD:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:54:40.9972411+07:00 0HMT22OM0OUOD:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:54:40.9992799+07:00 0HMT22OM0OUOE:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:54:41.0058190+07:00 0HMT22OM0OUOE:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:54:41.0161947+07:00 0HMT22OM0OUOD:00000003 [INF] Executed DbCommand ("18"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:54:41.0229397+07:00 0HMT22OM0OUOE:00000003 [INF] Executed DbCommand ("17"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:54:41.0293782+07:00 0HMT22OM0OUOD:00000003 [INF] Executed DbCommand ("12"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T14:54:41.0341591+07:00 0HMT22OM0OUOF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:54:41.0341593+07:00 0HMT22OM0OUOE:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T14:54:41.0381291+07:00 0HMT22OM0OUOF:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:54:41.0426046+07:00 0HMT22OM0OUOF:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:54:41.0487762+07:00 0HMT22OM0OUOD:00000003 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T14:54:41.0557885+07:00 0HMT22OM0OUOD:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T14:54:41.0625634+07:00 0HMT22OM0OUOD:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T14:54:41.0672905+07:00 0HMT22OM0OUOD:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T14:54:41.0685751+07:00 0HMT22OM0OUOD:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T14:54:41.1109534+07:00 0HMT22OM0OUOF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:54:41.1117290+07:00 0HMT22OM0OUOF:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:54:41.1134994+07:00 0HMT22OM0OUOF:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:54:41.1171564+07:00 0HMT22OM0OUOF:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T14:54:41.8580493+07:00 0HMT22OM0OUOD:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:54:41.8586094+07:00 0HMT22OM0OUOD:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:54:41.8677571+07:00 0HMT22OM0OUOD:00000005 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:54:41.8721638+07:00 0HMT22OM0OUOD:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T14:54:42.0599953+07:00 0HMT22OM0OUOD:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:54:42.0604912+07:00 0HMT22OM0OUOD:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:54:42.0622177+07:00 0HMT22OM0OUOD:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:54:42.0655804+07:00 0HMT22OM0OUOD:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:54:42.0667542+07:00 0HMT22OM0OUOE:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:54:42.0671935+07:00 0HMT22OM0OUOE:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:54:42.0684957+07:00 0HMT22OM0OUOE:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:54:42.0701776+07:00 0HMT22OM0OUOE:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:54:42.0728531+07:00 0HMT22OM0OUOD:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:54:42.0732893+07:00 0HMT22OM0OUOD:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:54:42.0746553+07:00 0HMT22OM0OUOD:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:54:42.0783965+07:00 0HMT22OM0OUOD:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:57:28.4632604+07:00 0HMT22OM0OUOH:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:57:28.4638091+07:00 0HMT22OM0OUOH:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:57:28.4727937+07:00 0HMT22OM0OUOH:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:57:28.4763576+07:00 0HMT22OM0OUOH:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T14:57:28.4786323+07:00 0HMT22OM0OUOH:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-21T14:57:28.5265502+07:00 0HMT22OM0OUOG:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:57:28.5270787+07:00 0HMT22OM0OUOG:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:57:28.5289147+07:00 0HMT22OM0OUOG:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:57:28.5323525+07:00 0HMT22OM0OUOG:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:57:28.5347322+07:00 0HMT22OM0OUOG:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T14:57:29.3557381+07:00 0HMT22OM0OUOH:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:57:29.3562218+07:00 0HMT22OM0OUOH:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:57:29.3576158+07:00 0HMT22OM0OUOH:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:57:29.3592869+07:00 0HMT22OM0OUOH:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T14:57:29.3606087+07:00 0HMT22OM0OUOH:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-21T14:57:29.3975331+07:00 0HMT22OM0OUOG:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:57:29.3980026+07:00 0HMT22OM0OUOG:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:57:29.3992319+07:00 0HMT22OM0OUOG:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:57:29.4009149+07:00 0HMT22OM0OUOG:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:57:29.4028320+07:00 0HMT22OM0OUOG:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T14:57:33.0565296+07:00 0HMT22OM0OUOH:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:57:33.0569969+07:00 0HMT22OM0OUOH:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:57:33.0584504+07:00 0HMT22OM0OUOH:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:57:33.0601110+07:00 0HMT22OM0OUOH:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T14:57:33.0615946+07:00 0HMT22OM0OUOH:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-21T14:57:33.0992995+07:00 0HMT22OM0OUOG:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T14:57:33.1001456+07:00 0HMT22OM0OUOG:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T14:57:33.1016350+07:00 0HMT22OM0OUOG:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T14:57:33.1036084+07:00 0HMT22OM0OUOG:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T14:57:33.1058479+07:00 0HMT22OM0OUOG:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T15:10:35.3719869+07:00 0HMT22OM0OUOI:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:10:35.3757393+07:00 0HMT22OM0OUOI:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:10:35.3868060+07:00 0HMT22OM0OUOI:00000003 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:10:35.3924528+07:00 0HMT22OM0OUOI:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T15:10:35.4710599+07:00 0HMT22OM0OUOI:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:10:35.4716389+07:00 0HMT22OM0OUOI:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:10:35.4737527+07:00 0HMT22OM0OUOI:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:10:35.4792320+07:00 0HMT22OM0OUOJ:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:10:35.4797061+07:00 0HMT22OM0OUOJ:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:10:35.4810595+07:00 0HMT22OM0OUOJ:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:10:35.4867121+07:00 0HMT22OM0OUOJ:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:10:35.4972050+07:00 0HMT22OM0OUOI:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:10:35.6179065+07:00 0HMT22OM0OUOI:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:10:35.6184148+07:00 0HMT22OM0OUOI:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:10:35.6197673+07:00 0HMT22OM0OUOI:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:10:35.6217849+07:00 0HMT22OM0OUOI:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T15:10:35.6828164+07:00 0HMT22OM0OUOI:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:10:35.6836333+07:00 0HMT22OM0OUOI:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:10:35.6854765+07:00 0HMT22OM0OUOI:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:10:35.6876603+07:00 0HMT22OM0OUOI:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:10:35.6992474+07:00 0HMT22OM0OUOI:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:10:35.6998221+07:00 0HMT22OM0OUOI:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:10:35.7013555+07:00 0HMT22OM0OUOI:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:10:35.7036308+07:00 0HMT22OM0OUOI:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:10:35.7982349+07:00 0HMT22OM0OUOI:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:10:35.7986989+07:00 0HMT22OM0OUOI:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:10:35.7999880+07:00 0HMT22OM0OUOI:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:10:35.8030115+07:00 0HMT22OM0OUOI:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:10:47.6175098+07:00 0HMT22OM0OUOJ:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:10:47.6175099+07:00 0HMT22OM0OUOI:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:10:47.6181623+07:00 0HMT22OM0OUOI:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:10:47.6209455+07:00 0HMT22OM0OUOI:0000000F [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:10:47.6231460+07:00 0HMT22OM0OUOJ:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:10:47.6257253+07:00 0HMT22OM0OUOJ:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:10:47.6265656+07:00 0HMT22OM0OUOI:0000000F [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:10:47.6312364+07:00 0HMT22OM0OUOJ:00000005 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:10:47.6336967+07:00 0HMT22OM0OUOI:0000000F [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:10:47.6372587+07:00 0HMT22OM0OUOI:0000000F [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:10:47.6409992+07:00 0HMT22OM0OUOI:0000000F [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:10:47.6447895+07:00 0HMT22OM0OUOI:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:10:47.6458192+07:00 0HMT22OM0OUOI:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:10:49.8983874+07:00 0HMT22OM0OUOF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:10:49.8989077+07:00 0HMT22OM0OUOF:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:10:49.9002969+07:00 0HMT22OM0OUOF:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:10:51.8921308+07:00 0HMT22OM0OUOI:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:10:51.8929661+07:00 0HMT22OM0OUOI:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:10:51.8950010+07:00 0HMT22OM0OUOI:00000012 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:10:51.8975490+07:00 0HMT22OM0OUOI:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:10:51.8993772+07:00 0HMT22OM0OUOJ:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:10:51.8995039+07:00 0HMT22OM0OUOI:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:10:51.8998305+07:00 0HMT22OM0OUOJ:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:10:51.9004725+07:00 0HMT22OM0OUOI:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:10:51.9012580+07:00 0HMT22OM0OUOI:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:10:51.9016041+07:00 0HMT22OM0OUOJ:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:10:51.9021512+07:00 0HMT22OM0OUOI:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:10:51.9039718+07:00 0HMT22OM0OUOI:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:10:51.9051480+07:00 0HMT22OM0OUOJ:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:10:52.0450395+07:00 0HMT22OM0OUOL:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:10:52.0456277+07:00 0HMT22OM0OUOL:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:10:52.0470106+07:00 0HMT22OM0OUOL:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:10:52.0504985+07:00 0HMT22OM0OUOL:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:10:52.0510956+07:00 0HMT22OM0OUOL:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:10:52.0526171+07:00 0HMT22OM0OUOL:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:10:52.0553504+07:00 0HMT22OM0OUOL:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T15:10:52.8583376+07:00 0HMT22OM0OUOI:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:10:52.8588316+07:00 0HMT22OM0OUOI:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:10:52.8601586+07:00 0HMT22OM0OUOI:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:10:52.8616594+07:00 0HMT22OM0OUOI:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T15:10:52.9478726+07:00 0HMT22OM0OUOI:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:10:52.9484645+07:00 0HMT22OM0OUOI:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:10:52.9498693+07:00 0HMT22OM0OUOI:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:10:52.9507947+07:00 0HMT22OM0OUOJ:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:10:52.9516462+07:00 0HMT22OM0OUOJ:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:10:52.9520302+07:00 0HMT22OM0OUOI:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:10:52.9539888+07:00 0HMT22OM0OUOJ:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:10:52.9559600+07:00 0HMT22OM0OUOJ:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:10:53.1954971+07:00 0HMT22OM0OUOI:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:10:53.1959695+07:00 0HMT22OM0OUOI:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:10:53.1975007+07:00 0HMT22OM0OUOI:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:10:53.1995266+07:00 0HMT22OM0OUOI:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T15:10:53.2403206+07:00 0HMT22OM0OUOI:0000001B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:10:53.2408228+07:00 0HMT22OM0OUOI:0000001B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:10:53.2422083+07:00 0HMT22OM0OUOI:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:10:53.2443064+07:00 0HMT22OM0OUOI:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:10:53.2544753+07:00 0HMT22OM0OUOI:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:10:53.2550305+07:00 0HMT22OM0OUOI:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:10:53.2563675+07:00 0HMT22OM0OUOI:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:10:53.2582375+07:00 0HMT22OM0OUOI:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:10:53.3890162+07:00 0HMT22OM0OUOI:0000001E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:10:53.3895119+07:00 0HMT22OM0OUOI:0000001E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:10:53.3908492+07:00 0HMT22OM0OUOI:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:10:53.3928600+07:00 0HMT22OM0OUOI:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:11:25.1908531+07:00 0HMT22OM0OUOI:00000020 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:11:25.1913619+07:00 0HMT22OM0OUOI:00000020 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:11:25.2009022+07:00 0HMT22OM0OUOI:00000020 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:11:25.2120835+07:00 0HMT22OM0OUOI:00000020 [INF] Executed DbCommand ("4"ms) [Parameters=["@__messageId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__messageId_0" (0723d8ff)
2023-08-21T15:11:25.2167370+07:00 0HMT22OM0OUOI:00000020 [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (DbType = Boolean)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Messages] SET [IsDeleted] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T15:11:25.2875148+07:00 0HMT22OM0OUOI:00000022 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:11:25.2880841+07:00 0HMT22OM0OUOI:00000022 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:11:25.2903282+07:00 0HMT22OM0OUOI:00000022 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:11:25.2935352+07:00 0HMT22OM0OUOI:00000022 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:12:15.5670598+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-21T15:12:15.5771947+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-21T15:12:15.5776074+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-21T15:12:15.5776422+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-21T15:12:36.6620150+07:00 0HMT23PGI84V4:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-21T15:12:37.5857023+07:00 0HMT23PGI84V4:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:12:37.9330056+07:00 0HMT23PGI84V4:00000002 [INF] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:12:37.9762622+07:00 0HMT23PGI84V4:00000002 [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:12:38.0009337+07:00 0HMT23PGI84V4:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:12:38.0158457+07:00 0HMT23PGI84V4:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:12:38.0175427+07:00 0HMT23PGI84V4:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:12:38.4542207+07:00 0HMT23PGI84V4:00000002 [INF] Executed DbCommand ("51"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T15:12:40.7136943+07:00 0HMT23PGI84V4:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:12:40.7215135+07:00 0HMT23PGI84V4:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:12:40.7232542+07:00 0HMT23PGI84V4:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:12:40.7729686+07:00 0HMT23PGI84V5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:12:40.7752700+07:00 0HMT23PGI84V5:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:12:40.7798969+07:00 0HMT23PGI84V5:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:12:40.7815564+07:00 0HMT23PGI84V5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:12:40.7825179+07:00 0HMT23PGI84V5:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:12:40.7865505+07:00 0HMT23PGI84V5:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:12:40.7960464+07:00 0HMT23PGI84V5:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T15:12:40.8844258+07:00 0HMT23PGI84V5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:12:40.8853307+07:00 0HMT23PGI84V5:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:12:40.8871569+07:00 0HMT23PGI84V5:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:12:44.6242122+07:00 0HMT23PGI84V6:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:12:44.6242121+07:00 0HMT23PGI84V7:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:12:44.6255064+07:00 0HMT23PGI84V6:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:12:44.6283410+07:00 0HMT23PGI84V6:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:12:44.6296306+07:00 0HMT23PGI84V7:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:12:44.6320524+07:00 0HMT23PGI84V7:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:12:44.6363851+07:00 0HMT23PGI84V8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:12:44.6373932+07:00 0HMT23PGI84V8:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:12:44.6399759+07:00 0HMT23PGI84V8:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:12:44.6941297+07:00 0HMT23PGI84V8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:12:44.6955989+07:00 0HMT23PGI84V8:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:12:44.6981241+07:00 0HMT23PGI84V8:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:12:44.7003371+07:00 0HMT23PGI84V8:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T15:12:44.9159486+07:00 0HMT23PGI84V7:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:12:44.9223714+07:00 0HMT23PGI84V6:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:12:45.1422394+07:00 0HMT23PGI84V6:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:12:45.1906876+07:00 0HMT23PGI84V6:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:12:45.1995660+07:00 0HMT23PGI84V6:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:12:45.2169539+07:00 0HMT23PGI84V6:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:12:45.2182031+07:00 0HMT23PGI84V6:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:13:31.9018554+07:00 0HMT23PGI84V6:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:13:31.9026911+07:00 0HMT23PGI84V6:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:13:31.9036020+07:00 0HMT23PGI84V7:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:13:31.9047940+07:00 0HMT23PGI84V7:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:13:31.9183712+07:00 0HMT23PGI84V6:00000005 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:13:31.9184436+07:00 0HMT23PGI84V7:00000005 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:13:31.9348342+07:00 0HMT23PGI84V6:00000005 [INF] Executed DbCommand ("15"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:13:31.9484302+07:00 0HMT23PGI84V7:00000005 [INF] Executed DbCommand ("29"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:13:31.9963778+07:00 0HMT23PGI84V6:00000005 [INF] Executed DbCommand ("44"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:13:32.0000864+07:00 0HMT23PGI84V6:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:13:32.0062440+07:00 0HMT23PGI84V6:00000005 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:13:32.0126725+07:00 0HMT23PGI84V6:00000005 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:13:32.0151266+07:00 0HMT23PGI84V6:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:16:00.1833160+07:00 0HMT23PGI84VA:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:16:00.1833160+07:00 0HMT23PGI84V9:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:16:00.1840234+07:00 0HMT23PGI84V9:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:16:00.1840239+07:00 0HMT23PGI84VA:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:16:00.1955095+07:00 0HMT23PGI84VA:00000003 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:16:00.1955096+07:00 0HMT23PGI84V9:00000003 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:16:00.2009991+07:00 0HMT23PGI84VA:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:16:00.2009992+07:00 0HMT23PGI84V9:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:16:00.2081878+07:00 0HMT23PGI84V9:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:16:00.2112780+07:00 0HMT23PGI84V9:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:16:00.2145256+07:00 0HMT23PGI84V9:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:16:00.2175974+07:00 0HMT23PGI84V9:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:16:00.2200099+07:00 0HMT23PGI84V9:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:16:09.2160552+07:00 0HMT23PGI84V9:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:16:09.2167150+07:00 0HMT23PGI84V9:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:16:09.2185266+07:00 0HMT23PGI84V9:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:16:09.2428616+07:00 0HMT23PGI84V9:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T15:16:09.3227622+07:00 0HMT23PGI84VA:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:16:09.3227622+07:00 0HMT23PGI84V9:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:16:09.3233104+07:00 0HMT23PGI84V9:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:16:09.3233107+07:00 0HMT23PGI84VA:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:16:09.3246948+07:00 0HMT23PGI84VA:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:16:09.3248991+07:00 0HMT23PGI84V9:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:16:09.3366597+07:00 0HMT23PGI84V9:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:16:09.3367508+07:00 0HMT23PGI84VA:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:16:09.4271675+07:00 0HMT23PGI84V9:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:16:09.4277244+07:00 0HMT23PGI84V9:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:16:09.4291524+07:00 0HMT23PGI84V9:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:16:09.4515095+07:00 0HMT23PGI84V9:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:16:11.3632638+07:00 0HMT23PGI84V8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:16:11.3638042+07:00 0HMT23PGI84V8:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:16:11.3651792+07:00 0HMT23PGI84V8:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:16:14.3692003+07:00 0HMT23PGI84V9:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:16:14.3701594+07:00 0HMT23PGI84VA:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:16:14.3702897+07:00 0HMT23PGI84V9:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:16:14.3706592+07:00 0HMT23PGI84VA:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:16:14.3717943+07:00 0HMT23PGI84V9:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:16:14.3717942+07:00 0HMT23PGI84VA:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:16:14.3738100+07:00 0HMT23PGI84VA:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:16:14.3763657+07:00 0HMT23PGI84V9:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:16:14.3838029+07:00 0HMT23PGI84V9:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:16:14.3852108+07:00 0HMT23PGI84V9:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:16:14.3864379+07:00 0HMT23PGI84V9:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:16:14.3879009+07:00 0HMT23PGI84V9:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:16:14.3892195+07:00 0HMT23PGI84V9:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:16:14.5969812+07:00 0HMT23PGI84VB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:16:14.5975588+07:00 0HMT23PGI84VB:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:16:14.5991286+07:00 0HMT23PGI84VB:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:16:14.7303828+07:00 0HMT23PGI84VB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:16:14.7311139+07:00 0HMT23PGI84VB:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:16:14.7327723+07:00 0HMT23PGI84VB:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:16:14.7352526+07:00 0HMT23PGI84VB:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T15:17:02.2918087+07:00 0HMT23PGI84VA:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:17:02.2918087+07:00 0HMT23PGI84V9:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:17:02.2923393+07:00 0HMT23PGI84VA:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:17:02.2923394+07:00 0HMT23PGI84V9:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:17:02.3048399+07:00 0HMT23PGI84VA:00000007 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:17:02.3071753+07:00 0HMT23PGI84V9:0000000E [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:17:02.3096135+07:00 0HMT23PGI84VA:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:17:02.3115333+07:00 0HMT23PGI84V9:0000000E [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:17:02.3157780+07:00 0HMT23PGI84V9:0000000E [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:17:02.3182548+07:00 0HMT23PGI84V9:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:17:02.3206834+07:00 0HMT23PGI84V9:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:17:02.3238523+07:00 0HMT23PGI84V9:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:17:02.3247942+07:00 0HMT23PGI84V9:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:17:05.1307424+07:00 0HMT23PGI84VB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:17:05.1312773+07:00 0HMT23PGI84VB:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:17:05.1326291+07:00 0HMT23PGI84VB:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:17:07.6750144+07:00 0HMT23PGI84V9:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:17:07.6756359+07:00 0HMT23PGI84V9:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:17:07.6773160+07:00 0HMT23PGI84V9:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:17:07.6787147+07:00 0HMT23PGI84V9:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:17:07.6811554+07:00 0HMT23PGI84V9:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:17:07.6822168+07:00 0HMT23PGI84V9:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:17:07.6832135+07:00 0HMT23PGI84V9:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:17:07.6844661+07:00 0HMT23PGI84V9:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:17:07.6855293+07:00 0HMT23PGI84V9:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:17:07.6970350+07:00 0HMT23PGI84V9:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:17:07.6978271+07:00 0HMT23PGI84V9:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:17:07.6998802+07:00 0HMT23PGI84V9:00000012 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:17:07.7022500+07:00 0HMT23PGI84V9:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:17:07.8383797+07:00 0HMT23PGI84VD:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:17:07.8388793+07:00 0HMT23PGI84VD:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:17:07.8402908+07:00 0HMT23PGI84VD:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:17:07.8412837+07:00 0HMT23PGI84VD:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:17:07.8416379+07:00 0HMT23PGI84VD:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:17:07.8432355+07:00 0HMT23PGI84VD:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:17:07.8456535+07:00 0HMT23PGI84VD:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T15:19:20.2340821+07:00 0HMT23PGI84VF:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:19:20.2346954+07:00 0HMT23PGI84VF:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:19:20.2362976+07:00 0HMT23PGI84VE:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:19:20.2367283+07:00 0HMT23PGI84VE:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:19:20.2466318+07:00 0HMT23PGI84VF:00000003 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:19:20.2466320+07:00 0HMT23PGI84VE:00000003 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:19:20.2517935+07:00 0HMT23PGI84VE:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:19:20.2517944+07:00 0HMT23PGI84VF:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:19:20.3614311+07:00 0HMT23PGI84VF:00000003 [INF] Executed DbCommand ("107"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:19:20.3917565+07:00 0HMT23PGI84VG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:19:20.4039931+07:00 0HMT23PGI84VF:00000003 [INF] Executed DbCommand ("28"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:19:20.4039144+07:00 0HMT23PGI84VG:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:19:20.4058005+07:00 0HMT23PGI84VG:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:19:20.4080946+07:00 0HMT23PGI84VF:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:19:20.4368533+07:00 0HMT23PGI84VF:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:19:20.4484854+07:00 0HMT23PGI84VG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:19:20.4496625+07:00 0HMT23PGI84VG:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:19:20.4496935+07:00 0HMT23PGI84VF:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:19:20.4604320+07:00 0HMT23PGI84VG:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:19:20.4750125+07:00 0HMT23PGI84VG:00000002 [INF] Executed DbCommand ("14"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T15:19:21.0440334+07:00 0HMT23PGI84VD:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:19:21.0493226+07:00 0HMT23PGI84VD:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:19:21.0493270+07:00 0HMT23PGI84VG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:19:21.0510705+07:00 0HMT23PGI84VD:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:19:21.0529272+07:00 0HMT23PGI84VG:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:19:21.0561620+07:00 0HMT23PGI84VG:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:19:23.2359087+07:00 0HMT23PGI84VK:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:19:23.2359086+07:00 0HMT23PGI84VJ:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:19:23.2364275+07:00 0HMT23PGI84VJ:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:19:23.2364283+07:00 0HMT23PGI84VK:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:19:23.2376833+07:00 0HMT23PGI84VK:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:19:23.2376841+07:00 0HMT23PGI84VJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:19:23.2390757+07:00 0HMT23PGI84VK:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:19:23.2393122+07:00 0HMT23PGI84VJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:19:23.2431159+07:00 0HMT23PGI84VJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:19:23.2446413+07:00 0HMT23PGI84VJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:19:23.2458179+07:00 0HMT23PGI84VJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:19:23.2471289+07:00 0HMT23PGI84VJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:19:23.2480736+07:00 0HMT23PGI84VJ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:19:23.3473027+07:00 0HMT23PGI84VL:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:19:23.3478719+07:00 0HMT23PGI84VL:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:19:23.3493772+07:00 0HMT23PGI84VL:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:19:23.3706686+07:00 0HMT23PGI84VL:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:19:23.3713000+07:00 0HMT23PGI84VL:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:19:23.3728780+07:00 0HMT23PGI84VL:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:19:23.3744732+07:00 0HMT23PGI84VL:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T15:19:23.4250115+07:00 0HMT23PGI84VJ:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:19:23.4256129+07:00 0HMT23PGI84VJ:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:19:23.4275901+07:00 0HMT23PGI84VJ:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:19:23.4277906+07:00 0HMT23PGI84VK:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:19:23.4288830+07:00 0HMT23PGI84VK:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:19:23.4296763+07:00 0HMT23PGI84VJ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:19:23.4316151+07:00 0HMT23PGI84VK:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:19:23.4325388+07:00 0HMT23PGI84VJ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:19:23.4335569+07:00 0HMT23PGI84VK:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:19:23.4352747+07:00 0HMT23PGI84VJ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:19:23.4362663+07:00 0HMT23PGI84VJ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:19:23.4374836+07:00 0HMT23PGI84VJ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:19:23.4383044+07:00 0HMT23PGI84VJ:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:19:54.9257376+07:00 0HMT23PGI84VK:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:19:54.9257377+07:00 0HMT23PGI84VJ:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:19:54.9263816+07:00 0HMT23PGI84VJ:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:19:54.9263815+07:00 0HMT23PGI84VK:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:19:54.9279998+07:00 0HMT23PGI84VK:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:19:54.9280147+07:00 0HMT23PGI84VJ:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:19:54.9318997+07:00 0HMT23PGI84VK:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:19:54.9333125+07:00 0HMT23PGI84VJ:00000006 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:19:54.9662267+07:00 0HMT23PGI84VK:00000006 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:19:54.9674845+07:00 0HMT23PGI84VK:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:19:54.9683389+07:00 0HMT23PGI84VK:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:19:54.9693063+07:00 0HMT23PGI84VK:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:19:54.9700904+07:00 0HMT23PGI84VK:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:19:57.3139102+07:00 0HMT23PGI84VL:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:19:57.3144790+07:00 0HMT23PGI84VL:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:19:57.3158210+07:00 0HMT23PGI84VL:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:19:59.4627105+07:00 0HMT23PGI84VN:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:19:59.4632798+07:00 0HMT23PGI84VN:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:19:59.4645980+07:00 0HMT23PGI84VN:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:19:59.4661211+07:00 0HMT23PGI84VN:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:19:59.4677347+07:00 0HMT23PGI84VO:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:19:59.4686901+07:00 0HMT23PGI84VO:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:19:59.4688415+07:00 0HMT23PGI84VN:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:19:59.4704116+07:00 0HMT23PGI84VN:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:19:59.4708546+07:00 0HMT23PGI84VO:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:19:59.4717110+07:00 0HMT23PGI84VN:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:19:59.4730275+07:00 0HMT23PGI84VO:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:19:59.4738735+07:00 0HMT23PGI84VN:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:19:59.4760731+07:00 0HMT23PGI84VN:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:19:59.6422771+07:00 0HMT23PGI84VP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:19:59.6429450+07:00 0HMT23PGI84VP:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:19:59.6442776+07:00 0HMT23PGI84VP:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:19:59.6497987+07:00 0HMT23PGI84VP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:19:59.6503554+07:00 0HMT23PGI84VP:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:19:59.6516676+07:00 0HMT23PGI84VP:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:19:59.6528221+07:00 0HMT23PGI84VP:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T15:19:59.6758637+07:00 0HMT23PGI84VN:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:19:59.6764090+07:00 0HMT23PGI84VO:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:19:59.6764927+07:00 0HMT23PGI84VN:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:19:59.6766991+07:00 0HMT23PGI84VO:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:19:59.6778856+07:00 0HMT23PGI84VN:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:19:59.6778857+07:00 0HMT23PGI84VO:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:19:59.6874607+07:00 0HMT23PGI84VO:00000004 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:19:59.6874516+07:00 0HMT23PGI84VN:00000004 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:19:59.7019025+07:00 0HMT23PGI84VN:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:19:59.7031005+07:00 0HMT23PGI84VN:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:19:59.7041842+07:00 0HMT23PGI84VN:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:19:59.7052477+07:00 0HMT23PGI84VN:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:19:59.7060728+07:00 0HMT23PGI84VN:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:21:42.0833508+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-21T15:21:42.0912247+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-21T15:21:42.0914881+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-21T15:21:42.0915081+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-21T15:21:42.3891040+07:00 0HMT23UJ5NK0R:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-21T15:21:43.4462970+07:00 0HMT23UJ5NK0R:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:21:43.4462909+07:00 0HMT23UJ5NK0S:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:21:43.4462929+07:00 0HMT23UJ5NK0V:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:21:43.4462905+07:00 0HMT23UJ5NK0U:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:21:43.4462910+07:00 0HMT23UJ5NK0T:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:21:43.7949725+07:00 0HMT23UJ5NK0V:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:21:43.7949750+07:00 0HMT23UJ5NK0T:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:21:43.7949779+07:00 0HMT23UJ5NK0R:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:21:43.7949720+07:00 0HMT23UJ5NK0S:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:21:43.7949733+07:00 0HMT23UJ5NK0U:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:21:43.8457801+07:00 0HMT23UJ5NK0R:00000002 [INF] Executed DbCommand ("35"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:21:43.8457802+07:00 0HMT23UJ5NK0S:00000003 [INF] Executed DbCommand ("35"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:21:43.8457802+07:00 0HMT23UJ5NK0V:00000002 [INF] Executed DbCommand ("35"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:21:43.8457802+07:00 0HMT23UJ5NK0T:00000003 [INF] Executed DbCommand ("35"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:21:43.8457802+07:00 0HMT23UJ5NK0U:00000002 [INF] Executed DbCommand ("35"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:21:43.9112746+07:00 0HMT23UJ5NK0R:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:21:43.9165372+07:00 0HMT23UJ5NK0R:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:21:43.9179469+07:00 0HMT23UJ5NK0R:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:21:44.3254547+07:00 0HMT23UJ5NK0R:00000002 [INF] Executed DbCommand ("57"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T15:21:44.3254651+07:00 0HMT23UJ5NK0V:00000002 [INF] Executed DbCommand ("57"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:21:44.3254546+07:00 0HMT23UJ5NK0S:00000003 [INF] Executed DbCommand ("57"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:21:44.3254546+07:00 0HMT23UJ5NK0U:00000002 [INF] Executed DbCommand ("57"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:21:44.3254610+07:00 0HMT23UJ5NK0T:00000003 [INF] Executed DbCommand ("57"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:21:44.6390947+07:00 0HMT23UJ5NK0T:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:21:44.6390949+07:00 0HMT23UJ5NK0U:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:21:44.6668477+07:00 0HMT23UJ5NK0T:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:21:44.6668477+07:00 0HMT23UJ5NK0U:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:21:44.6909974+07:00 0HMT23UJ5NK0U:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:21:44.6909973+07:00 0HMT23UJ5NK0T:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:21:44.7002136+07:00 0HMT23UJ5NK0U:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:21:44.7005290+07:00 0HMT23UJ5NK0T:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:21:44.7176286+07:00 0HMT23UJ5NK0T:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:21:44.7176246+07:00 0HMT23UJ5NK0U:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:21:44.7186395+07:00 0HMT23UJ5NK0T:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:21:44.7187347+07:00 0HMT23UJ5NK0U:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:21:46.3371473+07:00 0HMT23UJ5NK0U:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:21:46.3377968+07:00 0HMT23UJ5NK0U:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:21:46.3393347+07:00 0HMT23UJ5NK0U:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:21:46.3584112+07:00 0HMT23UJ5NK0U:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T15:21:46.4433710+07:00 0HMT23UJ5NK0U:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:21:46.4439434+07:00 0HMT23UJ5NK0U:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:21:46.4447771+07:00 0HMT23UJ5NK0V:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:21:46.4451770+07:00 0HMT23UJ5NK0V:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:21:46.4453137+07:00 0HMT23UJ5NK0U:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:21:46.4464851+07:00 0HMT23UJ5NK0V:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:21:46.4518836+07:00 0HMT23UJ5NK0U:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:21:46.4519040+07:00 0HMT23UJ5NK0V:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:21:46.6228017+07:00 0HMT23UJ5NK0U:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:21:46.6232900+07:00 0HMT23UJ5NK0U:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:21:46.6245424+07:00 0HMT23UJ5NK0U:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:21:46.6399105+07:00 0HMT23UJ5NK0U:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:21:46.7622294+07:00 0HMT23UJ5NK0U:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T15:22:02.3892664+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-21T15:22:02.4048668+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-21T15:22:02.4051974+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-21T15:22:02.4052308+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-21T15:22:02.7020607+07:00 0HMT23UP7FBPV:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-21T15:22:03.8066872+07:00 0HMT23UP7FBPV:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:22:03.8066861+07:00 0HMT23UP7FBPU:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:22:03.8066891+07:00 0HMT23UP7FBQ2:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:22:03.8067192+07:00 0HMT23UP7FBQ3:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:22:03.8066856+07:00 0HMT23UP7FBQ1:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:22:03.8066878+07:00 0HMT23UP7FBQ0:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:22:04.1536962+07:00 0HMT23UP7FBQ3:00000002 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:22:04.1537020+07:00 0HMT23UP7FBPV:00000002 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:22:04.1536888+07:00 0HMT23UP7FBQ0:00000003 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:22:04.1536895+07:00 0HMT23UP7FBPU:00000003 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:22:04.1536918+07:00 0HMT23UP7FBQ1:00000004 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:22:04.1536902+07:00 0HMT23UP7FBQ2:00000003 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:22:04.1892759+07:00 0HMT23UP7FBPV:00000002 [INF] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:22:04.1892759+07:00 0HMT23UP7FBQ2:00000003 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:22:04.1892759+07:00 0HMT23UP7FBQ1:00000004 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:22:04.1892797+07:00 0HMT23UP7FBQ0:00000003 [INF] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:22:04.1892843+07:00 0HMT23UP7FBPU:00000003 [INF] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:22:04.1892759+07:00 0HMT23UP7FBQ3:00000002 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:22:04.2430225+07:00 0HMT23UP7FBPV:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:22:04.2489847+07:00 0HMT23UP7FBPV:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:22:04.2503554+07:00 0HMT23UP7FBPV:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:22:04.6541962+07:00 0HMT23UP7FBPV:00000002 [INF] Executed DbCommand ("58"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T15:22:04.6541981+07:00 0HMT23UP7FBQ2:00000003 [INF] Executed DbCommand ("58"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-21T15:22:04.6541963+07:00 0HMT23UP7FBPU:00000003 [INF] Executed DbCommand ("58"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:22:04.6541963+07:00 0HMT23UP7FBQ3:00000002 [INF] Executed DbCommand ("58"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:22:04.6541963+07:00 0HMT23UP7FBQ0:00000003 [INF] Executed DbCommand ("58"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:22:04.6542011+07:00 0HMT23UP7FBQ1:00000004 [INF] Executed DbCommand ("58"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:22:04.9569645+07:00 0HMT23UP7FBQ1:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:22:04.9569645+07:00 0HMT23UP7FBQ0:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:22:04.9799169+07:00 0HMT23UP7FBQ0:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:22:04.9799196+07:00 0HMT23UP7FBQ1:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:22:05.0014258+07:00 0HMT23UP7FBQ1:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:22:05.0014226+07:00 0HMT23UP7FBQ0:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:22:05.0111344+07:00 0HMT23UP7FBQ1:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:22:05.0111316+07:00 0HMT23UP7FBQ0:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:22:05.0272536+07:00 0HMT23UP7FBQ0:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:22:05.0272586+07:00 0HMT23UP7FBQ1:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:22:05.0280839+07:00 0HMT23UP7FBQ0:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:22:05.0281999+07:00 0HMT23UP7FBQ1:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:53:11.7242761+07:00 0HMT23UP7FBPV:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:11.7278877+07:00 0HMT23UP7FBPV:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:11.7394803+07:00 0HMT23UP7FBPV:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:11.8698312+07:00 0HMT23UP7FBQ4:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:11.8705214+07:00 0HMT23UP7FBQ4:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:11.8720685+07:00 0HMT23UP7FBQ4:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:11.8787966+07:00 0HMT23UP7FBQ4:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:53:11.8793262+07:00 0HMT23UP7FBQ5:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:11.8799861+07:00 0HMT23UP7FBQ5:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:11.8872851+07:00 0HMT23UP7FBQ5:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:11.8876337+07:00 0HMT23UP7FBQ4:00000003 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:53:11.8930462+07:00 0HMT23UP7FBQ4:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:53:11.9008178+07:00 0HMT23UP7FBQ5:00000003 [INF] Executed DbCommand ("11"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:53:11.9008385+07:00 0HMT23UP7FBQ4:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:53:11.9138040+07:00 0HMT23UP7FBQ4:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:53:11.9182742+07:00 0HMT23UP7FBQ4:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:53:11.9198739+07:00 0HMT23UP7FBQ4:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:53:14.8444435+07:00 0HMT23UP7FBQ4:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:14.8444782+07:00 0HMT23UP7FBQ5:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:14.8450393+07:00 0HMT23UP7FBQ4:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:14.8450393+07:00 0HMT23UP7FBQ5:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:14.8562876+07:00 0HMT23UP7FBQ5:00000004 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:14.8562879+07:00 0HMT23UP7FBQ4:00000004 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:14.8618485+07:00 0HMT23UP7FBQ5:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:53:14.8618486+07:00 0HMT23UP7FBQ4:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:53:14.8707974+07:00 0HMT23UP7FBQ4:00000004 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:53:14.8737711+07:00 0HMT23UP7FBQ4:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:53:14.8768058+07:00 0HMT23UP7FBQ4:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:53:14.8814562+07:00 0HMT23UP7FBQ4:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:53:14.8848910+07:00 0HMT23UP7FBQ4:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:53:14.8862280+07:00 0HMT23UP7FBQ4:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:53:15.3577059+07:00 0HMT23UP7FBQ7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:15.3584704+07:00 0HMT23UP7FBQ7:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:15.3600536+07:00 0HMT23UP7FBQ7:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:15.4405968+07:00 0HMT23UP7FBQ7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:15.4411054+07:00 0HMT23UP7FBQ7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:15.4424272+07:00 0HMT23UP7FBQ7:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:15.4446496+07:00 0HMT23UP7FBQ7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T15:53:15.4672644+07:00 0HMT23UP7FBQ4:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:15.4678003+07:00 0HMT23UP7FBQ4:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:15.4693434+07:00 0HMT23UP7FBQ4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:15.4708808+07:00 0HMT23UP7FBQ4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:53:15.4727319+07:00 0HMT23UP7FBQ5:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:15.4732106+07:00 0HMT23UP7FBQ5:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:15.4737549+07:00 0HMT23UP7FBQ4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:53:15.4745224+07:00 0HMT23UP7FBQ5:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:15.4752135+07:00 0HMT23UP7FBQ4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:53:15.4762078+07:00 0HMT23UP7FBQ5:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:53:15.4780927+07:00 0HMT23UP7FBQ4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:53:15.4803567+07:00 0HMT23UP7FBQ4:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:53:15.4857730+07:00 0HMT23UP7FBQ4:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:53:15.4868100+07:00 0HMT23UP7FBQ4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:53:16.2287543+07:00 0HMT23UP7FBQ4:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:16.2292780+07:00 0HMT23UP7FBQ4:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:16.2305663+07:00 0HMT23UP7FBQ4:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:16.2575845+07:00 0HMT23UP7FBQ4:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T15:53:16.2879968+07:00 0HMT23UP7FBQ4:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:16.2879969+07:00 0HMT23UP7FBQ5:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:16.2884767+07:00 0HMT23UP7FBQ4:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:16.2884767+07:00 0HMT23UP7FBQ5:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:16.2897534+07:00 0HMT23UP7FBQ4:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:16.2897545+07:00 0HMT23UP7FBQ5:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:16.2972735+07:00 0HMT23UP7FBQ4:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:53:16.2996108+07:00 0HMT23UP7FBQ5:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:53:16.7123808+07:00 0HMT23UP7FBQ4:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:16.7130009+07:00 0HMT23UP7FBQ4:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:16.7143371+07:00 0HMT23UP7FBQ4:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:16.7342326+07:00 0HMT23UP7FBQ4:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:53:16.8827357+07:00 0HMT23UP7FBQ4:0000000C [INF] Executed DbCommand ("4"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T15:53:23.4298557+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-21T15:53:23.4391919+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-21T15:53:23.4395627+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-21T15:53:23.4396054+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-21T15:53:25.4059814+07:00 0HMT24GAALS81:00000003 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-21T15:53:26.3124743+07:00 0HMT24GAALS81:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:26.3124738+07:00 0HMT24GAALS82:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:26.6761832+07:00 0HMT24GAALS81:00000003 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:26.6761884+07:00 0HMT24GAALS82:00000003 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:26.7109845+07:00 0HMT24GAALS81:00000003 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:26.7109847+07:00 0HMT24GAALS82:00000003 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:27.2674604+07:00 0HMT24GAALS83:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:27.2737681+07:00 0HMT24GAALS83:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:27.2755044+07:00 0HMT24GAALS83:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:27.2939186+07:00 0HMT24GAALS83:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:27.2946292+07:00 0HMT24GAALS83:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:27.2965362+07:00 0HMT24GAALS83:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:27.3591585+07:00 0HMT24GAALS84:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:27.3633204+07:00 0HMT24GAALS84:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:27.3653160+07:00 0HMT24GAALS84:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:27.3672293+07:00 0HMT24GAALS85:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:27.3714788+07:00 0HMT24GAALS85:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:27.3768642+07:00 0HMT24GAALS85:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:27.3914313+07:00 0HMT24GAALS86:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:27.3921991+07:00 0HMT24GAALS86:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:27.3951597+07:00 0HMT24GAALS86:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:27.4201607+07:00 0HMT24GAALS83:00000002 [INF] Executed DbCommand ("71"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T15:53:27.4201676+07:00 0HMT24GAALS81:00000003 [INF] Executed DbCommand ("90"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:53:27.4201608+07:00 0HMT24GAALS86:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:53:27.4201797+07:00 0HMT24GAALS84:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:53:27.4201613+07:00 0HMT24GAALS82:00000003 [INF] Executed DbCommand ("90"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:53:27.4486226+07:00 0HMT24GAALS85:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-21T15:53:27.7491717+07:00 0HMT24GAALS84:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:53:27.7506334+07:00 0HMT24GAALS81:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:53:27.7900668+07:00 0HMT24GAALS84:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:53:27.7900668+07:00 0HMT24GAALS81:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:53:27.7994269+07:00 0HMT24GAALS81:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:53:27.7994269+07:00 0HMT24GAALS84:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:53:27.8156303+07:00 0HMT24GAALS84:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:53:27.8156303+07:00 0HMT24GAALS81:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:53:27.8170887+07:00 0HMT24GAALS81:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:53:27.8170888+07:00 0HMT24GAALS84:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:53:53.9122941+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-21T15:53:53.9212758+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-21T15:53:53.9217595+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-21T15:53:53.9218085+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-21T15:53:54.1738344+07:00 0HMT24GISQMGV:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-21T15:53:55.3783105+07:00 0HMT24GISQMH0:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:55.3783098+07:00 0HMT24GISQMH3:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:55.3783085+07:00 0HMT24GISQMH5:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:55.3783068+07:00 0HMT24GISQMH1:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:55.3783064+07:00 0HMT24GISQMH4:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:55.3783076+07:00 0HMT24GISQMGV:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:55.7267534+07:00 0HMT24GISQMH5:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:55.7267490+07:00 0HMT24GISQMH4:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:55.7267541+07:00 0HMT24GISQMH0:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:55.7267630+07:00 0HMT24GISQMGV:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:55.7267596+07:00 0HMT24GISQMH3:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:55.7267492+07:00 0HMT24GISQMH1:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:55.7627843+07:00 0HMT24GISQMH4:00000002 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:55.7627843+07:00 0HMT24GISQMH5:00000003 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:55.7627843+07:00 0HMT24GISQMGV:00000002 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:55.7627843+07:00 0HMT24GISQMH3:00000003 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:55.7627843+07:00 0HMT24GISQMH1:00000003 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:55.7627978+07:00 0HMT24GISQMH0:00000003 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:55.8141110+07:00 0HMT24GISQMGV:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:53:55.8200519+07:00 0HMT24GISQMGV:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:53:55.8213739+07:00 0HMT24GISQMGV:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:53:56.2453896+07:00 0HMT24GISQMH5:00000003 [INF] Executed DbCommand ("60"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:53:56.2453844+07:00 0HMT24GISQMH1:00000003 [INF] Executed DbCommand ("59"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:53:56.2453662+07:00 0HMT24GISQMH4:00000002 [INF] Executed DbCommand ("60"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-21T15:53:56.2453662+07:00 0HMT24GISQMH3:00000003 [INF] Executed DbCommand ("60"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:53:56.2453661+07:00 0HMT24GISQMGV:00000002 [INF] Executed DbCommand ("59"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T15:53:56.2453662+07:00 0HMT24GISQMH0:00000003 [INF] Executed DbCommand ("60"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:53:56.5800408+07:00 0HMT24GISQMH0:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:53:56.5800408+07:00 0HMT24GISQMH3:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:53:56.6217026+07:00 0HMT24GISQMH3:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:53:56.6217025+07:00 0HMT24GISQMH0:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:53:56.6309273+07:00 0HMT24GISQMH0:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:53:56.6312461+07:00 0HMT24GISQMH3:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:53:56.6493584+07:00 0HMT24GISQMH0:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:53:56.6493583+07:00 0HMT24GISQMH3:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:53:56.6504420+07:00 0HMT24GISQMH0:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:53:56.6504422+07:00 0HMT24GISQMH3:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:54:43.8687844+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-21T15:54:43.8772710+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-21T15:54:43.8775822+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-21T15:54:43.8776040+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-21T15:54:44.2153685+07:00 0HMT24H1PU3F9:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-21T15:54:45.3092618+07:00 0HMT24H1PU3FB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:54:45.3092624+07:00 0HMT24H1PU3FG:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:54:45.3092644+07:00 0HMT24H1PU3FA:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:54:45.3092636+07:00 0HMT24H1PU3FD:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:54:45.3092615+07:00 0HMT24H1PU3FC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:54:45.3092632+07:00 0HMT24H1PU3F9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:54:45.6475796+07:00 0HMT24H1PU3FA:00000004 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:54:45.6475698+07:00 0HMT24H1PU3FG:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:54:45.6475658+07:00 0HMT24H1PU3F9:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:54:45.6475761+07:00 0HMT24H1PU3FB:00000002 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:54:45.6475655+07:00 0HMT24H1PU3FD:00000004 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:54:45.6475767+07:00 0HMT24H1PU3FC:00000002 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:54:45.6927160+07:00 0HMT24H1PU3FA:00000004 [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:54:45.6927091+07:00 0HMT24H1PU3FC:00000002 [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:54:45.6927093+07:00 0HMT24H1PU3F9:00000002 [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:54:45.6927422+07:00 0HMT24H1PU3FD:00000004 [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:54:45.6927463+07:00 0HMT24H1PU3FB:00000002 [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:54:45.6927422+07:00 0HMT24H1PU3FG:00000002 [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:54:45.7502753+07:00 0HMT24H1PU3F9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:54:45.7579563+07:00 0HMT24H1PU3F9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:54:45.7592976+07:00 0HMT24H1PU3F9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:54:46.1647120+07:00 0HMT24H1PU3F9:00000002 [INF] Executed DbCommand ("57"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T15:54:46.1647154+07:00 0HMT24H1PU3FG:00000002 [INF] Executed DbCommand ("57"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-21T15:54:46.1647120+07:00 0HMT24H1PU3FA:00000004 [INF] Executed DbCommand ("57"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:54:46.1647453+07:00 0HMT24H1PU3FB:00000002 [INF] Executed DbCommand ("57"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:54:46.1647597+07:00 0HMT24H1PU3FC:00000002 [INF] Executed DbCommand ("57"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:54:46.1647403+07:00 0HMT24H1PU3FD:00000004 [INF] Executed DbCommand ("57"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:54:46.4876734+07:00 0HMT24H1PU3FB:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:54:46.4876735+07:00 0HMT24H1PU3FA:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:54:46.5254222+07:00 0HMT24H1PU3FA:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:54:46.5254224+07:00 0HMT24H1PU3FB:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:54:46.5339525+07:00 0HMT24H1PU3FB:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:54:46.5339526+07:00 0HMT24H1PU3FA:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:54:46.5505509+07:00 0HMT24H1PU3FB:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:54:46.5505508+07:00 0HMT24H1PU3FA:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:54:46.5519182+07:00 0HMT24H1PU3FA:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:54:46.5519181+07:00 0HMT24H1PU3FB:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:55:03.0873011+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-21T15:55:03.0984903+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-21T15:55:03.1055847+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-21T15:55:03.1056541+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-21T15:55:04.2636968+07:00 0HMT24H7OVMCA:00000003 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-21T15:55:05.1390081+07:00 0HMT24H7OVMCB:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:55:05.1390066+07:00 0HMT24H7OVMCA:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:55:05.5001519+07:00 0HMT24H7OVMCB:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:55:05.5001525+07:00 0HMT24H7OVMCA:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:55:05.5360314+07:00 0HMT24H7OVMCB:00000003 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:55:05.5360314+07:00 0HMT24H7OVMCA:00000003 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:55:06.0171811+07:00 0HMT24H7OVMCC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:55:06.0238857+07:00 0HMT24H7OVMCC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:55:06.0262292+07:00 0HMT24H7OVMCC:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:55:06.0440531+07:00 0HMT24H7OVMCC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:55:06.0446872+07:00 0HMT24H7OVMCC:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:55:06.0462254+07:00 0HMT24H7OVMCC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:55:06.0755217+07:00 0HMT24H7OVMCD:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:55:06.0761451+07:00 0HMT24H7OVMCD:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:55:06.0779813+07:00 0HMT24H7OVMCD:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:55:06.0820449+07:00 0HMT24H7OVMCF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:55:06.0825255+07:00 0HMT24H7OVMCE:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:55:06.0825540+07:00 0HMT24H7OVMCF:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:55:06.0828342+07:00 0HMT24H7OVMCE:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:55:06.0839530+07:00 0HMT24H7OVMCE:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:55:06.0839547+07:00 0HMT24H7OVMCF:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:55:06.1949934+07:00 0HMT24H7OVMCA:00000003 [INF] Executed DbCommand ("74"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:55:06.1949933+07:00 0HMT24H7OVMCF:00000002 [INF] Executed DbCommand ("74"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:55:06.1949933+07:00 0HMT24H7OVMCD:00000003 [INF] Executed DbCommand ("72"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:55:06.1949933+07:00 0HMT24H7OVMCE:00000002 [INF] Executed DbCommand ("45"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-21T15:55:06.1949932+07:00 0HMT24H7OVMCC:00000002 [INF] Executed DbCommand ("99"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T15:55:06.1949933+07:00 0HMT24H7OVMCB:00000003 [INF] Executed DbCommand ("99"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:55:06.5023661+07:00 0HMT24H7OVMCD:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:55:06.5031392+07:00 0HMT24H7OVMCB:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:55:06.5409502+07:00 0HMT24H7OVMCD:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:55:06.5409503+07:00 0HMT24H7OVMCB:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:55:06.5493299+07:00 0HMT24H7OVMCD:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:55:06.5493331+07:00 0HMT24H7OVMCB:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:55:06.5665878+07:00 0HMT24H7OVMCB:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:55:06.5665878+07:00 0HMT24H7OVMCD:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:55:06.5679878+07:00 0HMT24H7OVMCB:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:55:06.5679888+07:00 0HMT24H7OVMCD:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:55:16.6643618+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-21T15:55:16.6718739+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-21T15:55:16.6722463+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-21T15:55:16.6722752+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-21T15:55:16.9706453+07:00 0HMT24HBIBP9P:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-21T15:55:17.9558590+07:00 0HMT24HBIBP9M:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:55:17.9558531+07:00 0HMT24HBIBP9N:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:55:17.9558555+07:00 0HMT24HBIBP9P:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:55:17.9558538+07:00 0HMT24HBIBP9T:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:55:17.9558549+07:00 0HMT24HBIBP9R:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:55:17.9558631+07:00 0HMT24HBIBP9Q:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:55:18.4186121+07:00 0HMT24HBIBP9R:00000003 [INF] Executed DbCommand ("32"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:55:18.4186159+07:00 0HMT24HBIBP9T:00000002 [INF] Executed DbCommand ("32"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:55:18.4186274+07:00 0HMT24HBIBP9Q:00000002 [INF] Executed DbCommand ("32"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:55:18.4186168+07:00 0HMT24HBIBP9P:00000002 [INF] Executed DbCommand ("32"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:55:18.4186132+07:00 0HMT24HBIBP9N:00000002 [INF] Executed DbCommand ("32"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:55:18.4186224+07:00 0HMT24HBIBP9M:00000004 [INF] Executed DbCommand ("32"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:55:18.4599808+07:00 0HMT24HBIBP9N:00000002 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:55:18.4599753+07:00 0HMT24HBIBP9R:00000003 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:55:18.4599753+07:00 0HMT24HBIBP9T:00000002 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:55:18.4599754+07:00 0HMT24HBIBP9M:00000004 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:55:18.4599821+07:00 0HMT24HBIBP9P:00000002 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:55:18.4599753+07:00 0HMT24HBIBP9Q:00000002 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:55:18.5385264+07:00 0HMT24HBIBP9Q:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:55:18.5466987+07:00 0HMT24HBIBP9Q:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:55:18.5487105+07:00 0HMT24HBIBP9Q:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:55:18.9648099+07:00 0HMT24HBIBP9N:00000002 [INF] Executed DbCommand ("51"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:55:18.9648100+07:00 0HMT24HBIBP9Q:00000002 [INF] Executed DbCommand ("51"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T15:55:18.9648100+07:00 0HMT24HBIBP9M:00000004 [INF] Executed DbCommand ("51"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:55:18.9648100+07:00 0HMT24HBIBP9P:00000002 [INF] Executed DbCommand ("51"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:55:18.9648100+07:00 0HMT24HBIBP9T:00000002 [INF] Executed DbCommand ("51"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:55:18.9648100+07:00 0HMT24HBIBP9R:00000003 [INF] Executed DbCommand ("51"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-21T15:55:19.2905878+07:00 0HMT24HBIBP9N:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:55:19.2905857+07:00 0HMT24HBIBP9M:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:55:19.3296840+07:00 0HMT24HBIBP9M:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:55:19.3296840+07:00 0HMT24HBIBP9N:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:55:19.3380705+07:00 0HMT24HBIBP9M:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:55:19.3380706+07:00 0HMT24HBIBP9N:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:55:19.3545551+07:00 0HMT24HBIBP9N:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:55:19.3545552+07:00 0HMT24HBIBP9M:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:55:19.3558400+07:00 0HMT24HBIBP9M:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:55:19.3558450+07:00 0HMT24HBIBP9N:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:56:33.3705423+07:00 0HMT24HBIBP9Q:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:56:33.3714034+07:00 0HMT24HBIBP9Q:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:56:33.3881517+07:00 0HMT24HBIBP9Q:00000002 [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:56:33.5702473+07:00 0HMT24HBIBP9M:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:56:33.5708304+07:00 0HMT24HBIBP9M:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:56:33.5757087+07:00 0HMT24HBIBP9R:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:56:33.5764130+07:00 0HMT24HBIBP9R:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:56:33.5860290+07:00 0HMT24HBIBP9M:00000006 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:56:33.5920764+07:00 0HMT24HBIBP9R:00000005 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:56:33.5965122+07:00 0HMT24HBIBP9M:00000006 [INF] Executed DbCommand ("7"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:56:33.5991447+07:00 0HMT24HBIBP9R:00000005 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:56:33.6039419+07:00 0HMT24HBIBP9M:00000006 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:56:33.6097473+07:00 0HMT24HBIBP9M:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:56:33.6151881+07:00 0HMT24HBIBP9M:00000006 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:56:33.6188157+07:00 0HMT24HBIBP9M:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:56:33.6238283+07:00 0HMT24HBIBP9M:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:56:33.7759918+07:00 0HMT24HBIBP9U:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:56:33.7765381+07:00 0HMT24HBIBP9U:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:56:33.7873495+07:00 0HMT24HBIBP9U:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:56:33.8554081+07:00 0HMT24HBIBP9U:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:56:33.8592451+07:00 0HMT24HBIBP9U:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:56:33.8802023+07:00 0HMT24HBIBP9U:00000002 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:56:36.8843466+07:00 0HMT24HBIBP9M:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:56:36.8849840+07:00 0HMT24HBIBP9M:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:56:36.8968755+07:00 0HMT24HBIBP9R:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:56:36.8976972+07:00 0HMT24HBIBP9R:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:56:36.9000758+07:00 0HMT24HBIBP9M:00000007 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:56:36.9000757+07:00 0HMT24HBIBP9R:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:56:36.9051733+07:00 0HMT24HBIBP9M:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:56:36.9056700+07:00 0HMT24HBIBP9R:00000006 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:56:36.9114068+07:00 0HMT24HBIBP9M:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:56:36.9198417+07:00 0HMT24HBIBP9M:00000007 [INF] Executed DbCommand ("8"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:56:36.9279203+07:00 0HMT24HBIBP9M:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:56:36.9315528+07:00 0HMT24HBIBP9M:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:56:36.9332086+07:00 0HMT24HBIBP9M:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:56:37.1357127+07:00 0HMT24HBIBP9V:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:56:37.1364281+07:00 0HMT24HBIBP9V:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:56:37.1379935+07:00 0HMT24HBIBP9V:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:56:37.1400234+07:00 0HMT24HBIBP9V:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:56:37.1406462+07:00 0HMT24HBIBP9V:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:56:37.1421915+07:00 0HMT24HBIBP9V:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:56:37.1448181+07:00 0HMT24HBIBP9V:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T15:56:37.1784594+07:00 0HMT24HBIBP9M:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:56:37.1790456+07:00 0HMT24HBIBP9M:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:56:37.1812092+07:00 0HMT24HBIBP9M:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:56:37.1833335+07:00 0HMT24HBIBP9M:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:56:37.1854248+07:00 0HMT24HBIBP9M:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:56:37.1864332+07:00 0HMT24HBIBP9M:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:56:37.1873290+07:00 0HMT24HBIBP9M:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:56:37.1883643+07:00 0HMT24HBIBP9M:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:56:37.1892793+07:00 0HMT24HBIBP9M:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:56:37.1946876+07:00 0HMT24HBIBP9M:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:56:37.1953686+07:00 0HMT24HBIBP9M:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:56:37.1967499+07:00 0HMT24HBIBP9M:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:56:37.1983985+07:00 0HMT24HBIBP9M:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:56:38.4546210+07:00 0HMT24HBIBP9M:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:56:38.4553083+07:00 0HMT24HBIBP9M:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:56:38.4567703+07:00 0HMT24HBIBP9M:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:56:38.4699281+07:00 0HMT24HBIBP9M:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T15:56:38.5366130+07:00 0HMT24HBIBP9M:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:56:38.5370847+07:00 0HMT24HBIBP9M:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:56:38.5388662+07:00 0HMT24HBIBP9M:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:56:38.5398423+07:00 0HMT24HBIBP9R:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:56:38.5404914+07:00 0HMT24HBIBP9R:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:56:38.5425291+07:00 0HMT24HBIBP9R:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:56:38.5488893+07:00 0HMT24HBIBP9R:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:56:38.5521204+07:00 0HMT24HBIBP9M:0000000E [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:56:38.6904364+07:00 0HMT24HBIBP9M:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:56:38.6909362+07:00 0HMT24HBIBP9M:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:56:38.6922632+07:00 0HMT24HBIBP9M:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:56:38.7114339+07:00 0HMT24HBIBP9M:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:56:43.9550582+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-21T15:56:43.9864245+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-21T15:56:43.9869682+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-21T15:56:43.9870096+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-21T15:56:45.0835380+07:00 0HMT24I5QVOJ5:00000003 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-21T15:56:45.9525367+07:00 0HMT24I5QVOJ4:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:56:45.9525363+07:00 0HMT24I5QVOJ5:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:56:46.2922127+07:00 0HMT24I5QVOJ4:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:56:46.2922204+07:00 0HMT24I5QVOJ5:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:56:46.3415974+07:00 0HMT24I5QVOJ4:00000003 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:56:46.3415976+07:00 0HMT24I5QVOJ5:00000003 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:56:46.9334203+07:00 0HMT24I5QVOJ4:00000003 [INF] Executed DbCommand ("51"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:56:46.9334204+07:00 0HMT24I5QVOJ5:00000003 [INF] Executed DbCommand ("51"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:56:47.0348790+07:00 0HMT24I5QVOJ6:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:56:47.0421254+07:00 0HMT24I5QVOJ6:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:56:47.0437126+07:00 0HMT24I5QVOJ6:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:56:47.1326199+07:00 0HMT24I5QVOJ6:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:56:47.1332201+07:00 0HMT24I5QVOJ6:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:56:47.1349985+07:00 0HMT24I5QVOJ6:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:56:47.1457901+07:00 0HMT24I5QVOJ6:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T15:56:47.1495982+07:00 0HMT24I5QVOJ5:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:56:47.1879161+07:00 0HMT24I5QVOJ4:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:56:47.1885207+07:00 0HMT24I5QVOJ4:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:56:47.1903215+07:00 0HMT24I5QVOJ4:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:56:47.1947049+07:00 0HMT24I5QVOJ4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:56:47.1954282+07:00 0HMT24I5QVOJ8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:56:47.1954238+07:00 0HMT24I5QVOJ7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:56:47.1965788+07:00 0HMT24I5QVOJ8:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:56:47.1974633+07:00 0HMT24I5QVOJ4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:56:47.1974633+07:00 0HMT24I5QVOJ5:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:56:47.1993498+07:00 0HMT24I5QVOJ8:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:56:47.2034706+07:00 0HMT24I5QVOJ7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:56:47.2056813+07:00 0HMT24I5QVOJ7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:56:47.2056815+07:00 0HMT24I5QVOJ8:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:56:52.4396731+07:00 0HMT24I5QVOJ4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:56:52.4416503+07:00 0HMT24I5QVOJ5:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:56:52.4439896+07:00 0HMT24I5QVOJ4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:56:52.4511440+07:00 0HMT24I5QVOJ7:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:56:53.2421360+07:00 0HMT24I5QVOJ7:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__message_CreatedTime_0='?' (DbType = DateTime2), @__message_Id_1='?' (Size = 100), @__message_ChatRoomId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE (([m].[CreatedTime] >= @__message_CreatedTime_0) AND ([m].[Id] <> @__message_Id_1)) AND ([m].[ChatRoomId] = @__message_ChatRoomId_2)" (0723d8ff)
2023-08-21T15:56:53.2455602+07:00 0HMT24I5QVOJ4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:56:53.2455603+07:00 0HMT24I5QVOJ5:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:56:53.2469577+07:00 0HMT24I5QVOJ5:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:56:53.2469576+07:00 0HMT24I5QVOJ4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:58:33.2944357+07:00 0HMT24I5QVOJ6:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:58:33.2950789+07:00 0HMT24I5QVOJ6:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:58:33.3056907+07:00 0HMT24I5QVOJ6:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:58:45.0131697+07:00 0HMT24I5QVOJ7:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:58:45.0131697+07:00 0HMT24I5QVOJ4:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:58:45.0138261+07:00 0HMT24I5QVOJ4:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:58:45.0138261+07:00 0HMT24I5QVOJ7:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:58:45.0222653+07:00 0HMT24I5QVOJ4:00000007 [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:58:45.0261133+07:00 0HMT24I5QVOJ7:00000004 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:58:45.0288338+07:00 0HMT24I5QVOJ4:00000007 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:58:45.0308613+07:00 0HMT24I5QVOJ7:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:58:45.0340402+07:00 0HMT24I5QVOJ4:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:58:45.0366617+07:00 0HMT24I5QVOJ4:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:58:45.0391524+07:00 0HMT24I5QVOJ4:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:58:45.0419193+07:00 0HMT24I5QVOJ4:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:58:45.0431301+07:00 0HMT24I5QVOJ4:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:58:45.1178112+07:00 0HMT24I5QVOJA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:58:45.1183197+07:00 0HMT24I5QVOJA:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:58:45.1197162+07:00 0HMT24I5QVOJA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:58:45.1480988+07:00 0HMT24I5QVOJA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:58:45.1488500+07:00 0HMT24I5QVOJA:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:58:45.1503866+07:00 0HMT24I5QVOJA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:58:45.1531923+07:00 0HMT24I5QVOJA:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T15:58:45.1949508+07:00 0HMT24I5QVOJ4:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:58:45.1949508+07:00 0HMT24I5QVOJ7:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:58:45.1954486+07:00 0HMT24I5QVOJ7:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:58:45.1955224+07:00 0HMT24I5QVOJ4:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:58:45.1970595+07:00 0HMT24I5QVOJ7:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:58:45.1970554+07:00 0HMT24I5QVOJ4:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:58:45.1985416+07:00 0HMT24I5QVOJ7:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:58:45.2047212+07:00 0HMT24I5QVOJ4:00000008 [INF] Executed DbCommand ("7"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:58:45.2122159+07:00 0HMT24I5QVOJ4:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:58:45.2133588+07:00 0HMT24I5QVOJ4:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:58:45.2147750+07:00 0HMT24I5QVOJ4:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:58:45.2164841+07:00 0HMT24I5QVOJ4:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:58:45.2174033+07:00 0HMT24I5QVOJ4:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:58:47.7301397+07:00 0HMT24I5QVOJ4:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:58:47.7306696+07:00 0HMT24I5QVOJ4:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:58:47.7415792+07:00 0HMT24I5QVOJ4:0000000A [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:58:47.7597493+07:00 0HMT24I5QVOJ4:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T15:58:47.8958083+07:00 0HMT24I5QVOJ4:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:58:47.8964507+07:00 0HMT24I5QVOJ4:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:58:47.8981458+07:00 0HMT24I5QVOJ4:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:58:47.9058481+07:00 0HMT24I5QVOJ4:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:58:47.9985242+07:00 0HMT24I5QVOJ4:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:58:47.9990713+07:00 0HMT24I5QVOJ4:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:58:48.0005938+07:00 0HMT24I5QVOJ4:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:58:48.0032123+07:00 0HMT24I5QVOJ4:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:58:48.0853004+07:00 0HMT24I5QVOJ4:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:58:48.0859925+07:00 0HMT24I5QVOJ4:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:58:48.0877076+07:00 0HMT24I5QVOJ4:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:58:48.1049007+07:00 0HMT24I5QVOJ4:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:59:29.2028851+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-21T15:59:29.2130343+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-21T15:59:29.2136611+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-21T15:59:29.2137111+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-21T15:59:29.4316824+07:00 0HMT24JMQDEMU:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-21T15:59:30.7267454+07:00 0HMT24JMQDEN1:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:59:30.7267459+07:00 0HMT24JMQDEN2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:59:30.7267456+07:00 0HMT24JMQDEMV:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:59:30.7267454+07:00 0HMT24JMQDEN3:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:59:30.7267492+07:00 0HMT24JMQDEMU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:59:31.1160410+07:00 0HMT24JMQDEMV:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:59:31.1160445+07:00 0HMT24JMQDEN1:00000005 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:59:31.1160454+07:00 0HMT24JMQDEMU:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:59:31.1160403+07:00 0HMT24JMQDEN2:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:59:31.1160505+07:00 0HMT24JMQDEN3:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:59:31.1509322+07:00 0HMT24JMQDEMU:00000002 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:59:31.1509322+07:00 0HMT24JMQDEMV:00000003 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:59:31.1509321+07:00 0HMT24JMQDEN3:00000002 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:59:31.1509321+07:00 0HMT24JMQDEN1:00000005 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:59:31.1509321+07:00 0HMT24JMQDEN2:00000002 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:59:31.2081594+07:00 0HMT24JMQDEMU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:59:31.2140155+07:00 0HMT24JMQDEMU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:59:31.2153987+07:00 0HMT24JMQDEMU:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:59:31.6164659+07:00 0HMT24JMQDEN1:00000005 [INF] Executed DbCommand ("62"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:59:31.6164726+07:00 0HMT24JMQDEN2:00000002 [INF] Executed DbCommand ("62"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:59:31.6164716+07:00 0HMT24JMQDEN3:00000002 [INF] Executed DbCommand ("62"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:59:31.6164659+07:00 0HMT24JMQDEMV:00000003 [INF] Executed DbCommand ("62"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T15:59:31.6164659+07:00 0HMT24JMQDEMU:00000002 [INF] Executed DbCommand ("62"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T15:59:31.8332789+07:00 0HMT24JMQDEN1:00000005 [INF] Executed DbCommand ("5"ms) [Parameters=["@__message_CreatedTime_0='?' (DbType = DateTime2), @__message_Id_1='?' (Size = 100), @__message_ChatRoomId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE (([m].[CreatedTime] >= @__message_CreatedTime_0) AND ([m].[Id] <> @__message_Id_1)) AND ([m].[ChatRoomId] = @__message_ChatRoomId_2)" (0723d8ff)
2023-08-21T15:59:31.9829981+07:00 0HMT24JMQDEN2:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T15:59:31.9896338+07:00 0HMT24JMQDEN2:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:59:32.0216592+07:00 0HMT24JMQDEN2:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T15:59:32.0362760+07:00 0HMT24JMQDEN2:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:59:32.0597668+07:00 0HMT24JMQDEN2:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T15:59:32.0610213+07:00 0HMT24JMQDEN2:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T15:59:32.0856412+07:00 0HMT24JMQDEN2:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:59:32.0865236+07:00 0HMT24JMQDEN2:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:59:32.0882510+07:00 0HMT24JMQDEN2:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:59:32.1101153+07:00 0HMT24JMQDEN2:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:59:32.2540790+07:00 0HMT24JMQDEN2:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T15:59:40.2243266+07:00 0HMT24JMQDEN2:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:59:40.2248918+07:00 0HMT24JMQDEN2:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:59:40.2263052+07:00 0HMT24JMQDEN2:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:59:40.2415200+07:00 0HMT24JMQDEN2:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T15:59:40.3072621+07:00 0HMT24JMQDEN2:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:59:40.3077897+07:00 0HMT24JMQDEN2:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:59:40.3092293+07:00 0HMT24JMQDEN2:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:59:40.3095433+07:00 0HMT24JMQDEN1:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:59:40.3099042+07:00 0HMT24JMQDEN1:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:59:40.3111597+07:00 0HMT24JMQDEN1:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:59:40.3154080+07:00 0HMT24JMQDEN1:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:59:40.3154080+07:00 0HMT24JMQDEN2:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:59:40.4591841+07:00 0HMT24JMQDEN2:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:59:40.4596771+07:00 0HMT24JMQDEN2:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:59:40.4610888+07:00 0HMT24JMQDEN2:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:59:40.4645563+07:00 0HMT24JMQDEN2:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T15:59:40.5143633+07:00 0HMT24JMQDEN1:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:59:40.5143633+07:00 0HMT24JMQDEN2:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:59:40.5149630+07:00 0HMT24JMQDEN1:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:59:40.5149649+07:00 0HMT24JMQDEN2:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:59:40.5165170+07:00 0HMT24JMQDEN2:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:59:40.5165171+07:00 0HMT24JMQDEN1:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:59:40.5190185+07:00 0HMT24JMQDEN2:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:59:40.5190187+07:00 0HMT24JMQDEN1:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T15:59:40.6310818+07:00 0HMT24JMQDEN2:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T15:59:40.6320409+07:00 0HMT24JMQDEN2:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T15:59:40.6334440+07:00 0HMT24JMQDEN2:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T15:59:40.6364022+07:00 0HMT24JMQDEN2:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:14:20.6529770+07:00 0HMT24JMQDEMU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:14:20.6569064+07:00 0HMT24JMQDEMU:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:14:20.6664123+07:00 0HMT24JMQDEMU:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:14:20.8581471+07:00 0HMT24JMQDEN4:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:14:20.8590488+07:00 0HMT24JMQDEN4:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:14:20.8607286+07:00 0HMT24JMQDEN4:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:14:20.8654985+07:00 0HMT24JMQDEN4:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:14:20.8728426+07:00 0HMT24JMQDEN4:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:14:20.8771734+07:00 0HMT24JMQDEN4:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:14:20.8802815+07:00 0HMT24JMQDEN4:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:14:20.8835137+07:00 0HMT24JMQDEN4:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:14:20.8851616+07:00 0HMT24JMQDEN4:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:14:20.8869389+07:00 0HMT24JMQDEN5:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:14:20.8875529+07:00 0HMT24JMQDEN5:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:14:20.8893324+07:00 0HMT24JMQDEN5:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:14:20.8933805+07:00 0HMT24JMQDEN5:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:15:07.5837380+07:00 0HMT24JMQDEN5:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:07.5838073+07:00 0HMT24JMQDEN4:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:07.5845101+07:00 0HMT24JMQDEN5:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:07.5863107+07:00 0HMT24JMQDEN5:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:07.5876612+07:00 0HMT24JMQDEN4:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:07.5883179+07:00 0HMT24JMQDEN5:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:15:07.5896235+07:00 0HMT24JMQDEN4:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:07.5910780+07:00 0HMT24JMQDEN4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:07.5946359+07:00 0HMT24JMQDEN4:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:15:07.5960194+07:00 0HMT24JMQDEN4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:15:07.5974341+07:00 0HMT24JMQDEN4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:07.5989154+07:00 0HMT24JMQDEN4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:15:07.5999877+07:00 0HMT24JMQDEN4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:07.7848120+07:00 0HMT24JMQDEN6:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:07.7852978+07:00 0HMT24JMQDEN6:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:07.7866047+07:00 0HMT24JMQDEN6:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:07.8666989+07:00 0HMT24JMQDEN6:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:07.8672851+07:00 0HMT24JMQDEN6:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:07.8690038+07:00 0HMT24JMQDEN6:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:07.8720666+07:00 0HMT24JMQDEN6:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T16:15:07.9976597+07:00 0HMT24JMQDEN4:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:07.9976597+07:00 0HMT24JMQDEN5:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:07.9984509+07:00 0HMT24JMQDEN5:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:07.9984508+07:00 0HMT24JMQDEN4:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:08.0006150+07:00 0HMT24JMQDEN5:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:08.0006106+07:00 0HMT24JMQDEN4:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:08.0031677+07:00 0HMT24JMQDEN4:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:08.0031645+07:00 0HMT24JMQDEN5:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:15:08.0095309+07:00 0HMT24JMQDEN4:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:15:08.0118893+07:00 0HMT24JMQDEN4:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:15:08.0131554+07:00 0HMT24JMQDEN4:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:08.0146423+07:00 0HMT24JMQDEN4:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:15:08.0160663+07:00 0HMT24JMQDEN4:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:09.0059034+07:00 0HMT24JMQDEN4:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:09.0064402+07:00 0HMT24JMQDEN4:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:09.0080553+07:00 0HMT24JMQDEN4:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:09.0119894+07:00 0HMT24JMQDEN4:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T16:15:09.1452951+07:00 0HMT24JMQDEN4:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:09.1457948+07:00 0HMT24JMQDEN4:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:09.1471039+07:00 0HMT24JMQDEN4:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:09.1500357+07:00 0HMT24JMQDEN4:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:15:09.1594295+07:00 0HMT24JMQDEN4:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:09.1600654+07:00 0HMT24JMQDEN4:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:09.1615952+07:00 0HMT24JMQDEN4:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:09.1639394+07:00 0HMT24JMQDEN4:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:15:09.1994720+07:00 0HMT24JMQDEN4:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:09.2000476+07:00 0HMT24JMQDEN4:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:09.2016861+07:00 0HMT24JMQDEN4:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:09.2044675+07:00 0HMT24JMQDEN4:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:15:14.8604315+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-21T16:15:14.8762400+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-21T16:15:14.8791487+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-21T16:15:14.8854237+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-21T16:15:15.1867349+07:00 0HMT24SGLVMTM:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-21T16:15:16.5307529+07:00 0HMT24SGLVMTO:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:16.5307524+07:00 0HMT24SGLVMTP:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:16.5307535+07:00 0HMT24SGLVMTN:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:16.5307644+07:00 0HMT24SGLVMTM:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:16.9056957+07:00 0HMT24SGLVMTN:00000003 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:16.9056957+07:00 0HMT24SGLVMTM:00000002 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:16.9056957+07:00 0HMT24SGLVMTO:00000003 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:16.9057032+07:00 0HMT24SGLVMTP:00000003 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:16.9529874+07:00 0HMT24SGLVMTO:00000003 [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:16.9529874+07:00 0HMT24SGLVMTP:00000003 [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:16.9529873+07:00 0HMT24SGLVMTM:00000002 [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:16.9529874+07:00 0HMT24SGLVMTN:00000003 [INF] Executed DbCommand ("31"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:17.0254092+07:00 0HMT24SGLVMTM:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:17.0339006+07:00 0HMT24SGLVMTM:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:17.0469017+07:00 0HMT24SGLVMTM:00000002 [INF] Executed DbCommand ("13"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:17.4600809+07:00 0HMT24SGLVMTM:00000002 [INF] Executed DbCommand ("54"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T16:15:17.4601040+07:00 0HMT24SGLVMTP:00000003 [INF] Executed DbCommand ("55"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:15:17.4601131+07:00 0HMT24SGLVMTO:00000003 [INF] Executed DbCommand ("55"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:17.4601166+07:00 0HMT24SGLVMTN:00000003 [INF] Executed DbCommand ("54"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:15:17.5491932+07:00 0HMT24SGLVMTN:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__message_CreatedTime_0='?' (DbType = DateTime2), @__message_Id_1='?' (Size = 100), @__message_ChatRoomId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE (([m].[CreatedTime] >= @__message_CreatedTime_0) AND ([m].[Id] <> @__message_Id_1)) AND ([m].[ChatRoomId] = @__message_ChatRoomId_2)" (0723d8ff)
2023-08-21T16:15:17.6694771+07:00 0HMT24SGLVMTO:00000003 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:15:17.6959981+07:00 0HMT24SGLVMTO:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:15:17.7062586+07:00 0HMT24SGLVMTO:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:17.7259135+07:00 0HMT24SGLVMTO:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:15:17.7318198+07:00 0HMT24SGLVMTO:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:25.7278785+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-21T16:15:25.7449001+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-21T16:15:25.7452620+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-21T16:15:25.7453062+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-21T16:15:26.0027560+07:00 0HMT24SJSIDH5:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-21T16:15:27.1773800+07:00 0HMT24SJSIDH3:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:27.1773793+07:00 0HMT24SJSIDH8:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:27.1773819+07:00 0HMT24SJSIDH7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:27.1773794+07:00 0HMT24SJSIDH5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:27.1773789+07:00 0HMT24SJSIDH6:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:27.1773783+07:00 0HMT24SJSIDH4:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:27.5256203+07:00 0HMT24SJSIDH3:00000003 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:27.5256166+07:00 0HMT24SJSIDH4:00000003 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:27.5256212+07:00 0HMT24SJSIDH6:00000002 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:27.5256251+07:00 0HMT24SJSIDH8:00000003 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:27.5256180+07:00 0HMT24SJSIDH5:00000002 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:27.5256173+07:00 0HMT24SJSIDH7:00000002 [INF] Executed DbCommand ("23"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:27.5676689+07:00 0HMT24SJSIDH3:00000003 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:27.5676688+07:00 0HMT24SJSIDH4:00000003 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:27.5676688+07:00 0HMT24SJSIDH6:00000002 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:27.5676689+07:00 0HMT24SJSIDH5:00000002 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:27.5676689+07:00 0HMT24SJSIDH7:00000002 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:27.5676688+07:00 0HMT24SJSIDH8:00000003 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:27.6267568+07:00 0HMT24SJSIDH5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:27.6327391+07:00 0HMT24SJSIDH5:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:27.6341570+07:00 0HMT24SJSIDH5:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:28.0277634+07:00 0HMT24SJSIDH5:00000002 [INF] Executed DbCommand ("52"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T16:15:28.0277635+07:00 0HMT24SJSIDH8:00000003 [INF] Executed DbCommand ("52"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:15:28.0277645+07:00 0HMT24SJSIDH6:00000002 [INF] Executed DbCommand ("52"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:28.0277635+07:00 0HMT24SJSIDH4:00000003 [INF] Executed DbCommand ("52"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:15:28.0277648+07:00 0HMT24SJSIDH3:00000003 [INF] Executed DbCommand ("52"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:28.0277635+07:00 0HMT24SJSIDH7:00000002 [INF] Executed DbCommand ("52"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:15:28.2345512+07:00 0HMT24SJSIDH8:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__message_CreatedTime_0='?' (DbType = DateTime2), @__message_Id_1='?' (Size = 100), @__message_ChatRoomId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE (([m].[CreatedTime] >= @__message_CreatedTime_0) AND ([m].[Id] <> @__message_Id_1)) AND ([m].[ChatRoomId] = @__message_ChatRoomId_2)" (0723d8ff)
2023-08-21T16:15:28.3481451+07:00 0HMT24SJSIDH3:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:15:28.3485593+07:00 0HMT24SJSIDH6:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:15:28.3702626+07:00 0HMT24SJSIDH6:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:15:28.3702627+07:00 0HMT24SJSIDH3:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:15:28.3787615+07:00 0HMT24SJSIDH3:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:28.3788592+07:00 0HMT24SJSIDH6:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:28.3965129+07:00 0HMT24SJSIDH3:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:15:28.3965164+07:00 0HMT24SJSIDH6:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:15:28.3974669+07:00 0HMT24SJSIDH3:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:28.3975727+07:00 0HMT24SJSIDH6:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:54.1941444+07:00 0HMT24SJSIDH6:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:54.1954235+07:00 0HMT24SJSIDH6:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:54.1976508+07:00 0HMT24SJSIDH6:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:54.2000330+07:00 0HMT24SJSIDH6:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:54.2023910+07:00 0HMT24SJSIDH6:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:15:54.2037221+07:00 0HMT24SJSIDH6:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:15:54.2046610+07:00 0HMT24SJSIDH6:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:54.2058599+07:00 0HMT24SJSIDH6:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:15:54.2068699+07:00 0HMT24SJSIDH6:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:54.2229124+07:00 0HMT24SJSIDH6:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:54.2236911+07:00 0HMT24SJSIDH6:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:54.2256465+07:00 0HMT24SJSIDH6:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:54.2275509+07:00 0HMT24SJSIDH6:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:15:55.9075372+07:00 0HMT24SJSIDH5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:55.9082191+07:00 0HMT24SJSIDH5:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:55.9094961+07:00 0HMT24SJSIDH5:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:58.3802956+07:00 0HMT24SJSIDH6:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:58.3809018+07:00 0HMT24SJSIDH6:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:58.3835858+07:00 0HMT24SJSIDH6:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:58.3877598+07:00 0HMT24SJSIDH6:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:58.3952777+07:00 0HMT24SJSIDH6:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:15:58.3954241+07:00 0HMT24SJSIDH7:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:58.3959705+07:00 0HMT24SJSIDH7:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:58.3965401+07:00 0HMT24SJSIDH6:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:15:58.3973835+07:00 0HMT24SJSIDH6:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:58.3978624+07:00 0HMT24SJSIDH7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:58.3990663+07:00 0HMT24SJSIDH6:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:15:58.4032850+07:00 0HMT24SJSIDH7:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:15:58.4096133+07:00 0HMT24SJSIDH6:00000009 [INF] Executed DbCommand ("10"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:58.4637122+07:00 0HMT24SJSIDH9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:58.4642516+07:00 0HMT24SJSIDH9:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:58.4662649+07:00 0HMT24SJSIDH9:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:58.5041485+07:00 0HMT24SJSIDH9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:58.5046085+07:00 0HMT24SJSIDH9:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:58.5073523+07:00 0HMT24SJSIDH9:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:58.5097521+07:00 0HMT24SJSIDH9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T16:15:58.5409030+07:00 0HMT24SJSIDH6:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:58.5415127+07:00 0HMT24SJSIDH6:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:58.5429836+07:00 0HMT24SJSIDH6:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:58.5460524+07:00 0HMT24SJSIDH6:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:58.5473895+07:00 0HMT24SJSIDH8:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:15:58.5483750+07:00 0HMT24SJSIDH8:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:15:58.5486589+07:00 0HMT24SJSIDH6:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:15:58.5500716+07:00 0HMT24SJSIDH6:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:15:58.5502047+07:00 0HMT24SJSIDH8:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:15:58.5511523+07:00 0HMT24SJSIDH6:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:15:58.5530200+07:00 0HMT24SJSIDH8:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:15:58.5550433+07:00 0HMT24SJSIDH6:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:15:58.5566254+07:00 0HMT24SJSIDH6:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:16:03.6702880+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-21T16:16:03.6836943+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-21T16:16:03.6844380+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-21T16:16:03.6844900+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-21T16:16:03.9048993+07:00 0HMT24SV600RB:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-21T16:16:05.0716948+07:00 0HMT24SV600RA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:16:05.0717052+07:00 0HMT24SV600RF:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:16:05.0716942+07:00 0HMT24SV600RB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:16:05.0717051+07:00 0HMT24SV600RE:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:16:05.0716950+07:00 0HMT24SV600RC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:16:05.4245165+07:00 0HMT24SV600RF:00000003 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:16:05.4245339+07:00 0HMT24SV600RC:00000002 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:16:05.4245382+07:00 0HMT24SV600RB:00000002 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:16:05.4245437+07:00 0HMT24SV600RE:00000003 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:16:05.4245476+07:00 0HMT24SV600RA:00000002 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:16:05.4590227+07:00 0HMT24SV600RA:00000002 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:16:05.4590228+07:00 0HMT24SV600RE:00000003 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:16:05.4590263+07:00 0HMT24SV600RC:00000002 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:16:05.4590228+07:00 0HMT24SV600RB:00000002 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:16:05.4590228+07:00 0HMT24SV600RF:00000003 [INF] Executed DbCommand ("20"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:16:05.5115894+07:00 0HMT24SV600RC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:16:05.5176320+07:00 0HMT24SV600RC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:16:05.5193275+07:00 0HMT24SV600RC:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:16:05.9308061+07:00 0HMT24SV600RB:00000002 [INF] Executed DbCommand ("55"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:16:05.9308042+07:00 0HMT24SV600RC:00000002 [INF] Executed DbCommand ("55"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T16:16:05.9308043+07:00 0HMT24SV600RE:00000003 [INF] Executed DbCommand ("55"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:16:05.9308154+07:00 0HMT24SV600RA:00000002 [INF] Executed DbCommand ("55"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:16:05.9308043+07:00 0HMT24SV600RF:00000003 [INF] Executed DbCommand ("55"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:16:06.2299922+07:00 0HMT24SV600RA:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:16:06.2299921+07:00 0HMT24SV600RE:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:16:06.2705802+07:00 0HMT24SV600RE:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:16:06.2705803+07:00 0HMT24SV600RA:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:16:06.2786065+07:00 0HMT24SV600RA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:16:06.2786065+07:00 0HMT24SV600RE:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:16:06.2951191+07:00 0HMT24SV600RE:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:16:06.2951193+07:00 0HMT24SV600RA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:16:06.2965264+07:00 0HMT24SV600RA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:16:06.2965263+07:00 0HMT24SV600RE:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:16:08.5556881+07:00 0HMT24SV600RE:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:16:08.5562597+07:00 0HMT24SV600RE:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:16:08.5575727+07:00 0HMT24SV600RE:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:16:08.5754819+07:00 0HMT24SV600RE:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T16:16:08.6414650+07:00 0HMT24SV600RE:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:16:08.6423518+07:00 0HMT24SV600RE:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:16:08.6438861+07:00 0HMT24SV600RE:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:16:08.6551744+07:00 0HMT24SV600RE:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:16:08.6555760+07:00 0HMT24SV600RF:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:16:08.6564742+07:00 0HMT24SV600RF:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:16:08.6584398+07:00 0HMT24SV600RF:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:16:08.6612156+07:00 0HMT24SV600RF:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:16:08.8758116+07:00 0HMT24SV600RE:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:16:08.8763233+07:00 0HMT24SV600RE:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:16:08.8776576+07:00 0HMT24SV600RE:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:16:08.8932654+07:00 0HMT24SV600RE:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:16:13.3334232+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-21T16:16:13.3563518+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-21T16:16:13.3568474+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-21T16:16:13.3568888+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-21T16:16:13.5683816+07:00 0HMT24T222VVV:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-21T16:16:14.7778790+07:00 0HMT24T223000:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:16:14.7778804+07:00 0HMT24T223001:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:16:14.7778773+07:00 0HMT24T223002:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:16:14.7778781+07:00 0HMT24T222VVU:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:16:14.7778768+07:00 0HMT24T222VVV:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:16:15.1457920+07:00 0HMT24T223001:00000003 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:16:15.1457885+07:00 0HMT24T222VVV:00000002 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:16:15.1457885+07:00 0HMT24T223000:00000002 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:16:15.1457912+07:00 0HMT24T223002:00000003 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:16:15.1457828+07:00 0HMT24T222VVU:00000004 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:16:15.1831214+07:00 0HMT24T223000:00000002 [INF] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:16:15.1831214+07:00 0HMT24T222VVU:00000004 [INF] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:16:15.1831213+07:00 0HMT24T223001:00000003 [INF] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:16:15.1831215+07:00 0HMT24T223002:00000003 [INF] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:16:15.1831214+07:00 0HMT24T222VVV:00000002 [INF] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:16:15.2400570+07:00 0HMT24T222VVV:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:16:15.2461852+07:00 0HMT24T222VVV:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:16:15.2481789+07:00 0HMT24T222VVV:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:16:15.6697335+07:00 0HMT24T222VVU:00000004 [INF] Executed DbCommand ("63"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:16:15.6697354+07:00 0HMT24T223000:00000002 [INF] Executed DbCommand ("63"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:16:15.6697335+07:00 0HMT24T223002:00000003 [INF] Executed DbCommand ("63"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:16:15.6697335+07:00 0HMT24T222VVV:00000002 [INF] Executed DbCommand ("63"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T16:16:15.6697334+07:00 0HMT24T223001:00000003 [INF] Executed DbCommand ("63"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:16:15.7481340+07:00 0HMT24T223002:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__message_CreatedTime_0='?' (DbType = DateTime2), @__message_Id_1='?' (Size = 100), @__message_ChatRoomId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE (([m].[CreatedTime] >= @__message_CreatedTime_0) AND ([m].[Id] <> @__message_Id_1)) AND ([m].[ChatRoomId] = @__message_ChatRoomId_2)" (0723d8ff)
2023-08-21T16:16:15.8688710+07:00 0HMT24T222VVU:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:16:15.8688711+07:00 0HMT24T223001:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:16:15.8919182+07:00 0HMT24T223001:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:16:15.8919188+07:00 0HMT24T222VVU:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:16:15.9021319+07:00 0HMT24T223001:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:16:15.9021320+07:00 0HMT24T222VVU:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:16:15.9212897+07:00 0HMT24T223001:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:16:15.9212928+07:00 0HMT24T222VVU:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:16:15.9226546+07:00 0HMT24T223001:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:16:15.9225648+07:00 0HMT24T222VVU:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:17:42.3000175+07:00 0HMT24T223001:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:17:42.3006051+07:00 0HMT24T223001:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:17:42.3010038+07:00 0HMT24T223002:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:17:42.3013400+07:00 0HMT24T223002:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:17:42.3123269+07:00 0HMT24T223001:00000005 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:17:42.3123269+07:00 0HMT24T223002:00000004 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:17:42.3174986+07:00 0HMT24T223002:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:17:42.3174988+07:00 0HMT24T223001:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:17:42.3232886+07:00 0HMT24T223002:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:17:42.3260490+07:00 0HMT24T223002:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:17:42.3287295+07:00 0HMT24T223002:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:17:42.3314934+07:00 0HMT24T223002:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:17:42.3329768+07:00 0HMT24T223002:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:17:43.6228093+07:00 0HMT24T223002:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:17:43.6233805+07:00 0HMT24T223002:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:17:43.6252040+07:00 0HMT24T223002:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:17:43.6428551+07:00 0HMT24T223002:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T16:17:43.6920713+07:00 0HMT24T223002:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:17:43.6928467+07:00 0HMT24T223002:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:17:43.6931897+07:00 0HMT24T223001:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:17:43.6935662+07:00 0HMT24T223001:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:17:43.6946782+07:00 0HMT24T223002:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:17:43.6948658+07:00 0HMT24T223001:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:17:43.7026666+07:00 0HMT24T223001:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:17:43.7026684+07:00 0HMT24T223002:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:17:43.8560539+07:00 0HMT24T223002:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:17:43.8568306+07:00 0HMT24T223002:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:17:43.8583269+07:00 0HMT24T223002:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:17:43.8753175+07:00 0HMT24T223002:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:17:51.3935819+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-21T16:17:51.4025226+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-21T16:17:51.4102192+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-21T16:17:51.4102799+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-21T16:17:51.7377246+07:00 0HMT24TVAHS13:00000003 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-21T16:17:52.8605317+07:00 0HMT24TVAHS13:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:17:52.8605416+07:00 0HMT24TVAHS17:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:17:52.8605454+07:00 0HMT24TVAHS12:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:17:52.8605328+07:00 0HMT24TVAHS15:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:17:52.8605339+07:00 0HMT24TVAHS16:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:17:52.8605321+07:00 0HMT24TVAHS11:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:17:53.2120986+07:00 0HMT24TVAHS17:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:17:53.2120994+07:00 0HMT24TVAHS12:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:17:53.2121000+07:00 0HMT24TVAHS15:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:17:53.2121000+07:00 0HMT24TVAHS16:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:17:53.2121003+07:00 0HMT24TVAHS11:00000002 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:17:53.2120994+07:00 0HMT24TVAHS13:00000003 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:17:53.2515257+07:00 0HMT24TVAHS15:00000003 [INF] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:17:53.2515257+07:00 0HMT24TVAHS16:00000002 [INF] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:17:53.2515256+07:00 0HMT24TVAHS13:00000003 [INF] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:17:53.2515257+07:00 0HMT24TVAHS11:00000002 [INF] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:17:53.2515257+07:00 0HMT24TVAHS17:00000003 [INF] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:17:53.2515257+07:00 0HMT24TVAHS12:00000003 [INF] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:17:53.3100227+07:00 0HMT24TVAHS11:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:17:53.3156556+07:00 0HMT24TVAHS11:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:17:53.3173505+07:00 0HMT24TVAHS11:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:17:53.7217438+07:00 0HMT24TVAHS16:00000002 [INF] Executed DbCommand ("56"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:17:53.7217438+07:00 0HMT24TVAHS12:00000003 [INF] Executed DbCommand ("56"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:17:53.7227567+07:00 0HMT24TVAHS11:00000002 [INF] Executed DbCommand ("56"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T16:17:53.7227568+07:00 0HMT24TVAHS13:00000003 [INF] Executed DbCommand ("56"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:17:53.7227568+07:00 0HMT24TVAHS17:00000003 [INF] Executed DbCommand ("56"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:17:53.7227568+07:00 0HMT24TVAHS15:00000003 [INF] Executed DbCommand ("56"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:17:53.9228154+07:00 0HMT24TVAHS15:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__message_CreatedTime_0='?' (DbType = DateTime2), @__message_Id_1='?' (Size = 100), @__message_ChatRoomId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE (([m].[CreatedTime] >= @__message_CreatedTime_0) AND ([m].[Id] <> @__message_Id_1)) AND ([m].[ChatRoomId] = @__message_ChatRoomId_2)" (0723d8ff)
2023-08-21T16:17:54.0254807+07:00 0HMT24TVAHS12:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:17:54.0254790+07:00 0HMT24TVAHS16:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:17:54.0463580+07:00 0HMT24TVAHS12:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:17:54.0463579+07:00 0HMT24TVAHS16:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:17:54.0549072+07:00 0HMT24TVAHS16:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:17:54.0549069+07:00 0HMT24TVAHS12:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:17:54.0715165+07:00 0HMT24TVAHS16:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:17:54.0715189+07:00 0HMT24TVAHS12:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:17:54.0725078+07:00 0HMT24TVAHS12:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:17:54.0726078+07:00 0HMT24TVAHS16:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:18:18.0596523+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-21T16:18:18.0738157+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-21T16:18:18.0837480+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-21T16:18:18.0838171+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-21T16:18:18.3298716+07:00 0HMT24U77TPTQ:00000004 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-21T16:18:19.4532259+07:00 0HMT24U77TPTR:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:18:19.4532258+07:00 0HMT24U77TPTQ:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:18:19.8185132+07:00 0HMT24U77TPTQ:00000004 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:18:19.8185129+07:00 0HMT24U77TPTR:00000002 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:18:19.8637912+07:00 0HMT24U77TPTR:00000002 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:18:19.8637913+07:00 0HMT24U77TPTQ:00000004 [INF] Executed DbCommand ("29"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:18:19.8906531+07:00 0HMT24U77TPTU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:18:19.8991513+07:00 0HMT24U77TPTU:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:18:19.9012643+07:00 0HMT24U77TPTU:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:18:19.9195527+07:00 0HMT24U77TPTU:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:18:19.9204512+07:00 0HMT24U77TPTU:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:18:19.9226290+07:00 0HMT24U77TPTU:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:18:19.9643834+07:00 0HMT24U77TPTS:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:18:19.9653581+07:00 0HMT24U77TPTS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:18:19.9672744+07:00 0HMT24U77TPTS:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:18:19.9903855+07:00 0HMT24U77TPTT:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:18:19.9911461+07:00 0HMT24U77TPTT:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:18:19.9935544+07:00 0HMT24U77TPTT:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:18:19.9937026+07:00 0HMT24U77TPTV:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:18:19.9944407+07:00 0HMT24U77TPTV:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:18:19.9958189+07:00 0HMT24U77TPTV:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:18:20.4353000+07:00 0HMT24U77TPTQ:00000004 [INF] Executed DbCommand ("117"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:18:20.4353000+07:00 0HMT24U77TPTU:00000002 [INF] Executed DbCommand ("92"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T16:18:20.4353000+07:00 0HMT24U77TPTV:00000002 [INF] Executed DbCommand ("117"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:18:20.4353000+07:00 0HMT24U77TPTT:00000004 [INF] Executed DbCommand ("87"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:18:20.4353000+07:00 0HMT24U77TPTS:00000003 [INF] Executed DbCommand ("92"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:18:20.4353000+07:00 0HMT24U77TPTR:00000002 [INF] Executed DbCommand ("92"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:18:20.6365980+07:00 0HMT24U77TPTS:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__message_CreatedTime_0='?' (DbType = DateTime2), @__message_Id_1='?' (Size = 100), @__message_ChatRoomId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE (([m].[CreatedTime] >= @__message_CreatedTime_0) AND ([m].[Id] <> @__message_Id_1)) AND ([m].[ChatRoomId] = @__message_ChatRoomId_2)" (0723d8ff)
2023-08-21T16:18:20.7118583+07:00 0HMT24U77TPTS:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:18:20.7123653+07:00 0HMT24U77TPTS:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:18:20.7137896+07:00 0HMT24U77TPTS:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:18:20.7301191+07:00 0HMT24U77TPTS:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:18:20.7512053+07:00 0HMT24U77TPTT:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:18:20.7528988+07:00 0HMT24U77TPTR:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:18:20.7552909+07:00 0HMT24U77TPTR:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:18:20.7553928+07:00 0HMT24U77TPTT:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:18:20.7748746+07:00 0HMT24U77TPTR:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:18:20.7748746+07:00 0HMT24U77TPTT:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:18:20.7836537+07:00 0HMT24U77TPTT:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:18:20.7836537+07:00 0HMT24U77TPTR:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:18:20.8009606+07:00 0HMT24U77TPTT:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:18:20.8009605+07:00 0HMT24U77TPTR:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:18:20.8021581+07:00 0HMT24U77TPTR:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:18:20.8021540+07:00 0HMT24U77TPTT:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:18:20.9592188+07:00 0HMT24U77TPTS:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T16:18:36.8943440+07:00 0HMT24U77TPTS:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:18:36.8943439+07:00 0HMT24U77TPTT:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:18:36.8948649+07:00 0HMT24U77TPTS:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:18:36.8948650+07:00 0HMT24U77TPTT:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:18:36.9051102+07:00 0HMT24U77TPTS:00000007 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:18:36.9114996+07:00 0HMT24U77TPTT:00000006 [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:18:36.9115550+07:00 0HMT24U77TPTS:00000007 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:18:36.9174653+07:00 0HMT24U77TPTT:00000006 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:18:36.9251680+07:00 0HMT24U77TPTT:00000006 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:18:36.9284578+07:00 0HMT24U77TPTT:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:18:36.9319465+07:00 0HMT24U77TPTT:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:18:36.9347930+07:00 0HMT24U77TPTT:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:18:36.9360637+07:00 0HMT24U77TPTT:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:19:49.8844104+07:00 0HMT24U77TPTT:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:19:49.8849639+07:00 0HMT24U77TPTT:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:19:49.8963326+07:00 0HMT24U77TPTT:00000008 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:19:49.9188293+07:00 0HMT24U77TPTT:00000008 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T16:19:49.9786256+07:00 0HMT24U77TPTT:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:19:49.9794322+07:00 0HMT24U77TPTT:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:19:49.9809984+07:00 0HMT24U77TPTT:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:19:49.9879350+07:00 0HMT24U77TPTT:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:19:49.9922549+07:00 0HMT24U77TPTT:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:19:49.9927618+07:00 0HMT24U77TPTT:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:19:49.9946436+07:00 0HMT24U77TPTT:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:19:49.9970991+07:00 0HMT24U77TPTT:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:19:50.1064315+07:00 0HMT24U77TPTT:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:19:50.1072123+07:00 0HMT24U77TPTT:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:19:50.1094471+07:00 0HMT24U77TPTT:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:19:50.1144239+07:00 0HMT24U77TPTT:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:20:19.2941610+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-21T16:20:19.3102492+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-21T16:20:19.3107902+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-21T16:20:19.3108634+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-21T16:20:45.6244444+07:00 0HMT24VJ5I4SN:00000002 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-21T16:20:46.6048600+07:00 0HMT24VJ5I4SO:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:20:46.6048594+07:00 0HMT24VJ5I4SP:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:20:46.6048589+07:00 0HMT24VJ5I4SQ:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:20:46.6048606+07:00 0HMT24VJ5I4SN:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:20:46.9639926+07:00 0HMT24VJ5I4SN:00000002 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:20:46.9639800+07:00 0HMT24VJ5I4SP:00000003 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:20:46.9639799+07:00 0HMT24VJ5I4SO:00000003 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:20:46.9639800+07:00 0HMT24VJ5I4SQ:00000003 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:20:47.0068198+07:00 0HMT24VJ5I4SO:00000003 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:20:47.0068199+07:00 0HMT24VJ5I4SP:00000003 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:20:47.0068199+07:00 0HMT24VJ5I4SQ:00000003 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:20:47.0068199+07:00 0HMT24VJ5I4SN:00000002 [INF] Executed DbCommand ("28"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:20:47.0700549+07:00 0HMT24VJ5I4SN:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:20:47.0757782+07:00 0HMT24VJ5I4SN:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:20:47.0773096+07:00 0HMT24VJ5I4SN:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:20:47.4669331+07:00 0HMT24VJ5I4SO:00000003 [INF] Executed DbCommand ("53"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:20:47.4669273+07:00 0HMT24VJ5I4SP:00000003 [INF] Executed DbCommand ("53"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:20:47.4669295+07:00 0HMT24VJ5I4SN:00000002 [INF] Executed DbCommand ("53"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T16:20:47.4669273+07:00 0HMT24VJ5I4SQ:00000003 [INF] Executed DbCommand ("53"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:20:47.5580554+07:00 0HMT24VJ5I4SO:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=["@__message_CreatedTime_0='?' (DbType = DateTime2), @__message_Id_1='?' (Size = 100), @__message_ChatRoomId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE (([m].[CreatedTime] >= @__message_CreatedTime_0) AND ([m].[Id] <> @__message_Id_1)) AND ([m].[ChatRoomId] = @__message_ChatRoomId_2)" (0723d8ff)
2023-08-21T16:20:47.6887682+07:00 0HMT24VJ5I4SP:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:20:47.7112691+07:00 0HMT24VJ5I4SP:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:20:47.7208975+07:00 0HMT24VJ5I4SP:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:20:47.7410365+07:00 0HMT24VJ5I4SP:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:20:47.7459846+07:00 0HMT24VJ5I4SP:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:25:41.3204563+07:00 0HMT24VJ5I4SS:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:25:41.3212261+07:00 0HMT24VJ5I4SS:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:25:41.3308665+07:00 0HMT24VJ5I4SS:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:25:41.4720729+07:00 0HMT24VJ5I4SS:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T16:25:41.5154430+07:00 0HMT24VJ5I4SS:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-21T16:25:41.5949379+07:00 0HMT24VJ5I4SR:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:25:41.5954753+07:00 0HMT24VJ5I4SR:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:25:41.5970057+07:00 0HMT24VJ5I4SR:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:25:41.6085935+07:00 0HMT24VJ5I4SR:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:25:41.6277070+07:00 0HMT24VJ5I4SR:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T16:25:43.6897416+07:00 0HMT24VJ5I4SS:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:25:43.6902538+07:00 0HMT24VJ5I4SS:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:25:43.6915902+07:00 0HMT24VJ5I4SS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:25:43.6938848+07:00 0HMT24VJ5I4SS:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T16:25:43.6953874+07:00 0HMT24VJ5I4SS:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-21T16:25:43.7451227+07:00 0HMT24VJ5I4SR:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:25:43.7456141+07:00 0HMT24VJ5I4SR:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:25:43.7469306+07:00 0HMT24VJ5I4SR:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:25:43.7486253+07:00 0HMT24VJ5I4SR:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:25:43.7508149+07:00 0HMT24VJ5I4SR:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T16:25:46.2680801+07:00 0HMT24VJ5I4SS:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:25:46.2686868+07:00 0HMT24VJ5I4SS:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:25:46.2701390+07:00 0HMT24VJ5I4SS:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:25:46.2724755+07:00 0HMT24VJ5I4SS:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T16:25:46.2738684+07:00 0HMT24VJ5I4SS:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-21T16:25:46.3386890+07:00 0HMT24VJ5I4SR:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:25:46.3392653+07:00 0HMT24VJ5I4SR:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:25:46.3405543+07:00 0HMT24VJ5I4SR:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:25:46.3422516+07:00 0HMT24VJ5I4SR:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:25:46.3442375+07:00 0HMT24VJ5I4SR:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T16:25:48.3177150+07:00 0HMT24VJ5I4SS:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:25:48.3181855+07:00 0HMT24VJ5I4SS:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:25:48.3194198+07:00 0HMT24VJ5I4SS:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:25:48.3210600+07:00 0HMT24VJ5I4SS:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T16:25:48.3224397+07:00 0HMT24VJ5I4SS:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-21T16:25:48.3757568+07:00 0HMT24VJ5I4SR:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:25:48.3762563+07:00 0HMT24VJ5I4SR:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:25:48.3775839+07:00 0HMT24VJ5I4SR:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:25:48.3811614+07:00 0HMT24VJ5I4SR:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:25:48.3893061+07:00 0HMT24VJ5I4SR:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T16:25:51.5711072+07:00 0HMT24VJ5I4SN:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:25:51.5716495+07:00 0HMT24VJ5I4SN:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:25:51.5730621+07:00 0HMT24VJ5I4SN:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:25:51.6940459+07:00 0HMT24VJ5I4SR:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:25:51.6945652+07:00 0HMT24VJ5I4SR:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:25:51.6958975+07:00 0HMT24VJ5I4SR:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:25:51.7012708+07:00 0HMT24VJ5I4SR:0000000B [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:25:51.7077962+07:00 0HMT24VJ5I4SR:0000000B [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:25:51.7104979+07:00 0HMT24VJ5I4SR:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:25:51.7139298+07:00 0HMT24VJ5I4SR:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:25:51.7178835+07:00 0HMT24VJ5I4SR:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:25:51.7213030+07:00 0HMT24VJ5I4SR:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:25:51.7226105+07:00 0HMT24VJ5I4SR:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:25:51.7537215+07:00 0HMT24VJ5I4SR:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:25:51.7544108+07:00 0HMT24VJ5I4SR:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:25:51.7558947+07:00 0HMT24VJ5I4SR:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:25:51.7593966+07:00 0HMT24VJ5I4SR:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:25:54.4083820+07:00 0HMT24VJ5I4SR:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:25:54.4089009+07:00 0HMT24VJ5I4SS:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:25:54.4091807+07:00 0HMT24VJ5I4SR:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:25:54.4094141+07:00 0HMT24VJ5I4SS:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:25:54.4108382+07:00 0HMT24VJ5I4SS:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:25:54.4108394+07:00 0HMT24VJ5I4SR:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:25:54.4143964+07:00 0HMT24VJ5I4SS:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:25:54.4188827+07:00 0HMT24VJ5I4SR:0000000D [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:25:54.4258030+07:00 0HMT24VJ5I4SR:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:25:54.4271929+07:00 0HMT24VJ5I4SR:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:25:54.4281452+07:00 0HMT24VJ5I4SR:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:25:54.4291798+07:00 0HMT24VJ5I4SR:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:25:54.4305525+07:00 0HMT24VJ5I4SR:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:25:54.4317618+07:00 0HMT24VJ5I4SR:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:25:54.5151686+07:00 0HMT24VJ5I4ST:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:25:54.5159734+07:00 0HMT24VJ5I4ST:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:25:54.5185725+07:00 0HMT24VJ5I4ST:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:25:54.5517184+07:00 0HMT24VJ5I4ST:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:25:54.5523609+07:00 0HMT24VJ5I4ST:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:25:54.5546014+07:00 0HMT24VJ5I4ST:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:25:54.5577020+07:00 0HMT24VJ5I4ST:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T16:25:54.6458598+07:00 0HMT24VJ5I4SS:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:25:54.6458597+07:00 0HMT24VJ5I4SR:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:25:54.6464062+07:00 0HMT24VJ5I4SR:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:25:54.6464062+07:00 0HMT24VJ5I4SS:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:25:54.6482472+07:00 0HMT24VJ5I4SS:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:25:54.6482473+07:00 0HMT24VJ5I4SR:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:25:54.6505350+07:00 0HMT24VJ5I4SS:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:25:54.6505497+07:00 0HMT24VJ5I4SR:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:25:54.6549356+07:00 0HMT24VJ5I4SR:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:25:54.6570258+07:00 0HMT24VJ5I4SR:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:25:54.6583177+07:00 0HMT24VJ5I4SR:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:25:54.6592974+07:00 0HMT24VJ5I4SR:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:25:54.6605110+07:00 0HMT24VJ5I4SR:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:25:54.6622162+07:00 0HMT24VJ5I4SR:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:26:08.9207716+07:00 0HMT24VJ5I4SR:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:08.9213777+07:00 0HMT24VJ5I4SR:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:08.9227842+07:00 0HMT24VJ5I4SS:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:08.9229920+07:00 0HMT24VJ5I4SR:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:08.9232761+07:00 0HMT24VJ5I4SS:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:08.9246943+07:00 0HMT24VJ5I4SR:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:26:08.9253646+07:00 0HMT24VJ5I4SS:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:08.9276919+07:00 0HMT24VJ5I4SR:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:26:08.9276920+07:00 0HMT24VJ5I4SS:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:26:08.9302087+07:00 0HMT24VJ5I4SR:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:26:08.9312108+07:00 0HMT24VJ5I4SR:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:26:08.9321310+07:00 0HMT24VJ5I4SR:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:26:08.9338665+07:00 0HMT24VJ5I4SR:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:26:08.9349114+07:00 0HMT24VJ5I4SR:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:26:14.8731219+07:00 0HMT24VJ5I4ST:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:14.8736566+07:00 0HMT24VJ5I4ST:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:14.8839246+07:00 0HMT24VJ5I4ST:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:17.5613316+07:00 0HMT24VJ5I4SR:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:17.5619607+07:00 0HMT24VJ5I4SR:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:17.5620619+07:00 0HMT24VJ5I4SS:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:17.5626316+07:00 0HMT24VJ5I4SS:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:17.5736018+07:00 0HMT24VJ5I4SR:00000013 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:17.5781690+07:00 0HMT24VJ5I4SR:00000013 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:26:17.5801622+07:00 0HMT24VJ5I4SS:0000000B [INF] Executed DbCommand ("17"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:17.5842931+07:00 0HMT24VJ5I4SR:00000013 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:26:17.5852936+07:00 0HMT24VJ5I4SS:0000000B [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:26:17.5870070+07:00 0HMT24VJ5I4SR:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:26:17.5930104+07:00 0HMT24VJ5I4SR:00000013 [INF] Executed DbCommand ("5"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:26:17.5967560+07:00 0HMT24VJ5I4SR:00000013 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:26:17.5992733+07:00 0HMT24VJ5I4SR:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:26:17.6002906+07:00 0HMT24VJ5I4SR:00000013 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:26:17.6253272+07:00 0HMT24VJ5I4SV:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:17.6259890+07:00 0HMT24VJ5I4SV:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:17.6280539+07:00 0HMT24VJ5I4SV:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:17.6879528+07:00 0HMT24VJ5I4SV:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:17.6885913+07:00 0HMT24VJ5I4SV:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:17.6899263+07:00 0HMT24VJ5I4SV:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:17.6926550+07:00 0HMT24VJ5I4SV:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T16:26:17.7640691+07:00 0HMT24VJ5I4SR:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:17.7647660+07:00 0HMT24VJ5I4SS:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:17.7648337+07:00 0HMT24VJ5I4SR:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:17.7651561+07:00 0HMT24VJ5I4SS:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:17.7664695+07:00 0HMT24VJ5I4SR:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:17.7664695+07:00 0HMT24VJ5I4SS:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:17.7689296+07:00 0HMT24VJ5I4SR:00000014 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:26:17.7688584+07:00 0HMT24VJ5I4SS:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:26:17.7725089+07:00 0HMT24VJ5I4SR:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:26:17.7738285+07:00 0HMT24VJ5I4SR:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:26:17.7748673+07:00 0HMT24VJ5I4SR:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:26:17.7761078+07:00 0HMT24VJ5I4SR:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:26:17.7772962+07:00 0HMT24VJ5I4SR:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:26:17.7785214+07:00 0HMT24VJ5I4SR:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:26:27.5356762+07:00 0HMT24VJ5I4SR:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:27.5363897+07:00 0HMT24VJ5I4SR:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:27.5406799+07:00 0HMT24VJ5I4SS:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:27.5418087+07:00 0HMT24VJ5I4SS:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:27.5511982+07:00 0HMT24VJ5I4SS:0000000D [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:27.5511983+07:00 0HMT24VJ5I4SR:00000017 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:27.5591631+07:00 0HMT24VJ5I4SS:0000000D [INF] Executed DbCommand ("7"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:26:27.5600107+07:00 0HMT24VJ5I4SR:00000017 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:26:27.5676035+07:00 0HMT24VJ5I4SR:00000017 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:26:27.5717304+07:00 0HMT24VJ5I4SR:00000017 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:26:27.5751502+07:00 0HMT24VJ5I4SR:00000017 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:26:27.5785712+07:00 0HMT24VJ5I4SR:00000017 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:26:27.5831346+07:00 0HMT24VJ5I4SR:00000017 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:26:27.5846088+07:00 0HMT24VJ5I4SR:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:26:37.9969104+07:00 0HMT24VJ5I4SR:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:37.9977320+07:00 0HMT24VJ5I4SR:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:37.9999389+07:00 0HMT24VJ5I4SR:00000019 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:38.0195019+07:00 0HMT24VJ5I4SR:00000019 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T16:26:38.0918483+07:00 0HMT24VJ5I4SS:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:38.0921606+07:00 0HMT24VJ5I4SR:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:38.0925306+07:00 0HMT24VJ5I4SS:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:38.0925748+07:00 0HMT24VJ5I4SR:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:38.0943411+07:00 0HMT24VJ5I4SS:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:38.0943892+07:00 0HMT24VJ5I4SR:0000001C [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:38.1015033+07:00 0HMT24VJ5I4SR:0000001C [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:26:38.1015032+07:00 0HMT24VJ5I4SS:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:26:38.2004493+07:00 0HMT24VJ5I4SR:0000001E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:38.2011438+07:00 0HMT24VJ5I4SR:0000001E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:38.2025356+07:00 0HMT24VJ5I4SR:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:38.2052611+07:00 0HMT24VJ5I4SR:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:26:38.2075692+07:00 0HMT24VJ5I4SR:0000001E [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T16:26:39.0154543+07:00 0HMT24VJ5I4SR:00000020 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:39.0159796+07:00 0HMT24VJ5I4SR:00000020 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:39.0173341+07:00 0HMT24VJ5I4SR:00000020 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:39.0193677+07:00 0HMT24VJ5I4SR:00000020 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T16:26:39.0704371+07:00 0HMT24VJ5I4SR:00000022 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:39.0709946+07:00 0HMT24VJ5I4SR:00000022 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:39.0722635+07:00 0HMT24VJ5I4SR:00000022 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:39.0741849+07:00 0HMT24VJ5I4SR:00000022 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:26:39.0829205+07:00 0HMT24VJ5I4SR:00000023 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:39.0834426+07:00 0HMT24VJ5I4SR:00000023 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:39.0847577+07:00 0HMT24VJ5I4SR:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:39.0871460+07:00 0HMT24VJ5I4SR:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:26:39.2721418+07:00 0HMT24VJ5I4SR:00000024 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:39.2727365+07:00 0HMT24VJ5I4SR:00000024 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:39.2741010+07:00 0HMT24VJ5I4SR:00000024 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:39.2759310+07:00 0HMT24VJ5I4SR:00000024 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T16:26:39.3006033+07:00 0HMT24VJ5I4SR:00000025 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:39.3011451+07:00 0HMT24VJ5I4SR:00000025 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:39.3025904+07:00 0HMT24VJ5I4SR:00000025 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:39.3057597+07:00 0HMT24VJ5I4SR:00000025 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:26:39.3061390+07:00 0HMT24VJ5I4SS:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:39.3071523+07:00 0HMT24VJ5I4SS:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:39.3089225+07:00 0HMT24VJ5I4SS:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:39.3126551+07:00 0HMT24VJ5I4SS:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:26:39.4224591+07:00 0HMT24VJ5I4SR:00000026 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:39.4229568+07:00 0HMT24VJ5I4SR:00000026 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:39.4244898+07:00 0HMT24VJ5I4SR:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:39.4266553+07:00 0HMT24VJ5I4SR:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:26:44.2286129+07:00 0HMT24VJ5I4SR:00000028 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:44.2292037+07:00 0HMT24VJ5I4SR:00000028 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:44.2308535+07:00 0HMT24VJ5I4SR:00000028 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:44.2589022+07:00 0HMT24VJ5I4SR:00000028 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T16:26:44.3251458+07:00 0HMT24VJ5I4SR:0000002A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:44.3256363+07:00 0HMT24VJ5I4SR:0000002A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:44.3269682+07:00 0HMT24VJ5I4SR:0000002A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:44.3286911+07:00 0HMT24VJ5I4SR:0000002A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:26:44.3308208+07:00 0HMT24VJ5I4SR:0000002A [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T16:26:46.7347425+07:00 0HMT24VJ5I4SR:0000002C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:46.7352358+07:00 0HMT24VJ5I4SR:0000002C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:46.7365692+07:00 0HMT24VJ5I4SR:0000002C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:46.7453854+07:00 0HMT24VJ5I4SR:0000002C [INF] Executed DbCommand ("2"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-21T16:26:46.7516948+07:00 0HMT24VJ5I4SR:0000002C [INF] Executed DbCommand ("1"ms) [Parameters=["@p2='?' (Size = 100), @p0='?' (Size = 50), @p1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Messages] SET [FileStatus] = @p0, [FileUrls] = @p1
WHERE [Id] = @p2;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T16:26:46.8087761+07:00 0HMT24VJ5I4SR:0000002D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:26:46.8093008+07:00 0HMT24VJ5I4SR:0000002D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:26:46.8106138+07:00 0HMT24VJ5I4SR:0000002D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:26:46.8125613+07:00 0HMT24VJ5I4SR:0000002D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:27:02.3170388+07:00 0HMT24VJ5I4SR:0000002F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:27:02.3175115+07:00 0HMT24VJ5I4SR:0000002F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:27:02.3187789+07:00 0HMT24VJ5I4SR:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:27:02.3202518+07:00 0HMT24VJ5I4SR:0000002F [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T16:27:02.3836986+07:00 0HMT24VJ5I4SR:00000031 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:27:02.3843519+07:00 0HMT24VJ5I4SR:00000031 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:27:02.3858240+07:00 0HMT24VJ5I4SR:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:27:02.3882063+07:00 0HMT24VJ5I4SR:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:27:02.3902765+07:00 0HMT24VJ5I4SR:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T16:27:03.2502129+07:00 0HMT24VJ5I4SR:00000033 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:27:03.2507162+07:00 0HMT24VJ5I4SR:00000033 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:27:03.2521876+07:00 0HMT24VJ5I4SR:00000033 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:27:03.2537897+07:00 0HMT24VJ5I4SR:00000033 [INF] Executed DbCommand ("1"ms) [Parameters=["@__Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__Id_0" (0723d8ff)
2023-08-21T16:27:03.2561919+07:00 0HMT24VJ5I4SR:00000033 [INF] Executed DbCommand ("1"ms) [Parameters=["@p2='?' (Size = 100), @p0='?' (Size = 50), @p1='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Messages] SET [FileStatus] = @p0, [FileUrls] = @p1
WHERE [Id] = @p2;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T16:27:03.3384361+07:00 0HMT24VJ5I4SR:00000034 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:27:03.3389866+07:00 0HMT24VJ5I4SR:00000034 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:27:03.3410041+07:00 0HMT24VJ5I4SR:00000034 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:27:03.3434538+07:00 0HMT24VJ5I4SR:00000034 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:31:59.8825769+07:00 0HMT24VJ5I4SV:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:31:59.8860928+07:00 0HMT24VJ5I4SV:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:31:59.8970386+07:00 0HMT24VJ5I4SV:00000002 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:32:00.0431753+07:00 0HMT24VJ5I4T0:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:32:00.0439787+07:00 0HMT24VJ5I4T0:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:32:00.0456986+07:00 0HMT24VJ5I4T0:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:32:00.0530078+07:00 0HMT24VJ5I4T0:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:32:00.0538876+07:00 0HMT24VJ5I4T1:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:32:00.0582472+07:00 0HMT24VJ5I4T1:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:32:00.0588870+07:00 0HMT24VJ5I4T0:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:32:00.0598775+07:00 0HMT24VJ5I4T1:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:32:00.0621721+07:00 0HMT24VJ5I4T0:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:32:00.0644774+07:00 0HMT24VJ5I4T1:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:32:00.0664913+07:00 0HMT24VJ5I4T0:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:32:00.0702008+07:00 0HMT24VJ5I4T0:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:32:00.0728066+07:00 0HMT24VJ5I4T0:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:32:00.0739656+07:00 0HMT24VJ5I4T0:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:32:02.3015295+07:00 0HMT24VJ5I4T3:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:32:02.3022139+07:00 0HMT24VJ5I4T3:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:32:02.3036146+07:00 0HMT24VJ5I4T3:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:32:02.3040422+07:00 0HMT24VJ5I4T3:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:32:02.3043782+07:00 0HMT24VJ5I4T3:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:32:02.3062494+07:00 0HMT24VJ5I4T3:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:32:02.3088469+07:00 0HMT24VJ5I4T3:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T16:32:02.3568325+07:00 0HMT24VJ5I4T0:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:32:02.3573288+07:00 0HMT24VJ5I4T1:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:32:02.3573311+07:00 0HMT24VJ5I4T0:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:32:02.3576440+07:00 0HMT24VJ5I4T1:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:32:02.3600696+07:00 0HMT24VJ5I4T0:00000005 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:32:02.3600696+07:00 0HMT24VJ5I4T1:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:32:02.3603159+07:00 0HMT24VJ5I4T4:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:32:02.3613167+07:00 0HMT24VJ5I4T4:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:32:02.3617830+07:00 0HMT24VJ5I4T0:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:32:02.3638286+07:00 0HMT24VJ5I4T4:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:32:02.3642835+07:00 0HMT24VJ5I4T1:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:32:02.3667503+07:00 0HMT24VJ5I4T4:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:32:02.3671559+07:00 0HMT24VJ5I4T0:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:32:02.3837816+07:00 0HMT24VJ5I4T0:00000005 [INF] Executed DbCommand ("6"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:32:02.3907919+07:00 0HMT24VJ5I4T0:00000005 [INF] Executed DbCommand ("5"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:32:02.3927712+07:00 0HMT24VJ5I4T0:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:32:02.3941499+07:00 0HMT24VJ5I4T0:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:32:02.3951010+07:00 0HMT24VJ5I4T0:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:32:02.3991440+07:00 0HMT24VJ5I4T1:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__message_CreatedTime_0='?' (DbType = DateTime2), @__message_Id_1='?' (Size = 100), @__message_ChatRoomId_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE (([m].[CreatedTime] >= @__message_CreatedTime_0) AND ([m].[Id] <> @__message_Id_1)) AND ([m].[ChatRoomId] = @__message_ChatRoomId_2)" (0723d8ff)
2023-08-21T16:32:02.6355059+07:00 0HMT24VJ5I4T0:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:32:02.6361612+07:00 0HMT24VJ5I4T0:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:32:02.6374618+07:00 0HMT24VJ5I4T0:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:32:02.6410902+07:00 0HMT24VJ5I4T0:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:32:02.6446827+07:00 0HMT24VJ5I4T0:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T16:32:04.8052620+07:00 0HMT24VJ5I4T3:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:32:04.8057347+07:00 0HMT24VJ5I4T3:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:32:04.8070566+07:00 0HMT24VJ5I4T3:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:32:04.9683155+07:00 0HMT24VJ5I4T0:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:32:04.9689735+07:00 0HMT24VJ5I4T0:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:32:04.9703828+07:00 0HMT24VJ5I4T0:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:32:04.9718023+07:00 0HMT24VJ5I4T0:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:32:04.9747065+07:00 0HMT24VJ5I4T0:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:32:04.9762671+07:00 0HMT24VJ5I4T0:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:32:04.9777112+07:00 0HMT24VJ5I4T0:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:32:04.9787078+07:00 0HMT24VJ5I4T0:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:32:04.9795078+07:00 0HMT24VJ5I4T0:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:32:04.9940941+07:00 0HMT24VJ5I4T0:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:32:04.9950712+07:00 0HMT24VJ5I4T0:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:32:04.9968007+07:00 0HMT24VJ5I4T0:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:32:04.9984442+07:00 0HMT24VJ5I4T0:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:32:39.3534410+07:00 0HMT24VJ5I4T0:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:32:39.3538443+07:00 0HMT24VJ5I4T1:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:32:39.3542015+07:00 0HMT24VJ5I4T0:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:32:39.3543507+07:00 0HMT24VJ5I4T1:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:32:39.3557228+07:00 0HMT24VJ5I4T1:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:32:39.3557227+07:00 0HMT24VJ5I4T0:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:32:39.3573137+07:00 0HMT24VJ5I4T0:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:32:39.3653870+07:00 0HMT24VJ5I4T1:00000006 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:32:39.3831788+07:00 0HMT24VJ5I4T1:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:32:39.3843947+07:00 0HMT24VJ5I4T1:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:32:39.3859506+07:00 0HMT24VJ5I4T1:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:32:39.3876199+07:00 0HMT24VJ5I4T1:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:32:39.3890538+07:00 0HMT24VJ5I4T1:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:32:39.4372197+07:00 0HMT24VJ5I4T5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:32:39.4378382+07:00 0HMT24VJ5I4T5:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:32:39.4403479+07:00 0HMT24VJ5I4T5:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:32:39.5053120+07:00 0HMT24VJ5I4T5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:32:39.5059215+07:00 0HMT24VJ5I4T5:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:32:39.5078004+07:00 0HMT24VJ5I4T5:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:32:39.5092150+07:00 0HMT24VJ5I4T5:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T16:32:39.6003298+07:00 0HMT24VJ5I4T1:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:32:39.6004204+07:00 0HMT24VJ5I4T0:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:32:39.6011380+07:00 0HMT24VJ5I4T0:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:32:39.6011380+07:00 0HMT24VJ5I4T1:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:32:39.6029177+07:00 0HMT24VJ5I4T0:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:32:39.6029179+07:00 0HMT24VJ5I4T1:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:32:39.6047574+07:00 0HMT24VJ5I4T1:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:32:39.6046777+07:00 0HMT24VJ5I4T0:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:32:39.6089984+07:00 0HMT24VJ5I4T0:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:32:39.6098913+07:00 0HMT24VJ5I4T0:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:32:39.6106601+07:00 0HMT24VJ5I4T0:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:32:39.6115276+07:00 0HMT24VJ5I4T0:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:32:39.6126083+07:00 0HMT24VJ5I4T0:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:32:40.1878786+07:00 0HMT24VJ5I4T0:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:32:40.1884747+07:00 0HMT24VJ5I4T0:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:32:40.1901333+07:00 0HMT24VJ5I4T0:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:32:40.1941342+07:00 0HMT24VJ5I4T0:0000000E [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T16:32:40.2701801+07:00 0HMT24VJ5I4T0:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:32:40.2714331+07:00 0HMT24VJ5I4T0:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:32:40.2735948+07:00 0HMT24VJ5I4T0:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:32:40.2765432+07:00 0HMT24VJ5I4T0:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:32:40.2914419+07:00 0HMT24VJ5I4T0:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:32:40.2923437+07:00 0HMT24VJ5I4T0:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:32:40.2939511+07:00 0HMT24VJ5I4T0:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:32:40.2961517+07:00 0HMT24VJ5I4T0:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:32:40.4282717+07:00 0HMT24VJ5I4T0:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:32:40.4290599+07:00 0HMT24VJ5I4T0:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:32:40.4306178+07:00 0HMT24VJ5I4T0:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:32:40.4329461+07:00 0HMT24VJ5I4T0:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:38:01.8221129+07:00 0HMT24VJ5I4T5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:38:01.8230362+07:00 0HMT24VJ5I4T5:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:38:01.8380369+07:00 0HMT24VJ5I4T5:00000002 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:38:02.0037396+07:00 0HMT24VJ5I4T6:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:38:02.0048212+07:00 0HMT24VJ5I4T6:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:38:02.0073833+07:00 0HMT24VJ5I4T7:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:38:02.0074155+07:00 0HMT24VJ5I4T6:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:38:02.0080272+07:00 0HMT24VJ5I4T7:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:38:02.0106178+07:00 0HMT24VJ5I4T7:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:38:02.0139653+07:00 0HMT24VJ5I4T6:00000004 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:38:02.0170454+07:00 0HMT24VJ5I4T7:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:38:02.0225180+07:00 0HMT24VJ5I4T6:00000004 [INF] Executed DbCommand ("7"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:38:02.0268726+07:00 0HMT24VJ5I4T6:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:38:02.0305397+07:00 0HMT24VJ5I4T6:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:38:02.0330794+07:00 0HMT24VJ5I4T6:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:38:02.0345433+07:00 0HMT24VJ5I4T6:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:38:06.0067019+07:00 0HMT24VJ5I4T6:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:38:06.0067019+07:00 0HMT24VJ5I4T7:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:38:06.0072650+07:00 0HMT24VJ5I4T6:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:38:06.0072650+07:00 0HMT24VJ5I4T7:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:38:06.0088201+07:00 0HMT24VJ5I4T6:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:38:06.0088201+07:00 0HMT24VJ5I4T7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:38:06.0126631+07:00 0HMT24VJ5I4T7:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:38:06.0168795+07:00 0HMT24VJ5I4T6:00000005 [INF] Executed DbCommand ("7"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:38:06.0248485+07:00 0HMT24VJ5I4T6:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:38:06.0260766+07:00 0HMT24VJ5I4T6:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:38:06.0272472+07:00 0HMT24VJ5I4T6:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:38:06.0284073+07:00 0HMT24VJ5I4T6:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:38:06.0292616+07:00 0HMT24VJ5I4T6:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:38:06.1509942+07:00 0HMT24VJ5I4T9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:38:06.1517751+07:00 0HMT24VJ5I4T9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:38:06.1534048+07:00 0HMT24VJ5I4T9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:38:06.1901143+07:00 0HMT24VJ5I4T9:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:38:06.1906876+07:00 0HMT24VJ5I4T9:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:38:06.1920976+07:00 0HMT24VJ5I4T9:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:38:06.1942840+07:00 0HMT24VJ5I4T9:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T16:38:06.2188097+07:00 0HMT24VJ5I4T6:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:38:06.2194037+07:00 0HMT24VJ5I4T6:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:38:06.2210161+07:00 0HMT24VJ5I4T6:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:38:06.2228528+07:00 0HMT24VJ5I4T6:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:38:06.2229506+07:00 0HMT24VJ5I4T7:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:38:06.2239365+07:00 0HMT24VJ5I4T7:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:38:06.2248457+07:00 0HMT24VJ5I4T6:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T16:38:06.2259926+07:00 0HMT24VJ5I4T7:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:38:06.2260125+07:00 0HMT24VJ5I4T6:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T16:38:06.2292421+07:00 0HMT24VJ5I4T6:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:38:06.2356161+07:00 0HMT24VJ5I4T7:00000004 [INF] Executed DbCommand ("9"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T16:38:06.2442927+07:00 0HMT24VJ5I4T6:00000006 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T16:38:06.2469971+07:00 0HMT24VJ5I4T6:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T16:38:07.7515550+07:00 0HMT24VJ5I4T6:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:38:07.7521996+07:00 0HMT24VJ5I4T6:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:38:07.7536722+07:00 0HMT24VJ5I4T6:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:38:07.7572971+07:00 0HMT24VJ5I4T6:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T16:38:07.8889808+07:00 0HMT24VJ5I4T6:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:38:07.8895551+07:00 0HMT24VJ5I4T6:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:38:07.8911204+07:00 0HMT24VJ5I4T6:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:38:07.8943643+07:00 0HMT24VJ5I4T6:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:38:07.9730421+07:00 0HMT24VJ5I4T6:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:38:07.9736207+07:00 0HMT24VJ5I4T6:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:38:07.9755344+07:00 0HMT24VJ5I4T6:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:38:07.9779193+07:00 0HMT24VJ5I4T6:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:38:07.9970907+07:00 0HMT24VJ5I4T6:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:38:07.9977247+07:00 0HMT24VJ5I4T6:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:38:07.9992098+07:00 0HMT24VJ5I4T6:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:38:08.0027342+07:00 0HMT24VJ5I4T6:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:51:05.2983259+07:00 0HMT24VJ5I4TB:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:51:05.3015691+07:00 0HMT24VJ5I4TB:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:51:05.3116336+07:00 0HMT24VJ5I4TB:00000002 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:51:05.3158754+07:00 0HMT24VJ5I4TB:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T16:51:05.3182255+07:00 0HMT24VJ5I4TB:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-21T16:51:05.3853763+07:00 0HMT24VJ5I4TA:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:51:05.3861006+07:00 0HMT24VJ5I4TA:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:51:05.3877154+07:00 0HMT24VJ5I4TA:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:51:05.3903113+07:00 0HMT24VJ5I4TA:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:51:05.3929487+07:00 0HMT24VJ5I4TA:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T16:54:23.1109428+07:00 0HMT24VJ5I4TC:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:54:23.1118759+07:00 0HMT24VJ5I4TC:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:54:23.1218799+07:00 0HMT24VJ5I4TC:00000003 [INF] Executed DbCommand ("10"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:54:23.1265867+07:00 0HMT24VJ5I4TC:00000003 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T16:54:23.1722912+07:00 0HMT24VJ5I4TC:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:54:23.1729403+07:00 0HMT24VJ5I4TC:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:54:23.1745214+07:00 0HMT24VJ5I4TC:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:54:23.1812851+07:00 0HMT24VJ5I4TC:00000005 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:54:23.1892259+07:00 0HMT24VJ5I4TC:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:54:23.1897844+07:00 0HMT24VJ5I4TC:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:54:23.1913292+07:00 0HMT24VJ5I4TC:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:54:23.1936257+07:00 0HMT24VJ5I4TC:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:54:23.5107691+07:00 0HMT24VJ5I4TC:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:54:23.5113690+07:00 0HMT24VJ5I4TC:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:54:23.5127269+07:00 0HMT24VJ5I4TC:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:54:23.5144465+07:00 0HMT24VJ5I4TC:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T16:54:23.6702686+07:00 0HMT24VJ5I4TC:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:54:23.6707521+07:00 0HMT24VJ5I4TC:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:54:23.6728224+07:00 0HMT24VJ5I4TC:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:54:23.6747022+07:00 0HMT24VJ5I4TC:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:54:23.6828952+07:00 0HMT24VJ5I4TC:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:54:23.6834733+07:00 0HMT24VJ5I4TC:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:54:23.6855176+07:00 0HMT24VJ5I4TC:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:54:23.6886676+07:00 0HMT24VJ5I4TC:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:54:23.6912840+07:00 0HMT24VJ5I4TC:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T16:54:23.7073568+07:00 0HMT24VJ5I4TC:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:54:23.7078319+07:00 0HMT24VJ5I4TC:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:54:23.7090909+07:00 0HMT24VJ5I4TC:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:54:23.7107717+07:00 0HMT24VJ5I4TC:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:54:35.5854267+07:00 0HMT24VJ5I4TC:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:54:35.5859793+07:00 0HMT24VJ5I4TC:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:54:35.5874003+07:00 0HMT24VJ5I4TC:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:54:35.5900168+07:00 0HMT24VJ5I4TC:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T16:54:35.5921290+07:00 0HMT24VJ5I4TC:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-21T16:54:35.6450709+07:00 0HMT24VJ5I4TC:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:54:35.6455479+07:00 0HMT24VJ5I4TC:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:54:35.6468731+07:00 0HMT24VJ5I4TC:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:54:35.6488818+07:00 0HMT24VJ5I4TC:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:54:35.6510059+07:00 0HMT24VJ5I4TC:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T16:54:46.1166771+07:00 0HMT24VJ5I4TC:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:54:46.1171417+07:00 0HMT24VJ5I4TC:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:54:46.1185450+07:00 0HMT24VJ5I4TC:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:54:46.1204244+07:00 0HMT24VJ5I4TC:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T16:54:46.1221039+07:00 0HMT24VJ5I4TC:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-21T16:54:46.1683262+07:00 0HMT24VJ5I4TC:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:54:46.1688430+07:00 0HMT24VJ5I4TC:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:54:46.1702527+07:00 0HMT24VJ5I4TC:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:54:46.1720281+07:00 0HMT24VJ5I4TC:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:54:46.1743004+07:00 0HMT24VJ5I4TC:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T16:54:51.1465985+07:00 0HMT24VJ5I4TC:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:54:51.1470845+07:00 0HMT24VJ5I4TC:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:54:51.1487969+07:00 0HMT24VJ5I4TC:00000018 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:54:51.1517092+07:00 0HMT24VJ5I4TC:00000018 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T16:54:51.1524309+07:00 0HMT24VJ5I4TC:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-21T16:54:51.1987442+07:00 0HMT24VJ5I4TC:0000001A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:54:51.1992480+07:00 0HMT24VJ5I4TC:0000001A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:54:51.2005928+07:00 0HMT24VJ5I4TC:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:54:51.2034429+07:00 0HMT24VJ5I4TC:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:54:51.2058133+07:00 0HMT24VJ5I4TC:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T16:55:23.5268844+07:00 0HMT24VJ5I4TC:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:55:23.5273673+07:00 0HMT24VJ5I4TC:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:55:23.5358548+07:00 0HMT24VJ5I4TC:0000001C [INF] Executed DbCommand ("8"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:55:23.5388056+07:00 0HMT24VJ5I4TC:0000001C [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T16:55:23.5409828+07:00 0HMT24VJ5I4TC:0000001C [INF] Executed DbCommand ("1"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-21T16:55:23.5933569+07:00 0HMT24VJ5I4TC:0000001E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:55:23.5938425+07:00 0HMT24VJ5I4TC:0000001E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:55:23.5952005+07:00 0HMT24VJ5I4TC:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:55:23.5978007+07:00 0HMT24VJ5I4TC:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:55:23.6000127+07:00 0HMT24VJ5I4TC:0000001E [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T16:55:25.1135774+07:00 0HMT24VJ5I4TC:0000001F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:55:25.1140766+07:00 0HMT24VJ5I4TC:0000001F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:55:25.1153014+07:00 0HMT24VJ5I4TC:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:55:25.1171975+07:00 0HMT24VJ5I4TC:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T16:55:25.1184923+07:00 0HMT24VJ5I4TC:0000001F [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-21T16:55:25.1675065+07:00 0HMT24VJ5I4TC:00000020 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:55:25.1681125+07:00 0HMT24VJ5I4TC:00000020 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:55:25.1696529+07:00 0HMT24VJ5I4TC:00000020 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:55:25.1722485+07:00 0HMT24VJ5I4TC:00000020 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:55:25.1748922+07:00 0HMT24VJ5I4TC:00000020 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T16:57:28.8813046+07:00 0HMT24VJ5I4TE:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:57:28.8818122+07:00 0HMT24VJ5I4TE:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:57:28.8907769+07:00 0HMT24VJ5I4TE:00000002 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:57:28.8937875+07:00 0HMT24VJ5I4TE:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T16:57:28.8959112+07:00 0HMT24VJ5I4TE:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-21T16:57:28.9556883+07:00 0HMT24VJ5I4TD:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T16:57:28.9561646+07:00 0HMT24VJ5I4TD:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T16:57:28.9574917+07:00 0HMT24VJ5I4TD:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T16:57:28.9602299+07:00 0HMT24VJ5I4TD:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T16:57:28.9625392+07:00 0HMT24VJ5I4TD:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T20:39:39.2369491+07:00  [INF] Now listening on: "http://0.0.0.0:7012" (d826f4b8)
2023-08-21T20:39:39.2443754+07:00  [INF] Application started. Press Ctrl+C to shut down. (dcaefe54)
2023-08-21T20:39:39.2446463+07:00  [INF] Hosting environment: "Development" (c3307c92)
2023-08-21T20:39:39.2446700+07:00  [INF] Content root path: "E:\Software Development Project\ChatApp\ChatApp-BackEnd\ChatAppBackEnd\" (b5d60022)
2023-08-21T20:39:47.6809345+07:00 0HMT29GB16UMN:00000003 [WRN] Failed to determine the https port for redirect. (ca76cc21)
2023-08-21T20:39:48.6189152+07:00 0HMT29GB16UMN:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:39:49.1941329+07:00 0HMT29GB16UMN:00000003 [INF] Executed DbCommand ("25"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:39:49.2513512+07:00 0HMT29GB16UMN:00000003 [INF] Executed DbCommand ("43"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:39:49.7709211+07:00 0HMT29GB16UMN:00000003 [INF] Executed DbCommand ("58"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T20:39:50.9608797+07:00 0HMT29GB16UMN:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:39:50.9625884+07:00 0HMT29GB16UMN:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:39:50.9649491+07:00 0HMT29GB16UMN:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:39:50.9789686+07:00 0HMT29GB16UMP:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:39:51.0034336+07:00 0HMT29GB16UMP:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:39:51.0169037+07:00 0HMT29GB16UMP:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:39:51.1372020+07:00 0HMT29GB16UMO:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:39:51.1429407+07:00 0HMT29GB16UMO:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:39:51.1448777+07:00 0HMT29GB16UMO:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:39:51.1511145+07:00 0HMT29GB16UMO:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:39:51.1520751+07:00 0HMT29GB16UMO:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:39:51.1552316+07:00 0HMT29GB16UMO:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:39:51.1981270+07:00 0HMT29GB16UMO:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T20:39:51.2760804+07:00 0HMT29GB16UMQ:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:39:51.2760804+07:00 0HMT29GB16UMR:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:39:51.2767945+07:00 0HMT29GB16UMR:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:39:51.2788031+07:00 0HMT29GB16UMR:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:39:51.2801217+07:00 0HMT29GB16UMQ:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:39:51.2817933+07:00 0HMT29GB16UMQ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:39:51.2913571+07:00 0HMT29GB16UMR:00000003 [INF] Executed DbCommand ("9"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T20:39:51.2913575+07:00 0HMT29GB16UMP:00000002 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T20:39:51.2993719+07:00 0HMT29GB16UMQ:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T20:39:51.2993719+07:00 0HMT29GB16UMN:00000006 [INF] Executed DbCommand ("7"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T20:39:51.5947075+07:00 0HMT29GB16UMQ:00000003 [INF] Executed DbCommand ("22"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T20:39:51.5947077+07:00 0HMT29GB16UMN:00000006 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T20:39:51.6129463+07:00 0HMT29GB16UMQ:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T20:39:51.6129463+07:00 0HMT29GB16UMN:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
FROM [Messages] AS [m]
WHERE [m].[Id] = @__p_0" (0723d8ff)
2023-08-21T20:39:51.6399336+07:00 0HMT29GB16UMQ:00000003 [INF] Executed DbCommand ("7"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T20:39:51.6399337+07:00 0HMT29GB16UMN:00000006 [INF] Executed DbCommand ("7"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T20:39:51.6484477+07:00 0HMT29GB16UMQ:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T20:39:51.6484477+07:00 0HMT29GB16UMN:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T20:39:51.6539626+07:00 0HMT29GB16UMN:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T20:39:51.6539625+07:00 0HMT29GB16UMQ:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T20:39:51.6551220+07:00 0HMT29GB16UMQ:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T20:39:51.6554193+07:00 0HMT29GB16UMN:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T20:40:02.2416505+07:00 0HMT29GB16UMQ:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:40:02.2424754+07:00 0HMT29GB16UMQ:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:40:02.2544501+07:00 0HMT29GB16UMQ:00000005 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:40:02.2767598+07:00 0HMT29GB16UMQ:00000005 [INF] Executed DbCommand ("7"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T20:40:02.3492761+07:00 0HMT29GB16UMQ:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:40:02.3498427+07:00 0HMT29GB16UMQ:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:40:02.3512404+07:00 0HMT29GB16UMQ:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:40:02.3553752+07:00 0HMT29GB16UMQ:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T20:40:02.3896466+07:00 0HMT29GB16UMQ:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:40:02.3901543+07:00 0HMT29GB16UMQ:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:40:02.3915266+07:00 0HMT29GB16UMQ:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:40:02.3943680+07:00 0HMT29GB16UMQ:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T20:40:02.4691067+07:00 0HMT29GB16UMQ:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:40:02.4697664+07:00 0HMT29GB16UMQ:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:40:02.4718530+07:00 0HMT29GB16UMQ:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:40:02.4947924+07:00 0HMT29GB16UMQ:0000000B [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T20:40:02.6440228+07:00 0HMT29GB16UMQ:0000000B [INF] Executed DbCommand ("9"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T20:52:52.3596143+07:00 0HMT29GB16UMT:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:52:52.3663590+07:00 0HMT29GB16UMT:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:52:52.3938570+07:00 0HMT29GB16UMT:00000002 [INF] Executed DbCommand ("27"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:52:52.4706507+07:00 0HMT29GB16UMT:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 100), @p6='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserRelationships] ([Id], [CreatedTime], [InitiatorUserId], [RelationshipType], [Status], [TargetUserId], [UpdatedTime])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-21T20:52:52.4807511+07:00 0HMT29GB16UMT:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userRelationship_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE [u].[Id] = @__userRelationship_Id_0" (0723d8ff)
2023-08-21T20:52:53.1832888+07:00 0HMT29GB16UMT:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:52:53.1837531+07:00 0HMT29GB16UMT:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:52:53.1850098+07:00 0HMT29GB16UMT:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:52:53.1991702+07:00 0HMT29GB16UMT:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime]
FROM [UserRelationships] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T20:52:53.2115535+07:00 0HMT29GB16UMT:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [UserRelationships]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T20:52:53.8280442+07:00 0HMT29GB16UMT:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:52:53.8285179+07:00 0HMT29GB16UMT:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:52:53.8297661+07:00 0HMT29GB16UMT:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:52:53.8316688+07:00 0HMT29GB16UMT:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 100), @p6='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserRelationships] ([Id], [CreatedTime], [InitiatorUserId], [RelationshipType], [Status], [TargetUserId], [UpdatedTime])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-21T20:52:53.8338258+07:00 0HMT29GB16UMT:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userRelationship_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE [u].[Id] = @__userRelationship_Id_0" (0723d8ff)
2023-08-21T20:52:54.3022095+07:00 0HMT29GB16UMT:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:52:54.3027027+07:00 0HMT29GB16UMT:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:52:54.3040234+07:00 0HMT29GB16UMT:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:52:54.3051227+07:00 0HMT29GB16UMT:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime]
FROM [UserRelationships] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T20:52:54.3068070+07:00 0HMT29GB16UMT:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [UserRelationships]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T20:52:57.7040782+07:00 0HMT29GB16UMT:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:52:57.7049136+07:00 0HMT29GB16UMT:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:52:57.7070794+07:00 0HMT29GB16UMT:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:52:57.7131397+07:00 0HMT29GB16UMT:00000006 [INF] Executed DbCommand ("5"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T20:52:57.7642086+07:00 0HMT29GB16UMS:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:52:57.7651734+07:00 0HMT29GB16UMS:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:52:57.7670454+07:00 0HMT29GB16UMS:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:52:57.7707248+07:00 0HMT29GB16UMS:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T20:52:57.7800126+07:00 0HMT29GB16UMS:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:52:57.7808249+07:00 0HMT29GB16UMS:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:52:57.7831952+07:00 0HMT29GB16UMS:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:52:57.7867750+07:00 0HMT29GB16UMS:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T20:52:58.0332233+07:00 0HMT29GB16UMT:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:52:58.0339721+07:00 0HMT29GB16UMT:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:52:58.0354231+07:00 0HMT29GB16UMT:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:52:58.0379407+07:00 0HMT29GB16UMT:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T20:52:58.1363036+07:00 0HMT29GB16UMS:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:52:58.1374123+07:00 0HMT29GB16UMS:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:52:58.1395748+07:00 0HMT29GB16UMS:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:52:58.1433816+07:00 0HMT29GB16UMS:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T20:52:58.1516677+07:00 0HMT29GB16UMT:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:52:58.1599495+07:00 0HMT29GB16UMT:00000008 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:52:58.1642843+07:00 0HMT29GB16UMT:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:52:58.1644735+07:00 0HMT29GB16UMU:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:52:58.1688809+07:00 0HMT29GB16UMU:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:52:58.1730174+07:00 0HMT29GB16UMU:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:52:58.1800060+07:00 0HMT29GB16UMU:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T20:52:58.1898688+07:00 0HMT29GB16UMT:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T20:52:58.6464880+07:00 0HMT29GB16UMT:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:52:58.6471361+07:00 0HMT29GB16UMT:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:52:58.6495934+07:00 0HMT29GB16UMT:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:52:58.6516910+07:00 0HMT29GB16UMT:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T20:52:58.6924371+07:00 0HMT29GB16UMS:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:52:58.6934314+07:00 0HMT29GB16UMS:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:52:58.6952978+07:00 0HMT29GB16UMU:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T20:52:58.6963183+07:00 0HMT29GB16UMS:0000000D [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:52:58.6992343+07:00 0HMT29GB16UMS:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T20:52:58.7008971+07:00 0HMT29GB16UMU:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T20:52:58.7028429+07:00 0HMT29GB16UMU:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T20:52:58.7059814+07:00 0HMT29GB16UMU:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:02:35.5610888+07:00 0HMT29GB16UN0:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:02:35.5617566+07:00 0HMT29GB16UMV:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:02:35.5673558+07:00 0HMT29GB16UN0:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:02:35.5708694+07:00 0HMT29GB16UMV:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:02:35.5825709+07:00 0HMT29GB16UN0:00000003 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:02:35.5825707+07:00 0HMT29GB16UMV:00000003 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:02:35.5981776+07:00 0HMT29GB16UN0:00000003 [INF] Executed DbCommand ("13"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T21:02:35.5981776+07:00 0HMT29GB16UMV:00000003 [INF] Executed DbCommand ("13"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:02:35.6180553+07:00 0HMT29GB16UMV:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T21:02:35.6245301+07:00 0HMT29GB16UMV:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T21:02:35.6301587+07:00 0HMT29GB16UMV:00000003 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:02:35.6339587+07:00 0HMT29GB16UMV:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T21:02:35.6354375+07:00 0HMT29GB16UMV:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:02:35.8721120+07:00 0HMT29GB16UMO:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:02:35.8741790+07:00 0HMT29GB16UMO:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:02:35.8807144+07:00 0HMT29GB16UMO:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:02:36.0877609+07:00 0HMT29GB16UMV:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:02:36.0894434+07:00 0HMT29GB16UMV:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:02:36.0942079+07:00 0HMT29GB16UMV:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:02:36.0996914+07:00 0HMT29GB16UMV:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:02:36.1068782+07:00 0HMT29GB16UMV:00000004 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T21:02:36.1085102+07:00 0HMT29GB16UN0:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:02:36.1106405+07:00 0HMT29GB16UN0:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:02:36.1130814+07:00 0HMT29GB16UMV:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T21:02:36.1152637+07:00 0HMT29GB16UN0:00000004 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:02:36.1245084+07:00 0HMT29GB16UN0:00000004 [INF] Executed DbCommand ("8"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T21:02:36.1373247+07:00 0HMT29GB16UMV:00000004 [INF] Executed DbCommand ("23"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:02:36.1474506+07:00 0HMT29GB16UMV:00000004 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T21:02:36.1524629+07:00 0HMT29GB16UMV:00000004 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:02:46.5903039+07:00 0HMT29GB16UN1:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:02:46.5904126+07:00 0HMT29GB16UN0:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:02:46.5933776+07:00 0HMT29GB16UN1:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:02:46.5937234+07:00 0HMT29GB16UN0:00000007 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:02:46.5973667+07:00 0HMT29GB16UN1:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:02:46.5975024+07:00 0HMT29GB16UN0:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:02:46.6001908+07:00 0HMT29GB16UN0:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:02:46.6009971+07:00 0HMT29GB16UN1:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T21:02:46.6053034+07:00 0HMT29GB16UN0:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T21:02:46.6066497+07:00 0HMT29GB16UN0:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T21:02:46.6080900+07:00 0HMT29GB16UN0:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:02:46.6115214+07:00 0HMT29GB16UN0:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T21:02:46.6134599+07:00 0HMT29GB16UN0:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:02:46.7153442+07:00 0HMT29GB16UN2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:02:46.7166480+07:00 0HMT29GB16UN2:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:02:46.7195996+07:00 0HMT29GB16UN2:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:02:46.7397191+07:00 0HMT29GB16UN2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:02:46.7405769+07:00 0HMT29GB16UN2:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:02:46.7452310+07:00 0HMT29GB16UN2:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:02:46.7524664+07:00 0HMT29GB16UN2:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T21:02:46.8055165+07:00 0HMT29GB16UN0:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:02:46.8055165+07:00 0HMT29GB16UN1:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:02:46.8061528+07:00 0HMT29GB16UN0:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:02:46.8061530+07:00 0HMT29GB16UN1:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:02:46.8076132+07:00 0HMT29GB16UN0:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:02:46.8076132+07:00 0HMT29GB16UN1:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:02:46.8109885+07:00 0HMT29GB16UN1:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T21:02:46.8120379+07:00 0HMT29GB16UN0:00000008 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:02:46.8146770+07:00 0HMT29GB16UN0:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T21:02:46.8162750+07:00 0HMT29GB16UN0:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T21:02:46.8176690+07:00 0HMT29GB16UN0:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:02:46.8191933+07:00 0HMT29GB16UN0:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T21:02:46.8203330+07:00 0HMT29GB16UN0:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:03:17.2979149+07:00 0HMT29GB16UN0:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:03:17.2984703+07:00 0HMT29GB16UN0:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:03:17.3123679+07:00 0HMT29GB16UN0:0000000A [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:03:17.3182829+07:00 0HMT29GB16UN0:0000000A [INF] Executed DbCommand ("5"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T21:03:17.5766934+07:00 0HMT29GB16UN0:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:03:17.5781077+07:00 0HMT29GB16UN0:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:03:17.5925080+07:00 0HMT29GB16UN0:0000000C [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:03:17.5981938+07:00 0HMT29GB16UN0:0000000C [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:03:17.6194772+07:00 0HMT29GB16UN0:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:03:17.6203101+07:00 0HMT29GB16UN0:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:03:17.6237400+07:00 0HMT29GB16UN0:0000000E [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:03:17.6270206+07:00 0HMT29GB16UN0:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:03:17.6442235+07:00 0HMT29GB16UN0:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:03:17.6447118+07:00 0HMT29GB16UN0:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:03:17.6460579+07:00 0HMT29GB16UN0:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:03:17.6494520+07:00 0HMT29GB16UN0:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:05:04.6226238+07:00 0HMT29GB16UN0:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:05:04.6234518+07:00 0HMT29GB16UN0:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:05:04.6331624+07:00 0HMT29GB16UN0:00000011 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:05:04.6494018+07:00 0HMT29GB16UN0:00000011 [INF] Executed DbCommand ("5"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T21:05:04.6567296+07:00 0HMT29GB16UN0:00000011 [INF] Executed DbCommand ("2"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-21T21:05:04.7165931+07:00 0HMT29GB16UN0:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:05:04.7174064+07:00 0HMT29GB16UN0:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:05:04.7197645+07:00 0HMT29GB16UN0:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:05:04.7236291+07:00 0HMT29GB16UN0:00000013 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:05:04.7271275+07:00 0HMT29GB16UN0:00000013 [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T21:05:05.9516812+07:00 0HMT29GB16UN0:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:05:05.9523603+07:00 0HMT29GB16UN0:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:05:05.9543938+07:00 0HMT29GB16UN0:00000014 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:05:05.9568437+07:00 0HMT29GB16UN0:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T21:05:05.9584426+07:00 0HMT29GB16UN0:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-21T21:05:06.0321606+07:00 0HMT29GB16UN0:00000015 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:05:06.0329285+07:00 0HMT29GB16UN0:00000015 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:05:06.0345693+07:00 0HMT29GB16UN0:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:05:06.0380663+07:00 0HMT29GB16UN0:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:05:06.0411424+07:00 0HMT29GB16UN0:00000015 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T21:05:09.4979848+07:00 0HMT29GB16UN0:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:05:09.4985220+07:00 0HMT29GB16UN0:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:05:09.4998239+07:00 0HMT29GB16UN0:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:05:09.5021022+07:00 0HMT29GB16UN0:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T21:05:09.5033605+07:00 0HMT29GB16UN0:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-21T21:05:09.5555723+07:00 0HMT29GB16UN0:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:05:09.5563262+07:00 0HMT29GB16UN0:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:05:09.5577667+07:00 0HMT29GB16UN0:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:05:09.5601049+07:00 0HMT29GB16UN0:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:05:09.5632939+07:00 0HMT29GB16UN0:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T21:05:15.7116251+07:00 0HMT29GB16UN0:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:05:15.7122209+07:00 0HMT29GB16UN0:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:05:15.7137151+07:00 0HMT29GB16UN0:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:05:15.7156301+07:00 0HMT29GB16UN0:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 50), @p5='?' (Size = 4000), @p6='?' (DbType = Boolean), @p7='?' (Size = 4000), @p8='?' (Size = 100), @p9='?' (Size = 100), @p10='?' (Size = 50)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Messages] ([Id], [ChatRoomId], [CreatedTime], [FileName], [FileStatus], [FileUrls], [IsDeleted], [MessageText], [ReplyToMessageId], [SenderId], [Type])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);" (0723d8ff)
2023-08-21T21:05:15.7171163+07:00 0HMT29GB16UN0:00000019 [INF] Executed DbCommand ("0"ms) [Parameters=["@__message_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
WHERE [m].[Id] = @__message_Id_0" (0723d8ff)
2023-08-21T21:05:15.7877443+07:00 0HMT29GB16UN0:0000001B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:05:15.7882641+07:00 0HMT29GB16UN0:0000001B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:05:15.7897103+07:00 0HMT29GB16UN0:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:05:15.7923955+07:00 0HMT29GB16UN0:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:05:15.7942427+07:00 0HMT29GB16UN0:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T21:05:17.7648114+07:00 0HMT29GB16UN0:0000001D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:05:17.7653344+07:00 0HMT29GB16UN0:0000001D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:05:17.7667981+07:00 0HMT29GB16UN0:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:05:17.7700028+07:00 0HMT29GB16UN0:0000001D [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 100), @p6='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserRelationships] ([Id], [CreatedTime], [InitiatorUserId], [RelationshipType], [Status], [TargetUserId], [UpdatedTime])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-21T21:05:17.7736790+07:00 0HMT29GB16UN0:0000001D [INF] Executed DbCommand ("3"ms) [Parameters=["@__userRelationship_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE [u].[Id] = @__userRelationship_Id_0" (0723d8ff)
2023-08-21T21:05:18.5167479+07:00 0HMT29GB16UN0:0000001F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:05:18.5172510+07:00 0HMT29GB16UN0:0000001F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:05:18.5184926+07:00 0HMT29GB16UN0:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:05:18.5206555+07:00 0HMT29GB16UN0:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime]
FROM [UserRelationships] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:05:18.5231111+07:00 0HMT29GB16UN0:0000001F [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [UserRelationships]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T21:11:10.1990314+07:00 0HMT29GB16UN4:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:10.2028635+07:00 0HMT29GB16UN4:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:10.2146445+07:00 0HMT29GB16UN4:00000002 [INF] Executed DbCommand ("12"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:10.2178520+07:00 0HMT29GB16UN4:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 100), @p6='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserRelationships] ([Id], [CreatedTime], [InitiatorUserId], [RelationshipType], [Status], [TargetUserId], [UpdatedTime])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-21T21:11:10.2204818+07:00 0HMT29GB16UN4:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userRelationship_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE [u].[Id] = @__userRelationship_Id_0" (0723d8ff)
2023-08-21T21:11:10.7142868+07:00 0HMT29GB16UN4:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:10.7147730+07:00 0HMT29GB16UN4:00000003 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:10.7161854+07:00 0HMT29GB16UN4:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:10.7183419+07:00 0HMT29GB16UN4:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime]
FROM [UserRelationships] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:11:10.7216584+07:00 0HMT29GB16UN4:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [UserRelationships]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T21:11:13.0871578+07:00 0HMT29GB16UN4:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:13.0876903+07:00 0HMT29GB16UN4:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:13.0890077+07:00 0HMT29GB16UN4:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:13.0928421+07:00 0HMT29GB16UN4:00000004 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T21:11:13.1506104+07:00 0HMT29GB16UN3:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:13.1511831+07:00 0HMT29GB16UN3:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:13.1526180+07:00 0HMT29GB16UN3:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:13.1553553+07:00 0HMT29GB16UN3:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:11:13.1627151+07:00 0HMT29GB16UN3:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:13.1642924+07:00 0HMT29GB16UN3:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:13.1667592+07:00 0HMT29GB16UN3:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:13.1691651+07:00 0HMT29GB16UN3:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:11:13.7892597+07:00 0HMT29GB16UN4:00000005 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:13.7897413+07:00 0HMT29GB16UN4:00000005 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:13.7910157+07:00 0HMT29GB16UN4:00000005 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:13.7938442+07:00 0HMT29GB16UN4:00000005 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T21:11:13.8336419+07:00 0HMT29GB16UN3:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:13.8348795+07:00 0HMT29GB16UN3:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:13.8370853+07:00 0HMT29GB16UN3:0000000C [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:13.8389326+07:00 0HMT29GB16UN4:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:13.8398928+07:00 0HMT29GB16UN3:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:11:13.8466882+07:00 0HMT29GB16UN4:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:13.8481983+07:00 0HMT29GB16UN4:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:13.8502539+07:00 0HMT29GB16UN4:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:11:13.9216723+07:00 0HMT29GB16UN3:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:13.9223925+07:00 0HMT29GB16UN3:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:13.9237832+07:00 0HMT29GB16UN3:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:13.9269671+07:00 0HMT29GB16UN3:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:11:13.9296549+07:00 0HMT29GB16UN3:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [UserChatRooms] SET [LastMessageReadId] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T21:11:14.3171266+07:00 0HMT29GB16UN4:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:14.3176169+07:00 0HMT29GB16UN4:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:14.3198102+07:00 0HMT29GB16UN4:00000007 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:14.3221398+07:00 0HMT29GB16UN4:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T21:11:14.4095988+07:00 0HMT29GB16UN3:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:14.4101041+07:00 0HMT29GB16UN3:0000000F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:14.4101661+07:00 0HMT29GB16UN4:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:14.4104787+07:00 0HMT29GB16UN4:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:14.4116065+07:00 0HMT29GB16UN3:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:14.4116154+07:00 0HMT29GB16UN4:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:14.4141690+07:00 0HMT29GB16UN4:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:11:14.4141806+07:00 0HMT29GB16UN3:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:11:43.1434146+07:00 0HMT29GB16UN4:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:43.1441114+07:00 0HMT29GB16UN4:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:43.1458301+07:00 0HMT29GB16UN4:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:43.1483963+07:00 0HMT29GB16UN4:00000009 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T21:11:43.2467850+07:00 0HMT29GB16UN3:00000012 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:43.2472820+07:00 0HMT29GB16UN3:00000012 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:43.2486211+07:00 0HMT29GB16UN3:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:43.2515417+07:00 0HMT29GB16UN3:00000012 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:11:43.2599732+07:00 0HMT29GB16UN4:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:43.2608638+07:00 0HMT29GB16UN4:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:43.2633287+07:00 0HMT29GB16UN4:0000000A [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:43.2666153+07:00 0HMT29GB16UN4:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:11:43.2796027+07:00 0HMT29GB16UN3:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:43.2802484+07:00 0HMT29GB16UN3:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:43.2832125+07:00 0HMT29GB16UN3:00000014 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:43.2867581+07:00 0HMT29GB16UN3:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:11:45.2723404+07:00 0HMT29GB16UN4:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:45.2728547+07:00 0HMT29GB16UN4:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:45.2742707+07:00 0HMT29GB16UN4:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:45.2763542+07:00 0HMT29GB16UN4:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 100), @p6='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserRelationships] ([Id], [CreatedTime], [InitiatorUserId], [RelationshipType], [Status], [TargetUserId], [UpdatedTime])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-21T21:11:45.2780001+07:00 0HMT29GB16UN4:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=["@__userRelationship_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE [u].[Id] = @__userRelationship_Id_0" (0723d8ff)
2023-08-21T21:11:45.7264694+07:00 0HMT29GB16UN4:0000000C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:45.7270259+07:00 0HMT29GB16UN4:0000000C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:45.7283292+07:00 0HMT29GB16UN4:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:45.7300616+07:00 0HMT29GB16UN4:0000000C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T21:11:45.8351182+07:00 0HMT29GB16UN3:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:45.8352497+07:00 0HMT29GB16UN4:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:45.8356930+07:00 0HMT29GB16UN4:0000000E [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:45.8356982+07:00 0HMT29GB16UN3:00000018 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:45.8371076+07:00 0HMT29GB16UN3:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:45.8372166+07:00 0HMT29GB16UN4:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:45.8393900+07:00 0HMT29GB16UN4:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:11:45.8408830+07:00 0HMT29GB16UN3:00000018 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:11:46.0893330+07:00 0HMT29GB16UN4:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:46.0909676+07:00 0HMT29GB16UN4:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:46.0929007+07:00 0HMT29GB16UN4:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:46.0945470+07:00 0HMT29GB16UN4:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T21:11:46.1451748+07:00 0HMT29GB16UN3:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:46.1451746+07:00 0HMT29GB16UN4:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:46.1460093+07:00 0HMT29GB16UN4:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:46.1460093+07:00 0HMT29GB16UN3:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:46.1475282+07:00 0HMT29GB16UN3:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:46.1475282+07:00 0HMT29GB16UN4:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:46.1494487+07:00 0HMT29GB16UN4:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:11:46.1511981+07:00 0HMT29GB16UN3:00000019 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:11:46.2320102+07:00 0HMT29GB16UN3:0000001A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:46.2326692+07:00 0HMT29GB16UN3:0000001A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:46.2343224+07:00 0HMT29GB16UN3:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:46.2363749+07:00 0HMT29GB16UN3:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:11:46.4819832+07:00 0HMT29GB16UN4:00000011 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:11:46.4827034+07:00 0HMT29GB16UN4:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:11:46.4841297+07:00 0HMT29GB16UN4:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:11:46.4853036+07:00 0HMT29GB16UN4:00000011 [INF] Executed DbCommand ("0"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime]
FROM [UserRelationships] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:11:46.4863078+07:00 0HMT29GB16UN4:00000011 [INF] Executed DbCommand ("1"ms) [Parameters=["@p0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
DELETE FROM [UserRelationships]
WHERE [Id] = @p0;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T21:12:34.5887434+07:00 0HMT29GB16UN3:0000001D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:12:34.5890927+07:00 0HMT29GB16UN4:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:12:34.5895313+07:00 0HMT29GB16UN4:00000013 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:12:34.5895315+07:00 0HMT29GB16UN3:0000001D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:12:34.6039397+07:00 0HMT29GB16UN4:00000013 [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:12:34.6039397+07:00 0HMT29GB16UN3:0000001D [INF] Executed DbCommand ("14"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:12:34.6091835+07:00 0HMT29GB16UN3:0000001D [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:12:34.6091835+07:00 0HMT29GB16UN4:00000013 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:12:53.9502483+07:00 0HMT29GB16UN4:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:12:53.9502484+07:00 0HMT29GB16UN3:0000001F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:12:53.9510012+07:00 0HMT29GB16UN3:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:12:53.9510013+07:00 0HMT29GB16UN4:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:12:53.9532490+07:00 0HMT29GB16UN3:0000001F [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:12:53.9532490+07:00 0HMT29GB16UN4:00000014 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:12:53.9579323+07:00 0HMT29GB16UN4:00000014 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:12:53.9579254+07:00 0HMT29GB16UN3:0000001F [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:13:25.4961106+07:00 0HMT29GB16UN3:00000021 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:13:25.4961102+07:00 0HMT29GB16UN4:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:13:25.4967619+07:00 0HMT29GB16UN3:00000021 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:13:25.4968564+07:00 0HMT29GB16UN4:00000016 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:13:25.5075986+07:00 0HMT29GB16UN4:00000016 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:13:25.5079248+07:00 0HMT29GB16UN3:00000021 [INF] Executed DbCommand ("11"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:13:25.5293037+07:00 0HMT29GB16UN4:00000016 [INF] Executed DbCommand ("20"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:13:25.5293037+07:00 0HMT29GB16UN3:00000021 [INF] Executed DbCommand ("20"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:13:34.3204790+07:00 0HMT29GB16UN3:00000023 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:13:34.3212442+07:00 0HMT29GB16UN3:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:13:34.3241529+07:00 0HMT29GB16UN3:00000023 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:13:34.3271078+07:00 0HMT29GB16UN3:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:13:34.3297702+07:00 0HMT29GB16UN4:00000018 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:13:34.3309631+07:00 0HMT29GB16UN4:00000018 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:13:34.3340376+07:00 0HMT29GB16UN4:00000018 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:13:34.3383222+07:00 0HMT29GB16UN4:00000018 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:14:24.8619302+07:00 0HMT29GB16UN3:00000025 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:14:24.8715036+07:00 0HMT29GB16UN3:00000025 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:14:24.8939148+07:00 0HMT29GB16UN4:0000001A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:14:24.8942889+07:00 0HMT29GB16UN3:00000025 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:14:24.8956012+07:00 0HMT29GB16UN4:0000001A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:14:24.9003512+07:00 0HMT29GB16UN4:0000001A [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:14:24.9018799+07:00 0HMT29GB16UN5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:14:24.9050197+07:00 0HMT29GB16UN3:00000025 [INF] Executed DbCommand ("9"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:14:24.9154389+07:00 0HMT29GB16UN4:0000001A [INF] Executed DbCommand ("12"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T21:14:24.9409920+07:00 0HMT29GB16UN3:00000025 [INF] Executed DbCommand ("24"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T21:14:24.9463050+07:00 0HMT29GB16UN5:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:14:24.9480888+07:00 0HMT29GB16UN5:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:14:24.9486626+07:00 0HMT29GB16UN3:00000025 [INF] Executed DbCommand ("2"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T21:14:24.9487243+07:00 0HMT29GB16UN5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:14:24.9491137+07:00 0HMT29GB16UN5:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:14:24.9518265+07:00 0HMT29GB16UN5:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:14:24.9579085+07:00 0HMT29GB16UN3:00000025 [INF] Executed DbCommand ("9"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:14:24.9579084+07:00 0HMT29GB16UN5:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T21:14:24.9622415+07:00 0HMT29GB16UN3:00000025 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T21:14:24.9663594+07:00 0HMT29GB16UN3:00000025 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:14:25.0286902+07:00 0HMT29GB16UN3:00000026 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:14:25.0301450+07:00 0HMT29GB16UN3:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:14:25.0311978+07:00 0HMT29GB16UN4:0000001B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:14:25.0321864+07:00 0HMT29GB16UN4:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:14:25.0341868+07:00 0HMT29GB16UN3:00000026 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:14:25.0353169+07:00 0HMT29GB16UN4:0000001B [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:14:25.0392917+07:00 0HMT29GB16UN3:00000026 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:14:25.0421610+07:00 0HMT29GB16UN4:0000001B [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T21:14:25.0473864+07:00 0HMT29GB16UN3:00000026 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T21:14:25.0497658+07:00 0HMT29GB16UN3:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T21:14:25.0553362+07:00 0HMT29GB16UN3:00000026 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:14:25.0580383+07:00 0HMT29GB16UN3:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T21:14:25.0594428+07:00 0HMT29GB16UN3:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:14:25.8489106+07:00 0HMT29GB16UN4:0000001C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:14:25.8497739+07:00 0HMT29GB16UN4:0000001C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:14:25.8528674+07:00 0HMT29GB16UN4:0000001C [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:14:25.8600750+07:00 0HMT29GB16UN4:0000001C [INF] Executed DbCommand ("6"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T21:14:25.9981127+07:00 0HMT29GB16UN3:00000029 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:14:25.9987435+07:00 0HMT29GB16UN3:00000029 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:14:26.0002047+07:00 0HMT29GB16UN3:00000029 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:14:26.0012543+07:00 0HMT29GB16UN4:0000001D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:14:26.0027163+07:00 0HMT29GB16UN4:0000001D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:14:26.0038315+07:00 0HMT29GB16UN3:00000029 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:14:26.0061443+07:00 0HMT29GB16UN4:0000001D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:14:26.0102457+07:00 0HMT29GB16UN4:0000001D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:14:26.0149733+07:00 0HMT29GB16UN3:0000002B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:14:26.0157186+07:00 0HMT29GB16UN3:0000002B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:14:26.0181130+07:00 0HMT29GB16UN3:0000002B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:14:26.0235696+07:00 0HMT29GB16UN3:0000002B [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:15:01.2231213+07:00 0HMT29GB16UN3:0000002D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:01.2242946+07:00 0HMT29GB16UN3:0000002D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:01.2253289+07:00 0HMT29GB16UN4:0000001E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:01.2266503+07:00 0HMT29GB16UN4:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:01.2290120+07:00 0HMT29GB16UN3:0000002D [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:01.2294061+07:00 0HMT29GB16UN4:0000001E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:01.2328847+07:00 0HMT29GB16UN4:0000001E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:15:01.2357427+07:00 0HMT29GB16UN3:0000002D [INF] Executed DbCommand ("5"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:15:12.5186936+07:00 0HMT29GB16UN6:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:12.5186936+07:00 0HMT29GB16UN8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:12.5186938+07:00 0HMT29GB16UN7:00000003 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:12.5224428+07:00 0HMT29GB16UN8:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:12.5224824+07:00 0HMT29GB16UN7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:12.5224824+07:00 0HMT29GB16UN6:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:12.5242690+07:00 0HMT29GB16UN8:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:12.5242676+07:00 0HMT29GB16UN6:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:12.5242675+07:00 0HMT29GB16UN7:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:12.5256504+07:00 0HMT29GB16UN8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:12.5261247+07:00 0HMT29GB16UN8:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:12.5267753+07:00 0HMT29GB16UN7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:15:12.5286636+07:00 0HMT29GB16UN6:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T21:15:12.5286635+07:00 0HMT29GB16UN8:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:12.5326321+07:00 0HMT29GB16UN7:00000003 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T21:15:12.5359039+07:00 0HMT29GB16UN8:00000002 [INF] Executed DbCommand ("6"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T21:15:12.5427193+07:00 0HMT29GB16UN7:00000003 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T21:15:12.5452111+07:00 0HMT29GB16UN7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:15:12.5465918+07:00 0HMT29GB16UN7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T21:15:12.5475990+07:00 0HMT29GB16UN7:00000003 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:15:12.5748407+07:00 0HMT29GB16UN6:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:12.5749426+07:00 0HMT29GB16UN7:00000004 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:12.5753866+07:00 0HMT29GB16UN7:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:12.5753878+07:00 0HMT29GB16UN6:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:12.5767397+07:00 0HMT29GB16UN7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:12.5767363+07:00 0HMT29GB16UN6:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:12.5781032+07:00 0HMT29GB16UN7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:15:12.5781032+07:00 0HMT29GB16UN6:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T21:15:12.5832760+07:00 0HMT29GB16UN7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T21:15:12.5844486+07:00 0HMT29GB16UN7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T21:15:12.5853346+07:00 0HMT29GB16UN7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:15:12.5862739+07:00 0HMT29GB16UN7:00000004 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T21:15:12.5870611+07:00 0HMT29GB16UN7:00000004 [INF] Executed DbCommand ("0"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:15:19.7935240+07:00 0HMT29GB16UN4:0000001F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:19.7941502+07:00 0HMT29GB16UN4:0000001F [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:19.7963472+07:00 0HMT29GB16UN4:0000001F [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:19.7989783+07:00 0HMT29GB16UN4:0000001F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T21:15:19.9310590+07:00 0HMT29GB16UN3:00000031 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:19.9321767+07:00 0HMT29GB16UN3:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:19.9340769+07:00 0HMT29GB16UN3:00000031 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:19.9368959+07:00 0HMT29GB16UN3:00000031 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:15:19.9527024+07:00 0HMT29GB16UN3:00000032 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:19.9531827+07:00 0HMT29GB16UN3:00000032 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:19.9544639+07:00 0HMT29GB16UN3:00000032 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:19.9561515+07:00 0HMT29GB16UN3:00000032 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:15:26.4231240+07:00 0HMT29GB16UN7:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:26.4236425+07:00 0HMT29GB16UN7:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:26.4328156+07:00 0HMT29GB16UN7:00000006 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:26.4358546+07:00 0HMT29GB16UN7:00000006 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:15:41.5368160+07:00 0HMT29GB16UN7:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:41.5373078+07:00 0HMT29GB16UN7:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:41.5389067+07:00 0HMT29GB16UN7:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:41.5449143+07:00 0HMT29GB16UN7:00000008 [INF] Executed DbCommand ("0"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:15:41.5503110+07:00 0HMT29GB16UN7:00000008 [INF] Executed DbCommand ("2"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Size = 4000), @p6='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [Users] ([Id], [Bio], [DateOfBirth], [DisplayName], [Email], [Gender], [PhotoUrl])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-21T21:15:41.6088836+07:00 0HMT29GB16UN7:0000000A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:41.6096269+07:00 0HMT29GB16UN7:0000000A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:41.6113237+07:00 0HMT29GB16UN7:0000000A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:41.6116342+07:00 0HMT29GB16UN6:00000006 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:41.6122826+07:00 0HMT29GB16UN6:00000006 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:41.6140779+07:00 0HMT29GB16UN6:00000006 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:41.6145710+07:00 0HMT29GB16UN7:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:15:41.6171073+07:00 0HMT29GB16UN6:00000006 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T21:15:41.6200306+07:00 0HMT29GB16UN7:0000000A [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE 0 = 1
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE 0 = 1
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T21:15:41.9196228+07:00 0HMT29GB16UNA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:41.9225486+07:00 0HMT29GB16UNA:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:41.9243189+07:00 0HMT29GB16UNA:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:41.9256256+07:00 0HMT29GB16UNA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:41.9263537+07:00 0HMT29GB16UNA:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:41.9278022+07:00 0HMT29GB16UNA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:41.9310271+07:00 0HMT29GB16UNA:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T21:15:41.9460213+07:00 0HMT29GB16UN7:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:41.9460212+07:00 0HMT29GB16UN6:00000007 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:41.9464773+07:00 0HMT29GB16UN7:0000000B [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:41.9464774+07:00 0HMT29GB16UN6:00000007 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:41.9480288+07:00 0HMT29GB16UN7:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:41.9480495+07:00 0HMT29GB16UN6:00000007 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:41.9526260+07:00 0HMT29GB16UN6:00000007 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T21:15:41.9589671+07:00 0HMT29GB16UN7:0000000B [INF] Executed DbCommand ("9"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:15:41.9698300+07:00 0HMT29GB16UN7:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE 0 = 1
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE 0 = 1
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T21:15:43.4645801+07:00 0HMT29GB16UN4:00000020 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:43.4654526+07:00 0HMT29GB16UN4:00000020 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:43.4680538+07:00 0HMT29GB16UN4:00000020 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:43.4726759+07:00 0HMT29GB16UN4:00000020 [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T21:15:43.5556820+07:00 0HMT29GB16UN3:00000036 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:43.5563018+07:00 0HMT29GB16UN3:00000036 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:43.5585926+07:00 0HMT29GB16UN3:00000036 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:43.5610471+07:00 0HMT29GB16UN3:00000036 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:15:43.5673803+07:00 0HMT29GB16UN3:00000037 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:43.5680103+07:00 0HMT29GB16UN3:00000037 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:43.5696510+07:00 0HMT29GB16UN3:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:43.5715394+07:00 0HMT29GB16UN3:00000037 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:15:43.6656903+07:00 0HMT29GB16UN4:00000021 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:43.6662291+07:00 0HMT29GB16UN4:00000021 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:43.6679859+07:00 0HMT29GB16UN4:00000021 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:43.6724728+07:00 0HMT29GB16UN4:00000021 [INF] Executed DbCommand ("3"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:15:46.9363254+07:00 0HMT29GB16UN3:0000003A [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:46.9368003+07:00 0HMT29GB16UN3:0000003A [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:46.9380828+07:00 0HMT29GB16UN3:0000003A [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:46.9545535+07:00 0HMT29GB16UN3:0000003A [INF] Executed DbCommand ("8"ms) [Parameters=["@__ToLower_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE ((@__ToLower_0 LIKE N'') OR (CHARINDEX(@__ToLower_0, LOWER([u].[Email])) > 0)) OR ((LOWER([u].[Email]) LIKE N'') OR (CHARINDEX(LOWER([u].[Email]), @__ToLower_0) > 0))" (0723d8ff)
2023-08-21T21:15:47.9021806+07:00 0HMT29GB16UN4:00000022 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:47.9030326+07:00 0HMT29GB16UN4:00000022 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:47.9054022+07:00 0HMT29GB16UN4:00000022 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:47.9054901+07:00 0HMT29GB16UN3:0000003C [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:47.9059117+07:00 0HMT29GB16UN3:0000003C [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:47.9072825+07:00 0HMT29GB16UN4:00000022 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:15:47.9073801+07:00 0HMT29GB16UN3:0000003C [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:47.9099000+07:00 0HMT29GB16UN3:0000003C [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:15:47.9539509+07:00 0HMT29GB16UN3:0000003D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:47.9547592+07:00 0HMT29GB16UN3:0000003D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:47.9564114+07:00 0HMT29GB16UN3:0000003D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:47.9589885+07:00 0HMT29GB16UN3:0000003D [INF] Executed DbCommand ("1"ms) [Parameters=["@__ToLower_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE ((@__ToLower_0 LIKE N'') OR (CHARINDEX(@__ToLower_0, LOWER([u].[Email])) > 0)) OR ((LOWER([u].[Email]) LIKE N'') OR (CHARINDEX(LOWER([u].[Email]), @__ToLower_0) > 0))" (0723d8ff)
2023-08-21T21:15:48.4463418+07:00 0HMT29GB16UN4:00000023 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:48.4471418+07:00 0HMT29GB16UN4:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:48.4486650+07:00 0HMT29GB16UN4:00000023 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:48.4624381+07:00 0HMT29GB16UN4:00000023 [INF] Executed DbCommand ("4"ms) [Parameters=["@__user1Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__user1Id_0) AND ([c].[ChatRoomType] = N'ONE')" (0723d8ff)
2023-08-21T21:15:48.4683274+07:00 0HMT29GB16UN4:00000023 [INF] Executed DbCommand ("2"ms) [Parameters=["@__user2Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[UserId] = @__user2Id_0) AND [u].[ChatRoomId] IN (N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')" (0723d8ff)
2023-08-21T21:15:48.4757444+07:00 0HMT29GB16UN4:00000023 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (DbType = Boolean), @p5='?' (Size = 4000), @p6='?' (Size = 4000), @p7='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [ChatRooms] ([Id], [ChatRoomType], [CreatedTime], [CreatorId], [IsDeleted], [Name], [PhotoUrl], [UpdatedTime])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);" (0723d8ff)
2023-08-21T21:15:48.4873771+07:00 0HMT29GB16UN4:00000023 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (Size = 50), @p6='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserChatRooms] ([Id], [ChatRoomId], [CreatedTime], [IsMuted], [LastMessageReadId], [MembershipStatus], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-21T21:15:48.4879622+07:00 0HMT29GB16UN4:00000023 [INF] Executed DbCommand ("0"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (DbType = Boolean), @p4='?' (Size = 100), @p5='?' (Size = 50), @p6='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserChatRooms] ([Id], [ChatRoomId], [CreatedTime], [IsMuted], [LastMessageReadId], [MembershipStatus], [UserId])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-21T21:15:48.4936102+07:00 0HMT29GB16UN4:00000023 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] IN (N'lbFAUpmyDQVVSxHTHtCYlsydvPg2', N'HK2eFEmCZwc89CrVngwa88VRqcj2')" (0723d8ff)
2023-08-21T21:15:48.5107748+07:00 0HMT29GB16UN4:00000023 [INF] Executed DbCommand ("2"ms) [Parameters=["@__8__locals1_chatRoomSummary_ChatRoom_Id_0='?' (Size = 100), @__user_Id_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__8__locals1_chatRoomSummary_ChatRoom_Id_0) AND ([u].[UserId] = @__user_Id_1)" (0723d8ff)
2023-08-21T21:15:48.5145017+07:00 0HMT29GB16UN4:00000023 [INF] Executed DbCommand ("0"ms) [Parameters=["@__8__locals1_chatRoomSummary_ChatRoom_Id_0='?' (Size = 100), @__user_Id_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__8__locals1_chatRoomSummary_ChatRoom_Id_0) AND ([u].[UserId] = @__user_Id_1)" (0723d8ff)
2023-08-21T21:15:48.5255111+07:00 0HMT29GB16UN4:00000023 [INF] Executed DbCommand ("7"ms) [Parameters=["@__chatRoom_Id_0='?' (Size = 100), @__chatRoom_CreatorId_1='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId]
FROM [UserChatRooms] AS [u]
WHERE ([u].[ChatRoomId] = @__chatRoom_Id_0) AND ([u].[UserId] = @__chatRoom_CreatorId_1)" (0723d8ff)
2023-08-21T21:15:48.5594014+07:00 0HMT29GB16UN3:00000041 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:48.5600904+07:00 0HMT29GB16UN3:00000041 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:48.5617851+07:00 0HMT29GB16UN3:00000041 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:48.5637477+07:00 0HMT29GB16UN3:00000041 [INF] Executed DbCommand ("1"ms) [Parameters=["@__ToLower_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE ((@__ToLower_0 LIKE N'') OR (CHARINDEX(@__ToLower_0, LOWER([u].[Email])) > 0)) OR ((LOWER([u].[Email]) LIKE N'') OR (CHARINDEX(LOWER([u].[Email]), @__ToLower_0) > 0))" (0723d8ff)
2023-08-21T21:15:48.5682672+07:00 0HMT29GB16UN3:00000042 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:48.5688204+07:00 0HMT29GB16UN3:00000042 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:48.5704107+07:00 0HMT29GB16UN3:00000042 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:48.5727629+07:00 0HMT29GB16UN3:00000042 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T21:15:48.5769457+07:00 0HMT29GB16UN3:00000043 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:48.5774459+07:00 0HMT29GB16UN3:00000043 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:48.5787794+07:00 0HMT29GB16UN3:00000043 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:48.5821887+07:00 0HMT29GB16UN3:00000043 [INF] Executed DbCommand ("3"ms) [Parameters=["@p0='?' (Size = 100), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 50), @p4='?' (Size = 50), @p5='?' (Size = 100), @p6='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
INSERT INTO [UserRelationships] ([Id], [CreatedTime], [InitiatorUserId], [RelationshipType], [Status], [TargetUserId], [UpdatedTime])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);" (0723d8ff)
2023-08-21T21:15:48.5869518+07:00 0HMT29GB16UN3:00000043 [INF] Executed DbCommand ("4"ms) [Parameters=["@__userRelationship_Id_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE [u].[Id] = @__userRelationship_Id_0" (0723d8ff)
2023-08-21T21:15:48.6403470+07:00 0HMT29GB16UN3:00000044 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:48.6408167+07:00 0HMT29GB16UN3:00000044 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:48.6421378+07:00 0HMT29GB16UN3:00000044 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:48.6440317+07:00 0HMT29GB16UN3:00000044 [INF] Executed DbCommand ("1"ms) [Parameters=["@__ToLower_0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE ((@__ToLower_0 LIKE N'') OR (CHARINDEX(@__ToLower_0, LOWER([u].[Email])) > 0)) OR ((LOWER([u].[Email]) LIKE N'') OR (CHARINDEX(LOWER([u].[Email]), @__ToLower_0) > 0))" (0723d8ff)
2023-08-21T21:15:51.4005959+07:00 0HMT29GB16UN7:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:51.4012382+07:00 0HMT29GB16UN7:0000000D [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:51.4028704+07:00 0HMT29GB16UN7:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:51.4056067+07:00 0HMT29GB16UN7:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T21:15:51.4832841+07:00 0HMT29GB16UN7:0000000F [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:51.4840978+07:00 0HMT29GB16UN7:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:51.4861402+07:00 0HMT29GB16UN7:0000000F [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:51.4893093+07:00 0HMT29GB16UN7:0000000F [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:15:51.4929513+07:00 0HMT29GB16UN7:00000010 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:51.4939191+07:00 0HMT29GB16UN7:00000010 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:51.4959187+07:00 0HMT29GB16UN7:00000010 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:51.4979865+07:00 0HMT29GB16UN7:00000010 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:15:56.7278467+07:00 0HMT29GB16UN4:00000024 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:15:56.7284913+07:00 0HMT29GB16UN4:00000024 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:15:56.7308341+07:00 0HMT29GB16UN4:00000024 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:15:56.7400680+07:00 0HMT29GB16UN4:00000024 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:15:56.7534010+07:00 0HMT29GB16UN4:00000024 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Users] SET [Gender] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T21:16:15.0023470+07:00 0HMT29GB16UN2:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:16:15.0049406+07:00 0HMT29GB16UN5:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:16:15.0097537+07:00 0HMT29GB16UN2:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:16:15.0100006+07:00 0HMT29GB16UN5:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:16:15.0129060+07:00 0HMT29GB16UN5:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:16:15.0129060+07:00 0HMT29GB16UN2:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:16:16.8280299+07:00 0HMT29GB16UN3:00000047 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:16:16.8286665+07:00 0HMT29GB16UN3:00000047 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:16:16.8301549+07:00 0HMT29GB16UN3:00000047 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:16:16.8327457+07:00 0HMT29GB16UN3:00000047 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:16:16.8382655+07:00 0HMT29GB16UN4:00000026 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:16:16.8384948+07:00 0HMT29GB16UN3:00000047 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T21:16:16.8387131+07:00 0HMT29GB16UN4:00000026 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:16:16.8406784+07:00 0HMT29GB16UN4:00000026 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:16:16.8409411+07:00 0HMT29GB16UN3:00000047 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T21:16:16.8437355+07:00 0HMT29GB16UN4:00000026 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T21:16:16.8460122+07:00 0HMT29GB16UN3:00000047 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:16:16.8499051+07:00 0HMT29GB16UN3:00000047 [INF] Executed DbCommand ("3"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T21:16:16.8511739+07:00 0HMT29GB16UN3:00000047 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:16:16.8522953+07:00 0HMT29GB16UN3:00000047 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T21:16:16.8536094+07:00 0HMT29GB16UN3:00000047 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:16:16.8830954+07:00 0HMT29GB16UNC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:16:16.8838525+07:00 0HMT29GB16UNC:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:16:16.8867011+07:00 0HMT29GB16UNC:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:16:16.9091013+07:00 0HMT29GB16UNC:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:16:16.9096386+07:00 0HMT29GB16UNC:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:16:16.9123231+07:00 0HMT29GB16UNC:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:16:16.9145046+07:00 0HMT29GB16UNC:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T21:16:16.9482687+07:00 0HMT29GB16UN3:00000048 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:16:16.9488925+07:00 0HMT29GB16UN3:00000048 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:16:16.9503129+07:00 0HMT29GB16UN4:00000027 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:16:16.9506526+07:00 0HMT29GB16UN3:00000048 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:16:16.9508693+07:00 0HMT29GB16UN4:00000027 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:16:16.9545477+07:00 0HMT29GB16UN4:00000027 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:16:16.9546297+07:00 0HMT29GB16UN3:00000048 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:16:16.9579992+07:00 0HMT29GB16UN4:00000027 [INF] Executed DbCommand ("2"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T21:16:16.9590486+07:00 0HMT29GB16UN3:00000048 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] IN (N'a59fce07-a355-4018-8fb1-505e795057b7', N'6161ea45-3fc0-4a0c-ac4d-c00a838167f7', N'630cd79e-9b26-4515-8e88-1dacc29d2836')
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T21:16:16.9605633+07:00 0HMT29GB16UN3:00000048 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T21:16:16.9617425+07:00 0HMT29GB16UN3:00000048 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:16:16.9631615+07:00 0HMT29GB16UN3:00000048 [INF] Executed DbCommand ("1"ms) [Parameters=["@__lastMessageRead_ChatRoomId_0='?' (Size = 100), @__lastMessageRead_CreatedTime_1='?' (DbType = DateTime2), @__lastMessageRead_Id_2='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE (([m].[ChatRoomId] = @__lastMessageRead_ChatRoomId_0) AND ([m].[CreatedTime] >= @__lastMessageRead_CreatedTime_1)) AND ([m].[Id] <> @__lastMessageRead_Id_2)" (0723d8ff)
2023-08-21T21:16:16.9642163+07:00 0HMT29GB16UN3:00000048 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:16:16.9660719+07:00 0HMT29GB16UN3:00000048 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T21:16:16.9677435+07:00 0HMT29GB16UN3:00000048 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:16:57.2558647+07:00 0HMT29GB16UN4:00000028 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:16:57.2571358+07:00 0HMT29GB16UN4:00000028 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:16:57.2730204+07:00 0HMT29GB16UN4:00000028 [INF] Executed DbCommand ("16"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:16:57.2788843+07:00 0HMT29GB16UN4:00000028 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:16:57.2847062+07:00 0HMT29GB16UN4:00000028 [INF] Executed DbCommand ("3"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Users] SET [DateOfBirth] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T21:17:02.4196923+07:00 0HMT29GB16UN8:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:17:02.4259828+07:00 0HMT29GB16UN8:00000002 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:17:02.4330118+07:00 0HMT29GB16UN8:00000002 [INF] Executed DbCommand ("5"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:17:02.4610213+07:00 0HMT29GB16UNA:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:17:02.4622967+07:00 0HMT29GB16UNA:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:17:02.4647879+07:00 0HMT29GB16UNA:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:17:03.7033041+07:00 0HMT29GB16UN6:00000008 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:17:03.7045444+07:00 0HMT29GB16UN6:00000008 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:17:03.7087850+07:00 0HMT29GB16UN7:00000013 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:17:03.7093680+07:00 0HMT29GB16UN6:00000008 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:17:03.7191900+07:00 0HMT29GB16UN7:00000013 [INF] Executed DbCommand ("4"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:17:03.7227429+07:00 0HMT29GB16UN6:00000008 [INF] Executed DbCommand ("12"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:17:03.7250906+07:00 0HMT29GB16UN7:00000013 [INF] Executed DbCommand ("3"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:17:03.7313568+07:00 0HMT29GB16UN7:00000013 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T21:17:03.7456634+07:00 0HMT29GB16UN6:00000008 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T21:17:03.7512453+07:00 0HMT29GB16UN6:00000008 [INF] Executed DbCommand ("5"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T21:17:03.7545103+07:00 0HMT29GB16UN6:00000008 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:17:04.0165626+07:00 0HMT29GB16UND:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:17:04.0173077+07:00 0HMT29GB16UND:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:17:04.0190058+07:00 0HMT29GB16UND:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:17:04.0195126+07:00 0HMT29GB16UND:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:17:04.0198959+07:00 0HMT29GB16UND:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:17:04.0213409+07:00 0HMT29GB16UND:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:17:04.0249072+07:00 0HMT29GB16UND:00000002 [INF] Executed DbCommand ("3"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[ChatRoomId]
FROM [UserChatRooms] AS [u]
WHERE [u].[UserId] = @__userId_0" (0723d8ff)
2023-08-21T21:17:04.0469900+07:00 0HMT29GB16UN7:00000014 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:17:04.0469899+07:00 0HMT29GB16UN6:00000009 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:17:04.0474699+07:00 0HMT29GB16UN7:00000014 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:17:04.0474705+07:00 0HMT29GB16UN6:00000009 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:17:04.0490516+07:00 0HMT29GB16UN7:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:17:04.0490470+07:00 0HMT29GB16UN6:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:17:04.0508758+07:00 0HMT29GB16UN7:00000014 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[CreatedTime], [u].[InitiatorUserId], [u].[RelationshipType], [u].[Status], [u].[TargetUserId], [u].[UpdatedTime], [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl], [u1].[Id], [u1].[Bio], [u1].[DateOfBirth], [u1].[DisplayName], [u1].[Email], [u1].[Gender], [u1].[PhotoUrl]
FROM [UserRelationships] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[TargetUserId] = [u0].[Id]
INNER JOIN [Users] AS [u1] ON [u].[InitiatorUserId] = [u1].[Id]
WHERE ([u].[InitiatorUserId] = @__userId_0) OR ([u].[TargetUserId] = @__userId_0)" (0723d8ff)
2023-08-21T21:17:04.0508757+07:00 0HMT29GB16UN6:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u].[Id], [u].[ChatRoomId], [u].[CreatedTime], [u].[IsMuted], [u].[LastMessageReadId], [u].[MembershipStatus], [u].[UserId], [c].[Id], [c].[ChatRoomType], [c].[CreatedTime], [c].[CreatorId], [c].[IsDeleted], [c].[Name], [c].[PhotoUrl], [c].[UpdatedTime]
FROM [UserChatRooms] AS [u]
INNER JOIN [ChatRooms] AS [c] ON [u].[ChatRoomId] = [c].[Id]
WHERE ([u].[UserId] = @__userId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:17:04.0555227+07:00 0HMT29GB16UN6:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT [t0].[Id], [t0].[ChatRoomId], [t0].[CreatedTime], [t0].[FileName], [t0].[FileStatus], [t0].[FileUrls], [t0].[IsDeleted], [t0].[MessageText], [t0].[ReplyToMessageId], [t0].[SenderId], [t0].[Type]
FROM (
    SELECT [m].[ChatRoomId]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    GROUP BY [m].[ChatRoomId]
) AS [t]
LEFT JOIN (
    SELECT [t1].[Id], [t1].[ChatRoomId], [t1].[CreatedTime], [t1].[FileName], [t1].[FileStatus], [t1].[FileUrls], [t1].[IsDeleted], [t1].[MessageText], [t1].[ReplyToMessageId], [t1].[SenderId], [t1].[Type]
    FROM (
        SELECT [m0].[Id], [m0].[ChatRoomId], [m0].[CreatedTime], [m0].[FileName], [m0].[FileStatus], [m0].[FileUrls], [m0].[IsDeleted], [m0].[MessageText], [m0].[ReplyToMessageId], [m0].[SenderId], [m0].[Type], ROW_NUMBER() OVER(PARTITION BY [m0].[ChatRoomId] ORDER BY [m0].[CreatedTime] DESC) AS [row]
        FROM [Messages] AS [m0]
        WHERE [m0].[ChatRoomId] = N'a59fce07-a355-4018-8fb1-505e795057b7'
    ) AS [t1]
    WHERE [t1].[row] <= 1
) AS [t0] ON [t].[ChatRoomId] = [t0].[ChatRoomId]" (0723d8ff)
2023-08-21T21:17:04.0570578+07:00 0HMT29GB16UN6:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100), @__userChatRoom_CreatedTime_1='?' (DbType = DateTime2)"], CommandType='Text', CommandTimeout='30']"
""SELECT COUNT(*)
FROM [Messages] AS [m]
WHERE ([m].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([m].[CreatedTime] > @__userChatRoom_CreatedTime_1)" (0723d8ff)
2023-08-21T21:17:04.0584936+07:00 0HMT29GB16UN6:00000009 [INF] Executed DbCommand ("1"ms) [Parameters=["@__userChatRoom_ChatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [u0].[Id], [u0].[Bio], [u0].[DateOfBirth], [u0].[DisplayName], [u0].[Email], [u0].[Gender], [u0].[PhotoUrl]
FROM [UserChatRooms] AS [u]
INNER JOIN [Users] AS [u0] ON [u].[UserId] = [u0].[Id]
WHERE ([u].[ChatRoomId] = @__userChatRoom_ChatRoomId_0) AND ([u].[MembershipStatus] = N'Active')" (0723d8ff)
2023-08-21T21:17:04.7949377+07:00 0HMT29GB16UN6:0000000B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:17:04.7959273+07:00 0HMT29GB16UN6:0000000B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:17:04.7980680+07:00 0HMT29GB16UN6:0000000B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:17:04.8037393+07:00 0HMT29GB16UN6:0000000B [INF] Executed DbCommand ("4"ms) [Parameters=["@__p_1='?' (DbType = Int32), @__chatRoomId_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT [t].[Id], [t].[ChatRoomId], [t].[CreatedTime], [t].[FileName], [t].[FileStatus], [t].[FileUrls], [t].[IsDeleted], [t].[MessageText], [t].[ReplyToMessageId], [t].[SenderId], [t].[Type], [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM (
    SELECT TOP(@__p_1) [m].[Id], [m].[ChatRoomId], [m].[CreatedTime], [m].[FileName], [m].[FileStatus], [m].[FileUrls], [m].[IsDeleted], [m].[MessageText], [m].[ReplyToMessageId], [m].[SenderId], [m].[Type]
    FROM [Messages] AS [m]
    WHERE [m].[ChatRoomId] = @__chatRoomId_0
    ORDER BY [m].[CreatedTime] DESC
) AS [t]
INNER JOIN [Users] AS [u] ON [t].[SenderId] = [u].[Id]
ORDER BY [t].[CreatedTime] DESC" (0723d8ff)
2023-08-21T21:17:04.8825817+07:00 0HMT29GB16UN6:0000000D [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:17:04.8833925+07:00 0HMT29GB16UN6:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:17:04.8851752+07:00 0HMT29GB16UN6:0000000D [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:17:04.8872433+07:00 0HMT29GB16UN6:0000000D [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:17:04.9069287+07:00 0HMT29GB16UN6:0000000E [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:17:04.9085973+07:00 0HMT29GB16UN6:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:17:04.9109357+07:00 0HMT29GB16UN6:0000000E [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:17:04.9135538+07:00 0HMT29GB16UN6:0000000E [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:18:04.0154598+07:00 0HMT29GB16UN7:00000016 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:18:04.0159991+07:00 0HMT29GB16UN7:00000016 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:18:04.0249133+07:00 0HMT29GB16UN7:00000016 [INF] Executed DbCommand ("9"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:18:04.0283204+07:00 0HMT29GB16UN7:00000016 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:18:04.0300274+07:00 0HMT29GB16UN7:00000017 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:18:04.0305302+07:00 0HMT29GB16UN7:00000017 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:18:04.0322655+07:00 0HMT29GB16UN7:00000017 [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:18:04.0348206+07:00 0HMT29GB16UN7:00000017 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:19:14.0210825+07:00 0HMT29GB16UN7:00000019 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:19:14.0222252+07:00 0HMT29GB16UN7:00000019 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:19:14.0370499+07:00 0HMT29GB16UN7:00000019 [INF] Executed DbCommand ("15"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:19:14.0405981+07:00 0HMT29GB16UN7:00000019 [INF] Executed DbCommand ("2"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:19:18.3297590+07:00 0HMT29GB16UNF:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:19:18.3579639+07:00 0HMT29GB16UNF:00000002 [INF] Executed DbCommand ("0"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:19:18.3592764+07:00 0HMT29GB16UNF:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:19:18.3617154+07:00 0HMT29GB16UNF:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T21:19:18.3646896+07:00 0HMT29GB16UNF:00000002 [INF] Executed DbCommand ("2"ms) [Parameters=["@p1='?' (Size = 100), @p0='?' (Size = 4000)"], CommandType='Text', CommandTimeout='30']"
""SET NOCOUNT ON;
UPDATE [Users] SET [Gender] = @p0
WHERE [Id] = @p1;
SELECT @@ROWCOUNT;" (0723d8ff)
2023-08-21T21:19:20.1569574+07:00 0HMT29GB16UN7:0000001B [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T21:19:20.1580046+07:00 0HMT29GB16UN7:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T21:19:20.1607245+07:00 0HMT29GB16UN7:0000001B [INF] Executed DbCommand ("2"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
2023-08-21T21:19:20.1636605+07:00 0HMT29GB16UN7:0000001B [INF] Executed DbCommand ("1"ms) [Parameters=["@__p_0='?' (Size = 100)"], CommandType='Text', CommandTimeout='30']"
""SELECT TOP(1) [u].[Id], [u].[Bio], [u].[DateOfBirth], [u].[DisplayName], [u].[Email], [u].[Gender], [u].[PhotoUrl]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0" (0723d8ff)
2023-08-21T22:48:37.2150095+07:00 0HMT29GB16UND:00000002 [INF] Entity Framework Core "6.0.20" initialized '"DataContext"' using provider '"Microsoft.EntityFrameworkCore.SqlServer":"6.0.20"' with options: "None" (d2805559)
2023-08-21T22:48:37.2239753+07:00 0HMT29GB16UND:00000002 [INF] Executed DbCommand ("1"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""SELECT 1" (0723d8ff)
2023-08-21T22:48:37.2450924+07:00 0HMT29GB16UND:00000002 [INF] Executed DbCommand ("21"ms) [Parameters=[""], CommandType='Text', CommandTimeout='30']"
""
IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0" (0723d8ff)
